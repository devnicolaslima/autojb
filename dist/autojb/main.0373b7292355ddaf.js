(self.webpackChunkautojb=self.webpackChunkautojb||[]).push([[179],{936:(su,kl,sl)=>{"use strict";function Ln(e){return"function"==typeof e}function Xs(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const nd=Xs(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function p(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Xe{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const u of t)u.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ln(i))try{i()}catch(u){n=u instanceof nd?u.errors:[u]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const u of s)try{ln(u)}catch(m){n=n??[],m instanceof nd?n=[...n,...m.errors]:n.push(m)}}if(n)throw new nd(n)}}add(n){var t;if(n&&n!==this)if(this.closed)ln(n);else{if(n instanceof Xe){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&p(t,n)}remove(n){const{_finalizers:t}=this;t&&p(t,n),n instanceof Xe&&n._removeParent(this)}}Xe.EMPTY=(()=>{const e=new Xe;return e.closed=!0,e})();const xs=Xe.EMPTY;function Tr(e){return e instanceof Xe||e&&"closed"in e&&Ln(e.remove)&&Ln(e.add)&&Ln(e.unsubscribe)}function ln(e){Ln(e)?e():e.unsubscribe()}const nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ki={setTimeout(e,n,...t){const{delegate:i}=Ki;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Ki;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Io(e){Ki.setTimeout(()=>{const{onUnhandledError:n}=nn;if(!n)throw e;n(e)})}function Go(){}const bs=rr("C",void 0,void 0);function rr(e,n,t){return{kind:e,value:n,error:t}}let sr=null;function ko(e){if(nn.useDeprecatedSynchronousErrorHandling){const n=!sr;if(n&&(sr={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=sr;if(sr=null,t)throw i}}else e()}class ls extends Xe{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Tr(n)&&n.add(this)):this.destination=Fl}static create(n,t,i){return new Ca(n,t,i)}next(n){this.isStopped?Nl(function as(e){return rr("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Nl(function Rl(e){return rr("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Nl(bs,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Dr=Function.prototype.bind;function ft(e,n){return Dr.call(e,n)}class yc{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){cn(i)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){cn(i)}else cn(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){cn(t)}}}class Ca extends ls{constructor(n,t,i){let s;if(super(),Ln(n)||!n)s={next:n??void 0,error:t??void 0,complete:i??void 0};else{let u;this&&nn.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=()=>this.unsubscribe(),s={next:n.next&&ft(n.next,u),error:n.error&&ft(n.error,u),complete:n.complete&&ft(n.complete,u)}):s=n}this.destination=new yc(s)}}function cn(e){nn.useDeprecatedSynchronousErrorHandling?function Ks(e){nn.useDeprecatedSynchronousErrorHandling&&sr&&(sr.errorThrown=!0,sr.error=e)}(e):Io(e)}function Nl(e,n){const{onStoppedNotification:t}=nn;t&&Ki.setTimeout(()=>t(e,n))}const Fl={closed:!0,next:Go,error:function ao(e){throw e},complete:Go},Ma="function"==typeof Symbol&&Symbol.observable||"@@observable";function ar(e){return e}function Oa(e){return 0===e.length?ar:1===e.length?e[0]:function(t){return e.reduce((i,s)=>s(i),t)}}let dn=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,s){const u=function Bi(e){return e&&e instanceof ls||function ws(e){return e&&Ln(e.next)&&Ln(e.error)&&Ln(e.complete)}(e)&&Tr(e)}(t)?t:new Ca(t,i,s);return ko(()=>{const{operator:m,source:b}=this;u.add(m?m.call(u,b):b?this._subscribe(u):this._trySubscribe(u))}),u}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Yi(i))((s,u)=>{const m=new Ca({next:b=>{try{t(b)}catch(M){u(M),m.unsubscribe()}},error:u,complete:s});this.subscribe(m)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Ma](){return this}pipe(...t){return Oa(t)(this)}toPromise(t){return new(t=Yi(t))((i,s)=>{let u;this.subscribe(m=>u=m,m=>s(m),()=>i(u))})}}return e.create=n=>new e(n),e})();function Yi(e){var n;return null!==(n=e??nn.Promise)&&void 0!==n?n:Promise}const Cs=Xs(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Hn=(()=>{class e extends dn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Ys(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Cs}next(t){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:s,observers:u}=this;return i||s?xs:(this.currentObservers=null,u.push(t),new Xe(()=>{this.currentObservers=null,p(u,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:s,isStopped:u}=this;i?t.error(s):u&&t.complete()}asObservable(){const t=new dn;return t.source=this,t}}return e.create=(n,t)=>new Ys(n,t),e})();class Ys extends Hn{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:xs}}function cs(e){return Ln(e?.lift)}function xi(e){return n=>{if(cs(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Wn(e,n,t,i,s){return new Ta(e,n,t,i,s)}class Ta extends ls{constructor(n,t,i,s,u,m){super(n),this.onFinalize=u,this.shouldUnsubscribe=m,this._next=t?function(b){try{t(b)}catch(M){n.error(M)}}:super._next,this._error=s?function(b){try{s(b)}catch(M){n.error(M)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(b){n.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ct(e,n){return xi((t,i)=>{let s=0;t.subscribe(Wn(i,u=>{i.next(e.call(n,u,s++))}))})}function Wo(e){return this instanceof Wo?(this.v=e,this):new Wo(e)}function wi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function wn(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(u){t[u]=e[u]&&function(m){return new Promise(function(b,M){!function s(u,m,b,M){Promise.resolve(M).then(function(P){u({value:P,done:b})},m)}(b,M,(m=e[u](m)).done,m.value)})}}}const ve=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ee(e){return Ln(e?.then)}function De(e){return Ln(e[Ma])}function xe(e){return Symbol.asyncIterator&&Ln(e?.[Symbol.asyncIterator])}function Be(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gt=function pt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ct(e){return Ln(e?.[gt])}function on(e){return function lo(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=t.apply(e,n||[]),u=[];return s={},m("next"),m("throw"),m("return"),s[Symbol.asyncIterator]=function(){return this},s;function m(W){i[W]&&(s[W]=function(oe){return new Promise(function(be,Te){u.push([W,oe,be,Te])>1||b(W,oe)})})}function b(W,oe){try{!function M(W){W.value instanceof Wo?Promise.resolve(W.value.v).then(P,I):U(u[0][2],W)}(i[W](oe))}catch(be){U(u[0][3],be)}}function P(W){b("next",W)}function I(W){b("throw",W)}function U(W,oe){W(oe),u.shift(),u.length&&b(u[0][0],u[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:s}=yield Wo(t.read());if(s)return yield Wo(void 0);yield yield Wo(i)}}finally{t.releaseLock()}})}function hn(e){return Ln(e?.getReader)}function Ft(e){if(e instanceof dn)return e;if(null!=e){if(De(e))return function yn(e){return new dn(n=>{const t=e[Ma]();if(Ln(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(ve(e))return function Tn(e){return new dn(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Ee(e))return function Ei(e){return new dn(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Io)})}(e);if(xe(e))return Ro(e);if(ct(e))return function Qi(e){return new dn(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(hn(e))return function co(e){return Ro(on(e))}(e)}throw Be(e)}function Ro(e){return new dn(n=>{(function Qs(e,n){var t,i,s,u;return function Mt(e,n,t,i){return new(t||(t=Promise))(function(u,m){function b(I){try{P(i.next(I))}catch(U){m(U)}}function M(I){try{P(i.throw(I))}catch(U){m(U)}}function P(I){I.done?u(I.value):function s(u){return u instanceof t?u:new t(function(m){m(u)})}(I.value).then(b,M)}P((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=wi(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(m){s={error:m}}finally{try{i&&!i.done&&(u=t.return)&&(yield u.call(t))}finally{if(s)throw s.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Ti(e,n,t,i=0,s=!1){const u=n.schedule(function(){t(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(u),!s)return u}function ki(e,n,t=1/0){return Ln(n)?ki((i,s)=>Ct((u,m)=>n(i,u,s,m))(Ft(e(i,s))),t):("number"==typeof n&&(t=n),xi((i,s)=>function lr(e,n,t,i,s,u,m,b){const M=[];let P=0,I=0,U=!1;const W=()=>{U&&!M.length&&!P&&n.complete()},oe=Te=>P<i?be(Te):M.push(Te),be=Te=>{u&&n.next(Te),P++;let ze=!1;Ft(t(Te,I++)).subscribe(Wn(n,Ye=>{s?.(Ye),u?oe(Ye):n.next(Ye)},()=>{ze=!0},void 0,()=>{if(ze)try{for(P--;M.length&&P<i;){const Ye=M.shift();m?Ti(n,m,()=>be(Ye)):be(Ye)}W()}catch(Ye){n.error(Ye)}}))};return e.subscribe(Wn(n,oe,()=>{U=!0,W()})),()=>{b?.()}}(i,s,e,t)))}function bc(e=1/0){return ki(ar,e)}const Gr=new dn(e=>e.complete());function wc(e){return e&&Ln(e.schedule)}function au(e){return e[e.length-1]}function Ll(e){return Ln(au(e))?e.pop():void 0}function Er(e){return wc(au(e))?e.pop():void 0}function id(e,n=0){return xi((t,i)=>{t.subscribe(Wn(i,s=>Ti(i,e,()=>i.next(s),n),()=>Ti(i,e,()=>i.complete(),n),s=>Ti(i,e,()=>i.error(s),n)))})}function od(e,n=0){return xi((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function ea(e,n){if(!e)throw new Error("Iterable cannot be null");return new dn(t=>{Ti(t,n,()=>{const i=e[Symbol.asyncIterator]();Ti(t,n,()=>{i.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function to(e,n){return n?function xo(e,n){if(null!=e){if(De(e))return function Bl(e,n){return Ft(e).pipe(od(n),id(n))}(e,n);if(ve(e))return function lu(e,n){return new dn(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(Ee(e))return function Sa(e,n){return Ft(e).pipe(od(n),id(n))}(e,n);if(xe(e))return ea(e,n);if(ct(e))return function $e(e,n){return new dn(t=>{let i;return Ti(t,n,()=>{i=e[gt](),Ti(t,n,()=>{let s,u;try{({value:s,done:u}=i.next())}catch(m){return void t.error(m)}u?t.complete():t.next(s)},0,!0)}),()=>Ln(i?.return)&&i.return()})}(e,n);if(hn(e))return function eo(e,n){return ea(on(e),n)}(e,n)}throw Be(e)}(e,n):Ft(e)}function Ts(...e){const n=Er(e),t=function Ea(e,n){return"number"==typeof au(e)?e.pop():n}(e,1/0),i=e;return i.length?1===i.length?Ft(i[0]):bc(t)(to(i,n)):Gr}function rd(e,n,...t){if(!0===n)return void e();if(!1===n)return;const i=new Ca({next:()=>{i.unsubscribe(),e()}});return Ft(n(...t)).subscribe(i)}function Kn(e){for(let n in e)if(e[n]===Kn)return n;throw Error("Could not find renamed property on target object.")}function Lt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Lt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function pn(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Hr=Kn({__forward_ref__:Kn});function Ht(e){return e.__forward_ref__=Ht,e.toString=function(){return Lt(this())},e}function mt(e){return cr(e)?e():e}function cr(e){return"function"==typeof e&&e.hasOwnProperty(Hr)&&e.__forward_ref__===Ht}function zl(e){return e&&!!e.\u0275providers}const Wr="https://g.co/ng/security#xss";class tt extends Error{constructor(n,t){super(cu(n,t)),this.code=n}}function cu(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}function Jt(e){return"string"==typeof e?e:null==e?"":String(e)}function ll(e,n){throw new tt(-201,!1)}function Rn(e,n,t,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${t} ${i} ${n} <=Actual]`))}function yt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Qn(e){return{providers:e.providers||[],imports:e.imports||[]}}function ld(e){return Ul(e,na)||Ul(e,Oc)}function Ul(e,n){return e.hasOwnProperty(n)?e[n]:null}function cd(e){return e&&(e.hasOwnProperty(Ps)||e.hasOwnProperty(Aa))?e[Ps]:null}const na=Kn({\u0275prov:Kn}),Ps=Kn({\u0275inj:Kn}),Oc=Kn({ngInjectableDef:Kn}),Aa=Kn({ngInjectorDef:Kn});var Zt=(()=>((Zt=Zt||{})[Zt.Default=0]="Default",Zt[Zt.Host=1]="Host",Zt[Zt.Self=2]="Self",Zt[Zt.SkipSelf=4]="SkipSelf",Zt[Zt.Optional=8]="Optional",Zt))();let cl;function Jr(e){const n=cl;return cl=e,n}function hu(e,n,t){const i=ld(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Zt.Optional?null:void 0!==n?n:void ll(Lt(e))}const Ci=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jl={},ud="__NG_DI_FLAG__",Tc="ngTempTokenPath",cf="ngTokenPath",Ah=/\n/gm,Dc="\u0275",fu="__source";let ia;function Ar(e){const n=ia;return ia=e,n}function $l(e,n=Zt.Default){if(void 0===ia)throw new tt(-203,!1);return null===ia?hu(e,void 0,n):ia.get(e,n&Zt.Optional?null:void 0,n)}function Dt(e,n=Zt.Default){return(function du(){return cl}()||$l)(mt(e),n)}function fn(e,n=Zt.Default){return Dt(e,Pc(n))}function Pc(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function gu(e){const n=[];for(let t=0;t<e.length;t++){const i=mt(e[t]);if(Array.isArray(i)){if(0===i.length)throw new tt(900,!1);let s,u=Zt.Default;for(let m=0;m<i.length;m++){const b=i[m],M=dd(b);"number"==typeof M?-1===M?s=b.token:u|=M:s=b}n.push(Dt(s,u))}else n.push(Dt(i))}return n}function ul(e,n){return e[ud]=n,e.prototype[ud]=n,e}function dd(e){return e[ud]}function Xr(e){return{toString:e}.toString()}var Es=(()=>((Es=Es||{})[Es.OnPush=0]="OnPush",Es[Es.Default=1]="Default",Es))(),ds=(()=>{return(e=ds||(ds={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",ds;var e})();const oa={},An=[],Ec=Kn({\u0275cmp:Kn}),Rh=Kn({\u0275dir:Kn}),Nh=Kn({\u0275pipe:Kn}),uf=Kn({\u0275mod:Kn}),Ss=Kn({\u0275fac:Kn}),Gl=Kn({__NG_ELEMENT_ID__:Kn});let Fh=0;function zn(e){return Xr(()=>{const n=pd(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Es.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||ds.Emulated,id:"c"+Fh++,styles:e.styles||An,_:null,schemas:e.schemas||null,tView:null};pf(t);const i=e.dependencies;return t.directiveDefs=Ac(i,!1),t.pipeDefs=Ac(i,!0),t})}function hf(e){return Pn(e)||go(e)}function nm(e){return null!==e}function ei(e){return Xr(()=>({type:e.type,bootstrap:e.bootstrap||An,declarations:e.declarations||An,imports:e.imports||An,exports:e.exports||An,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function hd(e,n){if(null==e)return oa;const t={};for(const i in e)if(e.hasOwnProperty(i)){let s=e[i],u=s;Array.isArray(s)&&(u=s[1],s=s[0]),t[s]=i,n&&(n[s]=u)}return t}function vt(e){return Xr(()=>{const n=pd(e);return pf(n),n})}function Zo(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Pn(e){return e[Ec]||null}function go(e){return e[Rh]||null}function Jo(e){return e[Nh]||null}function Ir(e,n){const t=e[uf]||null;if(!t&&!0===n)throw new Error(`Type ${Lt(e)} does not have '\u0275mod' property.`);return t}function pd(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||An,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hd(e.inputs,n),outputs:hd(e.outputs)}}function pf(e){e.features?.forEach(n=>n(e))}function Ac(e,n){if(!e)return null;const t=n?Jo:hf;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(nm)}const hs=0,St=1,Cn=2,Ri=3,As=4,ka=5,Fo=6,ra=7,Wi=8,Hl=9,mu=10,gn=11,Lh=12,_u=13,ff=14,Ic=15,Xo=16,kc=17,Ra=18,ur=19,Rc=20,Bh=21,Jn=22,kr=1,Nc=2,yu=7,sa=8,Is=9,bo=10;function sn(e){return Array.isArray(e)&&"object"==typeof e[kr]}function dr(e){return Array.isArray(e)&&!0===e[kr]}function fd(e){return 0!=(4&e.flags)}function dl(e){return e.componentOffset>-1}function Na(e){return 1==(1&e.flags)}function ps(e){return!!e.template}function gd(e){return 0!=(256&e[Cn])}function pl(e,n){return e.hasOwnProperty(Ss)?e[Ss]:null}class bd{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function gi(){return wd}function wd(e){return e.type.prototype.ngOnChanges&&(e.setInput=yf),om}function om(){const e=Cd(this),n=e?.current;if(n){const t=e.previous;if(t===oa)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function yf(e,n,t,i){const s=this.declaredInputs[t],u=Cd(e)||function Hh(e,n){return e[Wl]=n}(e,{previous:oa,current:null}),m=u.current||(u.current={}),b=u.previous,M=b[s];m[s]=new bd(M&&M.currentValue,n,b===oa),e[i]=n}gi.ngInherit=!0;const Wl="__ngSimpleChanges__";function Cd(e){return e[Wl]||null}const Ko=function(e,n,t){};function wo(e){for(;Array.isArray(e);)e=e[hs];return e}function wu(e,n){return wo(n[e])}function uo(e,n){return wo(n[e.index])}function qh(e,n){return e.data[n]}function Bc(e,n){return e[n]}function hr(e,n){const t=n[e];return sn(t)?t:t[hs]}function Cu(e){return 64==(64&e[Cn])}function Vi(e,n){return null==n?null:e[n]}function bf(e){e[Ra]=0}function Td(e,n){e[ka]+=n;let t=e,i=e[Ri];for(;null!==i&&(1===n&&1===t[ka]||-1===n&&0===t[ka]);)i[ka]+=n,t=i,i=i[Ri]}const vn={lFrame:H(null),bindingsEnabled:!0};function Ns(){return vn.bindingsEnabled}function Oe(){return vn.lFrame.lView}function Nn(){return vn.lFrame.tView}function Wt(e){return vn.lFrame.contextLView=e,e[Wi]}function Gt(e){return vn.lFrame.contextLView=null,e}function Ui(){let e=wt();for(;null!==e&&64===e.type;)e=e.parent;return e}function wt(){return vn.lFrame.currentTNode}function Zl(){const e=vn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function la(e,n){const t=vn.lFrame;t.currentTNode=e,t.isParent=n}function Pd(){return vn.lFrame.isParent}function Mu(){vn.lFrame.isParent=!1}function pr(){const e=vn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Fs(){return vn.lFrame.bindingIndex}function fl(){return vn.lFrame.bindingIndex++}function Rr(e){const n=vn.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function l(e){vn.lFrame.inI18n=e}function d(e,n){const t=vn.lFrame;t.bindingIndex=t.bindingRootIndex=e,v(n)}function v(e){vn.lFrame.currentDirectiveIndex=e}function T(){return vn.lFrame.currentQueryIndex}function D(e){vn.lFrame.currentQueryIndex=e}function S(e){const n=e[St];return 2===n.type?n.declTNode:1===n.type?e[Fo]:null}function N(e,n,t){if(t&Zt.SkipSelf){let s=n,u=e;for(;!(s=s.parent,null!==s||t&Zt.Host||(s=S(u),null===s||(u=u[Ic],10&s.type))););if(null===s)return!1;n=s,e=u}const i=vn.lFrame=B();return i.currentTNode=n,i.lView=e,!0}function R(e){const n=B(),t=e[St];vn.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function B(){const e=vn.lFrame,n=null===e?null:e.child;return null===n?H(e):n}function H(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function X(){const e=vn.lFrame;return vn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Y=X;function K(){const e=X();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Z(){return vn.lFrame.selectedIndex}function ie(e){vn.lFrame.selectedIndex=e}function ne(){const e=vn.lFrame;return qh(e.tView,e.selectedIndex)}function ot(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const u=e.data[t].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:b,ngAfterViewInit:M,ngAfterViewChecked:P,ngOnDestroy:I}=u;m&&(e.contentHooks??(e.contentHooks=[])).push(-t,m),b&&((e.contentHooks??(e.contentHooks=[])).push(t,b),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(t,b)),M&&(e.viewHooks??(e.viewHooks=[])).push(-t,M),P&&((e.viewHooks??(e.viewHooks=[])).push(t,P),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(t,P)),null!=I&&(e.destroyHooks??(e.destroyHooks=[])).push(t,I)}}function Se(e,n,t){rt(e,n,3,t)}function He(e,n,t,i){(3&e[Cn])===t&&rt(e,n,t,i)}function Le(e,n){let t=e[Cn];(3&t)===n&&(t&=2047,t+=1,e[Cn]=t)}function rt(e,n,t,i){const u=i??-1,m=n.length-1;let b=0;for(let M=void 0!==i?65535&e[Ra]:0;M<m;M++)if("number"==typeof n[M+1]){if(b=n[M],null!=i&&b>=i)break}else n[M]<0&&(e[Ra]+=65536),(b<u||-1==u)&&(ke(e,t,n,M),e[Ra]=(4294901760&e[Ra])+M+2),M++}function ke(e,n,t,i){const s=t[i]<0,u=t[i+1],b=e[s?-t[i]:t[i]];if(s){if(e[Cn]>>11<e[Ra]>>16&&(3&e[Cn])===n){e[Cn]+=2048,Ko(4,b,u);try{u.call(b)}finally{Ko(5,b,u)}}}else{Ko(4,b,u);try{u.call(b)}finally{Ko(5,b,u)}}}const Ge=-1;class st{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function It(e,n,t){let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const u=t[i++],m=t[i++],b=t[i++];e.setAttribute(n,m,b,u)}else{const u=s,m=t[++i];ti(u)?e.setProperty(n,u,m):e.setAttribute(n,u,m),i++}}return i}function Vn(e){return 3===e||4===e||6===e}function ti(e){return 64===e.charCodeAt(0)}function Un(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?t=s:0===t||ni(e,t,s,null,-1===t||2===t?n[++i]:null)}}return e}function ni(e,n,t,i,s){let u=0,m=e.length;if(-1===n)m=-1;else for(;u<e.length;){const b=e[u++];if("number"==typeof b){if(b===n){m=-1;break}if(b>n){m=u-1;break}}}for(;u<e.length;){const b=e[u];if("number"==typeof b)break;if(b===t){if(null===i)return void(null!==s&&(e[u+1]=s));if(i===e[u+1])return void(e[u+2]=s)}u++,null!==i&&u++,null!==s&&u++}-1!==m&&(e.splice(m,0,n),u=m+1),e.splice(u++,0,t),null!==i&&e.splice(u++,0,i),null!==s&&e.splice(u++,0,s)}function Lo(e){return e!==Ge}function no(e){return 32767&e}function Kr(e,n){let t=function fs(e){return e>>16}(e),i=n;for(;t>0;)i=i[Ic],t--;return i}let mi=!0;function Xn(e){const n=mi;return mi=e,n}const qi=255,Yo=5;let Mi=0;const ji={};function ca(e,n){const t=ua(e,n);if(-1!==t)return t;const i=n[St];i.firstCreatePass&&(e.injectorIndex=n.length,Jl(i.data,e),Jl(n,null),Jl(i.blueprint,null));const s=da(e,n),u=e.injectorIndex;if(Lo(s)){const m=no(s),b=Kr(s,n),M=b[St].data;for(let P=0;P<8;P++)n[u+P]=b[m+P]|M[m+P]}return n[u+8]=s,u}function Jl(e,n){e.push(0,0,0,0,0,0,0,0,n)}function ua(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function da(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,s=n;for(;null!==s;){if(i=ey(s),null===i)return Ge;if(t++,s=s[Ic],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Ge}function Fa(e,n,t){!function Sd(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Gl)&&(i=t[Gl]),null==i&&(i=t[Gl]=Mi++);const s=i&qi;n.data[e+(s>>Yo)]|=1<<s}(e,n,t)}function zc(e,n,t){if(t&Zt.Optional||void 0!==e)return e;ll()}function Id(e,n,t,i){if(t&Zt.Optional&&void 0===i&&(i=null),!(t&(Zt.Self|Zt.Host))){const s=e[Hl],u=Jr(void 0);try{return s?s.get(n,i,t&Zt.Optional):hu(n,i,t&Zt.Optional)}finally{Jr(u)}}return zc(i,0,t)}function am(e,n,t,i=Zt.Default,s){if(null!==e){if(1024&n[Cn]){const m=function dx(e,n,t,i,s){let u=e,m=n;for(;null!==u&&null!==m&&1024&m[Cn]&&!(256&m[Cn]);){const b=lm(u,m,t,i|Zt.Self,ji);if(b!==ji)return b;let M=u.parent;if(!M){const P=m[Bh];if(P){const I=P.get(t,ji,i);if(I!==ji)return I}M=ey(m),m=m[Ic]}u=M}return s}(e,n,t,i,ji);if(m!==ji)return m}const u=lm(e,n,t,i,ji);if(u!==ji)return u}return Id(n,t,i,s)}function lm(e,n,t,i,s){const u=function Q0(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Gl)?e[Gl]:void 0;return"number"==typeof n?n>=0?n&qi:Df:n}(t);if("function"==typeof u){if(!N(n,e,i))return i&Zt.Host?zc(s,0,i):Id(n,t,i,s);try{const m=u(i);if(null!=m||i&Zt.Optional)return m;ll()}finally{Y()}}else if("number"==typeof u){let m=null,b=ua(e,n),M=Ge,P=i&Zt.Host?n[Xo][Fo]:null;for((-1===b||i&Zt.SkipSelf)&&(M=-1===b?da(e,n):n[b+8],M!==Ge&&Jh(i,!1)?(m=n[St],b=no(M),n=Kr(M,n)):b=-1);-1!==b;){const I=n[St];if(Tf(u,b,I.data)){const U=ux(b,n,t,m,i,P);if(U!==ji)return U}M=n[b+8],M!==Ge&&Jh(i,n[St].data[b+8]===P)&&Tf(u,b,n)?(m=I,b=no(M),n=Kr(M,n)):b=-1}}return s}function ux(e,n,t,i,s,u){const m=n[St],b=m.data[e+8],I=kd(b,m,t,null==i?dl(b)&&mi:i!=m&&0!=(3&b.type),s&Zt.Host&&u===b);return null!==I?gl(n,m,I,b):ji}function kd(e,n,t,i,s){const u=e.providerIndexes,m=n.data,b=1048575&u,M=e.directiveStart,I=u>>20,W=s?b+I:e.directiveEnd;for(let oe=i?b:b+I;oe<W;oe++){const be=m[oe];if(oe<M&&t===be||oe>=M&&be.type===t)return oe}if(s){const oe=m[M];if(oe&&ps(oe)&&oe.type===t)return M}return null}function gl(e,n,t,i){let s=e[t];const u=n.data;if(function Qe(e){return e instanceof st}(s)){const m=s;m.resolving&&function uu(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new tt(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Bn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Jt(e)}(u[t]));const b=Xn(m.canSeeViewProviders);m.resolving=!0;const M=m.injectImpl?Jr(m.injectImpl):null;N(e,i,Zt.Default);try{s=e[t]=m.factory(void 0,u,e,i),n.firstCreatePass&&t>=i.directiveStart&&function Re(e,n,t){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:u}=n.type.prototype;if(i){const m=wd(n);(t.preOrderHooks??(t.preOrderHooks=[])).push(e,m),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e,m)}s&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-e,s),u&&((t.preOrderHooks??(t.preOrderHooks=[])).push(e,u),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(e,u))}(t,u[t],n)}finally{null!==M&&Jr(M),Xn(b),m.resolving=!1,Y()}}return s}function Tf(e,n,t){return!!(t[n+(e>>Yo)]&1<<e)}function Jh(e,n){return!(e&Zt.Self||e&Zt.Host&&n)}class gs{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return am(this._tNode,this._lView,n,Pc(i),t)}}function Df(){return new gs(Ui(),Oe())}function io(e){return Xr(()=>{const n=e.prototype.constructor,t=n[Ss]||Pf(n),i=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==i;){const u=s[Ss]||Pf(s);if(u&&u!==t)return u;s=Object.getPrototypeOf(s)}return u=>new u})}function Pf(e){return cr(e)?()=>{const n=Pf(mt(e));return n&&n()}:pl(e)}function ey(e){const n=e[St],t=n.type;return 2===t?n.declTNode:1===t?e[Fo]:null}function Vc(e){return function Ad(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const i=t.length;let s=0;for(;s<i;){const u=t[s];if(Vn(u))break;if(0===u)s+=2;else if("number"==typeof u)for(s++;s<i&&"string"==typeof t[s];)s++;else{if(u===n)return t[s+1];s+=2}}}return null}(Ui(),e)}const ml="__parameters__";function Bs(e,n,t){return Xr(()=>{const i=function Ls(e){return function(...t){if(e){const i=e(...t);for(const s in i)this[s]=i[s]}}}(n);function s(...u){if(this instanceof s)return i.apply(this,u),this;const m=new s(...u);return b.annotation=m,b;function b(M,P,I){const U=M.hasOwnProperty(ml)?M[ml]:Object.defineProperty(M,ml,{value:[]})[ml];for(;U.length<=I;)U.push(null);return(U[I]=U[I]||[]).push(m),M}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}class qt{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=yt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fr(e,n){e.forEach(t=>Array.isArray(t)?fr(t,n):n(t))}function Ef(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function vl(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Xl(e,n){const t=[];for(let i=0;i<e;i++)t.push(n);return t}function ms(e,n,t){let i=jc(e,n);return i>=0?e[1|i]=t:(i=~i,function Sf(e,n,t,i){let s=e.length;if(s==n)e.push(t,i);else if(1===s)e.push(i,e[0]),e[0]=t;else{for(s--,e.push(e[s-1],e[s]);s>n;)e[s]=e[s-2],s--;e[n]=t,e[n+1]=i}}(e,i,n,t)),i}function cm(e,n){const t=jc(e,n);if(t>=0)return e[1|t]}function jc(e,n){return function Nd(e,n,t){let i=0,s=e.length>>t;for(;s!==i;){const u=i+(s-i>>1),m=e[u<<t];if(n===m)return u<<t;m>n?s=u:i=u+1}return~(s<<t)}(e,n,1)}const Nr=ul(Bs("Optional"),8),Di=ul(Bs("SkipSelf"),4);var Bo=(()=>((Bo=Bo||{})[Bo.Important=1]="Important",Bo[Bo.DashCase=2]="DashCase",Bo))();const Vd=/^>|^->|<!--|-->|--!>|<!-$/g,tp=/(<|>)/,Ff="\u200b$1\u200b";const Au=new Map;let ym=0;const Lf="__ngContext__";function oo(e,n){sn(n)?(e[Lf]=n[Rc],function Ud(e){Au.set(e[Rc],e)}(n)):e[Lf]=n}let np;function zf(e,n){return np(e,n)}function ip(e){const n=e[Ri];return dr(n)?n[Ri]:n}function Mm(e){return Gc(e[_u])}function Ua(e){return Gc(e[As])}function Gc(e){for(;null!==e&&!dr(e);)e=e[As];return e}function ec(e,n,t,i,s){if(null!=i){let u,m=!1;dr(i)?u=i:sn(i)&&(m=!0,i=i[hs]);const b=wo(i);0===e&&null!==t?null==s?wy(n,t,b):Iu(n,t,b,s||null,!0):1===e&&null!==t?Iu(n,t,b,s||null,!0):2===e?Bm(n,b,m):3===e&&n.destroyNode(b),null!=u&&function Ru(e,n,t,i,s){const u=t[yu];u!==wo(t)&&ec(n,e,i,u,s);for(let b=bo;b<t.length;b++){const M=t[b];ku(M[St],M,e,n,i,u)}}(n,e,u,t,s)}}function Gd(e,n){return e.createText(n)}function Vf(e,n,t){e.setValue(n,t)}function vy(e,n){return e.createComment(function _m(e){return e.replace(Vd,n=>n.replace(tp,Ff))}(n))}function Om(e,n,t){return e.createElement(n,t)}function Pm(e,n){const t=e[Is],i=t.indexOf(n),s=n[Ri];512&n[Cn]&&(n[Cn]&=-513,Td(s,-1)),t.splice(i,1)}function tc(e,n){if(e.length<=bo)return;const t=bo+n,i=e[t];if(i){const s=i[kc];null!==s&&s!==e&&Pm(s,i),n>0&&(e[t-1][As]=i[As]);const u=vl(e,bo+n);!function xy(e,n){ku(e,n,n[gn],2,null,null),n[hs]=null,n[Fo]=null}(i[St],i);const m=u[ur];null!==m&&m.detachView(u[St]),i[Ri]=null,i[As]=null,i[Cn]&=-65}return i}function Em(e,n){if(!(128&n[Cn])){const t=n[gn];t.destroyNode&&ku(e,n,t,3,null,null),function bx(e){let n=e[_u];if(!n)return Sm(e[St],e);for(;n;){let t=null;if(sn(n))t=n[_u];else{const i=n[bo];i&&(t=i)}if(!t){for(;n&&!n[As]&&n!==e;)sn(n)&&Sm(n[St],n),n=n[Ri];null===n&&(n=e),sn(n)&&Sm(n[St],n),t=n&&n[As]}n=t}}(n)}}function Sm(e,n){if(!(128&n[Cn])){n[Cn]&=-65,n[Cn]|=128,function Uf(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const s=n[t[i]];if(!(s instanceof st)){const u=t[i+1];if(Array.isArray(u))for(let m=0;m<u.length;m+=2){const b=s[u[m]],M=u[m+1];Ko(4,b,M);try{M.call(b)}finally{Ko(5,b,M)}}else{Ko(4,s,u);try{u.call(s)}finally{Ko(5,s,u)}}}}}(e,n),function Hd(e,n){const t=e.cleanup,i=n[ra];let s=-1;if(null!==t)for(let u=0;u<t.length-1;u+=2)if("string"==typeof t[u]){const m=t[u+3];m>=0?i[s=m]():i[s=-m].unsubscribe(),u+=2}else{const m=i[s=t[u+1]];t[u].call(m)}if(null!==i){for(let u=s+1;u<i.length;u++)(0,i[u])();n[ra]=null}}(e,n),1===n[St].type&&n[gn].destroy();const t=n[kc];if(null!==t&&dr(n[Ri])){t!==n[Ri]&&Pm(t,n);const i=n[ur];null!==i&&i.detachView(e)}!function xm(e){Au.delete(e[Rc])}(n)}}function Am(e,n,t){return Im(e,n.parent,t)}function Im(e,n,t){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return t[hs];{const{componentOffset:s}=i;if(s>-1){const{encapsulation:u}=e.data[i.directiveStart+s];if(u===ds.None||u===ds.Emulated)return null}return uo(i,t)}}function Iu(e,n,t,i,s){e.insertBefore(n,t,i,s)}function wy(e,n,t){e.appendChild(n,t)}function km(e,n,t,i,s){null!==i?Iu(e,n,t,i,s):wy(e,n,t)}function jf(e,n){return e.parentNode(n)}function Rm(e,n,t){return Fm(e,n,t)}function Nm(e,n,t){return 40&e.type?uo(e,t):null}let op,Wf,$m,ap,Fm=Nm;function bl(e,n){Fm=e,op=n}function mr(e,n,t,i){const s=Am(e,i,n),u=n[gn],b=Rm(i.parent||n[Fo],i,n);if(null!=s)if(Array.isArray(t))for(let M=0;M<t.length;M++)km(u,s,t[M],b,!1);else km(u,s,t,b,!1);void 0!==op&&op(u,i,n,t,s)}function $f(e,n){if(null!==n){const t=n.type;if(3&t)return uo(n,e);if(4&t)return Lm(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return $f(e,i);{const s=e[n.index];return dr(s)?Lm(-1,s):wo(s)}}if(32&t)return zf(n,e)()||wo(e[n.index]);{const i=Gf(e,n);return null!==i?Array.isArray(i)?i[0]:$f(ip(e[Xo]),i):$f(e,n.next)}}return null}function Gf(e,n){return null!==n?e[Xo][Fo].projection[n.projection]:null}function Lm(e,n){const t=bo+e+1;if(t<n.length){const i=n[t],s=i[St].firstChild;if(null!==s)return $f(i,s)}return n[yu]}function Bm(e,n,t){const i=jf(e,n);i&&function wx(e,n,t,i){e.removeChild(n,t,i)}(e,i,n,t)}function zm(e,n,t,i,s,u,m){for(;null!=t;){const b=i[t.index],M=t.type;if(m&&0===n&&(b&&oo(wo(b),i),t.flags|=2),32!=(32&t.flags))if(8&M)zm(e,n,t.child,i,s,u,!1),ec(n,e,s,b,u);else if(32&M){const P=zf(t,i);let I;for(;I=P();)ec(n,e,s,I,u);ec(n,e,s,b,u)}else 16&M?Vm(e,n,i,t,s,u):ec(n,e,s,b,u);t=m?t.projectionNext:t.next}}function ku(e,n,t,i,s,u){zm(t,i,e.firstChild,n,s,u,!1)}function Vm(e,n,t,i,s,u){const m=t[Xo],M=m[Fo].projection[i.projection];if(Array.isArray(M))for(let P=0;P<M.length;P++)ec(n,e,s,M[P],u);else zm(e,n,M,m[Ri],s,u,!0)}function Cy(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function My(e,n,t){const{mergedAttrs:i,classes:s,styles:u}=t;null!==i&&It(e,n,i),null!==s&&Cy(e,n,s),null!==u&&function Ox(e,n,t){e.setAttribute(n,"style",t)}(e,n,u)}function Wd(e){return function Um(){if(void 0===Wf&&(Wf=null,Ci.trustedTypes))try{Wf=Ci.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Wf}()?.createHTML(e)||e}function Gm(e){return function Zd(){if(void 0===ap&&(ap=null,Ci.trustedTypes))try{ap=Ci.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ap}()?.createScriptURL(e)||e}class Hm{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wr})`}}function nc(e){return e instanceof Hm?e.changingThisBreaksApplicationSecurity:e}function ic(e,n){const t=function Px(e){return e instanceof Hm&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Wr})`)}return t===n}class Ex{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Wd(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class Sx{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const t=this.inertDocument.createElement("template");return t.innerHTML=Wd(n),t}}const Ix=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Xm(e){return(e=String(e)).match(Ix)?e:"unsafe:"+e}function fa(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function up(...e){const n={};for(const t of e)for(const i in t)t.hasOwnProperty(i)&&(n[i]=!0);return n}const Km=fa("area,br,col,hr,img,wbr"),Nu=fa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ey=fa("rp,rt"),qf=up(Km,up(Nu,fa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),up(Ey,fa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),up(Ey,Nu)),Ym=fa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zf=up(Ym,fa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Co=(()=>((Co=Co||{})[Co.NONE=0]="NONE",Co[Co.HTML=1]="HTML",Co[Co.STYLE=2]="STYLE",Co[Co.SCRIPT=3]="SCRIPT",Co[Co.URL=4]="URL",Co[Co.RESOURCE_URL=5]="RESOURCE_URL",Co))();function hi(e){const n=Mo();return n?n.sanitize(Co.URL,e)||"":ic(e,"URL")?nc(e):Xm(Jt(e))}function Qm(e){const n=Mo();if(n)return Gm(n.sanitize(Co.RESOURCE_URL,e)||"");if(ic(e,"ResourceURL"))return Gm(nc(e));throw new tt(904,!1)}function Mo(){const e=Oe();return e&&e[Lh]}const Wc=new qt("ENVIRONMENT_INITIALIZER"),Lu=new qt("INJECTOR",-1),Kd=new qt("INJECTOR_DEF_TYPES");class n_{get(n,t=jl){if(t===jl){const i=new Error(`NullInjectorError: No provider for ${Lt(n)}!`);throw i.name="NullInjectorError",i}return t}}function Vx(...e){return{\u0275providers:Fy(0,e),\u0275fromNgModule:!0}}function Fy(e,...n){const t=[],i=new Set;let s;return fr(n,u=>{const m=u;i_(m,t,[],i)&&(s||(s=[]),s.push(m))}),void 0!==s&&Ly(s,t),t}function Ly(e,n){for(let t=0;t<e.length;t++){const{providers:s}=e[t];o_(s,u=>{n.push(u)})}}function i_(e,n,t,i){if(!(e=mt(e)))return!1;let s=null,u=cd(e);const m=!u&&Pn(e);if(u||m){if(m&&!m.standalone)return!1;s=e}else{const M=e.ngModule;if(u=cd(M),!u)return!1;s=M}const b=i.has(s);if(m){if(b)return!1;if(i.add(s),m.dependencies){const M="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const P of M)i_(P,n,t,i)}}else{if(!u)return!1;{if(null!=u.imports&&!b){let P;i.add(s);try{fr(u.imports,I=>{i_(I,n,t,i)&&(P||(P=[]),P.push(I))})}finally{}void 0!==P&&Ly(P,n)}if(!b){const P=pl(s)||(()=>new s);n.push({provide:s,useFactory:P,deps:An},{provide:Kd,useValue:s,multi:!0},{provide:Wc,useValue:()=>Dt(s),multi:!0})}const M=u.providers;null==M||b||o_(M,I=>{n.push(I)})}}return s!==e&&void 0!==e.providers}function o_(e,n){for(let t of e)zl(t)&&(t=t.\u0275providers),Array.isArray(t)?o_(t,n):n(t)}const Kf=Kn({provide:String,useValue:Kn});function r_(e){return null!==e&&"object"==typeof e&&Kf in e}function qc(e){return"function"==typeof e}const l_=new qt("Set Injector scope."),Yf={},jx={};let c_;function dp(){return void 0===c_&&(c_=new n_),c_}class ja{}class Oo extends ja{get destroyed(){return this._destroyed}constructor(n,t,i,s){super(),this.parent=t,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,d_(n,m=>this.processProvider(m)),this.records.set(Lu,Yd(void 0,this)),s.has("environment")&&this.records.set(ja,Yd(void 0,this));const u=this.records.get(l_);null!=u&&"string"==typeof u.value&&this.scopes.add(u.value),this.injectorDefTypes=new Set(this.get(Kd.multi,An,Zt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Ar(this),i=Jr(void 0);try{return n()}finally{Ar(t),Jr(i)}}get(n,t=jl,i=Zt.Default){this.assertNotDestroyed(),i=Pc(i);const s=Ar(this),u=Jr(void 0);try{if(!(i&Zt.SkipSelf)){let b=this.records.get(n);if(void 0===b){const M=function Gx(e){return"function"==typeof e||"object"==typeof e&&e instanceof qt}(n)&&ld(n);b=M&&this.injectableDefInScope(M)?Yd(Us(n),Yf):null,this.records.set(n,b)}if(null!=b)return this.hydrate(n,b)}return(i&Zt.Self?dp():this.parent).get(n,t=i&Zt.Optional&&t===jl?null:t)}catch(m){if("NullInjectorError"===m.name){if((m[Tc]=m[Tc]||[]).unshift(Lt(n)),s)throw m;return function kh(e,n,t,i){const s=e[Tc];throw n[fu]&&s.unshift(n[fu]),e.message=function Sn(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Dc?e.slice(2):e;let s=Lt(n);if(Array.isArray(n))s=n.map(Lt).join(" -> ");else if("object"==typeof n){let u=[];for(let m in n)if(n.hasOwnProperty(m)){let b=n[m];u.push(m+":"+("string"==typeof b?JSON.stringify(b):Lt(b)))}s=`{${u.join(", ")}}`}return`${t}${i?"("+i+")":""}[${s}]: ${e.replace(Ah,"\n  ")}`}("\n"+e.message,s,t,i),e[cf]=s,e[Tc]=null,e}(m,n,"R3InjectorError",this.source)}throw m}finally{Jr(u),Ar(s)}}resolveInjectorInitializers(){const n=Ar(this),t=Jr(void 0);try{const i=this.get(Wc.multi,An,Zt.Self);for(const s of i)s()}finally{Ar(n),Jr(t)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(Lt(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tt(205,!1)}processProvider(n){let t=qc(n=mt(n))?n:mt(n&&n.provide);const i=function Qf(e){return r_(e)?Yd(void 0,e.useValue):Yd(Bu(e),Yf)}(n);if(qc(n)||!0!==n.multi)this.records.get(t);else{let s=this.records.get(t);s||(s=Yd(void 0,Yf,!0),s.factory=()=>gu(s.multi),this.records.set(t,s)),t=n,s.multi.push(n)}this.records.set(t,i)}hydrate(n,t){return t.value===Yf&&(t.value=jx,t.value=t.factory()),"object"==typeof t.value&&t.value&&function hp(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=mt(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Us(e){const n=ld(e),t=null!==n?n.factory:pl(e);if(null!==t)return t;if(e instanceof qt)throw new tt(204,!1);if(e instanceof Function)return function u_(e){const n=e.length;if(n>0)throw Xl(n,"?"),new tt(204,!1);const t=function ta(e){return e&&(e[na]||e[Oc])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new tt(204,!1)}function Bu(e,n,t){let i;if(qc(e)){const s=mt(e);return pl(s)||Us(s)}if(r_(e))i=()=>mt(e.useValue);else if(function a_(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...gu(e.deps||[]));else if(function s_(e){return!(!e||!e.useExisting)}(e))i=()=>Dt(mt(e.useExisting));else{const s=mt(e&&(e.useClass||e.provide));if(!function $x(e){return!!e.deps}(e))return pl(s)||Us(s);i=()=>new s(...gu(e.deps))}return i}function Yd(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function d_(e,n){for(const t of e)Array.isArray(t)?d_(t,n):t&&zl(t)?d_(t.\u0275providers,n):n(t)}class By{}class h_{}class Uy{resolveComponentFactory(n){throw function zy(e){const n=Error(`No component factory found for ${Lt(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Qd=(()=>{class e{}return e.NULL=new Uy,e})();function oc(){return $a(Ui(),Oe())}function $a(e,n){return new Gn(uo(e,n))}let Gn=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=oc,e})();function Hx(e){return e instanceof Gn?e.nativeElement:e}class p_{}let es=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function Wx(){const e=Oe(),t=hr(Ui().index,e);return(sn(t)?t:e)[gn]}(),e})(),qx=(()=>{class e{}return e.\u0275prov=yt({token:e,providedIn:"root",factory:()=>null}),e})();class pp{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Zx=new pp("15.2.9"),f_={},g_="ngOriginalError";function Zc(e){return e[g_]}class zu{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Zc(n);for(;t&&Zc(t);)t=Zc(t);return t||null}}function eh(e){return e.ownerDocument.defaultView}function Ga(e){return e instanceof Function?e():e}function fp(e,n,t){let i=e.length;for(;;){const s=e.indexOf(n,t);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const u=n.length;if(s+u===i||e.charCodeAt(s+u)<=32)return s}t=s+1}}const Hy="ng-template";function Wy(e,n,t){let i=0,s=!0;for(;i<e.length;){let u=e[i++];if("string"==typeof u&&s){const m=e[i++];if(t&&"class"===u&&-1!==fp(m.toLowerCase(),n,0))return!0}else{if(1===u){for(;i<e.length&&"string"==typeof(u=e[i++]);)if(u.toLowerCase()===n)return!0;return!1}"number"==typeof u&&(s=!1)}}return!1}function y_(e){return 4===e.type&&e.value!==Hy}function Yx(e,n,t){return n===(4!==e.type||t?e.value:Hy)}function qy(e,n,t){let i=4;const s=e.attrs||[],u=function Zy(e){for(let n=0;n<e.length;n++)if(Vn(e[n]))return n;return e.length}(s);let m=!1;for(let b=0;b<n.length;b++){const M=n[b];if("number"!=typeof M){if(!m)if(4&i){if(i=2|1&i,""!==M&&!Yx(e,M,t)||""===M&&1===n.length){if(ga(i))return!1;m=!0}}else{const P=8&i?M:n[++b];if(8&i&&null!==e.attrs){if(!Wy(e.attrs,P,t)){if(ga(i))return!1;m=!0}continue}const U=v_(8&i?"class":M,s,y_(e),t);if(-1===U){if(ga(i))return!1;m=!0;continue}if(""!==P){let W;W=U>u?"":s[U+1].toLowerCase();const oe=8&i?W:null;if(oe&&-1!==fp(oe,P,0)||2&i&&P!==W){if(ga(i))return!1;m=!0}}}}else{if(!m&&!ga(i)&&!ga(M))return!1;if(m&&ga(M))continue;m=!1,i=M|1&i}}return ga(i)||m}function ga(e){return 0==(1&e)}function v_(e,n,t,i){if(null===n)return-1;let s=0;if(i||!t){let u=!1;for(;s<n.length;){const m=n[s];if(m===e)return s;if(3===m||6===m)u=!0;else{if(1===m||2===m){let b=n[++s];for(;"string"==typeof b;)b=n[++s];continue}if(4===m)break;if(0===m){s+=4;continue}}s+=u?1:2}return-1}return function rc(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function x_(e,n,t=!1){for(let i=0;i<n.length;i++)if(qy(e,n[i],t))return!0;return!1}function Jy(e,n){e:for(let t=0;t<n.length;t++){const i=n[t];if(e.length===i.length){for(let s=0;s<e.length;s++)if(e[s]!==i[s])continue e;return!0}}return!1}function b_(e,n){return e?":not("+n.trim()+")":n}function Xy(e){let n=e[0],t=1,i=2,s="",u=!1;for(;t<e.length;){let m=e[t];if("string"==typeof m)if(2&i){const b=e[++t];s+="["+m+(b.length>0?'="'+b+'"':"")+"]"}else 8&i?s+="."+m:4&i&&(s+=" "+m);else""!==s&&!ga(m)&&(n+=b_(u,s),s=""),i=m,u=u||!ga(i);t++}return""!==s&&(n+=b_(u,s)),n}const On={};function re(e){w_(Nn(),Oe(),Z()+e,!1)}function w_(e,n,t,i){if(!i)if(3==(3&n[Cn])){const u=e.preOrderCheckHooks;null!==u&&Se(n,u,t)}else{const u=e.preOrderHooks;null!==u&&He(n,u,0,t)}ie(t)}function O_(e,n=null,t=null,i){const s=gp(e,n,t,i);return s.resolveInjectorInitializers(),s}function gp(e,n=null,t=null,i,s=new Set){const u=[t||An,Vx(e)];return i=i||("object"==typeof e?void 0:Lt(e)),new Oo(u,n||dp(),i||null,s)}let _r=(()=>{class e{static create(t,i){if(Array.isArray(t))return O_({name:""},i,t,"");{const s=t.name??"";return O_({name:s},t.parent,t.providers,s)}}}return e.THROW_IF_NOT_FOUND=jl,e.NULL=new n_,e.\u0275prov=yt({token:e,providedIn:"any",factory:()=>Dt(Lu)}),e.__NG_ELEMENT_ID__=-1,e})();function ye(e,n=Zt.Default){const t=Oe();return null===t?Dt(e,n):am(Ui(),t,mt(e),n)}function sv(e,n){const t=e.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const u=t[i+1];if(-1!==u){const m=e.data[u];D(t[i]),m.contentQueries(2,n[u],u)}}}function ag(e,n,t,i,s,u,m,b,M,P,I){const U=n.blueprint.slice();return U[hs]=s,U[Cn]=76|i,(null!==I||e&&1024&e[Cn])&&(U[Cn]|=1024),bf(U),U[Ri]=U[Ic]=e,U[Wi]=t,U[mu]=m||e&&e[mu],U[gn]=b||e&&e[gn],U[Lh]=M||e&&e[Lh]||null,U[Hl]=P||e&&e[Hl]||null,U[Fo]=u,U[Rc]=function fy(){return ym++}(),U[Bh]=I,U[Xo]=2==n.type?e[Xo]:U,U}function Wu(e,n,t,i,s){let u=e.data[n];if(null===u)u=A_(e,n,t,i,s),function f(){return vn.lFrame.inI18n}()&&(u.flags|=32);else if(64&u.type){u.type=t,u.value=i,u.attrs=s;const m=Zl();u.injectorIndex=null===m?-1:m.injectorIndex}return la(u,!0),u}function A_(e,n,t,i,s){const u=wt(),m=Pd(),M=e.data[n]=function ab(e,n,t,i,s,u){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?u:u&&u.parent,t,n,i,s);return null===e.firstChild&&(e.firstChild=M),null!==u&&(m?null==u.child&&null!==M.parent&&(u.child=M):null===u.next&&(u.next=M,M.prev=u)),M}function rh(e,n,t,i){if(0===t)return-1;const s=n.length;for(let u=0;u<t;u++)n.push(i),e.blueprint.push(i),e.data.push(null);return s}function I_(e,n,t){R(n);try{const i=e.viewQuery;null!==i&&ch(1,i,t);const s=e.template;null!==s&&cv(e,n,s,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&sv(e,n),e.staticViewQueries&&ch(2,e.viewQuery,t);const u=e.components;null!==u&&function lv(e,n){for(let t=0;t<n.length;t++)yv(e,n[t])}(n,u)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[Cn]&=-5,K()}}function yp(e,n,t,i){const s=n[Cn];if(128!=(128&s)){R(n);try{bf(n),function Ed(e){return vn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&cv(e,n,t,2,i);const m=3==(3&s);if(m){const P=e.preOrderCheckHooks;null!==P&&Se(n,P,null)}else{const P=e.preOrderHooks;null!==P&&He(n,P,0,null),Le(n,0)}if(function mv(e){for(let n=Mm(e);null!==n;n=Ua(n)){if(!n[Nc])continue;const t=n[Is];for(let i=0;i<t.length;i++){const s=t[i];512&s[Cn]||Td(s[Ri],1),s[Cn]|=512}}}(n),function gv(e){for(let n=Mm(e);null!==n;n=Ua(n))for(let t=bo;t<n.length;t++){const i=n[t],s=i[St];Cu(i)&&yp(s,i,s.template,i[Wi])}}(n),null!==e.contentQueries&&sv(e,n),m){const P=e.contentCheckHooks;null!==P&&Se(n,P)}else{const P=e.contentHooks;null!==P&&He(n,P,1),Le(n,1)}!function sg(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)ie(~s);else{const u=s,m=t[++i],b=t[++i];d(m,u),b(2,n[u])}}}finally{ie(-1)}}(e,n);const b=e.components;null!==b&&function av(e,n){for(let t=0;t<n.length;t++)_v(e,n[t])}(n,b);const M=e.viewQuery;if(null!==M&&ch(2,M,i),m){const P=e.viewCheckHooks;null!==P&&Se(n,P)}else{const P=e.viewHooks;null!==P&&He(n,P,2),Le(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[Cn]&=-41,512&n[Cn]&&(n[Cn]&=-513,Td(n[Ri],-1))}finally{K()}}}function cv(e,n,t,i,s){const u=Z(),m=2&i;try{ie(-1),m&&n.length>Jn&&w_(e,n,Jn,!1),Ko(m?2:0,s),t(i,s)}finally{ie(u),Ko(m?3:1,s)}}function k_(e,n,t){if(fd(n)){const s=n.directiveEnd;for(let u=n.directiveStart;u<s;u++){const m=e.data[u];m.contentQueries&&m.contentQueries(1,t[u],u)}}}function sh(e,n,t){Ns()&&(function dv(e,n,t,i){const s=t.directiveStart,u=t.directiveEnd;dl(t)&&function fv(e,n,t){const i=uo(n,e),s=vp(t),u=e[mu],m=qa(e,ag(e,s,null,t.onPush?32:16,i,n,u,u.createRenderer(i,t),null,null,null));e[n.index]=m}(n,t,e.data[s+t.componentOffset]),e.firstCreatePass||ca(t,n),oo(i,n);const m=t.initialInputs;for(let b=s;b<u;b++){const M=e.data[b],P=gl(n,e,b,t);oo(P,n),null!==m&&z_(0,b-s,P,M,0,m),ps(M)&&(hr(t.index,n)[Wi]=gl(n,e,b,t))}}(e,n,t,uo(t,n)),64==(64&t.flags)&&hv(e,n,t))}function ah(e,n,t=uo){const i=n.localNames;if(null!==i){let s=n.index+1;for(let u=0;u<i.length;u+=2){const m=i[u+1],b=-1===m?t(n,e):e[m];e[s++]=b}}}function vp(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=R_(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function R_(e,n,t,i,s,u,m,b,M,P){const I=Jn+i,U=I+s,W=function N_(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:On);return t}(I,U),oe="function"==typeof P?P():P;return W[St]={type:e,blueprint:W,template:t,queries:null,viewQuery:b,declTNode:n,data:W.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:M,consts:oe,incompleteFirstPass:!1}}function sc(e,n,t,i){const s=qu(n);null===t?s.push(i):(s.push(t),e.firstCreatePass&&fg(e).push(i,s.length-1))}function lg(e,n,t,i){for(let s in e)if(e.hasOwnProperty(s)){t=null===t?{}:t;const u=e[s];null===i?L_(t,n,s,u):i.hasOwnProperty(s)&&L_(t,n,i[s],u)}return t}function L_(e,n,t,i){e.hasOwnProperty(t)?e[t].push(n,i):e[t]=[n,i]}function $s(e,n,t,i,s,u,m,b){const M=uo(n,t);let I,P=n.inputs;!b&&null!=P&&(I=P[i])?(bp(e,t,I,i,s),dl(n)&&function cb(e,n){const t=hr(n,e);16&t[Cn]||(t[Cn]|=32)}(t,n.index)):3&n.type&&(i=function lb(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),s=null!=m?m(s,n.value||"",i):s,u.setProperty(M,i,s))}function B_(e,n,t,i){if(Ns()){const s=null===i?null:{"":-1},u=function _a(e,n){const t=e.directiveRegistry;let i=null,s=null;if(t)for(let u=0;u<t.length;u++){const m=t[u];if(x_(n,m.selectors,!1))if(i||(i=[]),ps(m))if(null!==m.findHostDirectiveDefs){const b=[];s=s||new Map,m.findHostDirectiveDefs(m,b,s),i.unshift(...b,m),ya(e,n,b.length)}else i.unshift(m),ya(e,n,0);else s=s||new Map,m.findHostDirectiveDefs?.(m,i,s),i.push(m)}return null===i?null:[i,s]}(e,t);let m,b;null===u?m=b=null:[m,b]=u,null!==m&&lh(e,n,t,m,s,b),s&&function Kc(e,n,t){if(n){const i=e.localNames=[];for(let s=0;s<n.length;s+=2){const u=t[n[s+1]];if(null==u)throw new tt(-301,!1);i.push(n[s],u)}}}(t,i,s)}t.mergedAttrs=Un(t.mergedAttrs,t.attrs)}function lh(e,n,t,i,s,u){for(let P=0;P<i.length;P++)Fa(ca(t,n),e,i[P].type);!function Yc(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let P=0;P<i.length;P++){const I=i[P];I.providersResolver&&I.providersResolver(I)}let m=!1,b=!1,M=rh(e,n,i.length,null);for(let P=0;P<i.length;P++){const I=i[P];t.mergedAttrs=Un(t.mergedAttrs,I.hostAttrs),ug(e,t,n,M,I),wl(M,I,s),null!==I.contentQueries&&(t.flags|=4),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(t.flags|=64);const U=I.type.prototype;!m&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(t.index),m=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(t.index),b=!0),M++}!function cg(e,n,t){const s=n.directiveEnd,u=e.data,m=n.attrs,b=[];let M=null,P=null;for(let I=n.directiveStart;I<s;I++){const U=u[I],W=t?t.get(U):null,be=W?W.outputs:null;M=lg(U.inputs,I,M,W?W.inputs:null),P=lg(U.outputs,I,P,be);const Te=null===M||null===m||y_(n)?null:pb(M,I,m);b.push(Te)}null!==M&&(M.hasOwnProperty("class")&&(n.flags|=8),M.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=b,n.inputs=M,n.outputs=P}(e,t,u)}function hv(e,n,t){const i=t.directiveStart,s=t.directiveEnd,u=t.index,m=function _(){return vn.lFrame.currentDirectiveIndex}();try{ie(u);for(let b=i;b<s;b++){const M=e.data[b],P=n[b];v(b),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&pv(M,P)}}finally{ie(-1),v(m)}}function pv(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function ya(e,n,t){n.componentOffset=t,(e.components??(e.components=[])).push(n.index)}function wl(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;ps(n)&&(t[""]=e)}}function ug(e,n,t,i,s){e.data[i]=s;const u=s.factory||(s.factory=pl(s.type)),m=new st(u,ps(s),ye);e.blueprint[i]=m,t[i]=m,function db(e,n,t,i,s){const u=s.hostBindings;if(u){let m=e.hostBindingOpCodes;null===m&&(m=e.hostBindingOpCodes=[]);const b=~n.index;(function hb(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(m)!=b&&m.push(b),m.push(t,i,u)}}(e,n,i,rh(e,t,s.hostVars,On),s)}function dg(e,n,t,i,s,u,m){if(null==u)e.removeAttribute(n,s,t);else{const b=null==m?Jt(u):m(u,i||"",s);e.setAttribute(n,s,b,t)}}function z_(e,n,t,i,s,u){const m=u[n];if(null!==m){const b=i.setInput;for(let M=0;M<m.length;){const P=m[M++],I=m[M++],U=m[M++];null!==b?i.setInput(t,U,P,I):t[I]=U}}}function pb(e,n,t){let i=null,s=0;for(;s<t.length;){const u=t[s];if(0!==u)if(5!==u){if("number"==typeof u)break;if(e.hasOwnProperty(u)){null===i&&(i=[]);const m=e[u];for(let b=0;b<m.length;b+=2)if(m[b]===n){i.push(u,m[b+1],t[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function V_(e,n,t,i){return[e,!0,!1,n,null,0,i,t,null,null]}function _v(e,n){const t=hr(n,e);if(Cu(t)){const i=t[St];48&t[Cn]?yp(i,t,i.template,t[Wi]):t[ka]>0&&hg(t)}}function hg(e){for(let i=Mm(e);null!==i;i=Ua(i))for(let s=bo;s<i.length;s++){const u=i[s];if(Cu(u))if(512&u[Cn]){const m=u[St];yp(m,u,m.template,u[Wi])}else u[ka]>0&&hg(u)}const t=e[St].components;if(null!==t)for(let i=0;i<t.length;i++){const s=hr(t[i],e);Cu(s)&&s[ka]>0&&hg(s)}}function yv(e,n){const t=hr(n,e),i=t[St];(function vv(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(i,t),I_(i,t,t[Wi])}function qa(e,n){return e[_u]?e[ff][As]=n:e[_u]=n,e[ff]=n,n}function xp(e){for(;e;){e[Cn]|=32;const n=ip(e);if(gd(e)&&!n)return e;e=n}return null}function pg(e,n,t,i=!0){const s=n[mu];s.begin&&s.begin();try{yp(e,n,e.template,t)}catch(m){throw i&&Za(n,m),m}finally{s.end&&s.end()}}function ch(e,n,t){D(0),n(e,t)}function qu(e){return e[ra]||(e[ra]=[])}function fg(e){return e.cleanup||(e.cleanup=[])}function Za(e,n){const t=e[Hl],i=t?t.get(zu,null):null;i&&i.handleError(n)}function bp(e,n,t,i,s){for(let u=0;u<t.length;){const m=t[u++],b=t[u++],M=n[m],P=e.data[m];null!==P.setInput?P.setInput(M,s,i,b):M[b]=s}}function ys(e,n,t){let i=t?e.styles:null,s=t?e.classes:null,u=0;if(null!==n)for(let m=0;m<n.length;m++){const b=n[m];"number"==typeof b?u=b:1==u?s=pn(s,b):2==u&&(i=pn(i,b+": "+n[++m]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=s:e.classesWithoutHost=s}function Cl(e,n,t,i,s=!1){for(;null!==t;){const u=n[t.index];if(null!==u&&i.push(wo(u)),dr(u))for(let b=bo;b<u.length;b++){const M=u[b],P=M[St].firstChild;null!==P&&Cl(M[St],M,P,i)}const m=t.type;if(8&m)Cl(e,n,t.child,i);else if(32&m){const b=zf(t,n);let M;for(;M=b();)i.push(M)}else if(16&m){const b=Gf(n,t);if(Array.isArray(b))i.push(...b);else{const M=ip(n[Xo]);Cl(M[St],M,b,i,!0)}}t=s?t.projectionNext:t.next}return i}class uh{get rootNodes(){const n=this._lView,t=n[St];return Cl(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wi]}set context(n){this._lView[Wi]=n}get destroyed(){return 128==(128&this._lView[Cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Ri];if(dr(n)){const t=n[sa],i=t?t.indexOf(this):-1;i>-1&&(tc(n,i),vl(t,i))}this._attachedToViewContainer=!1}Em(this._lView[St],this._lView)}onDestroy(n){sc(this._lView[St],this._lView,null,n)}markForCheck(){xp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Cn]&=-65}reattach(){this._lView[Cn]|=64}detectChanges(){pg(this._lView[St],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tm(e,n){ku(e,n,n[gn],2,null,null)}(this._lView[St],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new tt(902,!1);this._appRef=n}}class xv extends uh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;pg(n[St],n,n[Wi],!1)}checkNoChanges(){}get context(){return null}}class dh extends Qd{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Pn(n);return new Cp(t,this.ngModule)}}function wp(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class wv{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=Pc(i);const s=this.injector.get(n,f_,i);return s!==f_||t===f_?s:this.parentInjector.get(n,t,i)}}class Cp extends h_{get inputs(){return wp(this.componentDef.inputs)}get outputs(){return wp(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Ky(e){return e.map(Xy).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,s){let u=(s=s||this.ngModule)instanceof ja?s:s?.injector;u&&null!==this.componentDef.getStandaloneInjector&&(u=this.componentDef.getStandaloneInjector(u)||u);const m=u?new wv(n,u):n,b=m.get(p_,null);if(null===b)throw new tt(407,!1);const M=m.get(qx,null),P=b.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",U=i?function F_(e,n,t){return e.selectRootElement(n,t===ds.ShadowDom)}(P,i,this.componentDef.encapsulation):Om(P,I,function bv(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(I)),W=this.componentDef.onPush?288:272,oe=R_(0,null,null,1,0,null,null,null,null,null),be=ag(null,oe,null,W,null,null,b,P,M,m,null);let Te,ze;R(be);try{const Ye=this.componentDef;let ht,We=null;Ye.findHostDirectiveDefs?(ht=[],We=new Map,Ye.findHostDirectiveDefs(Ye,ht,We),ht.push(Ye)):ht=[Ye];const Ot=function Mv(e,n){const t=e[St],i=Jn;return e[i]=n,Wu(t,i,2,"#host",null)}(be,U),Vt=function gb(e,n,t,i,s,u,m,b){const M=s[St];!function U_(e,n,t,i){for(const s of e)n.mergedAttrs=Un(n.mergedAttrs,s.hostAttrs);null!==n.mergedAttrs&&(ys(n,n.mergedAttrs,!0),null!==t&&My(i,t,n))}(i,e,n,m);const P=u.createRenderer(n,t),I=ag(s,vp(t),null,t.onPush?32:16,s[e.index],e,u,P,b||null,null,null);return M.firstCreatePass&&ya(M,e,i.length-1),qa(s,I),s[e.index]=I}(Ot,U,Ye,ht,be,b,P);ze=qh(oe,Jn),U&&function Tv(e,n,t,i){if(i)It(e,t,["ng-version",Zx.full]);else{const{attrs:s,classes:u}=function eb(e){const n=[],t=[];let i=1,s=2;for(;i<e.length;){let u=e[i];if("string"==typeof u)2===s?""!==u&&n.push(u,e[++i]):8===s&&t.push(u);else{if(!ga(s))break;s=u}i++}return{attrs:n,classes:t}}(n.selectors[0]);s&&It(e,t,s),u&&u.length>0&&Cy(e,t,u.join(" "))}}(P,Ye,U,i),void 0!==t&&function Dv(e,n,t){const i=e.projection=[];for(let s=0;s<n.length;s++){const u=t[s];i.push(null!=u?Array.from(u):null)}}(ze,this.ngContentSelectors,t),Te=function Ov(e,n,t,i,s,u){const m=Ui(),b=s[St],M=uo(m,s);lh(b,s,m,t,null,i);for(let I=0;I<t.length;I++)oo(gl(s,b,m.directiveStart+I,m),s);hv(b,s,m),M&&oo(M,s);const P=gl(s,b,m.directiveStart+m.componentOffset,m);if(e[Wi]=s[Wi]=P,null!==u)for(const I of u)I(P,n);return k_(b,m,e),P}(Vt,Ye,ht,We,be,[j_]),I_(oe,be,null)}finally{K()}return new Cv(this.componentType,Te,$a(ze,be),be,ze)}}class Cv extends By{constructor(n,t,i,s,u){super(),this.location=i,this._rootLView=s,this._tNode=u,this.instance=t,this.hostView=this.changeDetectorRef=new xv(s),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[n])){const u=this._rootLView;bp(u[St],u,s,n,t),xp(hr(this._tNode.index,u))}}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function j_(){const e=Ui();ot(Oe()[St],e)}function k(e){return!!V(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function V(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ee(e,n,t){return e[n]=t}function Q(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function ae(e,n,t,i){const s=Q(e,n,t);return Q(e,n+1,i)||s}function we(e,n,t,i){const s=Oe();return Q(s,fl(),n)&&(Nn(),function Wa(e,n,t,i,s,u){const m=uo(e,n);dg(n[gn],m,u,e.value,t,i,s)}(ne(),s,e,n,t,i)),we}function je(e,n,t,i){return Q(e,fl(),t)?n+Jt(t)+i:On}function _e(e,n,t,i,s,u,m,b){const M=Oe(),P=Nn(),I=e+Jn,U=P.firstCreatePass?function _i(e,n,t,i,s,u,m,b,M){const P=n.consts,I=Wu(n,e,4,m||null,Vi(P,b));B_(n,t,I,Vi(P,M)),ot(n,I);const U=I.tView=R_(2,I,i,s,u,n.directiveRegistry,n.pipeRegistry,null,n.schemas,P);return null!==n.queries&&(n.queries.template(n,I),U.queries=n.queries.embeddedTView(I)),I}(I,P,M,n,t,i,s,u,m):P.data[I];la(U,!1);const W=M[gn].createComment("");mr(P,M,W,U),oo(W,M),qa(M,M[I]=V_(W,M,W,U)),Na(U)&&sh(P,M,U),null!=m&&ah(M,U,b)}function rn(e){return Bc(function Mf(){return vn.lFrame.contextLView}(),Jn+e)}function de(e,n,t){const i=Oe();return Q(i,fl(),n)&&$s(Nn(),ne(),i,e,n,i[gn],t,!1),de}function ii(e,n,t,i,s){const m=s?"class":"style";bp(e,t,n.inputs[m],m,i)}function G(e,n,t,i){const s=Oe(),u=Nn(),m=Jn+e,b=s[gn],M=u.firstCreatePass?function ai(e,n,t,i,s,u){const m=n.consts,M=Wu(n,e,2,i,Vi(m,s));return B_(n,t,M,Vi(m,u)),null!==M.attrs&&ys(M,M.attrs,!1),null!==M.mergedAttrs&&ys(M,M.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,M),M}(m,u,s,n,t,i):u.data[m],P=s[m]=Om(b,n,function Ce(){return vn.lFrame.currentNamespace}()),I=Na(M);return la(M,!0),My(b,P,M),32!=(32&M.flags)&&mr(u,s,P,M),0===function Cf(){return vn.lFrame.elementDepthCount}()&&oo(P,s),function rm(){vn.lFrame.elementDepthCount++}(),I&&(sh(u,s,M),k_(u,M,s)),null!==i&&ah(s,M),G}function J(){let e=Ui();Pd()?Mu():(e=e.parent,la(e,!1));const n=e;!function Rs(){vn.lFrame.elementDepthCount--}();const t=Nn();return t.firstCreatePass&&(ot(t,e),fd(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Et(e){return 0!=(8&e.flags)}(n)&&ii(t,n,Oe(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function jt(e){return 0!=(16&e.flags)}(n)&&ii(t,n,Oe(),n.stylesWithoutHost,!1),J}function Ie(e,n,t,i){return G(e,n,t,i),J(),Ie}function $i(e,n,t){const i=Oe(),s=Nn(),u=e+Jn,m=s.firstCreatePass?function li(e,n,t,i,s){const u=n.consts,m=Vi(u,i),b=Wu(n,e,8,"ng-container",m);return null!==m&&ys(b,m,!0),B_(n,t,b,Vi(u,s)),null!==n.queries&&n.queries.elementStart(n,b),b}(u,s,i,n,t):s.data[u];la(m,!0);const b=i[u]=i[gn].createComment("");return mr(s,i,b,m),oo(b,i),Na(m)&&(sh(s,i,m),k_(s,m,i)),null!=t&&ah(i,m),$i}function Fi(){let e=Ui();const n=Nn();return Pd()?Mu():(e=e.parent,la(e,!1)),n.firstCreatePass&&(ot(n,e),fd(e)&&n.queries.elementEnd(e)),Fi}function At(){return Oe()}function Ai(e){return!!e&&"function"==typeof e.then}const tr=function ci(e){return!!e&&"function"==typeof e.subscribe};function Ke(e,n,t,i){const s=Oe(),u=Nn(),m=Ui();return function yr(e,n,t,i,s,u,m){const b=Na(i),P=e.firstCreatePass&&fg(e),I=n[Wi],U=qu(n);let W=!0;if(3&i.type||m){const Te=uo(i,n),ze=m?m(Te):Te,Ye=U.length,ht=m?Ot=>m(wo(Ot[i.index])):i.index;let We=null;if(!m&&b&&(We=function Po(e,n,t,i){const s=e.cleanup;if(null!=s)for(let u=0;u<s.length-1;u+=2){const m=s[u];if(m===t&&s[u+1]===i){const b=n[ra],M=s[u+2];return b.length>M?b[M]:null}"string"==typeof m&&(u+=2)}return null}(e,n,s,i.index)),null!==We)(We.__ngLastListenerFn__||We).__ngNextListenerFn__=u,We.__ngLastListenerFn__=u,W=!1;else{u=va(i,n,I,u,!1);const Ot=t.listen(ze,s,u);U.push(u,Ot),P&&P.push(s,ht,Ye,Ye+1)}}else u=va(i,n,I,u,!1);const oe=i.outputs;let be;if(W&&null!==oe&&(be=oe[s])){const Te=be.length;if(Te)for(let ze=0;ze<Te;ze+=2){const Vt=n[be[ze]][be[ze+1]].subscribe(u),Kt=U.length;U.push(u,Vt),P&&P.push(s,i.index,Kt,-(Kt+1))}}}(u,s,s[gn],m,e,n,i),Ke}function _o(e,n,t,i){try{return Ko(6,n,t),!1!==t(i)}catch(s){return Za(e,s),!1}finally{Ko(7,n,t)}}function va(e,n,t,i,s){return function u(m){if(m===Function)return i;xp(e.componentOffset>-1?hr(e.index,n):n);let M=_o(n,t,i,m),P=u.__ngNextListenerFn__;for(;P;)M=_o(n,t,P,m)&&M,P=P.__ngNextListenerFn__;return s&&!1===M&&(m.preventDefault(),m.returnValue=!1),M}}function it(e=1){return function te(e){return(vn.lFrame.contextLView=function z(e,n){for(;e>0;)n=n[Ic],e--;return n}(e,vn.lFrame.contextLView))[Wi]}(e)}function Tp(e,n){let t=null;const i=function Qx(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let s=0;s<n.length;s++){const u=n[s];if("*"!==u){if(null===i?x_(e,u,!0):Jy(i,u))return s}else t=s}return t}function Ml(e){const n=Oe()[Xo][Fo];if(!n.projection){const i=n.projection=Xl(e?e.length:1,null),s=i.slice();let u=n.child;for(;null!==u;){const m=e?Tp(u,e):0;null!==m&&(s[m]?s[m].projectionNext=u:i[m]=u,s[m]=u),u=u.next}}}function Zu(e,n=0,t){const i=Oe(),s=Nn(),u=Wu(s,Jn+e,16,null,t||null);null===u.projection&&(u.projection=n),Mu(),32!=(32&u.flags)&&function Hf(e,n,t){Vm(n[gn],0,n,t,Am(e,t,n),Rm(t.parent||n[Fo],t,n))}(s,i,u)}function po(e,n,t){return Ol(e,"",n,"",t),po}function Ol(e,n,t,i,s){const u=Oe(),m=je(u,n,t,i);return m!==On&&$s(Nn(),ne(),u,e,m,u[gn],s,!1),Ol}function Ka(e,n){return e<<17|n<<2}function Tl(e){return e>>17&32767}function Fr(e){return 2|e}function Ya(e){return(131068&e)>>2}function Dp(e,n){return-131069&e|n<<2}function ac(e){return 1|e}function TM(e,n,t,i,s){const u=e[t+1],m=null===n;let b=i?Tl(u):Ya(u),M=!1;for(;0!==b&&(!1===M||m);){const I=e[b+1];lA(e[b],n)&&(M=!0,e[b+1]=i?ac(I):Fr(I)),b=i?Tl(I):Ya(I)}M&&(e[t+1]=i?Fr(u):ac(u))}function lA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&jc(e,n)>=0}const vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DM(e){return e.substring(vr.key,vr.keyEnd)}function PM(e,n){const t=vr.textEnd;return t===n?-1:(n=vr.keyEnd=function hA(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,vr.key=n,t),bg(e,n,t))}function bg(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function wg(e,n,t){return lc(e,n,t,!1),wg}function xn(e,n){return lc(e,n,null,!0),xn}function hh(e){cc(bA,tu,e,!0)}function tu(e,n){for(let t=function uA(e){return function SM(e){vr.key=0,vr.keyEnd=0,vr.value=0,vr.valueEnd=0,vr.textEnd=e.length}(e),PM(e,bg(e,0,vr.textEnd))}(n);t>=0;t=PM(n,t))ms(e,DM(n),!0)}function lc(e,n,t,i){const s=Oe(),u=Nn(),m=Rr(2);u.firstUpdatePass&&RM(u,e,m,i),n!==On&&Q(s,m,n)&&FM(u,u.data[Z()],s,s[gn],e,s[m+1]=function CA(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Lt(nc(e)))),e}(n,t),i,m)}function cc(e,n,t,i){const s=Nn(),u=Rr(2);s.firstUpdatePass&&RM(s,null,u,i);const m=Oe();if(t!==On&&Q(m,u,t)){const b=s.data[Z()];if(BM(b,i)&&!kM(s,u)){let M=i?b.classesWithoutHost:b.stylesWithoutHost;null!==M&&(t=pn(M,t||"")),ii(s,b,m,t,i)}else!function wA(e,n,t,i,s,u,m,b){s===On&&(s=An);let M=0,P=0,I=0<s.length?s[0]:null,U=0<u.length?u[0]:null;for(;null!==I||null!==U;){const W=M<s.length?s[M+1]:void 0,oe=P<u.length?u[P+1]:void 0;let Te,be=null;I===U?(M+=2,P+=2,W!==oe&&(be=U,Te=oe)):null===U||null!==I&&I<U?(M+=2,be=I):(P+=2,be=U,Te=oe),null!==be&&FM(e,n,t,i,be,Te,m,b),I=M<s.length?s[M]:null,U=P<u.length?u[P]:null}}(s,b,m,m[gn],m[u+1],m[u+1]=function xA(e,n,t){if(null==t||""===t)return An;const i=[],s=nc(t);if(Array.isArray(s))for(let u=0;u<s.length;u++)e(i,s[u],!0);else if("object"==typeof s)for(const u in s)s.hasOwnProperty(u)&&e(i,u,s[u]);else"string"==typeof s&&n(i,s);return i}(e,n,t),i,u)}}function kM(e,n){return n>=e.expandoStartIndex}function RM(e,n,t,i){const s=e.data;if(null===s[t+1]){const u=s[Z()],m=kM(e,t);BM(u,i)&&null===n&&!m&&(n=!1),n=function mA(e,n,t,i){const s=function w(e){const n=vn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let u=i?n.residualClasses:n.residualStyles;if(null===s)0===(i?n.classBindings:n.styleBindings)&&(t=H_(t=_b(null,e,n,t,i),n.attrs,i),u=null);else{const m=n.directiveStylingLast;if(-1===m||e[m]!==s)if(t=_b(s,e,n,t,i),null===u){let M=function _A(e,n,t){const i=t?n.classBindings:n.styleBindings;if(0!==Ya(i))return e[Tl(i)]}(e,n,i);void 0!==M&&Array.isArray(M)&&(M=_b(null,e,n,M[1],i),M=H_(M,n.attrs,i),function yA(e,n,t,i){e[Tl(t?n.classBindings:n.styleBindings)]=i}(e,n,i,M))}else u=function vA(e,n,t){let i;const s=n.directiveEnd;for(let u=1+n.directiveStylingLast;u<s;u++)i=H_(i,e[u].hostAttrs,t);return H_(i,n.attrs,t)}(e,n,i)}return void 0!==u&&(i?n.residualClasses=u:n.residualStyles=u),t}(s,u,n,i),function sA(e,n,t,i,s,u){let m=u?n.classBindings:n.styleBindings,b=Tl(m),M=Ya(m);e[i]=t;let I,P=!1;if(Array.isArray(t)?(I=t[1],(null===I||jc(t,I)>0)&&(P=!0)):I=t,s)if(0!==M){const W=Tl(e[b+1]);e[i+1]=Ka(W,b),0!==W&&(e[W+1]=Dp(e[W+1],i)),e[b+1]=function vs(e,n){return 131071&e|n<<17}(e[b+1],i)}else e[i+1]=Ka(b,0),0!==b&&(e[b+1]=Dp(e[b+1],i)),b=i;else e[i+1]=Ka(M,0),0===b?b=i:e[M+1]=Dp(e[M+1],i),M=i;P&&(e[i+1]=Fr(e[i+1])),TM(e,I,i,!0),TM(e,I,i,!1),function aA(e,n,t,i,s){const u=s?e.residualClasses:e.residualStyles;null!=u&&"string"==typeof n&&jc(u,n)>=0&&(t[i+1]=ac(t[i+1]))}(n,I,e,i,u),m=Ka(b,M),u?n.classBindings=m:n.styleBindings=m}(s,u,n,t,m,i)}}function _b(e,n,t,i,s){let u=null;const m=t.directiveEnd;let b=t.directiveStylingLast;for(-1===b?b=t.directiveStart:b++;b<m&&(u=n[b],i=H_(i,u.hostAttrs,s),u!==e);)b++;return null!==e&&(t.directiveStylingLast=b),i}function H_(e,n,t){const i=t?1:2;let s=-1;if(null!==n)for(let u=0;u<n.length;u++){const m=n[u];"number"==typeof m?s=m:s===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ms(e,m,!!t||n[++u]))}return void 0===e?null:e}function bA(e,n,t){const i=String(n);""!==i&&!i.includes(" ")&&ms(e,i,t)}function FM(e,n,t,i,s,u,m,b){if(!(3&n.type))return;const M=e.data,P=M[b+1],I=function Ev(e){return 1==(1&e)}(P)?LM(M,n,t,s,Ya(P),m):void 0;Sv(I)||(Sv(u)||function mb(e){return 2==(2&e)}(P)&&(u=LM(M,null,t,s,b,m)),function rp(e,n,t,i,s){if(n)s?e.addClass(t,i):e.removeClass(t,i);else{let u=-1===i.indexOf("-")?void 0:Bo.DashCase;null==s?e.removeStyle(t,i,u):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),u|=Bo.Important),e.setStyle(t,i,s,u))}}(i,m,wu(Z(),t),s,u))}function LM(e,n,t,i,s,u){const m=null===n;let b;for(;s>0;){const M=e[s],P=Array.isArray(M),I=P?M[1]:M,U=null===I;let W=t[s+1];W===On&&(W=U?An:void 0);let oe=U?cm(W,i):I===i?W:void 0;if(P&&!Sv(oe)&&(oe=cm(M,i)),Sv(oe)&&(b=oe,m))return b;const be=e[s+1];s=m?Tl(be):Ya(be)}if(null!==n){let M=u?n.residualClasses:n.residualStyles;null!=M&&(b=cm(M,i))}return b}function Sv(e){return void 0!==e}function BM(e,n){return 0!=(e.flags&(n?8:16))}function Ve(e,n=""){const t=Oe(),i=Nn(),s=e+Jn,u=i.firstCreatePass?Wu(i,s,1,n,null):i.data[s],m=t[s]=Gd(t[gn],n);mr(i,t,m,u),la(u,!1)}function fi(e){return oi("",e,""),fi}function oi(e,n,t){const i=Oe(),s=je(i,e,n,t);return s!==On&&function Ja(e,n,t){const i=wu(n,e);Vf(e[gn],i,t)}(i,Z(),s),oi}function qM(e,n,t,i,s){cc(ms,tu,function nt(e,n,t,i,s,u){const b=ae(e,Fs(),t,s);return Rr(2),b?n+Jt(t)+i+Jt(s)+u:On}(Oe(),e,n,t,i,s),!0)}function Qa(e,n,t){const i=Oe();return Q(i,fl(),n)&&$s(Nn(),ne(),i,e,n,i[gn],t,!0),Qa}const Pp=void 0;var jA=["en",[["a","p"],["AM","PM"],Pp],[["AM","PM"],Pp,Pp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pp,"{1} 'at' {0}",Pp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UA(e){const t=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Cg={};function Gs(e){const n=function $A(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=r2(n);if(t)return t;const i=n.split("-")[0];if(t=r2(i),t)return t;if("en"===i)return jA;throw new tt(701,!1)}function r2(e){return e in Cg||(Cg[e]=Ci.ng&&Ci.ng.common&&Ci.ng.common.locales&&Ci.ng.common.locales[e]),Cg[e]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const GA=["zero","one","two","few","many"],Mg="en-US",Av={marker:"element"},Iv={marker:"ICU"};var Eo=(()=>((Eo=Eo||{})[Eo.SHIFT=2]="SHIFT",Eo[Eo.APPEND_EAGERLY=1]="APPEND_EAGERLY",Eo[Eo.COMMENT=2]="COMMENT",Eo))();let s2=Mg;function a2(e){(function Sr(e,n){null==e&&Rn(n,e,null,"!=")})(e,"Expected localeId to be defined"),"string"==typeof e&&(s2=e.toLowerCase().replace(/_/g,"-"))}function l2(e,n,t){const i=n.insertBeforeIndex,s=Array.isArray(i)?i[0]:i;return null===s?Nm(e,0,t):wo(t[s])}function c2(e,n,t,i,s){const u=n.insertBeforeIndex;if(Array.isArray(u)){let m=i,b=null;if(3&n.type||(b=m,m=s),null!==m&&-1===n.componentOffset)for(let M=1;M<u.length;M++)Iu(e,m,t[u[M]],b,!1)}}function u2(e,n){if(e.push(n),e.length>1)for(let t=e.length-2;t>=0;t--){const i=e[t];d2(i)||ZA(i,n)&&null===JA(i)&&XA(i,n.index)}}function d2(e){return!(64&e.type)}function ZA(e,n){return d2(n)||e.index>n.index}function JA(e){const n=e.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function XA(e,n){const t=e.insertBeforeIndex;Array.isArray(t)?t[0]=n:(bl(l2,c2),e.insertBeforeIndex=n)}function W_(e,n){const t=e.data[n];return null===t||"string"==typeof t?null:t.hasOwnProperty("currentCaseLViewIndex")?t:t.value}function QA(e,n,t){const i=A_(e,t,64,null,null);return u2(n,i),i}function kv(e,n){const t=n[e.currentCaseLViewIndex];return null===t?t:t<0?~t:t}function h2(e){return e>>>17}function p2(e){return(131070&e)>>>1}let q_=0,Z_=0;function g2(e,n,t,i){const s=t[gn];let m,u=null;for(let b=0;b<n.length;b++){const M=n[b];if("string"==typeof M){const P=n[++b];null===t[P]&&(t[P]=Gd(s,M))}else if("number"==typeof M)switch(1&M){case 0:const P=h2(M);let I,U;if(null===u&&(u=P,m=jf(s,i)),P===u?(I=i,U=m):(I=null,U=wo(t[P])),null!==U){const Te=p2(M);Iu(s,U,t[Te],I,!1);const Ye=W_(e,Te);if(null!==Ye&&"object"==typeof Ye){const ht=kv(Ye,t);null!==ht&&g2(e,Ye.create[ht],t,t[Ye.anchorIdx])}}break;case 1:const oe=n[++b],be=n[++b];dg(s,wu(M>>>1,t),null,null,oe,be,null)}else switch(M){case Iv:const P=n[++b],I=n[++b];null===t[I]&&oo(t[I]=vy(s,P),t);break;case Av:const U=n[++b],W=n[++b];null===t[W]&&oo(t[W]=Om(s,U,null),t)}}}function m2(e,n,t,i,s){for(let u=0;u<t.length;u++){const m=t[u],b=t[++u];if(m&s){let M="";for(let P=u+1;P<=u+b;P++){const I=t[P];if("string"==typeof I)M+=I;else if("number"==typeof I)if(I<0)M+=Jt(n[i-I]);else{const U=I>>>2;switch(3&I){case 1:const W=t[++P],oe=t[++P],be=e.data[U];"string"==typeof be?dg(n[gn],n[U],null,be,W,M,oe):$s(e,be,n,W,M,n[gn],oe,!1);break;case 0:const Te=n[U];null!==Te&&Vf(n[gn],Te,M);break;case 2:oI(e,W_(e,U),n,M);break;case 3:_2(e,W_(e,U),i,n)}}}}else{const M=t[u+1];if(M>0&&3==(3&M)){const I=W_(e,M>>>2);n[I.currentCaseLViewIndex]<0&&_2(e,I,i,n)}}u+=b}}function _2(e,n,t,i){let s=i[n.currentCaseLViewIndex];if(null!==s){let u=q_;s<0&&(s=i[n.currentCaseLViewIndex]=~s,u=-1),m2(e,i,n.update[s],t,u)}}function oI(e,n,t,i){const s=function rI(e,n){let t=e.cases.indexOf(n);if(-1===t)switch(e.type){case 1:{const i=function HA(e,n){const t=function o2(e){return Gs(e)[Nt.PluralCase]}(n)(parseInt(e,10)),i=GA[t];return void 0!==i?i:"other"}(n,function qA(){return s2}());t=e.cases.indexOf(i),-1===t&&"other"!==i&&(t=e.cases.indexOf("other"));break}case 0:t=e.cases.indexOf("other")}return-1===t?null:t}(n,i);if(kv(n,t)!==s&&(y2(e,n,t),t[n.currentCaseLViewIndex]=null===s?null:~s,null!==s)){const m=t[n.anchorIdx];m&&g2(e,n.create[s],t,m)}}function y2(e,n,t){let i=kv(n,t);if(null!==i){const s=n.remove[i];for(let u=0;u<s.length;u++){const m=s[u];if(m>0){const b=wu(m,t);null!==b&&Bm(t[gn],b)}else y2(e,W_(e,~m),t)}}}function sI(){const e=[];let t,i,n=-1;function u(b,M){n=0;const P=kv(b,M);i=null!==P?b.remove[P]:An}function m(){if(n<i.length){const b=i[n++];return b>0?t[b]:(e.push(n,i),u(t[St].data[~b],t),m())}return 0===e.length?null:(i=e.pop(),n=e.pop(),m())}return function s(b,M){for(t=M;e.length;)e.pop();return u(b.value,M),m}}const Rv=/\ufffd(\d+):?\d*\ufffd/gi,lI=/\ufffd(\d+)\ufffd/,x2=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,J_="\ufffd",cI=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,uI=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,dI=/\uE500/g;function b2(e,n,t,i,s,u,m){const b=rh(e,i,1,null);let M=b<<Eo.SHIFT,P=Zl();n===P&&(P=null),null===P&&(M|=Eo.APPEND_EAGERLY),m&&(M|=Eo.COMMENT,function wm(e){void 0===np&&(np=e())}(sI)),s.push(M,null===u?"":u);const I=A_(e,b,m?32:1,null===u?"":u,null);u2(t,I);const U=I.index;return la(I,!1),null!==P&&n!==P&&function YA(e,n){let t=e.insertBeforeIndex;null===t?(bl(l2,c2),t=e.insertBeforeIndex=[null,n]):(function di(e,n,t){e!=n&&Rn(t,e,n,"==")}(Array.isArray(t),!0,"Expecting array here"),t.push(n))}(P,U),I}function fI(e,n,t,i,s,u,m){const b=m.match(Rv),M=b2(e,n,t,u,i,b?null:m,!1);b&&X_(s,m,M.index,null,0,null)}function X_(e,n,t,i,s,u){const m=e.length,b=m+1;e.push(null,null);const M=m+2,P=n.split(Rv);let I=0;for(let U=0;U<P.length;U++){const W=P[U];if(1&U){const oe=s+parseInt(W,10);e.push(-1-oe),I|=w2(oe)}else""!==W&&e.push(W)}return e.push(t<<2|(i?1:0)),i&&e.push(i,u),e[m]=I,e[b]=e.length-M,I}function w2(e){return 1<<Math.min(e,31)}function C2(e){let n,u,t="",i=0,s=!1;for(;null!==(n=cI.exec(e));)s?n[0]===`${J_}/*${u}${J_}`&&(i=n.index,s=!1):(t+=e.substring(i,n.index+n[0].length),u=n[1],s=!0);return t+=e.slice(i),t}function M2(e,n,t,i,s,u){let m=0;const b={type:s.type,currentCaseLViewIndex:rh(e,n,1,null),anchorIdx:u,cases:[],create:[],remove:[],update:[]};(function wI(e,n,t){e.push(w2(n.mainBinding),2,-1-n.mainBinding,t<<2|2)})(t,s,u),function KA(e,n,t){const i=e.data[n];null===i?e.data[n]=t:i.value=t}(e,u,b);const M=s.values;for(let P=0;P<M.length;P++){const I=M[P],U=[];for(let W=0;W<I.length;W++){const oe=I[W];if("string"!=typeof oe){const be=U.push(oe)-1;I[W]=`\x3c!--\ufffd${be}\ufffd--\x3e`}}m=xI(e,b,n,t,i,s.cases[P],I.join(""),U)|m}m&&function CI(e,n,t){e.push(n,1,t<<2|3)}(t,m,u)}function vI(e){const n=[],t=[];let i=1,s=0;const u=yb(e=e.replace(x2,function(m,b,M){return i="select"===M?0:1,s=parseInt(b.slice(1),10),""}));for(let m=0;m<u.length;){let b=u[m++].trim();1===i&&(b=b.replace(/\s*(?:=)?(\w+)\s*/,"$1")),b.length&&n.push(b);const M=yb(u[m++]);n.length>t.length&&t.push(M)}return{type:i,mainBinding:s,cases:n,values:t}}function yb(e){if(!e)return[];let n=0;const t=[],i=[],s=/[{}]/g;let u;for(s.lastIndex=0;u=s.exec(e);){const b=u.index;if("}"==u[0]){if(t.pop(),0==t.length){const M=e.substring(n,b);x2.test(M)?i.push(vI(M)):i.push(M),n=b+1}}else{if(0==t.length){const M=e.substring(n,b);i.push(M),n=b+1}t.push("{")}}const m=e.substring(n);return i.push(m),i}function xI(e,n,t,i,s,u,m,b){const M=[],P=[],I=[];n.cases.push(u),n.create.push(M),n.remove.push(P),n.update.push(I);const W=function Py(e){const n=new Sx(e);return function Ax(){try{return!!(new window.DOMParser).parseFromString(Wd(""),"text/html")}catch{return!1}}()?new Ex(n):n}(function sp(){return void 0!==$m?$m:typeof document<"u"?document:void 0}()).getInertBodyElement(m),oe=function Fu(e){return"content"in e&&function Ay(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}(W)||W;return oe?O2(e,n,t,i,M,P,I,oe,s,b,0):0}function O2(e,n,t,i,s,u,m,b,M,P,I){let U=0,W=b.firstChild;for(;W;){const oe=rh(e,t,1,null);switch(W.nodeType){case Node.ELEMENT_NODE:const be=W,Te=be.tagName.toLowerCase();if(qf.hasOwnProperty(Te)){vb(s,Av,Te,M,oe),e.data[oe]=Te;const We=be.attributes;for(let Ot=0;Ot<We.length;Ot++){const Vt=We.item(Ot),Kt=Vt.name.toLowerCase();Vt.value.match(Rv)?Zf.hasOwnProperty(Kt)&&X_(m,Vt.value,oe,Vt.name,0,Ym[Kt]?Xm:null):MI(s,oe,Vt)}U=O2(e,n,t,i,s,u,m,W,oe,P,I+1)|U,T2(u,oe,I)}break;case Node.TEXT_NODE:const ze=W.textContent||"",Ye=ze.match(Rv);vb(s,null,Ye?"":ze,M,oe),T2(u,oe,I),Ye&&(U=X_(m,ze,oe,null,0,null)|U);break;case Node.COMMENT_NODE:const ht=lI.exec(W.textContent||"");if(ht){const Ot=P[parseInt(ht[1],10)];vb(s,Iv,"",M,oe),M2(e,t,i,M,Ot,oe),bI(u,oe,I)}}W=W.nextSibling}return U}function T2(e,n,t){0===t&&e.push(n)}function bI(e,n,t){0===t&&(e.push(~n),e.push(n))}function vb(e,n,t,i,s){null!==n&&e.push(n),e.push(t,s,function eI(e,n,t){return e|n<<17|t<<1}(0,i,s))}function MI(e,n,t){e.push(n<<1|1,t.name,t.value)}function P2(e,n,t=-1){const i=Nn(),s=Oe(),u=Jn+e,m=Vi(i.consts,n),b=Zl();i.firstCreatePass&&function pI(e,n,t,i,s,u){const m=Zl(),b=[],M=[],P=[[]];s=function yI(e,n){if(function _I(e){return-1===e}(n))return C2(e);{const t=e.indexOf(`:${n}${J_}`)+2+n.toString().length,i=e.search(new RegExp(`${J_}\\/\\*\\d+:${n}${J_}`));return C2(e.substring(t,i))}}(s,u);const I=function hI(e){return e.replace(dI," ")}(s).split(uI);for(let U=0;U<I.length;U++){let W=I[U];if(1&U){const oe=47===W.charCodeAt(0),Te=(W.charCodeAt(oe?1:0),Jn+Number.parseInt(W.substring(oe?2:1)));if(oe)P.shift(),la(Zl(),!1);else{const ze=QA(e,P[0],Te);P.unshift([]),la(ze,!0)}}else{const oe=yb(W);for(let be=0;be<oe.length;be++){let Te=oe[be];if(1&be){const ze=Te;if("object"!=typeof ze)throw new Error(`Unable to parse ICU expression in "${s}" message.`);M2(e,t,M,n,ze,b2(e,m,P[0],t,b,"",!0).index)}else""!==Te&&fI(e,m,P[0],b,M,t,Te)}}}e.data[i]={create:b,update:M}}(i,null===b?0:b.index,s,u,m,t);const M=i.data[u],I=Im(i,b===s[Fo]?null:b,s);(function iI(e,n,t,i){const s=e[gn];for(let u=0;u<n.length;u++){const m=n[u++],b=n[u],P=(m&Eo.APPEND_EAGERLY)===Eo.APPEND_EAGERLY,I=m>>>Eo.SHIFT;let U=e[I];null===U&&(U=e[I]=(m&Eo.COMMENT)===Eo.COMMENT?s.createComment(b):Gd(s,b)),P&&null!==t&&Iu(s,t,U,i,!1)}})(s,M.create,I,b&&8&b.type?s[b.index]:null),l(!0)}function ts(e,n,t){P2(e,n,t),function E2(){l(!1)}()}function Og(e){return function tI(e){e&&(q_|=1<<Math.min(Z_,31)),Z_++}(Q(Oe(),fl(),e)),Og}function K_(e){!function nI(e,n,t){if(Z_>0){const i=e.data[t];m2(e,n,Array.isArray(i)?i:i.update,Fs()-Z_-1,q_)}q_=0,Z_=0}(Nn(),Oe(),e+Jn)}function xb(e,n,t,i,s){if(e=mt(e),Array.isArray(e))for(let u=0;u<e.length;u++)xb(e[u],n,t,i,s);else{const u=Nn(),m=Oe();let b=qc(e)?e:mt(e.provide),M=Bu(e);const P=Ui(),I=1048575&P.providerIndexes,U=P.directiveStart,W=P.providerIndexes>>20;if(qc(e)||!e.multi){const oe=new st(M,s,ye),be=wb(b,n,s?I:I+W,U);-1===be?(Fa(ca(P,m),u,b),bb(u,e,n.length),n.push(b),P.directiveStart++,P.directiveEnd++,s&&(P.providerIndexes+=1048576),t.push(oe),m.push(oe)):(t[be]=oe,m[be]=oe)}else{const oe=wb(b,n,I+W,U),be=wb(b,n,I,I+W),ze=be>=0&&t[be];if(s&&!ze||!s&&!(oe>=0&&t[oe])){Fa(ca(P,m),u,b);const Ye=function BI(e,n,t,i,s){const u=new st(e,t,ye);return u.multi=[],u.index=n,u.componentProviders=0,S2(u,s,i&&!t),u}(s?LI:FI,t.length,s,i,M);!s&&ze&&(t[be].providerFactory=Ye),bb(u,e,n.length,0),n.push(b),P.directiveStart++,P.directiveEnd++,s&&(P.providerIndexes+=1048576),t.push(Ye),m.push(Ye)}else bb(u,e,oe>-1?oe:be,S2(t[s?be:oe],M,!s&&i));!s&&i&&ze&&t[be].componentProviders++}}}function bb(e,n,t,i){const s=qc(n),u=function Ux(e){return!!e.useClass}(n);if(s||u){const M=(u?mt(n.useClass):n).prototype.ngOnDestroy;if(M){const P=e.destroyHooks||(e.destroyHooks=[]);if(!s&&n.multi){const I=P.indexOf(t);-1===I?P.push(t,[i,M]):P[I+1].push(i,M)}else P.push(t,M)}}}function S2(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function wb(e,n,t,i){for(let s=t;s<i;s++)if(n[s]===e)return s;return-1}function FI(e,n,t,i){return Cb(this.multi,[])}function LI(e,n,t,i){const s=this.multi;let u;if(this.providerFactory){const m=this.providerFactory.componentProviders,b=gl(t,t[St],this.providerFactory.index,i);u=b.slice(0,m),Cb(s,u);for(let M=m;M<b.length;M++)u.push(b[M])}else u=[],Cb(s,u);return u}function Cb(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Pi(e,n=[]){return t=>{t.providersResolver=(i,s)=>function NI(e,n,t){const i=Nn();if(i.firstCreatePass){const s=ps(e);xb(t,i.data,i.blueprint,s,!0),xb(n,i.data,i.blueprint,s,!1)}}(i,s?s(e):e,n)}}class Tg{}class A2{}class I2 extends Tg{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dh(this);const i=Ir(n);this._bootstrapComponents=Ga(i.bootstrap),this._r3Injector=gp(n,t,[{provide:Tg,useValue:this},{provide:Qd,useValue:this.componentFactoryResolver}],Lt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Mb extends A2{constructor(n){super(),this.moduleType=n}create(n){return new I2(this.moduleType,n)}}class VI extends Tg{constructor(n,t,i){super(),this.componentFactoryResolver=new dh(this),this.instance=null;const s=new Oo([...n,{provide:Tg,useValue:this},{provide:Qd,useValue:this.componentFactoryResolver}],t||dp(),i,new Set(["environment"]));this.injector=s,s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Nv(e,n,t=null){return new VI(e,n,t).injector}let UI=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=Fy(0,t.type),s=i.length>0?Nv([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,s)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=yt({token:e,providedIn:"environment",factory:()=>new e(Dt(ja))}),e})();function xr(e){e.getStandaloneInjector=n=>n.get(UI).getOrCreateStandaloneInjector(e)}function Gi(e,n,t,i){return z2(Oe(),pr(),e,n,t,i)}function Y_(e,n,t,i,s){return function V2(e,n,t,i,s,u,m){const b=n+t;return ae(e,b,s,u)?ee(e,b+2,m?i.call(m,s,u):i(s,u)):Q_(e,b+2)}(Oe(),pr(),e,n,t,i,s)}function ph(e,n,t,i,s,u){return function U2(e,n,t,i,s,u,m,b){const M=n+t;return function he(e,n,t,i,s){const u=ae(e,n,t,i);return Q(e,n+2,s)||u}(e,M,s,u,m)?ee(e,M+3,b?i.call(b,s,u,m):i(s,u,m)):Q_(e,M+3)}(Oe(),pr(),e,n,t,i,s,u)}function Q_(e,n){const t=e[n];return t===On?void 0:t}function z2(e,n,t,i,s,u){const m=n+t;return Q(e,m,s)?ee(e,m+1,u?i.call(u,s):i(s)):Q_(e,m+1)}function H2(e,n,t){const i=e+Jn,s=Oe(),u=Bc(s,i);return function e0(e,n){return e[St].data[n].pure}(s,i)?z2(s,pr(),n,u.transform,t,u):u.transform(t)}function Tb(e){return n=>{setTimeout(e,void 0,n)}}const zt=class lk extends Hn{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,i){let s=n,u=t||(()=>null),m=i;if(n&&"object"==typeof n){const M=n;s=M.next?.bind(M),u=M.error?.bind(M),m=M.complete?.bind(M)}this.__isAsync&&(u=Tb(u),s&&(s=Tb(s)),m&&(m=Tb(m)));const b=super.subscribe({next:s,error:u,complete:m});return n instanceof Xe&&n.add(b),b}};function ck(){return this._results[Symbol.iterator]()}class Db{get changes(){return this._changes||(this._changes=new zt)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Db.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=ck)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const i=this;i.dirty=!1;const s=function zs(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function ty(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],u=n[i];if(t&&(s=t(s),u=t(u)),u!==s)return!1}return!0}(i._results,s,t))&&(i._results=s,i.length=s.length,i.last=s[this.length-1],i.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zi=(()=>{class e{}return e.__NG_ELEMENT_ID__=hk,e})();const uk=Zi,dk=class extends uk{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(n,t){const i=this._declarationTContainer.tView,s=ag(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null,t||null);s[kc]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[ur];return null!==m&&(s[ur]=m.createEmbeddedView(i)),I_(i,s,n),new uh(s)}};function hk(){return Fv(Ui(),Oe())}function Fv(e,n){return 4&e.type?new dk(n,e,$a(e,n)):null}let Dl=(()=>{class e{}return e.__NG_ELEMENT_ID__=pk,e})();function pk(){return Z2(Ui(),Oe())}const fk=Dl,W2=class extends fk{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return $a(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){const n=da(this._hostTNode,this._hostLView);if(Lo(n)){const t=Kr(n,this._hostLView),i=no(n);return new gs(t[St].data[i+8],t)}return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=q2(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-bo}createEmbeddedView(n,t,i){let s,u;"number"==typeof i?s=i:null!=i&&(s=i.index,u=i.injector);const m=n.createEmbeddedView(t||{},u);return this.insert(m,s),m}createComponent(n,t,i,s,u){const m=n&&!function Qo(e){return"function"==typeof e}(n);let b;if(m)b=t;else{const U=t||{};b=U.index,i=U.injector,s=U.projectableNodes,u=U.environmentInjector||U.ngModuleRef}const M=m?n:new Cp(Pn(n)),P=i||this.parentInjector;if(!u&&null==M.ngModule){const W=(m?P:this.parentInjector).get(ja,null);W&&(u=W)}const I=M.create(P,s,void 0,u);return this.insert(I.hostView,b),I}insert(n,t){const i=n._lView,s=i[St];if(function xf(e){return dr(e[Ri])}(i)){const I=this.indexOf(n);if(-1!==I)this.detach(I);else{const U=i[Ri],W=new W2(U,U[Fo],U[Ri]);W.detach(W.indexOf(n))}}const u=this._adjustIndex(t),m=this._lContainer;!function Dm(e,n,t,i){const s=bo+i,u=t.length;i>0&&(t[s-1][As]=n),i<u-bo?(n[As]=t[s],Ef(t,bo+i,n)):(t.push(n),n[As]=null),n[Ri]=t;const m=n[kc];null!==m&&t!==m&&function by(e,n){const t=e[Is];n[Xo]!==n[Ri][Ri][Xo]&&(e[Nc]=!0),null===t?e[Is]=[n]:t.push(n)}(m,n);const b=n[ur];null!==b&&b.insertView(e),n[Cn]|=64}(s,i,m,u);const b=Lm(u,m),M=i[gn],P=jf(M,m[yu]);return null!==P&&function xx(e,n,t,i,s,u){i[hs]=s,i[Fo]=n,ku(e,i,t,1,s,u)}(s,m[Fo],M,i,P,b),n.attachToViewContainerRef(),Ef(Pb(m),u,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=q2(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=tc(this._lContainer,t);i&&(vl(Pb(this._lContainer),t),Em(i[St],i))}detach(n){const t=this._adjustIndex(n,-1),i=tc(this._lContainer,t);return i&&null!=vl(Pb(this._lContainer),t)?new uh(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function q2(e){return e[sa]}function Pb(e){return e[sa]||(e[sa]=[])}function Z2(e,n){let t;const i=n[e.index];if(dr(i))t=i;else{let s;if(8&e.type)s=wo(i);else{const u=n[gn];s=u.createComment("");const m=uo(e,n);Iu(u,jf(u,m),s,function Mx(e,n){return e.nextSibling(n)}(u,m),!1)}n[e.index]=t=V_(i,n,s,e),qa(n,t)}return new W2(t,e,n)}class Eb{constructor(n){this.queryList=n,this.matches=null}clone(){return new Eb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sb{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const i=null!==n.contentQueries?n.contentQueries[0]:t.length,s=[];for(let u=0;u<i;u++){const m=t.getByIndex(u);s.push(this.queries[m.indexInDeclarationView].clone())}return new Sb(s)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==Q2(n,t).matches&&this.queries[t].setDirty()}}class J2{constructor(n,t,i=null){this.predicate=n,this.flags=t,this.read=i}}class Ab{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){const s=null!==t?t.length:0,u=this.getByIndex(i).embeddedTView(n,s);u&&(u.indexInDeclarationView=i,null!==t?t.push(u):t=[u])}return null!==t?new Ab(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Ib{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Ib(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const u=i[s];this.matchTNodeWithReadOption(n,t,gk(t,u)),this.matchTNodeWithReadOption(n,t,kd(t,n,u,!1,!1))}else i===Zi?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,kd(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===Gn||s===Dl||s===Zi&&4&t.type)this.addMatch(t.index,-2);else{const u=kd(t,n,s,!1,!1);null!==u&&this.addMatch(t.index,u)}else this.addMatch(t.index,i)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function gk(e,n){const t=e.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1];return null}function _k(e,n,t,i){return-1===t?function mk(e,n){return 11&e.type?$a(e,n):4&e.type?Fv(e,n):null}(n,e):-2===t?function yk(e,n,t){return t===Gn?$a(n,e):t===Zi?Fv(n,e):t===Dl?Z2(n,e):void 0}(e,n,i):gl(e,e[St],t,n)}function X2(e,n,t,i){const s=n[ur].queries[i];if(null===s.matches){const u=e.data,m=t.matches,b=[];for(let M=0;M<m.length;M+=2){const P=m[M];b.push(P<0?null:_k(n,u[P],m[M+1],t.metadata.read))}s.matches=b}return s.matches}function kb(e,n,t,i){const s=e.queries.getByIndex(t),u=s.matches;if(null!==u){const m=X2(e,n,s,t);for(let b=0;b<u.length;b+=2){const M=u[b];if(M>0)i.push(m[b/2]);else{const P=u[b+1],I=n[-M];for(let U=bo;U<I.length;U++){const W=I[U];W[kc]===W[Ri]&&kb(W[St],W,P,i)}if(null!==I[Is]){const U=I[Is];for(let W=0;W<U.length;W++){const oe=U[W];kb(oe[St],oe,P,i)}}}}}return i}function yi(e){const n=Oe(),t=Nn(),i=T();D(i+1);const s=Q2(t,i);if(e.dirty&&function Zh(e){return 4==(4&e[Cn])}(n)===(2==(2&s.metadata.flags))){if(null===s.matches)e.reset([]);else{const u=s.crossesNgTemplate?kb(t,n,i,[]):X2(t,n,s,i);e.reset(u,Hx),e.notifyOnChanges()}return!0}return!1}function Ep(e,n,t){const i=Nn();i.firstCreatePass&&(Y2(i,new J2(e,n,t),-1),2==(2&n)&&(i.staticViewQueries=!0)),K2(i,Oe(),n)}function Ji(e,n,t,i){const s=Nn();if(s.firstCreatePass){const u=Ui();Y2(s,new J2(n,t,i),u.index),function xk(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(s,e),2==(2&t)&&(s.staticContentQueries=!0)}K2(s,Oe(),t)}function vi(){return function vk(e,n){return e[ur].queries[n].queryList}(Oe(),T())}function K2(e,n,t){const i=new Db(4==(4&t));sc(e,n,i,i.destroy),null===n[ur]&&(n[ur]=new Sb),n[ur].queries.push(new Eb(i))}function Y2(e,n,t){null===e.queries&&(e.queries=new Ab),e.queries.track(new Ib(n,t))}function Q2(e,n){return e.queries.getByIndex(n)}function Hs(e,n){return Fv(e,n)}function Bv(...e){}const zv=new qt("Application Initializer");let Vv=(()=>{class e{constructor(t){this.appInits=t,this.resolve=Bv,this.reject=Bv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const u=this.appInits[s]();if(Ai(u))t.push(u);else if(tr(u)){const m=new Promise((b,M)=>{u.subscribe({complete:b,error:M})});t.push(m)}}Promise.all(t).then(()=>{i()}).catch(s=>{this.reject(s)}),0===t.length&&i(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Dt(zv,8))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const n0=new qt("AppId",{providedIn:"root",factory:function _O(){return`${zb()}${zb()}${zb()}`}});function zb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yO=new qt("Platform Initializer"),o0=new qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Vk=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const el=new qt("LocaleId",{providedIn:"root",factory:()=>fn(el,Zt.Optional|Zt.SkipSelf)||function Uk(){return typeof $localize<"u"&&$localize.locale||Mg}()});class $k{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let vO=(()=>{class e{compileModuleSync(t){return new Mb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),u=Ga(Ir(t).declarations).reduce((m,b)=>{const M=Pn(b);return M&&m.push(new Cp(M)),m},[]);return new $k(i,u)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Wk=(()=>Promise.resolve(0))();function Vb(e){typeof Zone>"u"?Wk.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class ui{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zt(!1),this.onMicrotaskEmpty=new zt(!1),this.onStable=new zt(!1),this.onError=new zt(!1),typeof Zone>"u")throw new tt(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&t,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function qk(){let e=Ci.requestAnimationFrame,n=Ci.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Xk(e){const n=()=>{!function Jk(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ci,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,jb(e),e.isCheckStableRunning=!0,Ub(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),jb(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,s,u,m,b)=>{try{return wO(e),t.invokeTask(s,u,m,b)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===u.type||e.shouldCoalesceRunChangeDetection)&&n(),CO(e)}},onInvoke:(t,i,s,u,m,b,M)=>{try{return wO(e),t.invoke(s,u,m,b,M)}finally{e.shouldCoalesceRunChangeDetection&&n(),CO(e)}},onHasTask:(t,i,s,u)=>{t.hasTask(s,u),i===s&&("microTask"==u.change?(e._hasPendingMicrotasks=u.microTask,jb(e),Ub(e)):"macroTask"==u.change&&(e.hasPendingMacrotasks=u.macroTask))},onHandleError:(t,i,s,u)=>(t.handleError(s,u),e.runOutsideAngular(()=>e.onError.emit(u)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ui.isInAngularZone())throw new tt(909,!1)}static assertNotInAngularZone(){if(ui.isInAngularZone())throw new tt(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,s){const u=this._inner,m=u.scheduleEventTask("NgZoneEvent: "+s,n,Zk,Bv,Bv);try{return u.runTask(m,t,i)}finally{u.cancelTask(m)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const Zk={};function Ub(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function jb(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function wO(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function CO(e){e._nesting--,Ub(e)}class Kk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zt,this.onMicrotaskEmpty=new zt,this.onStable=new zt,this.onError=new zt}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,s){return n.apply(t,i)}}const MO=new qt(""),Uv=new qt("");let Hb,$b=(()=>{class e{constructor(t,i,s){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hb||(function Yk(e){Hb=e}(s),s.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ui.assertNotInAngularZone(),Vb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vb(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,s){let u=-1;i&&i>0&&(u=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==u),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:u,updateCb:s})}whenStable(t,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,s){return[]}}return e.\u0275fac=function(t){return new(t||e)(Dt(ui),Dt(Gb),Dt(Uv))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),Gb=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Hb?.findTestabilityInTree(this,t,i)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ju=!1;let fh=null;const OO=new qt("AllowMultipleToken"),Wb=new qt("PlatformDestroyListeners"),TO=new qt("appBootstrapListener");class DO{constructor(n,t){this.name=n,this.token=t}}function EO(e,n,t=[]){const i=`Platform: ${n}`,s=new qt(i);return(u=[])=>{let m=qb();if(!m||m.injector.get(OO,!1)){const b=[...t,...u,{provide:s,useValue:!0}];e?e(b):function tR(e){if(fh&&!fh.get(OO,!1))throw new tt(400,!1);fh=e;const n=e.get(AO);(function PO(e){const n=e.get(yO,null);n&&n.forEach(t=>t())})(e)}(function SO(e=[],n){return _r.create({name:n,providers:[{provide:l_,useValue:"platform"},{provide:Wb,useValue:new Set([()=>fh=null])},...e]})}(b,i))}return function iR(e){const n=qb();if(!n)throw new tt(401,!1);return n}()}}function qb(){return fh?.get(AO)??null}let AO=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const s=function kO(e,n){let t;return t="noop"===e?new Kk:("zone.js"===e?void 0:e)||new ui(n),t}(i?.ngZone,function IO(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),u=[{provide:ui,useValue:s}];return s.run(()=>{const m=_r.create({providers:u,parent:this.injector,name:t.moduleType.name}),b=t.create(m),M=b.injector.get(zu,null);if(!M)throw new tt(402,!1);return s.runOutsideAngular(()=>{const P=s.onError.subscribe({next:I=>{M.handleError(I)}});b.onDestroy(()=>{jv(this._modules,b),P.unsubscribe()})}),function RO(e,n,t){try{const i=t();return Ai(i)?i.catch(s=>{throw n.runOutsideAngular(()=>e.handleError(s)),s}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(M,s,()=>{const P=b.injector.get(Vv);return P.runInitializers(),P.donePromise.then(()=>(a2(b.injector.get(el,Mg)||Mg),this._moduleDoBootstrap(b),b))})})}bootstrapModule(t,i=[]){const s=NO({},i);return function Qk(e,n,t){const i=new Mb(t);return Promise.resolve(i)}(0,0,t).then(u=>this.bootstrapModuleFactory(u,s))}_moduleDoBootstrap(t){const i=t.injector.get(Eg);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new tt(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Wb,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Dt(_r))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function NO(e,n){return Array.isArray(n)?n.reduce(NO,e):{...e,...n}}let Eg=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,s){this._zone=t,this._injector=i,this._exceptionHandler=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new dn(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),m=new dn(b=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{ui.assertNotInAngularZone(),Vb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{ui.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{M.unsubscribe(),P.unsubscribe()}});this.isStable=Ts(u,m.pipe(function Ph(e={}){const{connector:n=(()=>new Hn),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=e;return u=>{let m,b,M,P=0,I=!1,U=!1;const W=()=>{b?.unsubscribe(),b=void 0},oe=()=>{W(),m=M=void 0,I=U=!1},be=()=>{const Te=m;oe(),Te?.unsubscribe()};return xi((Te,ze)=>{P++,!U&&!I&&W();const Ye=M=M??n();ze.add(()=>{P--,0===P&&!U&&!I&&(b=rd(be,s))}),Ye.subscribe(ze),!m&&P>0&&(m=new Ca({next:ht=>Ye.next(ht),error:ht=>{U=!0,W(),b=rd(oe,t,ht),Ye.error(ht)},complete:()=>{I=!0,W(),b=rd(oe,i),Ye.complete()}}),Ft(Te).subscribe(m))})(u)}}()))}bootstrap(t,i){const s=t instanceof h_;if(!this._injector.get(Vv).done){!s&&function Ia(e){const n=Pn(e)||go(e)||Jo(e);return null!==n&&n.standalone}(t);throw new tt(405,Ju)}let m;m=s?t:this._injector.get(Qd).resolveComponentFactory(t),this.componentTypes.push(m.componentType);const b=function eR(e){return e.isBoundToModule}(m)?void 0:this._injector.get(Tg),P=m.create(_r.NULL,[],i||m.selector,b),I=P.location.nativeElement,U=P.injector.get(MO,null);return U?.registerApplication(I),P.onDestroy(()=>{this.detachView(P.hostView),jv(this.components,P),U?.unregisterApplication(I)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new tt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;jv(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(TO,[]);i.push(...this._bootstrapListeners),i.forEach(s=>s(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new tt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Dt(ui),Dt(ja),Dt(zu))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function jv(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let xa=(()=>{class e{}return e.__NG_ELEMENT_ID__=rR,e})();function rR(e){return function sR(e,n,t){if(dl(e)&&!t){const i=hr(e.index,n);return new uh(i,i)}return 47&e.type?new uh(n[Xo],n):null}(Ui(),Oe(),16==(16&e))}class VO{constructor(){}supports(n){return k(n)}create(n){return new hR(n)}}const dR=(e,n)=>n;class hR{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||dR}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,s=0,u=null;for(;t||i;){const m=!i||t&&t.currentIndex<jO(i,s,u)?t:i,b=jO(m,s,u),M=m.currentIndex;if(m===i)s--,i=i._nextRemoved;else if(t=t._next,null==m.previousIndex)s++;else{u||(u=[]);const P=b-s,I=M-s;if(P!=I){for(let W=0;W<P;W++){const oe=W<u.length?u[W]:u[W]=0,be=oe+W;I<=be&&be<P&&(u[W]=oe+1)}u[m.previousIndex]=I-P}}b!==M&&n(m,b,M)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!k(n))throw new tt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s,u,m,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let b=0;b<this.length;b++)u=n[b],m=this._trackByFn(b,u),null!==t&&Object.is(t.trackById,m)?(i&&(t=this._verifyReinsertion(t,u,m,b)),Object.is(t.item,u)||this._addIdentityChange(t,u)):(t=this._mismatch(t,u,m,b),i=!0),t=t._next}else s=0,function L(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,b=>{m=this._trackByFn(s,b),null!==t&&Object.is(t.trackById,m)?(i&&(t=this._verifyReinsertion(t,b,m,s)),Object.is(t.item,b)||this._addIdentityChange(t,b)):(t=this._mismatch(t,b,m,s),i=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,s){let u;return null===n?u=this._itTail:(u=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,u,s)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,u,s)):n=this._addAfter(new pR(t,i),u,s),n}_verifyReinsertion(n,t,i,s){let u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==u?n=this._reinsertAfter(u,n._prev,s):n.currentIndex!=s&&(n.currentIndex=s,this._addToMoves(n,s)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const s=n._prevRemoved,u=n._nextRemoved;return null===s?this._removalsHead=u:s._nextRemoved=u,null===u?this._removalsTail=s:u._prevRemoved=s,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const s=null===t?this._itHead:t._next;return n._next=s,n._prev=t,null===s?this._itTail=n:s._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new UO),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new UO),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class pR{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fR{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class UO{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new fR,this.map.set(t,i)),i.add(n)}get(n,t){const s=this.map.get(n);return s?s.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jO(e,n,t){const i=e.previousIndex;if(null===i)return i;let s=0;return t&&i<t.length&&(s=t[i]),i+n+s}class $O{constructor(){}supports(n){return n instanceof Map||V(n)}create(){return new gR}}class gR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||V(n)))throw new tt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const u=this._getOrCreateRecordForKey(s,i);t=this._insertBeforeOrAppend(t,u)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const i=n._prev;return t._next=n,t._prev=i,n._prev=t,i&&(i._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const s=this._records.get(n);this._maybeAddToChanges(s,t);const u=s._prev,m=s._next;return u&&(u._next=m),m&&(m._prev=u),s._next=null,s._prev=null,s}const i=new mR(n);return this._records.set(n,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(i=>t(n[i],i))}}class mR{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GO(){return new Hv([new VO])}let Hv=(()=>{class e{constructor(t){this.factories=t}static create(t,i){if(null!=i){const s=i.factories.slice();t=t.concat(s)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||GO()),deps:[[e,new Di,new Nr]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(null!=i)return i;throw new tt(901,!1)}}return e.\u0275prov=yt({token:e,providedIn:"root",factory:GO}),e})();function HO(){return new r0([new $O])}let r0=(()=>{class e{constructor(t){this.factories=t}static create(t,i){if(i){const s=i.factories.slice();t=t.concat(s)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||HO()),deps:[[e,new Di,new Nr]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(i)return i;throw new tt(901,!1)}}return e.\u0275prov=yt({token:e,providedIn:"root",factory:HO}),e})();const vR=EO(null,"core",[]);let xR=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Dt(Eg))},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})();function Sg(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function Yb(e,n){const t=Pn(e),i=n.elementInjector||dp();return new Cp(t).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}let Qb=null;function Xu(){return Qb}class CR{}const Uo=new qt("DocumentToken");let ew=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return function MR(){return Dt(WO)}()},providedIn:"platform"}),e})();const OR=new qt("Location Initialized");let WO=(()=>{class e extends ew{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xu().getBaseHref(this._doc)}onPopState(t){const i=Xu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Xu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,s){qO()?this._history.pushState(t,i,s):this._location.hash=s}replaceState(t,i,s){qO()?this._history.replaceState(t,i,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Dt(Uo))},e.\u0275prov=yt({token:e,factory:function(){return function TR(){return new WO(Dt(Uo))}()},providedIn:"platform"}),e})();function qO(){return!!window.history.pushState}function tw(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function ZO(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Ku(e){return e&&"?"!==e[0]?"?"+e:e}let Ap=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return fn(XO)},providedIn:"root"}),e})();const JO=new qt("appBaseHref");let XO=(()=>{class e extends Ap{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??fn(Uo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tw(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ku(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,u){const m=this.prepareExternalUrl(s+Ku(u));this._platformLocation.pushState(t,i,m)}replaceState(t,i,s,u){const m=this.prepareExternalUrl(s+Ku(u));this._platformLocation.replaceState(t,i,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Dt(ew),Dt(JO,8))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),DR=(()=>{class e extends Ap{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=tw(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,u){let m=this.prepareExternalUrl(s+Ku(u));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(t,i,m)}replaceState(t,i,s,u){let m=this.prepareExternalUrl(s+Ku(u));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Dt(ew),Dt(JO,8))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),nw=(()=>{class e{constructor(t){this._subject=new zt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function SR(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(ZO(KO(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ku(i))}normalize(t){return e.stripTrailingSlash(function ER(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,KO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._locationStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ku(i)),s)}replaceState(t,i="",s=null){this._locationStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ku(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}}return e.normalizeQueryParams=Ku,e.joinWithSlash=tw,e.stripTrailingSlash=ZO,e.\u0275fac=function(t){return new(t||e)(Dt(Ap))},e.\u0275prov=yt({token:e,factory:function(){return function PR(){return new nw(Dt(Ap))}()},providedIn:"root"}),e})();function KO(e){return e.replace(/\/index.html$/,"")}var ba=(()=>((ba=ba||{})[ba.Decimal=0]="Decimal",ba[ba.Percent=1]="Percent",ba[ba.Currency=2]="Currency",ba[ba.Scientific=3]="Scientific",ba))(),so=(()=>((so=so||{})[so.Format=0]="Format",so[so.Standalone=1]="Standalone",so))(),Dn=(()=>((Dn=Dn||{})[Dn.Narrow=0]="Narrow",Dn[Dn.Abbreviated=1]="Abbreviated",Dn[Dn.Wide=2]="Wide",Dn[Dn.Short=3]="Short",Dn))(),yo=(()=>((yo=yo||{})[yo.Short=0]="Short",yo[yo.Medium=1]="Medium",yo[yo.Long=2]="Long",yo[yo.Full=3]="Full",yo))(),un=(()=>((un=un||{})[un.Decimal=0]="Decimal",un[un.Group=1]="Group",un[un.List=2]="List",un[un.PercentSign=3]="PercentSign",un[un.PlusSign=4]="PlusSign",un[un.MinusSign=5]="MinusSign",un[un.Exponential=6]="Exponential",un[un.SuperscriptingExponent=7]="SuperscriptingExponent",un[un.PerMille=8]="PerMille",un[un.Infinity=9]="Infinity",un[un.NaN=10]="NaN",un[un.TimeSeparator=11]="TimeSeparator",un[un.CurrencyDecimal=12]="CurrencyDecimal",un[un.CurrencyGroup=13]="CurrencyGroup",un))();function QO(e,n,t){const i=Gs(e),u=El([i[Nt.DayPeriodsFormat],i[Nt.DayPeriodsStandalone]],n);return El(u,t)}function eT(e,n,t){const i=Gs(e),u=El([i[Nt.DaysFormat],i[Nt.DaysStandalone]],n);return El(u,t)}function iw(e,n,t){const i=Gs(e),u=El([i[Nt.MonthsFormat],i[Nt.MonthsStandalone]],n);return El(u,t)}function Wv(e,n){return El(Gs(e)[Nt.DateFormat],n)}function qv(e,n){return El(Gs(e)[Nt.TimeFormat],n)}function Zv(e,n){return El(Gs(e)[Nt.DateTimeFormat],n)}function Pl(e,n){const t=Gs(e),i=t[Nt.NumberSymbols][n];if(typeof i>"u"){if(n===un.CurrencyDecimal)return t[Nt.NumberSymbols][un.Decimal];if(n===un.CurrencyGroup)return t[Nt.NumberSymbols][un.Group]}return i}function tT(e){if(!e[Nt.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Nt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function El(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new Error("Locale data API: locale data undefined")}function rw(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const VR=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,s0={},UR=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var br=(()=>((br=br||{})[br.Short=0]="Short",br[br.ShortGMT=1]="ShortGMT",br[br.Long=2]="Long",br[br.Extended=3]="Extended",br))(),mn=(()=>((mn=mn||{})[mn.FullYear=0]="FullYear",mn[mn.Month=1]="Month",mn[mn.Date=2]="Date",mn[mn.Hours=3]="Hours",mn[mn.Minutes=4]="Minutes",mn[mn.Seconds=5]="Seconds",mn[mn.FractionalSeconds=6]="FractionalSeconds",mn[mn.Day=7]="Day",mn))(),kn=(()=>((kn=kn||{})[kn.DayPeriods=0]="DayPeriods",kn[kn.Days=1]="Days",kn[kn.Months=2]="Months",kn[kn.Eras=3]="Eras",kn))();function nT(e,n,t,i){let s=function XR(e){if(rT(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[s,u=1,m=1]=e.split("-").map(b=>+b);return Jv(s,u-1,m)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let i;if(i=e.match(VR))return function KR(e){const n=new Date(0);let t=0,i=0;const s=e[8]?n.setUTCFullYear:n.setFullYear,u=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),i=Number(e[9]+e[11])),s.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const m=Number(e[4]||0)-t,b=Number(e[5]||0)-i,M=Number(e[6]||0),P=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return u.call(n,m,b,M,P),n}(i)}const n=new Date(e);if(!rT(n))throw new Error(`Unable to convert "${e}" into a date`);return n}(e);n=Yu(t,n)||n;let b,m=[];for(;n;){if(b=UR.exec(n),!b){m.push(n);break}{m=m.concat(b.slice(1));const I=m.pop();if(!I)break;n=I}}let M=s.getTimezoneOffset();i&&(M=oT(i,M),s=function JR(e,n,t){const i=t?-1:1,s=e.getTimezoneOffset();return function ZR(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,i*(oT(n,s)-s))}(s,i,!0));let P="";return m.forEach(I=>{const U=function qR(e){if(aw[e])return aw[e];let n;switch(e){case"G":case"GG":case"GGG":n=Xi(kn.Eras,Dn.Abbreviated);break;case"GGGG":n=Xi(kn.Eras,Dn.Wide);break;case"GGGGG":n=Xi(kn.Eras,Dn.Narrow);break;case"y":n=ir(mn.FullYear,1,0,!1,!0);break;case"yy":n=ir(mn.FullYear,2,0,!0,!0);break;case"yyy":n=ir(mn.FullYear,3,0,!1,!0);break;case"yyyy":n=ir(mn.FullYear,4,0,!1,!0);break;case"Y":n=Qv(1);break;case"YY":n=Qv(2,!0);break;case"YYY":n=Qv(3);break;case"YYYY":n=Qv(4);break;case"M":case"L":n=ir(mn.Month,1,1);break;case"MM":case"LL":n=ir(mn.Month,2,1);break;case"MMM":n=Xi(kn.Months,Dn.Abbreviated);break;case"MMMM":n=Xi(kn.Months,Dn.Wide);break;case"MMMMM":n=Xi(kn.Months,Dn.Narrow);break;case"LLL":n=Xi(kn.Months,Dn.Abbreviated,so.Standalone);break;case"LLLL":n=Xi(kn.Months,Dn.Wide,so.Standalone);break;case"LLLLL":n=Xi(kn.Months,Dn.Narrow,so.Standalone);break;case"w":n=sw(1);break;case"ww":n=sw(2);break;case"W":n=sw(1,!0);break;case"d":n=ir(mn.Date,1);break;case"dd":n=ir(mn.Date,2);break;case"c":case"cc":n=ir(mn.Day,1);break;case"ccc":n=Xi(kn.Days,Dn.Abbreviated,so.Standalone);break;case"cccc":n=Xi(kn.Days,Dn.Wide,so.Standalone);break;case"ccccc":n=Xi(kn.Days,Dn.Narrow,so.Standalone);break;case"cccccc":n=Xi(kn.Days,Dn.Short,so.Standalone);break;case"E":case"EE":case"EEE":n=Xi(kn.Days,Dn.Abbreviated);break;case"EEEE":n=Xi(kn.Days,Dn.Wide);break;case"EEEEE":n=Xi(kn.Days,Dn.Narrow);break;case"EEEEEE":n=Xi(kn.Days,Dn.Short);break;case"a":case"aa":case"aaa":n=Xi(kn.DayPeriods,Dn.Abbreviated);break;case"aaaa":n=Xi(kn.DayPeriods,Dn.Wide);break;case"aaaaa":n=Xi(kn.DayPeriods,Dn.Narrow);break;case"b":case"bb":case"bbb":n=Xi(kn.DayPeriods,Dn.Abbreviated,so.Standalone,!0);break;case"bbbb":n=Xi(kn.DayPeriods,Dn.Wide,so.Standalone,!0);break;case"bbbbb":n=Xi(kn.DayPeriods,Dn.Narrow,so.Standalone,!0);break;case"B":case"BB":case"BBB":n=Xi(kn.DayPeriods,Dn.Abbreviated,so.Format,!0);break;case"BBBB":n=Xi(kn.DayPeriods,Dn.Wide,so.Format,!0);break;case"BBBBB":n=Xi(kn.DayPeriods,Dn.Narrow,so.Format,!0);break;case"h":n=ir(mn.Hours,1,-12);break;case"hh":n=ir(mn.Hours,2,-12);break;case"H":n=ir(mn.Hours,1);break;case"HH":n=ir(mn.Hours,2);break;case"m":n=ir(mn.Minutes,1);break;case"mm":n=ir(mn.Minutes,2);break;case"s":n=ir(mn.Seconds,1);break;case"ss":n=ir(mn.Seconds,2);break;case"S":n=ir(mn.FractionalSeconds,1);break;case"SS":n=ir(mn.FractionalSeconds,2);break;case"SSS":n=ir(mn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=Kv(br.Short);break;case"ZZZZZ":n=Kv(br.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=Kv(br.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=Kv(br.Long);break;default:return null}return aw[e]=n,n}(I);P+=U?U(s,t,M):"''"===I?"'":I.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),P}function Jv(e,n,t){const i=new Date(0);return i.setFullYear(e,n,t),i.setHours(0,0,0),i}function Yu(e,n){const t=function AR(e){return Gs(e)[Nt.LocaleId]}(e);if(s0[t]=s0[t]||{},s0[t][n])return s0[t][n];let i="";switch(n){case"shortDate":i=Wv(e,yo.Short);break;case"mediumDate":i=Wv(e,yo.Medium);break;case"longDate":i=Wv(e,yo.Long);break;case"fullDate":i=Wv(e,yo.Full);break;case"shortTime":i=qv(e,yo.Short);break;case"mediumTime":i=qv(e,yo.Medium);break;case"longTime":i=qv(e,yo.Long);break;case"fullTime":i=qv(e,yo.Full);break;case"short":const s=Yu(e,"shortTime"),u=Yu(e,"shortDate");i=Xv(Zv(e,yo.Short),[s,u]);break;case"medium":const m=Yu(e,"mediumTime"),b=Yu(e,"mediumDate");i=Xv(Zv(e,yo.Medium),[m,b]);break;case"long":const M=Yu(e,"longTime"),P=Yu(e,"longDate");i=Xv(Zv(e,yo.Long),[M,P]);break;case"full":const I=Yu(e,"fullTime"),U=Yu(e,"fullDate");i=Xv(Zv(e,yo.Full),[I,U])}return i&&(s0[t][n]=i),i}function Xv(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,i){return null!=n&&i in n?n[i]:t})),e}function dc(e,n,t="-",i,s){let u="";(e<0||s&&e<=0)&&(s?e=1-e:(e=-e,u=t));let m=String(e);for(;m.length<n;)m="0"+m;return i&&(m=m.slice(m.length-n)),u+m}function ir(e,n,t=0,i=!1,s=!1){return function(u,m){let b=function $R(e,n){switch(e){case mn.FullYear:return n.getFullYear();case mn.Month:return n.getMonth();case mn.Date:return n.getDate();case mn.Hours:return n.getHours();case mn.Minutes:return n.getMinutes();case mn.Seconds:return n.getSeconds();case mn.FractionalSeconds:return n.getMilliseconds();case mn.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,u);if((t>0||b>-t)&&(b+=t),e===mn.Hours)0===b&&-12===t&&(b=12);else if(e===mn.FractionalSeconds)return function jR(e,n){return dc(e,3).substring(0,n)}(b,n);const M=Pl(m,un.MinusSign);return dc(b,n,M,i,s)}}function Xi(e,n,t=so.Format,i=!1){return function(s,u){return function GR(e,n,t,i,s,u){switch(t){case kn.Months:return iw(n,s,i)[e.getMonth()];case kn.Days:return eT(n,s,i)[e.getDay()];case kn.DayPeriods:const m=e.getHours(),b=e.getMinutes();if(u){const P=function NR(e){const n=Gs(e);return tT(n),(n[Nt.ExtraData][2]||[]).map(i=>"string"==typeof i?rw(i):[rw(i[0]),rw(i[1])])}(n),I=function FR(e,n,t){const i=Gs(e);tT(i);const u=El([i[Nt.ExtraData][0],i[Nt.ExtraData][1]],n)||[];return El(u,t)||[]}(n,s,i),U=P.findIndex(W=>{if(Array.isArray(W)){const[oe,be]=W,Te=m>=oe.hours&&b>=oe.minutes,ze=m<be.hours||m===be.hours&&b<be.minutes;if(oe.hours<be.hours){if(Te&&ze)return!0}else if(Te||ze)return!0}else if(W.hours===m&&W.minutes===b)return!0;return!1});if(-1!==U)return I[U]}return QO(n,s,i)[m<12?0:1];case kn.Eras:return function IR(e,n){return El(Gs(e)[Nt.Eras],n)}(n,i)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,u,e,n,t,i)}}function Kv(e){return function(n,t,i){const s=-1*i,u=Pl(t,un.MinusSign),m=s>0?Math.floor(s/60):Math.ceil(s/60);switch(e){case br.Short:return(s>=0?"+":"")+dc(m,2,u)+dc(Math.abs(s%60),2,u);case br.ShortGMT:return"GMT"+(s>=0?"+":"")+dc(m,1,u);case br.Long:return"GMT"+(s>=0?"+":"")+dc(m,2,u)+":"+dc(Math.abs(s%60),2,u);case br.Extended:return 0===i?"Z":(s>=0?"+":"")+dc(m,2,u)+":"+dc(Math.abs(s%60),2,u);default:throw new Error(`Unknown zone width "${e}"`)}}}const HR=0,Yv=4;function iT(e){return Jv(e.getFullYear(),e.getMonth(),e.getDate()+(Yv-e.getDay()))}function sw(e,n=!1){return function(t,i){let s;if(n){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,m=t.getDate();s=1+Math.floor((m+u)/7)}else{const u=iT(t),m=function WR(e){const n=Jv(e,HR,1).getDay();return Jv(e,0,1+(n<=Yv?Yv:Yv+7)-n)}(u.getFullYear()),b=u.getTime()-m.getTime();s=1+Math.round(b/6048e5)}return dc(s,e,Pl(i,un.MinusSign))}}function Qv(e,n=!1){return function(t,i){return dc(iT(t).getFullYear(),e,Pl(i,un.MinusSign),n)}}const aw={};function oT(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function rT(e){return e instanceof Date&&!isNaN(e.valueOf())}const YR=/^(\d+)?\.((\d+)(-(\d+))?)?$/,sT=22,e1=".",a0="0",QR=";",e3=",",lw="#";function dw(e){const n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}const pw=/\s+/,cT=[];let Ag=(()=>{class e{constructor(t,i,s,u){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=s,this._renderer=u,this.initialClasses=cT,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(pw):cT}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(pw):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,Boolean(t[i]));this._applyStateDiff()}_updateState(t,i){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],s=t[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(pw).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return e.\u0275fac=function(t){return new(t||e)(ye(Hv),ye(r0),ye(Gn),ye(es))},e.\u0275dir=vt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class d3{constructor(n,t,i,s){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ns=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((s,u,m)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new d3(s.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)i.remove(null===u?void 0:u);else if(null!==u){const b=i.get(u);i.move(b,m),hT(b,s)}});for(let s=0,u=i.length;s<u;s++){const b=i.get(s).context;b.index=s,b.count=u,b.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{hT(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,i){return!0}}return e.\u0275fac=function(t){return new(t||e)(ye(Dl),ye(Zi),ye(Hv))},e.\u0275dir=vt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function hT(e,n){e.context.$implicit=n.item}let Lr=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new p3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return e.\u0275fac=function(t){return new(t||e)(ye(Dl),ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class p3{constructor(){this.$implicit=null,this.ngIf=null}}function pT(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Lt(n)}'.`)}let Qu=(()=>{class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:u,ngTemplateOutletInjector:m}=this;this._viewRef=i.createEmbeddedView(s,u,m?{injector:m}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return e.\u0275fac=function(t){return new(t||e)(ye(Dl))},e.\u0275dir=vt({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[gi]}),e})();let mT=(()=>{class e{constructor(t){this._locale=t}transform(t,i,s){if(!function mw(e){return!(null==e||""===e||e!=e)}(t))return null;s=s||this._locale;try{return function i3(e,n,t){return function cw(e,n,t,i,s,u,m=!1){let b="",M=!1;if(isFinite(e)){let P=function s3(e){let i,s,u,m,b,n=Math.abs(e)+"",t=0;for((s=n.indexOf(e1))>-1&&(n=n.replace(e1,"")),(u=n.search(/e/i))>0?(s<0&&(s=u),s+=+n.slice(u+1),n=n.substring(0,u)):s<0&&(s=n.length),u=0;n.charAt(u)===a0;u++);if(u===(b=n.length))i=[0],s=1;else{for(b--;n.charAt(b)===a0;)b--;for(s-=u,i=[],m=0;u<=b;u++,m++)i[m]=Number(n.charAt(u))}return s>sT&&(i=i.splice(0,sT-1),t=s-1,s=1),{digits:i,exponent:t,integerLen:s}}(e);m&&(P=function r3(e){if(0===e.digits[0])return e;const n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(P));let I=n.minInt,U=n.minFrac,W=n.maxFrac;if(u){const ht=u.match(YR);if(null===ht)throw new Error(`${u} is not a valid digit info`);const We=ht[1],Ot=ht[3],Vt=ht[5];null!=We&&(I=dw(We)),null!=Ot&&(U=dw(Ot)),null!=Vt?W=dw(Vt):null!=Ot&&U>W&&(W=U)}!function a3(e,n,t){if(n>t)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${t}).`);let i=e.digits,s=i.length-e.integerLen;const u=Math.min(Math.max(n,s),t);let m=u+e.integerLen,b=i[m];if(m>0){i.splice(Math.max(e.integerLen,m));for(let U=m;U<i.length;U++)i[U]=0}else{s=Math.max(0,s),e.integerLen=1,i.length=Math.max(1,m=u+1),i[0]=0;for(let U=1;U<m;U++)i[U]=0}if(b>=5)if(m-1<0){for(let U=0;U>m;U--)i.unshift(0),e.integerLen++;i.unshift(1),e.integerLen++}else i[m-1]++;for(;s<Math.max(0,u);s++)i.push(0);let M=0!==u;const P=n+e.integerLen,I=i.reduceRight(function(U,W,oe,be){return be[oe]=(W+=U)<10?W:W-10,M&&(0===be[oe]&&oe>=P?be.pop():M=!1),W>=10?1:0},0);I&&(i.unshift(I),e.integerLen++)}(P,U,W);let oe=P.digits,be=P.integerLen;const Te=P.exponent;let ze=[];for(M=oe.every(ht=>!ht);be<I;be++)oe.unshift(0);for(;be<0;be++)oe.unshift(0);be>0?ze=oe.splice(be,oe.length):(ze=oe,oe=[0]);const Ye=[];for(oe.length>=n.lgSize&&Ye.unshift(oe.splice(-n.lgSize,oe.length).join(""));oe.length>n.gSize;)Ye.unshift(oe.splice(-n.gSize,oe.length).join(""));oe.length&&Ye.unshift(oe.join("")),b=Ye.join(Pl(t,i)),ze.length&&(b+=Pl(t,s)+ze.join("")),Te&&(b+=Pl(t,un.Exponential)+"+"+Te)}else b=Pl(t,un.Infinity);return b=e<0&&!M?n.negPre+b+n.negSuf:n.posPre+b+n.posSuf,b}(e,function uw(e,n="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=e.split(QR),s=i[0],u=i[1],m=-1!==s.indexOf(e1)?s.split(e1):[s.substring(0,s.lastIndexOf(a0)+1),s.substring(s.lastIndexOf(a0)+1)],b=m[0],M=m[1]||"";t.posPre=b.substring(0,b.indexOf(lw));for(let I=0;I<M.length;I++){const U=M.charAt(I);U===a0?t.minFrac=t.maxFrac=I+1:U===lw?t.maxFrac=I+1:t.posSuf+=U}const P=b.split(e3);if(t.gSize=P[1]?P[1].length:0,t.lgSize=P[2]||P[1]?(P[2]||P[1]).length:0,u){const I=s.length-t.posPre.length-t.posSuf.length,U=u.indexOf(lw);t.negPre=u.substring(0,U).replace(/'/g,""),t.negSuf=u.slice(U+I).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}(function ow(e,n){return Gs(e)[Nt.NumberFormats][n]}(n,ba.Percent),Pl(n,un.MinusSign)),n,un.Group,un.Decimal,t,!0).replace(new RegExp("%","g"),Pl(n,un.PercentSign))}(function _w(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(t),s,i)}catch(u){throw function hc(e,n){return new tt(2100,!1)}()}}}return e.\u0275fac=function(t){return new(t||e)(ye(el,16))},e.\u0275pipe=Zo({name:"percent",type:e,pure:!0,standalone:!0}),e})();let _T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})();const yT="browser",z3="server";function vT(e){return e===z3}let $3=(()=>{class e{}return e.\u0275prov=yt({token:e,providedIn:"root",factory:()=>new G3(Dt(Uo),window)}),e})();class G3{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function H3(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const u=s.shadowRoot;if(u){const m=u.getElementById(n)||u.querySelector(`[name="${n}"]`);if(m)return m}s=i.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(i-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=xT(this.window.history)||xT(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xT(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class vN extends CR{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xw extends vN{static makeCurrent(){!function wR(e){Qb||(Qb=e)}(new xw)}onAndCancel(n,t,i){return n.addEventListener(t,i,!1),()=>{n.removeEventListener(t,i,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function xN(){return c0=c0||document.querySelector("base"),c0?c0.getAttribute("href"):null}();return null==t?null:function bN(e){i1=i1||document.createElement("a"),i1.setAttribute("href",e);const n=i1.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){c0=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function c3(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[s,u]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===n)return decodeURIComponent(u)}return null}(document.cookie,n)}}let i1,c0=null;const OT=new qt("TRANSITION_ID"),CN=[{provide:zv,useFactory:function wN(e,n,t){return()=>{t.get(Vv).donePromise.then(()=>{const i=Xu(),s=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let u=0;u<s.length;u++)i.remove(s[u])})}},deps:[OT,Uo,_r],multi:!0}];let ON=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();const o1=new qt("EventManagerPlugins");let r1=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}addGlobalEventListener(t,i,s){return this._findPluginFor(i).addGlobalEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const s=this._plugins;for(let u=0;u<s.length;u++){const m=s[u];if(m.supports(t))return this._eventNameToPlugin.set(t,m),m}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Dt(o1),Dt(ui))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();class TT{constructor(n){this._doc=n}addGlobalEventListener(n,t,i){const s=Xu().getGlobalEventTarget(this._doc,n);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,i)}}let DT=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const s=this.usageCount;let u=s.get(t)??0;return u+=i,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),u0=(()=>{class e extends DT{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(u=>u.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const s=this.doc.createElement("style");s.textContent=i,t.appendChild(s);const u=this.styleRef.get(i);u?u.push(s):this.styleRef.set(i,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return e.\u0275fac=function(t){return new(t||e)(Dt(Uo))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();const bw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ww=/%COMP%/g,ST=new qt("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function AT(e,n){return n.flat(100).map(t=>t.replace(ww,e))}function IT(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let Cw=(()=>{class e{constructor(t,i,s,u){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Mw(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,i);return s instanceof NT?s.applyToHost(t):s instanceof Ow&&s.applyStyles(),s}getOrCreateRenderer(t,i){const s=this.rendererByCompId;let u=s.get(i.id);if(!u){const m=this.eventManager,b=this.sharedStylesHost,M=this.removeStylesOnCompDestory;switch(i.encapsulation){case ds.Emulated:u=new NT(m,b,i,this.appId,M);break;case ds.ShadowDom:return new IN(m,b,t,i);default:u=new Ow(m,b,i,M)}u.onDestroy=()=>s.delete(i.id),s.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Dt(r1),Dt(u0),Dt(n0),Dt(ST))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();class Mw{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(bw[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(RT(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(RT(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,s){if(s){t=s+":"+t;const u=bw[s];u?n.setAttributeNS(u,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const s=bw[i];s?n.removeAttributeNS(s,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,s){s&(Bo.DashCase|Bo.Important)?n.style.setProperty(t,i,s&Bo.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&Bo.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n[t]=i}setValue(n,t){n.nodeValue=t}listen(n,t,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,IT(i)):this.eventManager.addEventListener(n,t,IT(i))}}function RT(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class IN extends Mw{constructor(n,t,i,s){super(n),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=AT(s.id,s.styles);for(const m of u){const b=document.createElement("style");b.textContent=m,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ow extends Mw{constructor(n,t,i,s,u=i.id){super(n),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=AT(u,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class NT extends Ow{constructor(n,t,i,s,u){const m=s+"-"+i.id;super(n,t,i,u,m),this.contentAttr=function EN(e){return"_ngcontent-%COMP%".replace(ww,e)}(m),this.hostAttr=function SN(e){return"_nghost-%COMP%".replace(ww,e)}(m)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}let kN=(()=>{class e extends TT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}}return e.\u0275fac=function(t){return new(t||e)(Dt(Uo))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();const FT=["alt","control","meta","shift"],RN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NN={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let FN=(()=>{class e extends TT{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,s){const u=e.parseEventName(i),m=e.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xu().onAndCancel(t,u.domEventName,m))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const u=e._normalizeKey(i.pop());let m="",b=i.indexOf("code");if(b>-1&&(i.splice(b,1),m="code."),FT.forEach(P=>{const I=i.indexOf(P);I>-1&&(i.splice(I,1),m+=P+".")}),m+=u,0!=i.length||0===u.length)return null;const M={};return M.domEventName=s,M.fullKey=m,M}static matchEventFullKeyCode(t,i){let s=RN[t.key]||t.key,u="";return i.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),FT.forEach(m=>{m!==s&&(0,NN[m])(t)&&(u+=m+".")}),u+=s,u===i)}static eventCallback(t,i,s){return u=>{e.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>i(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Dt(Uo))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();const VN=EO(vR,"browser",[{provide:o0,useValue:yT},{provide:yO,useValue:function LN(){xw.makeCurrent()},multi:!0},{provide:Uo,useFactory:function zN(){return function ro(e){$m=e}(document),document},deps:[]}]),zT=new qt(""),VT=[{provide:Uv,useClass:class MN{addToWindow(n){Ci.getAngularTestability=(i,s=!0)=>{const u=n.findTestabilityInTree(i,s);if(null==u)throw new Error("Could not find testability for element.");return u},Ci.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ci.getAllAngularRootElements=()=>n.getAllRootElements(),Ci.frameworkStabilizers||(Ci.frameworkStabilizers=[]),Ci.frameworkStabilizers.push(i=>{const s=Ci.getAllAngularTestabilities();let u=s.length,m=!1;const b=function(M){m=m||M,u--,0==u&&i(m)};s.forEach(function(M){M.whenStable(b)})})}findTestabilityInTree(n,t,i){return null==t?null:n.getTestability(t)??(i?Xu().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:MO,useClass:$b,deps:[ui,Gb,Uv]},{provide:$b,useClass:$b,deps:[ui,Gb,Uv]}],UT=[{provide:l_,useValue:"root"},{provide:zu,useFactory:function BN(){return new zu},deps:[]},{provide:o1,useClass:kN,multi:!0,deps:[Uo,ui,o0]},{provide:o1,useClass:FN,multi:!0,deps:[Uo]},{provide:Cw,useClass:Cw,deps:[r1,u0,n0,ST]},{provide:p_,useExisting:Cw},{provide:DT,useExisting:u0},{provide:u0,useClass:u0,deps:[Uo]},{provide:r1,useClass:r1,deps:[o1,ui]},{provide:class W3{},useClass:ON,deps:[]},[]];let UN=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:n0,useValue:t.appId},{provide:OT,useExisting:n0},CN]}}}return e.\u0275fac=function(t){return new(t||e)(Dt(zT,12))},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({providers:[...UT,...VT],imports:[_T,xR]}),e})(),jT=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Dt(Uo))},e.\u0275prov=yt({token:e,factory:function(t){let i=null;return i=t?new t:function $N(){return new jT(Dt(Uo))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;const{isArray:JN}=Array,{getPrototypeOf:XN,prototype:KN,keys:YN}=Object;const{isArray:eF}=Array;function Pw(e){return Ct(n=>function tF(e,n){return eF(n)?e(...n):e(n)}(e,n))}const qs=new qt("NgValueAccessor"),rL=["*"];let kg=(()=>{class e{constructor(t,i,s){this.el=t,this.zone=i,this.platformId=s,this.afterChange=new zt,this.beforeChange=new zt,this.breakpoint=new zt,this.destroy=new zt,this.init=new zt,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!vT(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const t=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===t?this.unslick():(this._addedSlides.forEach(i=>{this.slides.push(i),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",i.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(i=>{const s=this.slides.indexOf(i);this.slides=this.slides.filter(u=>u!==i),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",s)})}),this._removedSlides=[]):t>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(t,i)=>{this.zone.run(()=>{this.init.emit({event:t,slick:i})})}),this.$instance.slick(this.config),this.zone.run(()=>{this.initialized=!0,this.currentIndex=this.config?.initialSlide||0}),this.$instance.on("afterChange",(t,i,s)=>{this.zone.run(()=>{this.afterChange.emit({event:t,slick:i,currentSlide:s,first:0===s,last:i.$slides.length===s+i.options.slidesToScroll}),this.currentIndex=s})}),this.$instance.on("beforeChange",(t,i,s,u)=>{this.zone.run(()=>{this.beforeChange.emit({event:t,slick:i,currentSlide:s,nextSlide:u}),this.currentIndex=u})}),this.$instance.on("breakpoint",(t,i,s)=>{this.zone.run(()=>{this.breakpoint.emit({event:t,slick:i,breakpoint:s})})}),this.$instance.on("destroy",(t,i)=>{this.zone.run(()=>{this.destroy.emit({event:t,slick:i}),this.initialized=!1})})})}addSlide(t){this._addedSlides.push(t)}removeSlide(t){this._removedSlides.push(t)}slickGoTo(t){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",t)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(t){if(this.initialized){const i=t.config;if(i.previousValue!==i.currentValue&&void 0!==i.currentValue){const s=i.currentValue.refresh,u=Object.assign({},i.currentValue);delete u.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",u,s)})}}}}return e.\u0275fac=function(t){return new(t||e)(ye(Gn),ye(ui),ye(o0))},e.\u0275cmp=zn({type:e,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[Pi([{provide:qs,useExisting:Ht(()=>e),multi:!0}]),gi],ngContentSelectors:rL,decls:1,vars:0,template:function(t,i){1&t&&(Ml(),Zu(0))},encapsulation:2}),e})(),m0=(()=>{class e{constructor(t,i,s,u){this.el=t,this.renderer=i,this.platformId=s,this.carousel=u}ngOnInit(){this.carousel.addSlide(this),vT(this.platformId)&&this.carousel.slides.length>0&&this.renderer.setStyle(this.el,"display","none")}ngOnDestroy(){this.carousel.removeSlide(this)}}return e.\u0275fac=function(t){return new(t||e)(ye(Gn),ye(es),ye(o0),ye(kg,1))},e.\u0275dir=vt({type:e,selectors:[["","ngxSlickItem",""]]}),e})(),sL=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[_T]}),e})();function tn(...e){return to(e,Er(e))}const aL=["addListener","removeListener"],lL=["addEventListener","removeEventListener"],cL=["on","off"];function os(e,n,t,i){if(Ln(t)&&(i=t,t=void 0),i)return os(e,n,t).pipe(Pw(i));const[s,u]=function hL(e){return Ln(e.addEventListener)&&Ln(e.removeEventListener)}(e)?lL.map(m=>b=>e[m](n,b,t)):function uL(e){return Ln(e.addListener)&&Ln(e.removeListener)}(e)?aL.map(XD(e,n)):function dL(e){return Ln(e.on)&&Ln(e.off)}(e)?cL.map(XD(e,n)):[];if(!s&&ve(e))return ki(m=>os(m,n,t))(Ft(e));if(!s)throw new TypeError("Invalid event target");return new dn(m=>{const b=(...M)=>m.next(1<M.length?M:M[0]);return s(b),()=>u(b)})}function XD(e,n){return t=>i=>e[t](n,i)}class pL extends Xe{constructor(n,t){super()}schedule(n,t=0){return this}}const g1={setInterval(e,n,...t){const{delegate:i}=g1;return i?.setInterval?i.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=g1;return(n?.clearInterval||clearInterval)(e)},delegate:void 0},KD={now:()=>(KD.delegate||Date).now(),delegate:void 0};class _0{constructor(n,t=_0.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,i){return new this.schedulerActionCtor(this,n).schedule(i,t)}}_0.now=KD.now;const mL=new class gL extends _0{constructor(n,t=_0.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,i){for(;n=t.shift();)n.unsubscribe();throw i}}}(class fL extends pL{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var i;if(this.closed)return this;this.state=n;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(u,this.id,t),this}requestAsyncId(n,t,i=0){return g1.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&g1.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let s,i=!1;try{this.work(n)}catch(u){i=!0,s=u||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,p(i,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}});function Kw(e=0,n,t=mL){let i=-1;return null!=n&&(wc(n)?t=n:i=n),new dn(s=>{let u=function _L(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;u<0&&(u=0);let m=0;return t.schedule(function(){s.closed||(s.next(m++),0<=i?this.schedule(void 0,i):s.complete())},u)})}const{isArray:yL}=Array;function QD(e){return 1===e.length&&yL(e[0])?e[0]:e}class Br extends Hn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function m1(...e){const n=Er(e),t=Ll(e),{args:i,keys:s}=function HT(e){if(1===e.length){const n=e[0];if(JN(n))return{args:n,keys:null};if(function QN(e){return e&&"object"==typeof e&&XN(e)===KN}(n)){const t=YN(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}(e);if(0===i.length)return to([],n);const u=new dn(function xL(e,n,t=ar){return i=>{tP(n,()=>{const{length:s}=e,u=new Array(s);let m=s,b=s;for(let M=0;M<s;M++)tP(n,()=>{const P=to(e[M],n);let I=!1;P.subscribe(Wn(i,U=>{u[M]=U,I||(I=!0,b--),b||i.next(t(u.slice()))},()=>{--m||i.complete()}))},i)},i)}}(i,n,s?m=>function WT(e,n){return e.reduce((t,i,s)=>(t[i]=n[s],t),{})}(s,m):ar));return t?u.pipe(Pw(t)):u}function tP(e,n,t){e?Ti(t,e,n):n()}const nP=new dn(Go);function _1(...e){const n=Ll(e),t=QD(e);return t.length?new dn(i=>{let s=t.map(()=>[]),u=t.map(()=>!1);i.add(()=>{s=u=null});for(let m=0;!i.closed&&m<t.length;m++)Ft(t[m]).subscribe(Wn(i,b=>{if(s[m].push(b),s.every(M=>M.length)){const M=s.map(P=>P.shift());i.next(n?n(...M):M),s.some((P,I)=>!P.length&&u[I])&&i.complete()}},()=>{u[m]=!0,!s[m].length&&i.complete()}));return()=>{s=u=null}}):Gr}function y0(...e){return function bL(){return bc(1)}()(to(e,Er(e)))}function So(e){return xi((n,t)=>{Ft(e).subscribe(Wn(t,()=>t.complete(),Go)),!t.closed&&n.subscribe(t)})}function zr(e,n){return xi((t,i)=>{let s=0;t.subscribe(Wn(i,u=>e.call(n,u,s++)&&i.next(u)))})}function or(e){return e<=0?()=>Gr:xi((n,t)=>{let i=0;n.subscribe(Wn(t,s=>{++i<=e&&(t.next(s),e<=i&&t.complete())}))})}function y1(...e){const n=Er(e);return xi((t,i)=>{(n?y0(e,t,n):y0(e,t)).subscribe(i)})}function Yw(e,n=ar){return e=e??CL,xi((t,i)=>{let s,u=!0;t.subscribe(Wn(i,m=>{const b=n(m);(u||!e(s,b))&&(u=!1,s=b,i.next(m))}))})}function CL(e,n){return e===n}function Sl(e,n){return xi((t,i)=>{let s=null,u=0,m=!1;const b=()=>m&&!s&&i.complete();t.subscribe(Wn(i,M=>{s?.unsubscribe();let P=0;const I=u++;Ft(e(M,I)).subscribe(s=Wn(i,U=>i.next(n?n(M,U,I,P++):U),()=>{s=null,b()}))},()=>{m=!0,b()}))})}function Vr(e,n,t){const i=Ln(e)||n||t?{next:e,error:n,complete:t}:e;return i?xi((s,u)=>{var m;null===(m=i.subscribe)||void 0===m||m.call(i);let b=!0;s.subscribe(Wn(u,M=>{var P;null===(P=i.next)||void 0===P||P.call(i,M),u.next(M)},()=>{var M;b=!1,null===(M=i.complete)||void 0===M||M.call(i),u.complete()},M=>{var P;b=!1,null===(P=i.error)||void 0===P||P.call(i,M),u.error(M)},()=>{var M,P;b&&(null===(M=i.unsubscribe)||void 0===M||M.call(i)),null===(P=i.finalize)||void 0===P||P.call(i)}))}):ar}function Qw(...e){const n=Ll(e);return xi((t,i)=>{const s=e.length,u=new Array(s);let m=e.map(()=>!1),b=!1;for(let M=0;M<s;M++)Ft(e[M]).subscribe(Wn(i,P=>{u[M]=P,!b&&!m[M]&&(m[M]=!0,(b=m.every(ar))&&(m=null))},Go));t.subscribe(Wn(i,M=>{if(b){const P=[M,...u];i.next(n?n(...P):P)}}))})}function S5(e,n){}function A5(e,n){if(1&e&&(G(0,"button",3),Ve(1),_e(2,S5,0,0,"ng-template",4),J()),2&e){const t=n.$implicit;de("ngbPanelToggle",t),re(1),oi(" ",t.title," "),re(1),de("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function I5(e,n){}function k5(e,n){}function R5(e,n){if(1&e){const t=At();G(0,"div",8),Ke("ngbRef",function(s){return Wt(t),Gt(it().$implicit.panelDiv=s)}),G(1,"div",9),_e(2,k5,0,0,"ng-template",4),J()()}if(2&e){const t=it().$implicit;po("id",t.id),we("aria-labelledby",t.id+"-header"),re(2),de("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const N5=function(e,n){return{$implicit:e,opened:n}};function F5(e,n){if(1&e&&(G(0,"div")(1,"div",5),_e(2,I5,0,0,"ng-template",6),J(),_e(3,R5,3,3,"div",7),J()),2&e){const t=n.$implicit,i=it(),s=rn(1);hh("accordion-item "+(t.cardClass||"")),re(1),hh("accordion-header "+(t.type?"bg-"+t.type:i.type?"bg-"+i.type:"")),Ol("id","",t.id,"-header"),re(1),de("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||s)("ngTemplateOutletContext",Y_(8,N5,t,t.isOpen)),re(1),de("ngIf",!i.destroyOnHide||t.isOpen||t.transitionRunning)}}function L5(e,n){if(1&e){const t=At();G(0,"button",1),Ke("click",function(){return Wt(t),Gt(it().close())}),J()}}const C1=["*"];function B5(e,n){if(1&e){const t=At();G(0,"button",6),Ke("click",function(){const u=Wt(t).$implicit,m=it();return m.focus(),Gt(m.select(u.id,m.NgbSlideEventSource.INDICATOR))}),J()}if(2&e){const t=n.$implicit,i=it();xn("active",t.id===i.activeId),we("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===i.activeId)}}function z5(e,n){}function V5(e,n){if(1&e&&(G(0,"div",7)(1,"span",8),ts(2,9),J(),_e(3,z5,0,0,"ng-template",10),J()),2&e){const t=n.$implicit,i=n.index,s=n.count;de("id","slide-"+t.id),re(2),Og(i+1)(s),K_(2),re(1),de("ngTemplateOutlet",t.tplRef)}}function U5(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){return Wt(t),Gt(it().arrowLeft())}),Ie(1,"span",12),G(2,"span",8),ts(3,13),J()()}}function j5(e,n){if(1&e){const t=At();G(0,"button",14),Ke("click",function(){return Wt(t),Gt(it().arrowRight())}),Ie(1,"span",15),G(2,"span",8),ts(3,16),J()()}}const $5=["ngbDatepickerDayView",""],G5=["month"],H5=["year"];function W5(e,n){if(1&e&&(G(0,"option",5),Ve(1),J()),2&e){const t=n.$implicit,i=it();de("value",t),we("aria-label",i.i18n.getMonthFullName(t,i.date.year)),re(1),fi(i.i18n.getMonthShortName(t,i.date.year))}}function q5(e,n){if(1&e&&(G(0,"option",5),Ve(1),J()),2&e){const t=n.$implicit,i=it();de("value",t),re(1),fi(i.i18n.getYearNumerals(t))}}function Z5(e,n){if(1&e){const t=At();G(0,"ngb-datepicker-navigation-select",7),Ke("select",function(s){return Wt(t),Gt(it().select.emit(s))}),J()}if(2&e){const t=it();de("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function J5(e,n){1&e&&Ie(0,"div",0)}function X5(e,n){1&e&&Ie(0,"div",0)}function K5(e,n){if(1&e&&(_e(0,J5,1,0,"div",9),G(1,"div",10),Ve(2),J(),_e(3,X5,1,0,"div",9)),2&e){const t=n.$implicit,i=n.index,s=it(2);de("ngIf",i>0),re(2),oi(" ",s.i18n.getMonthLabel(t.firstDate)," "),re(1),de("ngIf",i!==s.months.length-1)}}function Y5(e,n){1&e&&_e(0,K5,4,3,"ng-template",8),2&e&&de("ngForOf",it().months)}function Q5(e,n){if(1&e&&(G(0,"div",5),Ve(1),J()),2&e){const t=it(2);re(1),fi(t.i18n.getWeekLabel())}}function eB(e,n){if(1&e&&(G(0,"div",6),Ve(1),J()),2&e){const t=n.$implicit;re(1),fi(t)}}function tB(e,n){if(1&e&&(G(0,"div",2),_e(1,Q5,2,1,"div",3),_e(2,eB,2,1,"div",4),J()),2&e){const t=it();re(1),de("ngIf",t.datepicker.showWeekNumbers),re(1),de("ngForOf",t.viewModel.weekdays)}}function nB(e,n){if(1&e&&(G(0,"div",11),Ve(1),J()),2&e){const t=it(2).$implicit,i=it();re(1),fi(i.i18n.getWeekNumerals(t.number))}}function iB(e,n){}function oB(e,n){if(1&e&&_e(0,iB,0,0,"ng-template",14),2&e){const t=it().$implicit;de("ngTemplateOutlet",it(3).datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function rB(e,n){if(1&e){const t=At();G(0,"div",12),Ke("click",function(s){const m=Wt(t).$implicit;return it(3).doSelect(m),Gt(s.preventDefault())}),_e(1,oB,1,2,"ng-template",13),J()}if(2&e){const t=n.$implicit;xn("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),de("tabindex",t.tabindex),we("aria-label",t.ariaLabel),re(1),de("ngIf",!t.hidden)}}function sB(e,n){if(1&e&&(G(0,"div",8),_e(1,nB,2,1,"div",9),_e(2,rB,2,9,"div",10),J()),2&e){const t=it().$implicit,i=it();re(1),de("ngIf",i.datepicker.showWeekNumbers),re(1),de("ngForOf",t.days)}}function aB(e,n){1&e&&_e(0,sB,3,2,"div",7),2&e&&de("ngIf",!n.$implicit.collapsed)}const lB=["defaultDayTemplate"],cB=["content"];function uB(e,n){if(1&e&&Ie(0,"div",8),2&e){const i=n.currentMonth,s=n.selected,u=n.disabled,m=n.focused;de("date",n.date)("currentMonth",i)("selected",s)("disabled",u)("focused",m)}}function dB(e,n){if(1&e&&(G(0,"div",13),Ve(1),J()),2&e){const t=it().$implicit,i=it(2);re(1),oi(" ",i.i18n.getMonthLabel(t.firstDate)," ")}}function hB(e,n){if(1&e&&(G(0,"div",10),_e(1,dB,2,1,"div",11),Ie(2,"ngb-datepicker-month",12),J()),2&e){const t=n.$implicit,i=it(2);re(1),de("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),re(1),de("month",t.firstDate)}}function pB(e,n){1&e&&_e(0,hB,3,2,"div",9),2&e&&de("ngForOf",it().model.months)}function fB(e,n){if(1&e){const t=At();G(0,"ngb-datepicker-navigation",14),Ke("navigate",function(s){return Wt(t),Gt(it().onNavigateEvent(s))})("select",function(s){return Wt(t),Gt(it().onNavigateDateSelect(s))}),J()}if(2&e){const t=it();de("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function gB(e,n){}function mB(e,n){}const bP=function(e){return{$implicit:e}},_B=["dialog"],yB=["ngbNavOutlet",""];function vB(e,n){}function xB(e,n){if(1&e&&(G(0,"div",2),_e(1,vB,0,0,"ng-template",3),J()),2&e){const t=it().$implicit,i=it();de("item",t)("nav",i.nav)("role",i.paneRole),re(1),de("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",Gi(5,bP,t.active||i.isPanelTransitioning(t)))}}function bB(e,n){if(1&e&&_e(0,xB,2,7,"div",1),2&e){const t=n.$implicit,i=it();de("ngIf",t.isPanelInDom()||i.isPanelTransitioning(t))}}function wB(e,n){1&e&&(G(0,"span",9),ts(1,10),J())}function CB(e,n){1&e&&(G(0,"span",9),ts(1,11),J())}function MB(e,n){1&e&&(G(0,"span",9),ts(1,12),J())}function OB(e,n){1&e&&(G(0,"span",9),ts(1,13),J())}function TB(e,n){1&e&&Ve(0,"...")}function DB(e,n){1&e&&Ve(0),2&e&&fi(n.$implicit)}function PB(e,n){}const EB=function(e){return{disabled:!0,currentPage:e}};function SB(e,n){if(1&e&&(G(0,"a",18),_e(1,PB,0,0,"ng-template",8),J()),2&e){const t=it(2).$implicit,i=it(),s=rn(9);re(1),de("ngTemplateOutlet",(null==i.tplEllipsis?null:i.tplEllipsis.templateRef)||s)("ngTemplateOutletContext",Gi(2,EB,t))}}function AB(e,n){}const IB=function(e,n,t){return{disabled:e,$implicit:n,currentPage:t}};function kB(e,n){if(1&e){const t=At();G(0,"a",19),Ke("click",function(s){Wt(t);const u=it().$implicit;return it(2).selectPage(u),Gt(s.preventDefault())}),_e(1,AB,0,0,"ng-template",8),J()}if(2&e){const t=it().$implicit,i=it(),s=i.disabled,u=i.$implicit,m=it(),b=rn(11);we("tabindex",s?"-1":null)("aria-disabled",s?"true":null),re(1),de("ngTemplateOutlet",(null==m.tplNumber?null:m.tplNumber.templateRef)||b)("ngTemplateOutletContext",ph(4,IB,s,t,u))}}function RB(e,n){if(1&e&&(G(0,"li",15),_e(1,SB,2,4,"a",16),_e(2,kB,2,8,"a",17),J()),2&e){const t=n.$implicit,i=it(),s=i.$implicit,u=i.disabled,m=it();xn("active",t===s)("disabled",m.isEllipsis(t)||u),we("aria-current",t===s?"page":null),re(1),de("ngIf",m.isEllipsis(t)),re(1),de("ngIf",!m.isEllipsis(t))}}function NB(e,n){1&e&&_e(0,RB,3,7,"li",14),2&e&&de("ngForOf",n.pages)}function FB(e,n){}const uC=function(e,n){return{disabled:e,currentPage:n}};function LB(e,n){if(1&e){const t=At();G(0,"li",15)(1,"a",20),Ke("click",function(s){return Wt(t),it().selectPage(1),Gt(s.preventDefault())}),_e(2,FB,0,0,"ng-template",8),J()()}if(2&e){const t=it(),i=rn(1);xn("disabled",t.previousDisabled()),re(1),we("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),re(1),de("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||i)("ngTemplateOutletContext",Y_(6,uC,t.previousDisabled(),t.page))}}function BB(e,n){}const zB=function(e){return{disabled:e}};function VB(e,n){if(1&e){const t=At();G(0,"li",15)(1,"a",21),Ke("click",function(s){Wt(t);const u=it();return u.selectPage(u.page-1),Gt(s.preventDefault())}),_e(2,BB,0,0,"ng-template",8),J()()}if(2&e){const t=it(),i=rn(3);xn("disabled",t.previousDisabled()),re(1),we("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),re(1),de("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||i)("ngTemplateOutletContext",Gi(6,zB,t.previousDisabled()))}}function UB(e,n){}function jB(e,n){}function $B(e,n){if(1&e){const t=At();G(0,"li",15)(1,"a",22),Ke("click",function(s){Wt(t);const u=it();return u.selectPage(u.page+1),Gt(s.preventDefault())}),_e(2,jB,0,0,"ng-template",8),J()()}if(2&e){const t=it(),i=rn(5);xn("disabled",t.nextDisabled()),re(1),we("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),re(1),de("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||i)("ngTemplateOutletContext",Y_(6,uC,t.nextDisabled(),t.page))}}function GB(e,n){}function HB(e,n){if(1&e){const t=At();G(0,"li",15)(1,"a",23),Ke("click",function(s){Wt(t);const u=it();return u.selectPage(u.pageCount),Gt(s.preventDefault())}),_e(2,GB,0,0,"ng-template",8),J()()}if(2&e){const t=it(),i=rn(7);xn("disabled",t.nextDisabled()),re(1),we("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),re(1),de("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||i)("ngTemplateOutletContext",Y_(6,uC,t.nextDisabled(),t.page))}}const WB=function(e,n,t){return{$implicit:e,pages:n,disabled:t}};function JB(e,n){if(1&e&&(G(0,"span"),ts(1,1),function G2(e,n){const t=Nn();let i;const s=e+Jn;t.firstCreatePass?(i=function ik(e,n){if(n)for(let t=n.length-1;t>=0;t--){const i=n[t];if(e===i.name)return i}}(n,t.pipeRegistry),t.data[s]=i,i.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(s,i.onDestroy)):i=t.data[s];const u=i.factory||(i.factory=pl(i.type)),m=Jr(ye);try{const b=Xn(!1),M=u();return Xn(b),function an(e,n,t,i){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=i}(t,Oe(),s,M),M}finally{Jr(m)}}(2,"percent"),J()),2&e){const t=it();re(2),Og(H2(2,1,t.getValue()/t.max)),K_(1)}}function XB(e,n){1&e&&Ve(0),2&e&&fi(100===n.fill?"\u2605":"\u2606")}function KB(e,n){}function YB(e,n){if(1&e){const t=At();G(0,"span",2),Ve(1),J(),G(2,"span",3),Ke("mouseenter",function(){const u=Wt(t).index;return Gt(it().enter(u+1))})("click",function(){const u=Wt(t).index;return Gt(it().handleClick(u+1))}),_e(3,KB,0,0,"ng-template",4),J()}if(2&e){const t=n.index,i=it(),s=rn(1);re(1),oi("(",t<i.nextRate?"*":" ",")"),re(1),wg("cursor",i.isInteractive()?"pointer":"default"),re(1),de("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||s)("ngTemplateOutletContext",i.contexts[t])}}function QB(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){Wt(t);const s=it();return Gt(s.changeHour(s.hourStep))}),Ie(1,"span",12),G(2,"span",13),ts(3,14),J()()}if(2&e){const t=it();xn("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),de("disabled",t.disabled)}}function ez(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){Wt(t);const s=it();return Gt(s.changeHour(-s.hourStep))}),Ie(1,"span",15),G(2,"span",13),ts(3,16),J()()}if(2&e){const t=it();xn("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),de("disabled",t.disabled)}}function tz(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){Wt(t);const s=it();return Gt(s.changeMinute(s.minuteStep))}),Ie(1,"span",12),G(2,"span",13),ts(3,17),J()()}if(2&e){const t=it();xn("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),de("disabled",t.disabled)}}function nz(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){Wt(t);const s=it();return Gt(s.changeMinute(-s.minuteStep))}),Ie(1,"span",15),G(2,"span",13),ts(3,18),J()()}if(2&e){const t=it();xn("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),de("disabled",t.disabled)}}function iz(e,n){1&e&&(G(0,"div",5),Ve(1,":"),J())}function oz(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){Wt(t);const s=it(2);return Gt(s.changeSecond(s.secondStep))}),Ie(1,"span",12),G(2,"span",13),ts(3,21),J()()}if(2&e){const t=it(2);xn("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),de("disabled",t.disabled)}}function rz(e,n){if(1&e){const t=At();G(0,"button",11),Ke("click",function(){Wt(t);const s=it(2);return Gt(s.changeSecond(-s.secondStep))}),Ie(1,"span",15),G(2,"span",13),ts(3,22),J()()}if(2&e){const t=it(2);xn("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),de("disabled",t.disabled)}}function sz(e,n){if(1&e){const t=At();G(0,"div",19),_e(1,oz,4,7,"button",3),G(2,"input",20),Ke("change",function(s){return Wt(t),Gt(it().updateSecond(s.target.value))})("blur",function(){return Wt(t),Gt(it().handleBlur())})("input",function(s){return Wt(t),Gt(it().formatInput(s.target))})("keydown.ArrowUp",function(s){Wt(t);const u=it();return u.changeSecond(u.secondStep),Gt(s.preventDefault())})("keydown.ArrowDown",function(s){Wt(t);const u=it();return u.changeSecond(-u.secondStep),Gt(s.preventDefault())}),J(),_e(3,rz,4,7,"button",3),J()}if(2&e){const t=it();re(1),de("ngIf",t.spinners),re(1),xn("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),de("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),re(1),de("ngIf",t.spinners)}}function az(e,n){1&e&&Ie(0,"div",5)}function lz(e,n){if(1&e&&($i(0),ts(1,27),Fi()),2&e){const t=it(2);re(1),Og(t.i18n.getAfternoonPeriod()),K_(1)}}function cz(e,n){1&e&&ts(0,28),2&e&&(Og(it(2).i18n.getMorningPeriod()),K_(0))}function uz(e,n){if(1&e){const t=At();G(0,"div",23)(1,"button",24),Ke("click",function(){return Wt(t),Gt(it().toggleMeridian())}),_e(2,lz,2,1,"ng-container",25),_e(3,cz,1,1,"ng-template",null,26,Hs),J()()}if(2&e){const t=rn(4),i=it();re(1),xn("btn-sm",i.isSmallSize)("btn-lg",i.isLargeSize)("disabled",i.disabled),de("disabled",i.disabled),re(1),de("ngIf",i.model&&i.model.hour>=12)("ngIfElse",t)}}function dz(e,n){if(1&e&&(G(0,"strong",3),Ve(1),J()),2&e){const t=it();re(1),fi(t.header)}}function hz(e,n){}function pz(e,n){if(1&e){const t=At();G(0,"div",4),_e(1,hz,0,0,"ng-template",5),G(2,"button",6),Ke("click",function(){return Wt(t),Gt(it().hide())}),J()()}if(2&e){const t=it(),i=rn(1);re(1),de("ngTemplateOutlet",t.contentHeaderTpl||i)}}function fz(e,n){if(1&e&&(G(0,"span"),Ve(1),J()),2&e){const t=it().$implicit;hh(it().highlightClass),re(1),fi(t)}}function gz(e,n){1&e&&Ve(0),2&e&&fi(it().$implicit)}function mz(e,n){if(1&e&&(_e(0,fz,2,3,"span",1),_e(1,gz,1,1,"ng-template",null,2,Hs)),2&e){const t=n.odd,i=rn(2);de("ngIf",t)("ngIfElse",i)}}function rs(e){return parseInt(`${e}`,10)}function wP(e){return null!=e?`${e}`:""}function M1(e,n,t=0){return Math.max(Math.min(e,n),t)}function Bg(e){return"string"==typeof e}function Ao(e){return!isNaN(rs(e))}function vo(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Fp(e){return null!=e}function zg(e){return Ao(e)?`0${e}`.slice(-2):""}function MP(e,n){return e&&e.className&&e.className.split&&e.className.split(/\s+/).indexOf(n)>=0}function Vg(e){return(e||document.body).getBoundingClientRect()}function OP(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const TP={animation:!0,transitionTimerDelayMs:5},Cz=()=>{},{transitionTimerDelayMs:Mz}=TP,O0=new Map,wr=(e,n,t,i)=>{let s=i.context||{};const u=O0.get(n);if(u)switch(i.runningTransition){case"continue":return Gr;case"stop":e.run(()=>u.transition$.complete()),s=Object.assign(u.context,s),O0.delete(n)}const m=t(n,i.animation,s)||Cz;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return e.run(()=>m()),tn(void 0).pipe(function bz(e){return n=>new dn(t=>n.subscribe({next:m=>e.run(()=>t.next(m)),error:m=>e.run(()=>t.error(m)),complete:()=>e.run(()=>t.complete())}))}(e));const b=new Hn,M=new Hn,P=b.pipe(function wL(...e){return n=>y0(n,tn(...e))}(!0));O0.set(n,{transition$:b,complete:()=>{M.next(),M.complete()},context:s});const I=function wz(e){const{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e);return 1e3*(parseFloat(n)+parseFloat(t))}(n);return e.runOutsideAngular(()=>{const U=os(n,"transitionend").pipe(So(P),zr(({target:oe})=>oe===n));(function eP(...e){return 1===(e=QD(e)).length?Ft(e[0]):new dn(function vL(e){return n=>{let t=[];for(let i=0;t&&!n.closed&&i<e.length;i++)t.push(Ft(e[i]).subscribe(Wn(n,s=>{if(t){for(let u=0;u<t.length;u++)u!==i&&t[u].unsubscribe();t=null}n.next(s)})))}}(e))})(Kw(I+Mz).pipe(So(P)),U,M).pipe(So(P)).subscribe(()=>{O0.delete(n),e.run(()=>{m(),b.next(),b.complete()})})}),b.asObservable()},dC=(e,n,t)=>{let{direction:i,maxSize:s,dimension:u}=t;const{classList:m}=e;function b(){m.add("collapse"),"show"===i?m.add("show"):m.remove("show")}if(n)return s||(s=function Tz(e,n){if(typeof navigator>"u")return"0px";const{classList:t}=e,i=t.contains("show");i||t.add("show"),e.style[n]="";const s=e.getBoundingClientRect()[n]+"px";return i||t.remove("show"),s}(e,u),t.maxSize=s,e.style[u]="show"!==i?s:"0px",m.remove("collapse"),m.remove("collapsing"),m.remove("show"),Vg(e),m.add("collapsing")),e.style[u]="show"===i?s:"0px",()=>{b(),m.remove("collapsing"),e.style[u]=""};b()};let Lp=(()=>{class e{constructor(){this.animation=TP.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),DP=(()=>{class e{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Dt(Lp))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Dz=0,hC=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),e})(),PP=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),e})(),EP=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),e})(),pC=(()=>{class e{constructor(){this.disabled=!1,this.id="ngb-panel-"+Dz++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new zt,this.hidden=new zt}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["ngb-panel"]],contentQueries:function(t,i,s){if(1&t&&(Ji(s,PP,4),Ji(s,hC,4),Ji(s,EP,4)),2&t){let u;yi(u=vi())&&(i.titleTpls=u),yi(u=vi())&&(i.headerTpls=u),yi(u=vi())&&(i.contentTpls=u)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),e})(),Pz=(()=>{class e{constructor(t){this._El=t,this.ngbRef=new zt}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return e.\u0275fac=function(t){return new(t||e)(ye(Gn))},e.\u0275dir=vt({type:e,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),e})(),SP=(()=>{class e{constructor(t,i){this.accordion=t,this.panel=i}set ngbPanelToggle(t){t&&(this.panel=t)}}return e.\u0275fac=function(t){return new(t||e)(ye(Ht(()=>fC)),ye(pC,9))},e.\u0275dir=vt({type:e,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,i){1&t&&Ke("click",function(){return i.accordion.toggle(i.panel.id)}),2&t&&(Qa("disabled",i.panel.disabled),we("aria-expanded",i.panel.isOpen)("aria-controls",i.panel.id),xn("collapsed",!i.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),e})(),fC=(()=>{class e{constructor(t,i,s){this._ngZone=i,this._changeDetector=s,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new zt,this.shown=new zt,this.hidden=new zt,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const i=this._findPanelById(t);i&&this._changeOpenState(i,!i.isOpen)}ngAfterContentChecked(){Bg(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(or(1)).subscribe(()=>{this.panels.forEach(t=>{const i=t.panelDiv;i?t.initClassDone||(t.initClassDone=!0,wr(this._ngZone,i,dC,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,i){if(null!=t&&!t.disabled&&t.isOpen!==i){let s=!1;this.panelChange.emit({panelId:t.id,nextState:i,preventDefault:()=>{s=!0}}),s||(t.isOpen=i,t.transitionRunning=!0,i&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,i=!0){this.panels.forEach(s=>{s.id!==t&&s.isOpen&&(s.isOpen=!1,s.transitionRunning=i)})}_findPanelById(t){return this.panels.find(i=>i.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(i=>{i.transitionRunning&&wr(this._ngZone,i.panelDiv,dC,{animation:t,runningTransition:"stop",context:{direction:i.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{i.transitionRunning=!1;const{id:u}=i;i.isOpen?(i.shown.emit(),this.shown.emit(u)):(i.hidden.emit(),this.hidden.emit(u))})})}}return e.\u0275fac=function(t){return new(t||e)(ye(DP),ye(ui),ye(xa))},e.\u0275cmp=zn({type:e,selectors:[["ngb-accordion"]],contentQueries:function(t,i,s){if(1&t&&Ji(s,pC,4),2&t){let u;yi(u=vi())&&(i.panels=u)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,i){2&t&&we("aria-multiselectable",!i.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[xr],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,i){1&t&&(_e(0,A5,3,3,"ng-template",0,1,Hs),_e(2,F5,4,11,"ng-template",2)),2&t&&(re(2),de("ngForOf",i.panels))},dependencies:[ns,Qu,SP,Pz,hC,Lr],encapsulation:2}),e})(),RP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[fC]}),e})();const Rz=({classList:e})=>{e.remove("show")};let Nz=(()=>{class e{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Dt(Lp))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fz=(()=>{class e{constructor(t,i,s,u){this._renderer=i,this._element=s,this._zone=u,this.closed=new zt,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=wr(this._zone,this._element.nativeElement,Rz,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const i=t.type;i&&!i.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${i.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${i.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return e.\u0275fac=function(t){return new(t||e)(ye(Nz),ye(es),ye(Gn),ye(ui))},e.\u0275cmp=zn({type:e,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,i){2&t&&xn("fade",i.animation)("alert-dismissible",i.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[gi,xr],ngContentSelectors:C1,decls:2,vars:1,consts:function(){let n;return n=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",n,3,"click",4,"ngIf"],["type","button","aria-label",n,1,"btn-close",3,"click"]]},template:function(t,i){1&t&&(Ml(),Zu(0),_e(1,L5,1,0,"button",0)),2&t&&(re(1),de("ngIf",i.dismissible))},dependencies:[Lr],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),e})(),NP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[Fz]}),e})();var xh=(()=>{return(e=xh||(xh={})).START="start",e.END="end",xh;var e})();const FP=({classList:e})=>e.contains("carousel-item-start")||e.contains("carousel-item-end"),T0=e=>{e.remove("carousel-item-start"),e.remove("carousel-item-end")},O1=e=>{T0(e),e.remove("carousel-item-prev"),e.remove("carousel-item-next")},Lz=(e,n,{direction:t})=>{const{classList:i}=e;return n?(FP(e)?T0(i):(i.add("carousel-item-"+(t===xh.START?"next":"prev")),Vg(e),i.add("carousel-item-"+t)),()=>{O1(i),i.add("active")}):(T0(i),O1(i),void i.add("active"))},Bz=(e,n,{direction:t})=>{const{classList:i}=e;return n?(FP(e)?T0(i):i.add("carousel-item-"+t),()=>{O1(i),i.remove("active")}):(T0(i),O1(i),void i.remove("active"))};let zz=(()=>{class e{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Dt(Lp))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Vz=0,Uz=(()=>{class e{constructor(t){this.tplRef=t,this.id="ngb-slide-"+Vz++,this.slid=new zt}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),e})(),jz=(()=>{class e{constructor(t,i,s,u,m){this._platformId=i,this._ngZone=s,this._cd=u,this._container=m,this.NgbSlideEventSource=zp,this._destroy$=new Hn,this._interval$=new Br(0),this._mouseHover$=new Br(!1),this._focused$=new Br(!1),this._pauseOnHover$=new Br(!1),this._pauseOnFocus$=new Br(!1),this._pause$=new Br(!1),this._wrap$=new Br(!1),this.slide=new zt,this.slid=new zt,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(zp.ARROW_LEFT)}arrowRight(){this.focus(),this.next(zp.ARROW_RIGHT)}ngAfterContentInit(){(function j3(e){return e===yT})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=m1([this.slide.pipe(Ct(i=>i.current),y1(this.activeId)),this._wrap$,this.slides.changes.pipe(y1(null))]).pipe(Ct(([i,s])=>{const u=this.slides.toArray(),m=this._getSlideIdxById(i);return s?u.length>1:m<u.length-1}),Yw());m1([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe(Ct(([i,s,u,m,b,M,P])=>i||s&&u||m&&b||!P?0:M),Yw(),Sl(i=>i>0?Kw(i,i):nP),So(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(zp.TIMER)))}),this.slides.changes.pipe(So(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(e=>{O0.get(e)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(or(1)).subscribe(()=>{for(const{id:t}of this.slides){const i=this._getSlideElement(t);t===this.activeId?i.classList.add("active"):i.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,i){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),i)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),xh.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),xh.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,i,s){const u=this._transitionIds;if(u&&(u[0]!==t||u[1]!==this.activeId))return;let m=this._getSlideById(t);if(m&&m.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:m.id,direction:i,paused:this._pause$.value,source:s});const b={animation:this.animation,runningTransition:"stop",context:{direction:i}},M=[],P=this._getSlideById(this.activeId);if(P){const oe=wr(this._ngZone,this._getSlideElement(P.id),Bz,b);oe.subscribe(()=>{P.slid.emit({isShown:!1,direction:i,source:s})}),M.push(oe)}const I=this.activeId;this.activeId=m.id;const U=this._getSlideById(this.activeId),W=wr(this._ngZone,this._getSlideElement(m.id),Lz,b);W.subscribe(()=>{U?.slid.emit({isShown:!0,direction:i,source:s})}),M.push(W),_1(...M).pipe(or(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:I,current:m.id,direction:i,paused:this._pause$.value,source:s})})}this._cd.markForCheck()}_getSlideEventDirection(t,i){return this._getSlideIdxById(t)>this._getSlideIdxById(i)?xh.END:xh.START}_getSlideById(t){return this.slides.find(i=>i.id===t)||null}_getSlideIdxById(t){const i=this._getSlideById(t);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(t){const i=this.slides.toArray(),s=this._getSlideIdxById(t);return s===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[s+1].id}_getPrevSlide(t){const i=this.slides.toArray(),s=this._getSlideIdxById(t);return 0===s?this.wrap?i[i.length-1].id:i[0].id:i[s-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return e.\u0275fac=function(t){return new(t||e)(ye(zz),ye(o0),ye(ui),ye(xa),ye(Gn))},e.\u0275cmp=zn({type:e,selectors:[["ngb-carousel"]],contentQueries:function(t,i,s){if(1&t&&Ji(s,Uz,4),2&t){let u;yi(u=vi())&&(i.slides=u)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,i){1&t&&Ke("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&t&&(we("aria-activedescendant","slide-"+i.activeId),wg("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[xr],decls:6,vars:6,consts:function(){let n,t,i;return n=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,i=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],n,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(t,i){1&t&&(G(0,"div",0),_e(1,B5,1,5,"button",1),J(),G(2,"div",2),_e(3,V5,4,4,"div",3),J(),_e(4,U5,4,0,"button",4),_e(5,j5,4,0,"button",5)),2&t&&(xn("visually-hidden",!i.showNavigationIndicators),re(1),de("ngForOf",i.slides),re(2),de("ngForOf",i.slides),re(1),de("ngIf",i.showNavigationArrows),re(1),de("ngIf",i.showNavigationArrows))},dependencies:[ns,Qu,Lr],encapsulation:2,changeDetection:0}),e})();var zp=(()=>{return(e=zp||(zp={})).TIMER="timer",e.ARROW_LEFT="arrowLeft",e.ARROW_RIGHT="arrowRight",e.INDICATOR="indicator",zp;var e})();let LP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[jz]}),e})(),BP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})();class Cr{constructor(n,t,i){this.year=vo(n)?n:null,this.month=vo(t)?t:null,this.day=vo(i)?i:null}static from(n){return n instanceof Cr?n:n?new Cr(n.year,n.month,n.day):null}equals(n){return null!=n&&this.year===n.year&&this.month===n.month&&this.day===n.day}before(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day<n.day:this.month<n.month:this.year<n.year)}after(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day>n.day:this.month>n.month:this.year>n.year)}}function Ug(e,n){return!function $z(e,n){return!e&&!n||!!e&&!!n&&e.equals(n)}(e,n)}function zP(e,n){return!(!e&&!n||e&&n&&e.year===n.year&&e.month===n.month)}function T1(e,n,t){return e&&n&&e.before(n)?n:e&&t&&e.after(t)?t:e||null}function mC(e,n){const{minDate:t,maxDate:i,disabled:s,markDisabled:u}=n;return!(null==e||s||u&&u(e,{year:e.year,month:e.month})||t&&e.before(t)||i&&e.after(i))}function VP(e){return new Cr(e.getFullYear(),e.getMonth()+1,e.getDate())}function D1(e){const n=new Date(e.year,e.month-1,e.day,12);return isNaN(n.getTime())||n.setFullYear(e.year),n}let P1=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return function Yz(){return new Qz}()},providedIn:"root"}),e})(),Qz=(()=>{class e extends P1{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,i="d",s=1){let u=D1(t),m=!0,b=u.getMonth();switch(i){case"y":u.setFullYear(u.getFullYear()+s);break;case"m":b+=s,u.setMonth(b),b%=12,b<0&&(b+=12);break;case"d":u.setDate(u.getDate()+s),m=!1;break;default:return t}return m&&u.getMonth()!==b&&u.setDate(0),VP(u)}getPrev(t,i="d",s=1){return this.getNext(t,i,-s)}getWeekday(t){let s=D1(t).getDay();return 0===s?7:s}getWeekNumber(t,i){7===i&&(i=0);const m=D1(t[(11-i)%7]);m.setDate(m.getDate()+4-(m.getDay()||7));const b=m.getTime();return m.setMonth(0),m.setDate(1),Math.floor(Math.round((b-m.getTime())/864e5)/7)+1}getToday(){return VP(new Date)}isValid(t){if(!(t&&vo(t.year)&&vo(t.month)&&vo(t.day)&&0!==t.year))return!1;const i=D1(t);return!isNaN(i.getTime())&&i.getFullYear()===t.year&&i.getMonth()+1===t.month&&i.getDate()===t.day}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=io(e)))(i||e)}}(),e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),Vp=(()=>{class e{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(t){let i=null;return i=t?new t:function e4(e){return new t4(e)}(Dt(el)),i},providedIn:"root"}),e})(),t4=(()=>{class e extends Vp{constructor(t){super(),this._locale=t,this._monthsShort=iw(t,so.Standalone,Dn.Abbreviated),this._monthsFull=iw(t,so.Standalone,Dn.Wide)}getWeekdayLabel(t,i){const s=eT(this._locale,so.Standalone,void 0===i?Dn.Short:i);return s.map((m,b)=>s[(b+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){return nT(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)}}return e.\u0275fac=function(t){return new(t||e)(Dt(el))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),_C=(()=>{class e{constructor(t,i){this._calendar=t,this._i18n=i,this._VALIDATORS={dayTemplateData:s=>{if(this._state.dayTemplateData!==s)return{dayTemplateData:s}},displayMonths:s=>{if(vo(s=rs(s))&&s>0&&this._state.displayMonths!==s)return{displayMonths:s}},disabled:s=>{if(this._state.disabled!==s)return{disabled:s}},firstDayOfWeek:s=>{if(vo(s=rs(s))&&s>=0&&this._state.firstDayOfWeek!==s)return{firstDayOfWeek:s}},focusVisible:s=>{if(this._state.focusVisible!==s&&!this._state.disabled)return{focusVisible:s}},markDisabled:s=>{if(this._state.markDisabled!==s)return{markDisabled:s}},maxDate:s=>{const u=this.toValidDate(s,null);if(Ug(this._state.maxDate,u))return{maxDate:u}},minDate:s=>{const u=this.toValidDate(s,null);if(Ug(this._state.minDate,u))return{minDate:u}},navigation:s=>{if(this._state.navigation!==s)return{navigation:s}},outsideDays:s=>{if(this._state.outsideDays!==s)return{outsideDays:s}},weekdays:s=>{const u=!0===s||!1===s?Dn.Short:s,m=!0!==s&&!1!==s||s;if(this._state.weekdayWidth!==u||this._state.weekdaysVisible!==m)return{weekdayWidth:u,weekdaysVisible:m}}},this._model$=new Hn,this._dateSelect$=new Hn,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Dn.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(zr(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(zr(t=>null!==t))}set(t){let i=Object.keys(t).map(s=>this._VALIDATORS[s](t[s])).reduce((s,u)=>({...s,...u}),{});Object.keys(i).length>0&&this._nextState(i)}focus(t){const i=this.toValidDate(t,null);null!=i&&!this._state.disabled&&Ug(this._state.focusDate,i)&&this._nextState({focusDate:t})}focusSelect(){mC(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const i=this.toValidDate(t,this._calendar.getToday());null!=i&&!this._state.disabled&&(!this._state.firstDate||zP(this._state.firstDate,i))&&this._nextState({firstDate:i})}select(t,i={}){const s=this.toValidDate(t,null);null!=s&&!this._state.disabled&&(Ug(this._state.selectedDate,s)&&this._nextState({selectedDate:s}),i.emitEvent&&mC(s,this._state)&&this._dateSelect$.next(s))}toValidDate(t,i){const s=Cr.from(t);return void 0===i&&(i=this._calendar.getToday()),this._calendar.isValid(s)?s:i}getMonth(t){for(let i of this._state.months)if(t.month===i.number&&t.year===i.year)return i;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const i=this._updateState(t);this._patchContexts(i),this._state=i,this._model$.next(this._state)}_patchContexts(t){const{months:i,displayMonths:s,selectedDate:u,focusDate:m,focusVisible:b,disabled:M,outsideDays:P}=t;t.months.forEach(I=>{I.weeks.forEach(U=>{U.days.forEach(W=>{m&&(W.context.focused=m.equals(W.date)&&b),W.tabindex=!M&&m&&W.date.equals(m)&&m.month===I.number?0:-1,!0===M&&(W.context.disabled=!0),void 0!==u&&(W.context.selected=null!==u&&u.equals(W.date)),I.number!==W.date.month&&(W.hidden="hidden"===P||"collapsed"===P||s>1&&W.date.after(i[0].firstDate)&&W.date.before(i[s-1].lastDate))})})})}_updateState(t){const i=Object.assign({},this._state,t);let s=i.firstDate;if(("minDate"in t||"maxDate"in t)&&(function Gz(e,n){if(n&&e&&n.before(e))throw new Error(`'maxDate' ${n} should be greater than 'minDate' ${e}`)}(i.minDate,i.maxDate),i.focusDate=T1(i.focusDate,i.minDate,i.maxDate),i.firstDate=T1(i.firstDate,i.minDate,i.maxDate),s=i.focusDate),"disabled"in t&&(i.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(s=i.selectedDate),"focusVisible"in t||"focusDate"in t&&(i.focusDate=T1(i.focusDate,i.minDate,i.maxDate),s=i.focusDate,0!==i.months.length&&i.focusDate&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in t&&(i.firstDate=T1(i.firstDate,i.minDate,i.maxDate),s=i.firstDate),s){const m=function Jz(e,n,t,i,s){const{displayMonths:u,months:m}=t,b=m.splice(0,m.length);return Array.from({length:u},(P,I)=>{const U=Object.assign(e.getNext(n,"m",I),{day:1});if(m[I]=null,!s){const W=b.findIndex(oe=>oe.firstDate.equals(U));-1!==W&&(m[I]=b.splice(W,1)[0])}return U}).forEach((P,I)=>{null===m[I]&&(m[I]=function Xz(e,n,t,i,s={}){const{dayTemplateData:u,minDate:m,maxDate:b,firstDayOfWeek:M,markDisabled:P,outsideDays:I,weekdayWidth:U,weekdaysVisible:W}=t,oe=e.getToday();s.firstDate=null,s.lastDate=null,s.number=n.month,s.year=n.year,s.weeks=s.weeks||[],s.weekdays=s.weekdays||[],n=function Kz(e,n,t){const i=e.getDaysPerWeek(),s=new Cr(n.year,n.month,1),u=e.getWeekday(s)%i;return e.getPrev(s,"d",(i+u-t)%i)}(e,n,M),W||(s.weekdays.length=0);for(let be=0;be<e.getWeeksPerMonth();be++){let Te=s.weeks[be];Te||(Te=s.weeks[be]={number:0,days:[],collapsed:!0});const ze=Te.days;for(let Ye=0;Ye<e.getDaysPerWeek();Ye++){0===be&&W&&(s.weekdays[Ye]=i.getWeekdayLabel(e.getWeekday(n),U));const ht=new Cr(n.year,n.month,n.day),We=e.getNext(ht),Ot=i.getDayAriaLabel(ht);let Vt=!!(m&&ht.before(m)||b&&ht.after(b));!Vt&&P&&(Vt=P(ht,{month:s.number,year:s.year}));let Kt=ht.equals(oe),Hi=u?u(ht,{month:s.number,year:s.year}):void 0;null===s.firstDate&&ht.month===s.number&&(s.firstDate=ht),ht.month===s.number&&We.month!==s.number&&(s.lastDate=ht);let Li=ze[Ye];Li||(Li=ze[Ye]={}),Li.date=ht,Li.context=Object.assign(Li.context||{},{$implicit:ht,date:ht,data:Hi,currentMonth:s.number,currentYear:s.year,disabled:Vt,focused:!1,selected:!1,today:Kt}),Li.tabindex=-1,Li.ariaLabel=Ot,Li.hidden=!1,n=We}Te.number=e.getWeekNumber(ze.map(Ye=>Ye.date),M),Te.collapsed="collapsed"===I&&ze[0].date.month!==s.number&&ze[ze.length-1].date.month!==s.number}return s}(e,P,t,i,b.shift()||{}))}),m}(this._calendar,s,i,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);i.months=m,i.firstDate=m[0].firstDate,i.lastDate=m[m.length-1].lastDate,"selectedDate"in t&&!mC(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in t&&(!i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=s);const b=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,M=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in t||"maxDate"in t||0===i.selectBoxes.years.length||b)&&(i.selectBoxes.years=function Wz(e,n,t){if(!e)return[];const i=n?Math.max(n.year,e.year-500):e.year-10,u=(t?Math.min(t.year,e.year+500):e.year+10)-i+1,m=Array(u);for(let b=0;b<u;b++)m[b]=i+b;return m}(i.firstDate,i.minDate,i.maxDate)),("minDate"in t||"maxDate"in t||0===i.selectBoxes.months.length||b)&&(i.selectBoxes.months=function Hz(e,n,t,i){if(!n)return[];let s=e.getMonths(n.year);if(t&&n.year===t.year){const u=s.findIndex(m=>m===t.month);s=s.slice(u)}if(i&&n.year===i.year){const u=s.findIndex(m=>m===i.month);s=s.slice(0,u+1)}return s}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},("arrows"===i.navigation||"select"===i.navigation)&&(M||b||"minDate"in t||"maxDate"in t||"disabled"in t)&&(i.prevDisabled=i.disabled||function Zz(e,n,t){const i=Object.assign(e.getPrev(n,"m"),{day:1});return null!=t&&(i.year===t.year&&i.month<t.month||i.year<t.year&&1===t.month)}(this._calendar,i.firstDate,i.minDate),i.nextDisabled=i.disabled||function qz(e,n,t){const i=Object.assign(e.getNext(n,"m"),{day:1});return null!=t&&i.after(t)}(this._calendar,i.lastDate,i.maxDate))}return i}}return e.\u0275fac=function(t){return new(t||e)(Dt(P1),Dt(Vp))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();var jg=(()=>{return(e=jg||(jg={}))[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",jg;var e})();let n4=(()=>{class e{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return e.\u0275fac=function(t){return new(t||e)(ye(Vp))},e.\u0275cmp=zn({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,i){2&t&&xn("bg-primary",i.selected)("text-white",i.selected)("text-muted",i.isMuted())("outside",i.isMuted())("active",i.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[xr],attrs:$5,decls:1,vars:1,template:function(t,i){1&t&&Ve(0),2&t&&fi(i.i18n.getDayNumerals(i.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),e})(),i4=(()=>{class e{constructor(t,i){this.i18n=t,this._renderer=i,this.select=new zt,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new Cr(this.date.year,rs(t),1))}changeYear(t){this.select.emit(new Cr(rs(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return e.\u0275fac=function(t){return new(t||e)(ye(Vp),ye(es))},e.\u0275cmp=zn({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,i){if(1&t&&(Ep(G5,7,Gn),Ep(H5,7,Gn)),2&t){let s;yi(s=vi())&&(i.monthSelect=s.first),yi(s=vi())&&(i.yearSelect=s.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[xr],decls:6,vars:4,consts:function(){let n,t,i,s;return n=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,i=$localize`:@@ngb.datepicker.select-year:Select year`,s=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",n,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",i,"title",s,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,i){1&t&&(G(0,"select",0,1),Ke("change",function(u){return i.changeMonth(u.target.value)}),_e(2,W5,2,3,"option",2),J(),G(3,"select",3,4),Ke("change",function(u){return i.changeYear(u.target.value)}),_e(5,q5,2,2,"option",2),J()),2&t&&(de("disabled",i.disabled),re(2),de("ngForOf",i.months),re(1),de("disabled",i.disabled),re(2),de("ngForOf",i.years))},dependencies:[ns],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),e})(),o4=(()=>{class e{constructor(t){this.i18n=t,this.navigation=jg,this.months=[],this.navigate=new zt,this.select=new zt}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return e.\u0275fac=function(t){return new(t||e)(ye(Vp))},e.\u0275cmp=zn({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[xr],decls:8,vars:4,consts:function(){let n,t,i,s;return n=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,s=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",n,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",i,"title",s,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,i){1&t&&(G(0,"div",0)(1,"button",1),Ke("click",function(u){return i.onClickPrev(u)}),Ie(2,"span",2),J()(),_e(3,Z5,1,4,"ngb-datepicker-navigation-select",3),_e(4,Y5,1,1,null,4),G(5,"div",5)(6,"button",6),Ke("click",function(u){return i.onClickNext(u)}),Ie(7,"span",2),J()()),2&t&&(re(1),de("disabled",i.prevDisabled),re(2),de("ngIf",i.showSelect),re(1),de("ngIf",!i.showSelect),re(2),de("disabled",i.nextDisabled))},dependencies:[Lr,ns,i4],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),e})();var ri=(()=>{return(e=ri||(ri={}))[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",ri;var e})();let r4=(()=>{class e{processKey(t,i){const{state:s,calendar:u}=i;switch(t.which){case ri.PageUp:i.focusDate(u.getPrev(s.focusedDate,t.shiftKey?"y":"m",1));break;case ri.PageDown:i.focusDate(u.getNext(s.focusedDate,t.shiftKey?"y":"m",1));break;case ri.End:i.focusDate(t.shiftKey?s.maxDate:s.lastDate);break;case ri.Home:i.focusDate(t.shiftKey?s.minDate:s.firstDate);break;case ri.ArrowLeft:i.focusDate(u.getPrev(s.focusedDate,"d",1));break;case ri.ArrowUp:i.focusDate(u.getPrev(s.focusedDate,"d",u.getDaysPerWeek()));break;case ri.ArrowRight:i.focusDate(u.getNext(s.focusedDate,"d",1));break;case ri.ArrowDown:i.focusDate(u.getNext(s.focusedDate,"d",u.getDaysPerWeek()));break;case ri.Enter:case ri.Space:i.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),yC=(()=>{class e{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Dn.Short}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),vC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return function s4(){return new a4}()},providedIn:"root"}),e})(),a4=(()=>{class e extends vC{fromModel(t){return t&&vo(t.year)&&vo(t.month)&&vo(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&vo(t.year)&&vo(t.month)&&vo(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=io(e)))(i||e)}}(),e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),UP=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),e})(),xC=(()=>{class e{constructor(t,i,s,u){this.i18n=t,this.datepicker=i,this._keyboardService=s,this._service=u}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return e.\u0275fac=function(t){return new(t||e)(ye(Vp),ye(Ht(()=>E1)),ye(r4),ye(_C))},e.\u0275cmp=zn({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,i){1&t&&Ke("keydown",function(u){return i.onKeyDown(u)})},inputs:{month:"month"},standalone:!0,features:[xr],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(_e(0,tB,3,2,"div",0),_e(1,aB,1,1,"ng-template",1)),2&t&&(de("ngIf",i.viewModel.weekdays.length>0),re(1),de("ngForOf",i.viewModel.weeks))},dependencies:[Lr,ns,Qu],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),e})(),E1=(()=>{class e{constructor(t,i,s,u,m,b,M,P){this._service=t,this._calendar=i,this._i18n=s,this._elementRef=b,this._ngbDateAdapter=M,this._ngZone=P,this.injector=fn(_r),this._controlValue=null,this._destroyed$=new Hn,this._publicState={},this.navigate=new zt,this.dateSelect=new zt,this.onChange=I=>{},this.onTouched=()=>{},["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(I=>this[I]=u[I]),t.dateSelect$.pipe(So(this._destroyed$)).subscribe(I=>{this.dateSelect.emit(I)}),t.model$.pipe(So(this._destroyed$)).subscribe(I=>{const U=I.firstDate,W=this.model?this.model.firstDate:null;this._publicState={maxDate:I.maxDate,minDate:I.minDate,firstDate:I.firstDate,lastDate:I.lastDate,focusedDate:I.focusDate,months:I.months.map(Ye=>Ye.firstDate)};let oe=!1;if(!U.equals(W)&&(this.navigate.emit({current:W?{year:W.year,month:W.month}:null,next:{year:U.year,month:U.month},preventDefault:()=>oe=!0}),oe&&null!==W))return void this._service.open(W);const be=I.selectedDate,Te=I.focusDate,ze=this.model?this.model.focusDate:null;this.model=I,Ug(be,this._controlValue)&&(this._controlValue=be,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(be))),Ug(Te,ze)&&ze&&I.focusVisible&&this.focus(),m.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(t){this._service.focus(Cr.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(or(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(Cr.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=os(this._contentEl.nativeElement,"focusin"),i=os(this._contentEl.nativeElement,"focusout"),{nativeElement:s}=this._elementRef;Ts(t,i).pipe(zr(({target:u,relatedTarget:m})=>!(MP(u,"ngb-dp-day")&&MP(m,"ngb-dp-day")&&s.contains(u)&&s.contains(m))),So(this._destroyed$)).subscribe(({type:u})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===u})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(i=>t[i]=this[i]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const i={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(s=>s in t).forEach(s=>i[s]=this[s]),this._service.set(i),"startDate"in t){const{currentValue:s,previousValue:u}=t.startDate;zP(u,s)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case jg.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case jg.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=Cr.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return e.\u0275fac=function(t){return new(t||e)(ye(_C),ye(P1),ye(Vp),ye(yC),ye(xa),ye(Gn),ye(vC),ye(ui))},e.\u0275cmp=zn({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(t,i,s){if(1&t&&Ji(s,UP,7),2&t){let u;yi(u=vi())&&(i.contentTemplateFromContent=u.first)}},viewQuery:function(t,i){if(1&t&&(Ep(lB,7),Ep(cB,7)),2&t){let s;yi(s=vi())&&(i._defaultDayTemplate=s.first),yi(s=vi())&&(i._contentEl=s.first)}},hostVars:2,hostBindings:function(t,i){2&t&&xn("disabled",i.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[Pi([{provide:qs,useExisting:Ht(()=>e),multi:!0},_C]),gi,xr],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,i){if(1&t&&(_e(0,uB,1,5,"ng-template",null,0,Hs),_e(2,pB,1,1,"ng-template",null,1,Hs),G(4,"div",2),_e(5,fB,1,7,"ngb-datepicker-navigation",3),J(),G(6,"div",4,5),_e(8,gB,0,0,"ng-template",6),J(),_e(9,mB,0,0,"ng-template",7)),2&t){const s=rn(3);re(5),de("ngIf","none"!==i.navigation),re(1),xn("ngb-dp-months",!i.contentTemplate),re(2),de("ngTemplateOutlet",i.contentTemplate||(null==i.contentTemplateFromContent?null:i.contentTemplateFromContent.templateRef)||s)("ngTemplateOutletContext",Gi(7,bP,i))("ngTemplateOutletInjector",i.injector),re(1),de("ngTemplateOutlet",i.footerTemplate)}},dependencies:[Lr,ns,Qu,n4,xC,o4],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),e})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const GP=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function HP(e){const n=Array.from(e.querySelectorAll(GP)).filter(t=>-1!==t.tabIndex);return[n[0],n[n.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let oE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[E1,xC]}),e})(),aE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})();class $p{constructor(n,t,i){this.nodes=n,this.viewRef=t,this.componentRef=i}}let I4=(()=>{class e{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(or(1)).subscribe(()=>{wr(this._zone,this._el.nativeElement,(t,i)=>{i&&Vg(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return wr(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(t){return new(t||e)(ye(Gn),ye(ui))},e.\u0275cmp=zn({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(hh("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),xn("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[xr],decls:0,vars:0,template:function(t,i){},encapsulation:2}),e})();class lE{update(n){}close(n){}dismiss(n){}}const k4=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],R4=["animation","backdropClass"];class N4{constructor(n,t,i,s){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Hn,this._dismissed=new Hn,this._hidden=new Hn,n.instance.dismissEvent.subscribe(u=>{this.dismiss(u)}),this.result=new Promise((u,m)=>{this._resolve=u,this._reject=m}),this.result.then(null,()=>{})}_applyWindowOptions(n,t){k4.forEach(i=>{Fp(t[i])&&(n[i]=t[i])})}_applyBackdropOptions(n,t){R4.forEach(i=>{Fp(t[i])&&(n[i]=t[i])})}update(n){this._applyWindowOptions(this._windowCmptRef.instance,n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(So(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(So(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function CP(e){return e&&e.then}(t)?!1!==t&&this._dismiss(n):t.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():tn(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),_1(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var E0=(()=>{return(e=E0||(E0={}))[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",E0;var e})();let F4=(()=>{class e{constructor(t,i,s){this._document=t,this._elRef=i,this._zone=s,this._closed$=new Hn,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new zt,this.shown=new Hn,this.hidden=new Hn}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Bg(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(or(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},m=_1(wr(this._zone,t,()=>t.classList.remove("show"),i),wr(this._zone,this._dialogEl.nativeElement,()=>{},i));return m.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),m}_show(){const t={animation:this.animation,runningTransition:"continue"};_1(wr(this._zone,this._elRef.nativeElement,(u,m)=>{m&&Vg(u),u.classList.add("show")},t),wr(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{os(t,"keydown").pipe(So(this._closed$),zr(s=>s.which===ri.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(E0.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;os(this._dialogEl.nativeElement,"mousedown").pipe(So(this._closed$),Vr(()=>i=!1),Sl(()=>os(t,"mouseup").pipe(So(this._closed$),or(1))),zr(({target:s})=>t===s)).subscribe(()=>{i=!0}),os(t,"click").pipe(So(this._closed$)).subscribe(({target:s})=>{t===s&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(E0.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),s=HP(t)[0];(i||s||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let s;s=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&wr(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(t){return new(t||e)(ye(Uo),ye(Gn),ye(ui))},e.\u0275cmp=zn({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&Ep(_B,7),2&t){let s;yi(s=vi())&&(i._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(we("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),hh("modal d-block"+(i.windowClass?" "+i.windowClass:"")),xn("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[xr],ngContentSelectors:C1,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(Ml(),G(0,"div",0,1)(2,"div",2),Zu(3),J()()),2&t&&hh("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),L4=(()=>{class e{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,s=i.style,{overflow:u,paddingRight:m}=s;if(t>0){const b=parseFloat(window.getComputedStyle(i).paddingRight);s.paddingRight=`${b+t}px`}return s.overflow="hidden",()=>{t>0&&(s.paddingRight=m),s.overflow=u}}}return e.\u0275fac=function(t){return new(t||e)(Dt(Uo))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),B4=(()=>{class e{constructor(t,i,s,u,m,b,M){this._applicationRef=t,this._injector=i,this._environmentInjector=s,this._document=u,this._scrollBar=m,this._rendererFactory=b,this._ngZone=M,this._activeWindowCmptHasChanged=new Hn,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new zt,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const P=this._windowCmpts[this._windowCmpts.length-1];((e,n,t,i=!1)=>{e.runOutsideAngular(()=>{const s=os(n,"focusin").pipe(So(t),Ct(u=>u.target));os(n,"keydown").pipe(So(t),zr(u=>u.which===ri.Tab),Qw(s)).subscribe(([u,m])=>{const[b,M]=HP(n);(m===b||m===n)&&u.shiftKey&&(M.focus(),u.preventDefault()),m===M&&!u.shiftKey&&(b.focus(),u.preventDefault())}),i&&os(n,"click").pipe(So(t),Qw(s),Ct(u=>u[1])).subscribe(u=>u.focus())})})(this._ngZone,P.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(P.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,s){const u=s.container instanceof HTMLElement?s.container:Fp(s.container)?this._document.querySelector(s.container):this._document.body,m=this._rendererFactory.createRenderer(null,null);if(!u)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const b=new lE,M=(t=s.injector||t).get(ja,null)||this._environmentInjector,P=this._getContentRef(t,M,i,b,s);let I=!1!==s.backdrop?this._attachBackdrop(u):void 0,U=this._attachWindowComponent(u,P.nodes),W=new N4(U,P,I,s.beforeDismiss);return this._registerModalRef(W),this._registerWindowCmpt(U),W.hidden.pipe(or(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(m.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),b.close=oe=>{W.close(oe)},b.dismiss=oe=>{W.dismiss(oe)},b.update=oe=>{W.update(oe)},W.update(s),1===this._modalRefs.length&&m.addClass(this._document.body,"modal-open"),I&&I.instance&&I.changeDetectorRef.detectChanges(),U.changeDetectorRef.detectChanges(),W}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=Yb(I4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let s=Yb(F4,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(s.hostView),t.appendChild(s.location.nativeElement),s}_getContentRef(t,i,s,u,m){return s?s instanceof Zi?this._createFromTemplateRef(s,u):Bg(s)?this._createFromString(s):this._createFromComponent(t,i,s,u,m):new $p([])}_createFromTemplateRef(t,i){const u=t.createEmbeddedView({$implicit:i,close(m){i.close(m)},dismiss(m){i.dismiss(m)}});return this._applicationRef.attachView(u),new $p([u.rootNodes],u)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new $p([[i]])}_createFromComponent(t,i,s,u,m){const M=Yb(s,{environmentInjector:i,elementInjector:_r.create({providers:[{provide:lE,useValue:u}],parent:t})}),P=M.location.nativeElement;return m.scrollable&&P.classList.add("component-host-scrollable"),this._applicationRef.attachView(M.hostView),new $p([[P]],M.hostView,M)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(s=>{s!==t&&"SCRIPT"!==s.nodeName&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const s=this._modalRefs.indexOf(t);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(Dt(Eg),Dt(_r),Dt(ja),Dt(Uo),Dt(L4),Dt(p_),Dt(ui))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),z4=(()=>{class e{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Dt(Lp))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),V4=(()=>{class e{constructor(t,i,s){this._injector=t,this._modalStack=i,this._config=s}open(t,i={}){const s={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(Dt(_r),Dt(B4),Dt(z4))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),cE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({providers:[V4]}),e})();const W4=({classList:e})=>(e.remove("show"),()=>e.remove("active")),q4=(e,n)=>{n&&Vg(e),e.classList.add("show")};let MC=(()=>{class e{constructor(t){this.elRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Gn))},e.\u0275dir=vt({type:e,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,i){2&t&&(Qa("id",i.item.panelDomId),we("role",i.role?i.role:i.nav.roles?"tabpanel":void 0)("aria-labelledby",i.item.domId),xn("fade",i.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),e})(),hE=(()=>{class e{constructor(t,i){this._cd=t,this._ngZone=i,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(So(this.nav.destroy$),y1(this._activePane?.item||null),Yw(),function TL(e){return zr((n,t)=>e<=t)}(1)).subscribe(t=>{const i={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?wr(this._ngZone,this._activePane.elRef.nativeElement,W4,i).subscribe(()=>{const s=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),wr(this._ngZone,this._activePane.elRef.nativeElement,q4,i).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),s&&(s.hidden.emit(),this.nav.hidden.emit(s.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(i=>i.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return e.\u0275fac=function(t){return new(t||e)(ye(xa),ye(ui))},e.\u0275cmp=zn({type:e,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,i){if(1&t&&Ep(MC,5),2&t){let s;yi(s=vi())&&(i._panes=s)}},hostVars:2,hostBindings:function(t,i){2&t&&xn("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[xr],attrs:yB,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&_e(0,bB,1,1,"ng-template",0),2&t&&de("ngForOf",i.nav.items)},dependencies:[MC,ns,Lr,Qu],encapsulation:2,changeDetection:0}),e})(),pE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[hE]}),e})(),Z4=(()=>{class e{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fE=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),e})(),gE=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),e})(),mE=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),e})(),_E=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),e})(),yE=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),e})(),vE=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),e})(),xE=(()=>{class e{constructor(t){this.templateRef=t}}return e.\u0275fac=function(t){return new(t||e)(ye(Zi))},e.\u0275dir=vt({type:e,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),e})(),bE=(()=>{class e{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new zt(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,i){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),i<this.pageCount&&(i<this.pageCount-2?this.pages.push(-1):i===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,i=this.pageCount,s=Math.floor(this.maxSize/2);return this.page<=s?i=this.maxSize:this.pageCount-this.page<s?t=this.pageCount-this.maxSize:(t=this.page-s-1,i=this.page+(this.maxSize%2==0?s-1:s)),[t,i]}_applyPagination(){let i=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[i,i+this.maxSize]}_setPageInRange(t){const i=this.page;this.page=M1(t,this.pageCount,1),this.page!==i&&Ao(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Ao(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let i=1;i<=this.pageCount;i++)this.pages.push(i);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let i=0,s=this.pageCount;[i,s]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(i,s),this._applyEllipses(i,s)}}}return e.\u0275fac=function(t){return new(t||e)(ye(Z4))},e.\u0275cmp=zn({type:e,selectors:[["ngb-pagination"]],contentQueries:function(t,i,s){if(1&t&&(Ji(s,fE,5),Ji(s,gE,5),Ji(s,mE,5),Ji(s,_E,5),Ji(s,yE,5),Ji(s,vE,5),Ji(s,xE,5)),2&t){let u;yi(u=vi())&&(i.tplEllipsis=u.first),yi(u=vi())&&(i.tplFirst=u.first),yi(u=vi())&&(i.tplLast=u.first),yi(u=vi())&&(i.tplNext=u.first),yi(u=vi())&&(i.tplNumber=u.first),yi(u=vi())&&(i.tplPrevious=u.first),yi(u=vi())&&(i.tplPages=u.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[gi,xr],decls:20,vars:12,consts:function(){let n,t,i,s,u,m,b,M;return n=$localize`:@@ngb.pagination.first:««`,t=$localize`:@@ngb.pagination.previous:«`,i=$localize`:@@ngb.pagination.next:»`,s=$localize`:@@ngb.pagination.last:»»`,u=$localize`:@@ngb.pagination.first-aria:First`,m=$localize`:@@ngb.pagination.previous-aria:Previous`,b=$localize`:@@ngb.pagination.next-aria:Next`,M=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],n,t,i,s,["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",u,"href","",1,"page-link",3,"click"],["aria-label",m,"href","",1,"page-link",3,"click"],["aria-label",b,"href","",1,"page-link",3,"click"],["aria-label",M,"href","",1,"page-link",3,"click"]]},template:function(t,i){if(1&t&&(_e(0,wB,2,0,"ng-template",null,0,Hs),_e(2,CB,2,0,"ng-template",null,1,Hs),_e(4,MB,2,0,"ng-template",null,2,Hs),_e(6,OB,2,0,"ng-template",null,3,Hs),_e(8,TB,1,0,"ng-template",null,4,Hs),_e(10,DB,1,1,"ng-template",null,5,Hs),_e(12,NB,1,1,"ng-template",null,6,Hs),G(14,"ul"),_e(15,LB,3,9,"li",7),_e(16,VB,3,8,"li",7),_e(17,UB,0,0,"ng-template",8),_e(18,$B,3,9,"li",7),_e(19,HB,3,9,"li",7),J()),2&t){const s=rn(13);re(14),hh("pagination"+(i.size?" pagination-"+i.size:"")),re(1),de("ngIf",i.boundaryLinks),re(1),de("ngIf",i.directionLinks),re(1),de("ngTemplateOutlet",(null==i.tplPages?null:i.tplPages.templateRef)||s)("ngTemplateOutletContext",ph(8,WB,i.page,i.pages,i.disabled)),re(1),de("ngIf",i.directionLinks),re(1),de("ngIf",i.boundaryLinks)}},dependencies:[Lr,ns,Qu],encapsulation:2,changeDetection:0}),e})(),wE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[bE]}),e})(),ME=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})(),e8=(()=>{class e{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),t8=(()=>{class e{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!Ao(t)||t<=0?100:t}get max(){return this._max}getValue(){return M1(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return e.\u0275fac=function(t){return new(t||e)(ye(e8))},e.\u0275cmp=zn({type:e,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,i){2&t&&(we("aria-valuenow",i.getValue())("aria-valuemax",i.max)("aria-label",i.ariaLabel),wg("height",i.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[xr],ngContentSelectors:C1,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],n]},template:function(t,i){1&t&&(Ml(),G(0,"div"),_e(1,JB,3,3,"span",0),Zu(2),J()),2&t&&(qM("progress-bar",i.type?i.textType?" bg-"+i.type:" text-bg-"+i.type:"","",i.textType?" text-"+i.textType:"",""),wg("width",i.getPercentValue(),"%"),xn("progress-bar-animated",i.animated)("progress-bar-striped",i.striped),re(1),de("ngIf",i.showValue))},dependencies:[Lr,mT],encapsulation:2,changeDetection:0}),e})(),OE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[t8]}),e})(),n8=(()=>{class e{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),i8=(()=>{class e{constructor(t,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new zt,this.leave=new zt,this.rateChange=new zt(!0),this.onChange=s=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(t,i){return`${t} out of ${i}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case ri.ArrowDown:case ri.ArrowLeft:this.update(this.rate-1);break;case ri.ArrowUp:case ri.ArrowRight:this.update(this.rate+1);break;case ri.Home:this.update(0);break;case ri.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,i=!0){const s=M1(t,this.max,0);this.isInteractive()&&this.rate!==s&&(this.rate=s,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((i,s)=>i.fill=Math.round(100*M1(t-s,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,i)=>({fill:0,index:i}))}}return e.\u0275fac=function(t){return new(t||e)(ye(n8),ye(xa))},e.\u0275cmp=zn({type:e,selectors:[["ngb-rating"]],contentQueries:function(t,i,s){if(1&t&&Ji(s,Zi,5),2&t){let u;yi(u=vi())&&(i.starTemplateFromContent=u.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,i){1&t&&Ke("blur",function(){return i.handleBlur()})("keydown",function(u){return i.handleKeyDown(u)})("mouseleave",function(){return i.reset()}),2&t&&(Qa("tabindex",i.disabled?-1:i.tabindex),we("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText(i.nextRate,i.max))("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[Pi([{provide:qs,useExisting:Ht(()=>e),multi:!0}]),gi,xr],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(_e(0,XB,1,1,"ng-template",null,0,Hs),_e(2,YB,4,5,"ng-template",1)),2&t&&(re(2),de("ngForOf",i.contexts))},dependencies:[ns,Qu],encapsulation:2,changeDetection:0}),e})(),TE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[i8]}),e})();class DE{constructor(n,t,i){this.hour=rs(n),this.minute=rs(t),this.second=rs(i)}changeHour(n=1){this.updateHour((isNaN(this.hour)?0:this.hour)+n)}updateHour(n){this.hour=Ao(n)?(n<0?24+n:n)%24:NaN}changeMinute(n=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+n)}updateMinute(n){Ao(n)?(this.minute=n%60<0?60+n%60:n%60,this.changeHour(Math.floor(n/60))):this.minute=NaN}changeSecond(n=1){this.updateSecond((isNaN(this.second)?0:this.second)+n)}updateSecond(n){Ao(n)?(this.second=n<0?60+n%60:n%60,this.changeMinute(Math.floor(n/60))):this.second=NaN}isValid(n=!0){return Ao(this.hour)&&Ao(this.minute)&&(!n||Ao(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let o8=(()=>{class e{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),PE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return function r8(){return new s8}()},providedIn:"root"}),e})(),s8=(()=>{class e extends PE{fromModel(t){return t&&vo(t.hour)&&vo(t.minute)?{hour:t.hour,minute:t.minute,second:vo(t.second)?t.second:null}:null}toModel(t){return t&&vo(t.hour)&&vo(t.minute)?{hour:t.hour,minute:t.minute,second:vo(t.second)?t.second:null}:null}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=io(e)))(i||e)}}(),e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),EE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(t){let i=null;return i=t?new t:function a8(e){return new l8(e)}(Dt(el)),i},providedIn:"root"}),e})(),l8=(()=>{class e extends EE{constructor(t){super(),this._periods=QO(t,so.Standalone,Dn.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return e.\u0275fac=function(t){return new(t||e)(Dt(el))},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();const c8=/[^0-9]/g;let u8=(()=>{class e{constructor(t,i,s,u){this._config=t,this._ngbTimeAdapter=i,this._cd=s,this.i18n=u,this.onChange=m=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=vo(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=vo(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=vo(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const i=this._ngbTimeAdapter.fromModel(t);this.model=i?new DE(i.hour,i.minute,i.second):new DE,!this.seconds&&(!i||!Ao(i.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const i=!!this.model&&this.model.hour>=12,s=rs(t);this.model?.updateHour(this.meridian&&(i&&s<12||!i&&12===s)?s+12:s),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(rs(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(rs(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(c8,"")}formatHour(t){return Ao(t)?zg(this.meridian?t%12==0?12:t%12:t%24):zg(NaN)}formatMinSec(t){return zg(Ao(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!Ao(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return e.\u0275fac=function(t){return new(t||e)(ye(o8),ye(PE),ye(xa),ye(EE))},e.\u0275cmp=zn({type:e,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[Pi([{provide:qs,useExisting:Ht(()=>e),multi:!0}]),gi,xr],decls:16,vars:25,consts:function(){let n,t,i,s,u,m,b,M,P,I,U,W,oe,be;return n=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,i=$localize`:@@ngb.timepicker.MM:MM`,s=$localize`:@@ngb.timepicker.minutes:Minutes`,u=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,m=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,b=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,M=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,P=$localize`:@@ngb.timepicker.SS:SS`,I=$localize`:@@ngb.timepicker.seconds:Seconds`,U=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,W=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,oe=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,be=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",n,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",i,"aria-label",s,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],u,[1,"chevron","ngb-tp-chevron","bottom"],m,b,M,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",P,"aria-label",I,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],U,W,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],oe,be]},template:function(t,i){1&t&&(G(0,"fieldset",0)(1,"div",1)(2,"div",2),_e(3,QB,4,7,"button",3),G(4,"input",4),Ke("change",function(u){return i.updateHour(u.target.value)})("blur",function(){return i.handleBlur()})("input",function(u){return i.formatInput(u.target)})("keydown.ArrowUp",function(u){return i.changeHour(i.hourStep),u.preventDefault()})("keydown.ArrowDown",function(u){return i.changeHour(-i.hourStep),u.preventDefault()}),J(),_e(5,ez,4,7,"button",3),J(),G(6,"div",5),Ve(7,":"),J(),G(8,"div",6),_e(9,tz,4,7,"button",3),G(10,"input",7),Ke("change",function(u){return i.updateMinute(u.target.value)})("blur",function(){return i.handleBlur()})("input",function(u){return i.formatInput(u.target)})("keydown.ArrowUp",function(u){return i.changeMinute(i.minuteStep),u.preventDefault()})("keydown.ArrowDown",function(u){return i.changeMinute(-i.minuteStep),u.preventDefault()}),J(),_e(11,nz,4,7,"button",3),J(),_e(12,iz,2,0,"div",8),_e(13,sz,4,9,"div",9),_e(14,az,1,0,"div",8),_e(15,uz,5,9,"div",10),J()()),2&t&&(xn("disabled",i.disabled),de("disabled",i.disabled),re(3),de("ngIf",i.spinners),re(1),xn("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),de("value",i.formatHour(null==i.model?null:i.model.hour))("readOnly",i.readonlyInputs)("disabled",i.disabled),re(1),de("ngIf",i.spinners),re(4),de("ngIf",i.spinners),re(1),xn("form-control-sm",i.isSmallSize)("form-control-lg",i.isLargeSize),de("value",i.formatMinSec(null==i.model?null:i.model.minute))("readOnly",i.readonlyInputs)("disabled",i.disabled),re(1),de("ngIf",i.spinners),re(1),de("ngIf",i.seconds),re(1),de("ngIf",i.seconds),re(1),de("ngIf",i.meridian),re(1),de("ngIf",i.meridian))},dependencies:[Lr],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),e})(),SE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[u8]}),e})();const d8=(e,n)=>{const{classList:t}=e;if(n)return t.add("fade"),Vg(e),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},h8=({classList:e})=>(e.add("showing"),()=>{e.remove("show","showing")});let p8=(()=>{class e{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return e.\u0275fac=function(t){return new(t||e)(Dt(Lp))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["","ngbToastHeader",""]],standalone:!0}),e})(),g8=(()=>{class e{constructor(t,i,s,u){this.ariaLive=t,this._zone=s,this._element=u,this.contentHeaderTpl=null,this.shown=new zt,this.hidden=new zt,null==this.ariaLive&&(this.ariaLive=i.ariaLive),this.delay=i.delay,this.autohide=i.autohide,this.animation=i.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(or(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=wr(this._zone,this._element.nativeElement,h8,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=wr(this._zone,this._element.nativeElement,d8,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return e.\u0275fac=function(t){return new(t||e)(Vc("aria-live"),ye(p8),ye(ui),ye(Gn))},e.\u0275cmp=zn({type:e,selectors:[["ngb-toast"]],contentQueries:function(t,i,s){if(1&t&&Ji(s,f8,7,Zi),2&t){let u;yi(u=vi())&&(i.contentHeaderTpl=u.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,i){2&t&&(we("aria-live",i.ariaLive),xn("fade",i.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[gi,xr],ngContentSelectors:C1,decls:5,vars:1,consts:function(){let n;return n=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",n,1,"btn-close",3,"click"]]},template:function(t,i){1&t&&(Ml(),_e(0,dz,2,1,"ng-template",null,0,Hs),_e(2,pz,3,1,"ng-template",1),G(3,"div",2),Zu(4),J()),2&t&&(re(2),de("ngIf",i.contentHeaderTpl||i.header))},dependencies:[Lr,Qu],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),e})(),AE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[g8]}),e})(),IE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})(),m8=(()=>{class e{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const i=wP(this.result),s=Array.isArray(this.term)?this.term:[this.term],u=P=>this.accentSensitive?P:OP(P),m=s.map(P=>function vz(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(u(wP(P)))).filter(P=>P),b=this.accentSensitive?i:OP(i),M=m.length?b.split(new RegExp(`(${m.join("|")})`,"gmi")):[i];if(this.accentSensitive)this.parts=M;else{let P=0;this.parts=M.map(I=>i.substring(P,P+=I.length))}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[gi,xr],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,i){1&t&&_e(0,mz,3,2,"ng-template",0),2&t&&de("ngForOf",i.parts)},dependencies:[Lr,ns],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),e})();new qt("live announcer delay",{providedIn:"root",factory:function _8(){return 100}});let kE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[m8]}),e})(),RE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({}),e})();const y8=[RP,NP,LP,BP,oE,aE,cE,pE,RE,wE,ME,OE,TE,SE,AE,IE,kE];let v8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[y8,RP,NP,LP,BP,oE,aE,cE,pE,RE,wE,ME,OE,TE,SE,AE,IE,kE]}),e})();var x8=sl(898),b8=sl.n(x8);const L1=Xs(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function NE(e){return new dn(n=>{Ft(e()).subscribe(n)})}function A0(e,n){const t=Ln(e)?e:()=>e,i=s=>s.error(t());return new dn(n?s=>n.schedule(i,0,s):i)}function OC(){return xi((e,n)=>{let t=null;e._refCount++;const i=Wn(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const s=e._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}class FE extends dn{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,cs(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Xe;const t=this.getSubject();n.add(this.source.subscribe(Wn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Xe.EMPTY)}return n}refCount(){return OC()(this)}}function B1(e){return xi((n,t)=>{let i=!1;n.subscribe(Wn(t,s=>{i=!0,t.next(s)},()=>{i||t.next(e),t.complete()}))})}function LE(e=w8){return xi((n,t)=>{let i=!1;n.subscribe(Wn(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(e())))})}function w8(){return new L1}function bh(e,n){const t=arguments.length>=2;return i=>i.pipe(e?zr((s,u)=>e(s,u,i)):ar,or(1),t?B1(n):LE(()=>new L1))}function Gp(e,n){return Ln(n)?ki(e,n,1):ki(e,1)}function wh(e){return xi((n,t)=>{let u,i=null,s=!1;i=n.subscribe(Wn(t,void 0,void 0,m=>{u=Ft(e(m,wh(e)(n))),i?(i.unsubscribe(),i=null,u.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,u.subscribe(t))})}function BE(e,n){return xi(function C8(e,n,t,i,s){return(u,m)=>{let b=t,M=n,P=0;u.subscribe(Wn(m,I=>{const U=P++;M=b?e(M,I,U):(b=!0,I),i&&m.next(M)},s&&(()=>{b&&m.next(M),m.complete()})))}}(e,n,arguments.length>=2,!0))}function TC(e){return e<=0?()=>Gr:xi((n,t)=>{let i=[];n.subscribe(Wn(t,s=>{i.push(s),e<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}function zE(e,n){const t=arguments.length>=2;return i=>i.pipe(e?zr((s,u)=>e(s,u,i)):ar,TC(1),t?B1(n):LE(()=>new L1))}function DC(e){return xi((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const En="primary",I0=Symbol("RouteTitle");class O8{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hg(e){return new O8(e)}function T8(e,n,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const s={};for(let u=0;u<i.length;u++){const m=i[u],b=e[u];if(m.startsWith(":"))s[m.substring(1)]=b;else if(m!==b.path)return null}return{consumed:e.slice(0,i.length),posParams:s}}function ou(e,n){const t=e?Object.keys(e):void 0,i=n?Object.keys(n):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!VE(e[s],n[s]))return!1;return!0}function VE(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),i=[...n].sort();return t.every((s,u)=>i[u]===s)}return e===n}function UE(e){return Array.prototype.concat.apply([],e)}function jE(e){return e.length>0?e[e.length-1]:null}function ss(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Ch(e){return tr(e)?e:Ai(e)?to(Promise.resolve(e)):tn(e)}const z1=!1,P8={exact:function HE(e,n,t){if(!Hp(e.segments,n.segments)||!V1(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!HE(e.children[i],n.children[i],t))return!1;return!0},subset:WE},$E={exact:function E8(e,n){return ou(e,n)},subset:function S8(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>VE(e[t],n[t]))},ignored:()=>!0};function GE(e,n,t){return P8[t.paths](e.root,n.root,t.matrixParams)&&$E[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function WE(e,n,t){return qE(e,n,n.segments,t)}function qE(e,n,t,i){if(e.segments.length>t.length){const s=e.segments.slice(0,t.length);return!(!Hp(s,t)||n.hasChildren()||!V1(s,t,i))}if(e.segments.length===t.length){if(!Hp(e.segments,t)||!V1(e.segments,t,i))return!1;for(const s in n.children)if(!e.children[s]||!WE(e.children[s],n.children[s],i))return!1;return!0}{const s=t.slice(0,e.segments.length),u=t.slice(e.segments.length);return!!(Hp(e.segments,s)&&V1(e.segments,s,i)&&e.children[En])&&qE(e.children[En],n,u,i)}}function V1(e,n,t){return n.every((i,s)=>$E[t](e[s].parameters,i.parameters))}class Mh{constructor(n=new Fn([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hg(this.queryParams)),this._queryParamMap}toString(){return k8.serialize(this)}}class Fn{constructor(n,t){this.segments=n,this.children=t,this.parent=null,ss(t,(i,s)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return U1(this)}}class k0{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hg(this.parameters)),this._parameterMap}toString(){return XE(this)}}function Hp(e,n){return e.length===n.length&&e.every((t,i)=>t.path===n[i].path)}let R0=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return new PC},providedIn:"root"}),e})();class PC{parse(n){const t=new j8(n);return new Mh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${N0(n.root,!0)}`,i=function F8(e){const n=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(s=>`${j1(t)}=${j1(s)}`).join("&"):`${j1(t)}=${j1(i)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${i}${"string"==typeof n.fragment?`#${function R8(e){return encodeURI(e)}(n.fragment)}`:""}`}}const k8=new PC;function U1(e){return e.segments.map(n=>XE(n)).join("/")}function N0(e,n){if(!e.hasChildren())return U1(e);if(n){const t=e.children[En]?N0(e.children[En],!1):"",i=[];return ss(e.children,(s,u)=>{u!==En&&i.push(`${u}:${N0(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function I8(e,n){let t=[];return ss(e.children,(i,s)=>{s===En&&(t=t.concat(n(i,s)))}),ss(e.children,(i,s)=>{s!==En&&(t=t.concat(n(i,s)))}),t}(e,(i,s)=>s===En?[N0(e.children[En],!1)]:[`${s}:${N0(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[En]?`${U1(e)}/${t[0]}`:`${U1(e)}/(${t.join("//")})`}}function ZE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function j1(e){return ZE(e).replace(/%3B/gi,";")}function EC(e){return ZE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $1(e){return decodeURIComponent(e)}function JE(e){return $1(e.replace(/\+/g,"%20"))}function XE(e){return`${EC(e.path)}${function N8(e){return Object.keys(e).map(n=>`;${EC(n)}=${EC(e[n])}`).join("")}(e.parameters)}`}const L8=/^[^\/()?;=#]+/;function G1(e){const n=e.match(L8);return n?n[0]:""}const B8=/^[^=?&#]+/,V8=/^[^&#]+/;class j8{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fn([],{}):new Fn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[En]=new Fn(n,t)),i}parseSegment(){const n=G1(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new tt(4009,z1);return this.capture(n),new k0($1(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=G1(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=G1(this.remaining);s&&(i=s,this.capture(i))}n[$1(t)]=$1(i)}parseQueryParam(n){const t=function z8(e){const n=e.match(B8);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const m=function U8(e){const n=e.match(V8);return n?n[0]:""}(this.remaining);m&&(i=m,this.capture(i))}const s=JE(t),u=JE(i);if(n.hasOwnProperty(s)){let m=n[s];Array.isArray(m)||(m=[m],n[s]=m),m.push(u)}else n[s]=u}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=G1(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new tt(4010,z1);let u;i.indexOf(":")>-1?(u=i.slice(0,i.indexOf(":")),this.capture(u),this.capture(":")):n&&(u=En);const m=this.parseChildren();t[u]=1===Object.keys(m).length?m[En]:new Fn([],m),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new tt(4011,z1)}}function SC(e){return e.segments.length>0?new Fn([],{[En]:e}):e}function H1(e){const n={};for(const i of Object.keys(e.children)){const u=H1(e.children[i]);(u.segments.length>0||u.hasChildren())&&(n[i]=u)}return function $8(e){if(1===e.numberOfChildren&&e.children[En]){const n=e.children[En];return new Fn(e.segments.concat(n.segments),n.children)}return e}(new Fn(e.segments,n))}function Wp(e){return e instanceof Mh}const AC=!1;function G8(e,n,t,i,s){if(0===t.length)return Wg(n.root,n.root,n.root,i,s);const u=function tS(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new eS(!0,0,e);let n=0,t=!1;const i=e.reduce((s,u,m)=>{if("object"==typeof u&&null!=u){if(u.outlets){const b={};return ss(u.outlets,(M,P)=>{b[P]="string"==typeof M?M.split("/"):M}),[...s,{outlets:b}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===m?(u.split("/").forEach((b,M)=>{0==M&&"."===b||(0==M&&""===b?t=!0:".."===b?n++:""!=b&&s.push(b))}),s):[...s,u]},[]);return new eS(t,n,i)}(t);return u.toRoot()?Wg(n.root,n.root,new Fn([],{}),i,s):function m(M){const P=function W8(e,n,t,i){if(e.isAbsolute)return new qg(n.root,!0,0);if(-1===i)return new qg(t,t===n.root,0);return function nS(e,n,t){let i=e,s=n,u=t;for(;u>s;){if(u-=s,i=i.parent,!i)throw new tt(4005,AC&&"Invalid number of '../'");s=i.segments.length}return new qg(i,!1,s-u)}(t,i+(F0(e.commands[0])?0:1),e.numberOfDoubleDots)}(u,n,e.snapshot?._urlSegment,M),I=P.processChildren?Zg(P.segmentGroup,P.index,u.commands):IC(P.segmentGroup,P.index,u.commands);return Wg(n.root,P.segmentGroup,I,i,s)}(e.snapshot?._lastPathIndex)}function F0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function L0(e){return"object"==typeof e&&null!=e&&e.outlets}function Wg(e,n,t,i,s){let m,u={};i&&ss(i,(M,P)=>{u[P]=Array.isArray(M)?M.map(I=>`${I}`):`${M}`}),m=e===n?t:QE(e,n,t);const b=SC(H1(m));return new Mh(b,u,s)}function QE(e,n,t){const i={};return ss(e.children,(s,u)=>{i[u]=s===n?t:QE(s,n,t)}),new Fn(e.segments,i)}class eS{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&F0(i[0]))throw new tt(4003,AC&&"Root segment cannot have matrix parameters");const s=i.find(L0);if(s&&s!==jE(i))throw new tt(4004,AC&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qg{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}}function IC(e,n,t){if(e||(e=new Fn([],{})),0===e.segments.length&&e.hasChildren())return Zg(e,n,t);const i=function Z8(e,n,t){let i=0,s=n;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(i>=t.length)return u;const m=e.segments[s],b=t[i];if(L0(b))break;const M=`${b}`,P=i<t.length-1?t[i+1]:null;if(s>0&&void 0===M)break;if(M&&P&&"object"==typeof P&&void 0===P.outlets){if(!oS(M,P,m))return u;i+=2}else{if(!oS(M,{},m))return u;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(e,n,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const u=new Fn(e.segments.slice(0,i.pathIndex),{});return u.children[En]=new Fn(e.segments.slice(i.pathIndex),e.children),Zg(u,0,s)}return i.match&&0===s.length?new Fn(e.segments,{}):i.match&&!e.hasChildren()?kC(e,n,t):i.match?Zg(e,0,s):kC(e,n,t)}function Zg(e,n,t){if(0===t.length)return new Fn(e.segments,{});{const i=function q8(e){return L0(e[0])?e[0].outlets:{[En]:e}}(t),s={};if(!i[En]&&e.children[En]&&1===e.numberOfChildren&&0===e.children[En].segments.length){const u=Zg(e.children[En],n,t);return new Fn(e.segments,u.children)}return ss(i,(u,m)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[m]=IC(e.children[m],n,u))}),ss(e.children,(u,m)=>{void 0===i[m]&&(s[m]=u)}),new Fn(e.segments,s)}}function kC(e,n,t){const i=e.segments.slice(0,n);let s=0;for(;s<t.length;){const u=t[s];if(L0(u)){const M=J8(u.outlets);return new Fn(i,M)}if(0===s&&F0(t[0])){i.push(new k0(e.segments[n].path,iS(t[0]))),s++;continue}const m=L0(u)?u.outlets[En]:`${u}`,b=s<t.length-1?t[s+1]:null;m&&b&&F0(b)?(i.push(new k0(m,iS(b))),s+=2):(i.push(new k0(m,{})),s++)}return new Fn(i,{})}function J8(e){const n={};return ss(e,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[i]=kC(new Fn([],{}),0,t))}),n}function iS(e){const n={};return ss(e,(t,i)=>n[i]=`${t}`),n}function oS(e,n,t){return e==t.path&&ou(n,t.parameters)}const B0="imperative";class ru{constructor(n,t){this.id=n,this.url=t}}class RC extends ru{constructor(n,t,i="imperative",s=null){super(n,t),this.type=0,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qp extends ru{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class W1 extends ru{constructor(n,t,i,s){super(n,t),this.reason=i,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class q1 extends ru{constructor(n,t,i,s){super(n,t),this.reason=i,this.code=s,this.type=16}}class NC extends ru{constructor(n,t,i,s){super(n,t),this.error=i,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class X8 extends ru{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K8 extends ru{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y8 extends ru{constructor(n,t,i,s,u){super(n,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q8 extends ru{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e6 extends ru{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t6{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class n6{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class i6{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o6{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r6{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s6{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rS{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let c6=(()=>{class e{createUrlTree(t,i,s,u,m,b){return G8(t||i.root,s,u,m,b)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})(),d6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(n){return c6.\u0275fac(n)},providedIn:"root"}),e})();class sS{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=FC(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){const t=FC(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=LC(n,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==n)}pathFromRoot(n){return LC(n,this._root).map(t=>t.value)}}function FC(e,n){if(e===n.value)return n;for(const t of n.children){const i=FC(e,t);if(i)return i}return null}function LC(e,n){if(e===n.value)return[n];for(const t of n.children){const i=LC(e,t);if(i.length)return i.unshift(n),i}return[]}class td{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Jg(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class aS extends sS{constructor(n,t){super(n),this.snapshot=t,BC(this,n)}toString(){return this.snapshot.toString()}}function lS(e,n){const t=function h6(e,n){const m=new Z1([],{},{},"",{},En,n,null,e.root,-1,{});return new uS("",new td(m,[]))}(e,n),i=new Br([new k0("",{})]),s=new Br({}),u=new Br({}),m=new Br({}),b=new Br(""),M=new Xg(i,s,m,b,u,En,n,t.root);return M.snapshot=t.root,new aS(new td(M,[]),t)}class Xg{constructor(n,t,i,s,u,m,b,M){this.url=n,this.params=t,this.queryParams=i,this.fragment=s,this.data=u,this.outlet=m,this.component=b,this.title=this.data?.pipe(Ct(P=>P[I0]))??tn(void 0),this._futureSnapshot=M}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ct(n=>Hg(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ct(n=>Hg(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cS(e,n="emptyOnly"){const t=e.pathFromRoot;let i=0;if("always"!==n)for(i=t.length-1;i>=1;){const s=t[i],u=t[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(u.component)break;i--}}return function p6(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Z1{get title(){return this.data?.[I0]}constructor(n,t,i,s,u,m,b,M,P,I,U){this.url=n,this.params=t,this.queryParams=i,this.fragment=s,this.data=u,this.outlet=m,this.component=b,this.routeConfig=M,this._urlSegment=P,this._lastPathIndex=I,this._resolve=U}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uS extends sS{constructor(n,t){super(t),this.url=n,BC(this,t)}toString(){return dS(this._root)}}function BC(e,n){n.value._routerState=e,n.children.forEach(t=>BC(e,t))}function dS(e){const n=e.children.length>0?` { ${e.children.map(dS).join(", ")} } `:"";return`${e.value}${n}`}function zC(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,ou(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),ou(n.params,t.params)||e.params.next(t.params),function D8(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!ou(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),ou(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function VC(e,n){const t=ou(e.params,n.params)&&function A8(e,n){return Hp(e,n)&&e.every((t,i)=>ou(t.parameters,n[i].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||VC(e.parent,n.parent))}function z0(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=n.value;const s=function g6(e,n,t){return n.children.map(i=>{for(const s of t.children)if(e.shouldReuseRoute(i.value,s.value.snapshot))return z0(e,i,s);return z0(e,i)})}(e,n,t);return new td(i,s)}{if(e.shouldAttach(n.value)){const u=e.retrieve(n.value);if(null!==u){const m=u.route;return m.value._futureSnapshot=n.value,m.children=n.children.map(b=>z0(e,b)),m}}const i=function m6(e){return new Xg(new Br(e.url),new Br(e.params),new Br(e.queryParams),new Br(e.fragment),new Br(e.data),e.outlet,e.component,e)}(n.value),s=n.children.map(u=>z0(e,u));return new td(i,s)}}const UC="ngNavigationCancelingError";function hS(e,n){const{redirectTo:t,navigationBehaviorOptions:i}=Wp(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,s=pS(!1,0,n);return s.url=t,s.navigationBehaviorOptions=i,s}function pS(e,n,t){const i=new Error("NavigationCancelingError: "+(e||""));return i[UC]=!0,i.cancellationCode=n,t&&(i.url=t),i}function fS(e){return gS(e)&&Wp(e.url)}function gS(e){return e&&e[UC]}class _6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new V0,this.attachRef=null}}let V0=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const s=this.getOrCreateContext(t);s.outlet=i,this.contexts.set(t,s)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new _6,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const J1=!1;let jC=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=En,this.activateEvents=new zt,this.deactivateEvents=new zt,this.attachEvents=new zt,this.detachEvents=new zt,this.parentContexts=fn(V0),this.location=fn(Dl),this.changeDetector=fn(xa),this.environmentInjector=fn(ja)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:s}=t.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new tt(4012,J1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new tt(4012,J1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new tt(4012,J1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new tt(4013,J1);this._activatedRoute=t;const s=this.location,m=t.snapshot.component,b=this.parentContexts.getOrCreateContext(this.name).children,M=new y6(t,b,s.injector);if(i&&function v6(e){return!!e.resolveComponentFactory}(i)){const P=i.resolveComponentFactory(m);this.activated=s.createComponent(P,s.length,M)}else this.activated=s.createComponent(m,{index:s.length,injector:M,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gi]}),e})();class y6{constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===Xg?this.route:n===V0?this.childContexts:this.parent.get(n,t)}}let $C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["ng-component"]],standalone:!0,features:[xr],decls:1,vars:0,template:function(t,i){1&t&&Ie(0,"router-outlet")},dependencies:[jC],encapsulation:2}),e})();function mS(e,n){return e.providers&&!e._injector&&(e._injector=Nv(e.providers,n,`Route: ${e.path}`)),e._injector??n}function HC(e){const n=e.children&&e.children.map(HC),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==En&&(t.component=$C),t}function Il(e){return e.outlet||En}function _S(e,n){const t=e.filter(i=>Il(i)===n);return t.push(...e.filter(i=>Il(i)!==n)),t}function U0(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class M6{constructor(n,t,i,s){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=s}activate(n){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),zC(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){const s=Jg(t);n.children.forEach(u=>{const m=u.value.outlet;this.deactivateRoutes(u,s[m],i),delete s[m]}),ss(s,(u,m)=>{this.deactivateRouteAndItsChildren(u,i)})}deactivateRoutes(n,t,i){const s=n.value,u=t?t.value:null;if(s===u)if(s.component){const m=i.getContext(s.outlet);m&&this.deactivateChildRoutes(n,t,m.children)}else this.deactivateChildRoutes(n,t,i);else u&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const i=t.getContext(n.value.outlet),s=i&&n.value.component?i.children:t,u=Jg(n);for(const m of Object.keys(u))this.deactivateRouteAndItsChildren(u[m],s);if(i&&i.outlet){const m=i.outlet.detach(),b=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:m,route:n,contexts:b})}}deactivateRouteAndOutlet(n,t){const i=t.getContext(n.value.outlet),s=i&&n.value.component?i.children:t,u=Jg(n);for(const m of Object.keys(u))this.deactivateRouteAndItsChildren(u[m],s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,t,i){const s=Jg(t);n.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],i),this.forwardEvent(new s6(u.value.snapshot))}),n.children.length&&this.forwardEvent(new o6(n.value.snapshot))}activateRoutes(n,t,i){const s=n.value,u=t?t.value:null;if(zC(s),s===u)if(s.component){const m=i.getOrCreateContext(s.outlet);this.activateChildRoutes(n,t,m.children)}else this.activateChildRoutes(n,t,i);else if(s.component){const m=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const b=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),m.children.onOutletReAttached(b.contexts),m.attachRef=b.componentRef,m.route=b.route.value,m.outlet&&m.outlet.attach(b.componentRef,b.route.value),zC(b.route.value),this.activateChildRoutes(n,null,m.children)}else{const b=U0(s.snapshot),M=b?.get(Qd)??null;m.attachRef=null,m.route=s,m.resolver=M,m.injector=b,m.outlet&&m.outlet.activateWith(s,m.injector),this.activateChildRoutes(n,null,m.children)}}else this.activateChildRoutes(n,null,i)}}class yS{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class X1{constructor(n,t){this.component=n,this.route=t}}function O6(e,n,t){const i=e._root;return j0(i,n?n._root:null,t,[i.value])}function Kg(e,n){const t=Symbol(),i=n.get(e,t);return i===t?"function"!=typeof e||function Sh(e){return null!==ld(e)}(e)?n.get(e):e:i}function j0(e,n,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Jg(n);return e.children.forEach(m=>{(function D6(e,n,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=e.value,m=n?n.value:null,b=t?t.getContext(e.value.outlet):null;if(m&&u.routeConfig===m.routeConfig){const M=function P6(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Hp(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Hp(e.url,n.url)||!ou(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VC(e,n)||!ou(e.queryParams,n.queryParams);default:return!VC(e,n)}}(m,u,u.routeConfig.runGuardsAndResolvers);M?s.canActivateChecks.push(new yS(i)):(u.data=m.data,u._resolvedData=m._resolvedData),j0(e,n,u.component?b?b.children:null:t,i,s),M&&b&&b.outlet&&b.outlet.isActivated&&s.canDeactivateChecks.push(new X1(b.outlet.component,m))}else m&&$0(n,b,s),s.canActivateChecks.push(new yS(i)),j0(e,null,u.component?b?b.children:null:t,i,s)})(m,u[m.value.outlet],t,i.concat([m.value]),s),delete u[m.value.outlet]}),ss(u,(m,b)=>$0(m,t.getContext(b),s)),s}function $0(e,n,t){const i=Jg(e),s=e.value;ss(i,(u,m)=>{$0(u,s.component?n?n.children.getContext(m):null:n,t)}),t.canDeactivateChecks.push(new X1(s.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,s))}function G0(e){return"function"==typeof e}function WC(e){return e instanceof L1||"EmptyError"===e?.name}const K1=Symbol("INITIAL_VALUE");function Yg(){return Sl(e=>m1(e.map(n=>n.pipe(or(1),y1(K1)))).pipe(Ct(n=>{for(const t of n)if(!0!==t){if(t===K1)return K1;if(!1===t||t instanceof Mh)return t}return!0}),zr(n=>n!==K1),or(1)))}function vS(e){return function _n(...e){return Oa(e)}(Vr(n=>{if(Wp(n))throw hS(0,n)}),Ct(n=>!0===n))}const qC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xS(e,n,t,i,s){const u=ZC(e,n,t);return u.matched?function H6(e,n,t,i){const s=n.canMatch;return s&&0!==s.length?tn(s.map(m=>{const b=Kg(m,e);return Ch(function R6(e){return e&&G0(e.canMatch)}(b)?b.canMatch(n,t):e.runInContext(()=>b(n,t)))})).pipe(Yg(),vS()):tn(!0)}(i=mS(n,i),n,t).pipe(Ct(m=>!0===m?u:{...qC})):tn(u)}function ZC(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...qC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(n.matcher||T8)(t,e,n);if(!s)return{...qC};const u={};ss(s.posParams,(b,M)=>{u[M]=b.path});const m=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:m,positionalParamSegments:s.posParams??{}}}function Y1(e,n,t,i){if(t.length>0&&function Z6(e,n,t){return t.some(i=>Q1(e,n,i)&&Il(i)!==En)}(e,t,i)){const u=new Fn(n,function q6(e,n,t,i){const s={};s[En]=i,i._sourceSegment=e,i._segmentIndexShift=n.length;for(const u of t)if(""===u.path&&Il(u)!==En){const m=new Fn([],{});m._sourceSegment=e,m._segmentIndexShift=n.length,s[Il(u)]=m}return s}(e,n,i,new Fn(t,e.children)));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function J6(e,n,t){return t.some(i=>Q1(e,n,i))}(e,t,i)){const u=new Fn(e.segments,function W6(e,n,t,i,s){const u={};for(const m of i)if(Q1(e,t,m)&&!s[Il(m)]){const b=new Fn([],{});b._sourceSegment=e,b._segmentIndexShift=n.length,u[Il(m)]=b}return{...s,...u}}(e,n,t,i,e.children));return u._sourceSegment=e,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:t}}const s=new Fn(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:t}}function Q1(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function bS(e,n,t,i){return!!(Il(e)===i||i!==En&&Q1(n,t,e))&&("**"===e.path||ZC(n,e,t).matched)}function wS(e,n,t){return 0===n.length&&!e.children[t]}const ex=!1;class tx{constructor(n){this.segmentGroup=n||null}}class CS{constructor(n){this.urlTree=n}}function H0(e){return A0(new tx(e))}function MS(e){return A0(new CS(e))}class Q6{constructor(n,t,i,s,u){this.injector=n,this.configLoader=t,this.urlSerializer=i,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const n=Y1(this.urlTree.root,[],[],this.config).segmentGroup,t=new Fn(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,En).pipe(Ct(u=>this.createUrlTree(H1(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wh(u=>{if(u instanceof CS)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof tx?this.noMatchError(u):u}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,En).pipe(Ct(s=>this.createUrlTree(H1(s),n.queryParams,n.fragment))).pipe(wh(s=>{throw s instanceof tx?this.noMatchError(s):s}))}noMatchError(n){return new tt(4002,ex)}createUrlTree(n,t,i){const s=SC(n);return new Mh(s,t,i)}expandSegmentGroup(n,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,t,i).pipe(Ct(u=>new Fn([],u))):this.expandSegment(n,i,t,i.segments,s,!0)}expandChildren(n,t,i){const s=[];for(const u of Object.keys(i.children))"primary"===u?s.unshift(u):s.push(u);return to(s).pipe(Gp(u=>{const m=i.children[u],b=_S(t,u);return this.expandSegmentGroup(n,b,m,u).pipe(Ct(M=>({segment:M,outlet:u})))}),BE((u,m)=>(u[m.outlet]=m.segment,u),{}),zE())}expandSegment(n,t,i,s,u,m){return to(i).pipe(Gp(b=>this.expandSegmentAgainstRoute(n,t,i,b,s,u,m).pipe(wh(P=>{if(P instanceof tx)return tn(null);throw P}))),bh(b=>!!b),wh((b,M)=>{if(WC(b))return wS(t,s,u)?tn(new Fn([],{})):H0(t);throw b}))}expandSegmentAgainstRoute(n,t,i,s,u,m,b){return bS(s,t,u,m)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(n,t,s,u,m):b&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,i,s,u,m):H0(t):H0(t)}expandSegmentAgainstRouteUsingRedirect(n,t,i,s,u,m){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,s,m):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,s,u,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,i,s){const u=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?MS(u):this.lineralizeSegments(i,u).pipe(ki(m=>{const b=new Fn(m,{});return this.expandSegment(n,b,t,m,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,s,u,m){const{matched:b,consumedSegments:M,remainingSegments:P,positionalParamSegments:I}=ZC(t,s,u);if(!b)return H0(t);const U=this.applyRedirectCommands(M,s.redirectTo,I);return s.redirectTo.startsWith("/")?MS(U):this.lineralizeSegments(s,U).pipe(ki(W=>this.expandSegment(n,t,i,W.concat(P),m,!1)))}matchSegmentAgainstRoute(n,t,i,s,u){return"**"===i.path?(n=mS(i,n),i.loadChildren?(i._loadedRoutes?tn({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(n,i)).pipe(Ct(b=>(i._loadedRoutes=b.routes,i._loadedInjector=b.injector,new Fn(s,{})))):tn(new Fn(s,{}))):xS(t,i,s,n).pipe(Sl(({matched:m,consumedSegments:b,remainingSegments:M})=>m?this.getChildConfig(n=i._injector??n,i,s).pipe(ki(I=>{const U=I.injector??n,W=I.routes,{segmentGroup:oe,slicedSegments:be}=Y1(t,b,M,W),Te=new Fn(oe.segments,oe.children);if(0===be.length&&Te.hasChildren())return this.expandChildren(U,W,Te).pipe(Ct(We=>new Fn(b,We)));if(0===W.length&&0===be.length)return tn(new Fn(b,{}));const ze=Il(i)===u;return this.expandSegment(U,Te,W,be,ze?En:u,!0).pipe(Ct(ht=>new Fn(b.concat(ht.segments),ht.children)))})):H0(t)))}getChildConfig(n,t,i){return t.children?tn({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?tn({routes:t._loadedRoutes,injector:t._loadedInjector}):function G6(e,n,t,i){const s=n.canLoad;return void 0===s||0===s.length?tn(!0):tn(s.map(m=>{const b=Kg(m,e);return Ch(function S6(e){return e&&G0(e.canLoad)}(b)?b.canLoad(n,t):e.runInContext(()=>b(n,t)))})).pipe(Yg(),vS())}(n,t,i).pipe(ki(s=>s?this.configLoader.loadChildren(n,t).pipe(Vr(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function K6(e){return A0(pS(ex,3))}())):tn({routes:[],injector:n})}lineralizeSegments(n,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return tn(i);if(s.numberOfChildren>1||!s.children[En])return n.redirectTo,A0(new tt(4e3,ex));s=s.children[En]}}applyRedirectCommands(n,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i)}applyRedirectCreateUrlTree(n,t,i,s){const u=this.createSegmentGroup(n,t.root,i,s);return new Mh(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const i={};return ss(n,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const b=s.substring(1);i[u]=t[b]}else i[u]=s}),i}createSegmentGroup(n,t,i,s){const u=this.createSegments(n,t.segments,i,s);let m={};return ss(t.children,(b,M)=>{m[M]=this.createSegmentGroup(n,b,i,s)}),new Fn(u,m)}createSegments(n,t,i,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(n,u,s):this.findOrReturn(u,i))}findPosParam(n,t,i){const s=i[t.path.substring(1)];if(!s)throw new tt(4001,ex);return s}findOrReturn(n,t){let i=0;for(const s of t){if(s.path===n.path)return t.splice(i),s;i++}return n}}class tV{}class oV{constructor(n,t,i,s,u,m,b){this.injector=n,this.rootComponentType=t,this.config=i,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=m,this.urlSerializer=b}recognize(){const n=Y1(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,En).pipe(Ct(t=>{if(null===t)return null;const i=new Z1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},En,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new td(i,t),u=new uS(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(n){const t=n.value,i=cS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),n.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(n,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,t,i):this.processSegment(n,t,i,i.segments,s)}processChildren(n,t,i){return to(Object.keys(i.children)).pipe(Gp(s=>{const u=i.children[s],m=_S(t,s);return this.processSegmentGroup(n,m,u,s)}),BE((s,u)=>s&&u?(s.push(...u),s):null),function M8(e,n=!1){return xi((t,i)=>{let s=0;t.subscribe(Wn(i,u=>{const m=e(u,s++);(m||n)&&i.next(u),!m&&i.complete()}))})}(s=>null!==s),B1(null),zE(),Ct(s=>{if(null===s)return null;const u=TS(s);return function rV(e){e.sort((n,t)=>n.value.outlet===En?-1:t.value.outlet===En?1:n.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(n,t,i,s,u){return to(t).pipe(Gp(m=>this.processSegmentAgainstRoute(m._injector??n,m,i,s,u)),bh(m=>!!m),wh(m=>{if(WC(m))return wS(i,s,u)?tn([]):tn(null);throw m}))}processSegmentAgainstRoute(n,t,i,s,u){if(t.redirectTo||!bS(t,i,s,u))return tn(null);let m;if("**"===t.path){const b=s.length>0?jE(s).parameters:{},M=PS(i)+s.length;m=tn({snapshot:new Z1(s,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ES(t),Il(t),t.component??t._loadedComponent??null,t,DS(i),M,SS(t)),consumedSegments:[],remainingSegments:[]})}else m=xS(i,t,s,n).pipe(Ct(({matched:b,consumedSegments:M,remainingSegments:P,parameters:I})=>{if(!b)return null;const U=PS(i)+M.length;return{snapshot:new Z1(M,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ES(t),Il(t),t.component??t._loadedComponent??null,t,DS(i),U,SS(t)),consumedSegments:M,remainingSegments:P}}));return m.pipe(Sl(b=>{if(null===b)return tn(null);const{snapshot:M,consumedSegments:P,remainingSegments:I}=b;n=t._injector??n;const U=t._loadedInjector??n,W=function sV(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:oe,slicedSegments:be}=Y1(i,P,I,W.filter(ze=>void 0===ze.redirectTo));if(0===be.length&&oe.hasChildren())return this.processChildren(U,W,oe).pipe(Ct(ze=>null===ze?null:[new td(M,ze)]));if(0===W.length&&0===be.length)return tn([new td(M,[])]);const Te=Il(t)===u;return this.processSegment(U,W,oe,be,Te?En:u).pipe(Ct(ze=>null===ze?null:[new td(M,ze)]))}))}}function aV(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function TS(e){const n=[],t=new Set;for(const i of e){if(!aV(i)){n.push(i);continue}const s=n.find(u=>i.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):n.push(i)}for(const i of t){const s=TS(i.children);n.push(new td(i.value,s))}return n.filter(i=>!t.has(i))}function DS(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function PS(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function ES(e){return e.data||{}}function SS(e){return e.resolve||{}}function uV(e,n){return ki(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return tn(t);let u=0;return to(s).pipe(Gp(m=>function dV(e,n,t,i){const s=e.routeConfig,u=e._resolve;return void 0!==s?.title&&!AS(s)&&(u[I0]=s.title),function hV(e,n,t,i){const s=function pV(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===s.length)return tn({});const u={};return to(s).pipe(ki(m=>function fV(e,n,t,i){const s=U0(n)??i,u=Kg(e,s);return Ch(u.resolve?u.resolve(n,t):s.runInContext(()=>u(n,t)))}(e[m],n,t,i).pipe(bh(),Vr(b=>{u[m]=b}))),TC(1),function iP(e){return Ct(()=>e)}(u),wh(m=>WC(m)?Gr:A0(m)))}(u,e,n,i).pipe(Ct(m=>(e._resolvedData=m,e.data=cS(e,t).resolve,s&&AS(s)&&(e.data[I0]=s.title),null)))}(m.route,i,e,n)),Vr(()=>u++),TC(1),ki(m=>u===s.length?tn(t):Gr))})}function AS(e){return"string"==typeof e.title||null===e.title}function JC(e){return Sl(n=>{const t=e(n);return t?to(t).pipe(Ct(()=>n)):tn(n)})}const Qg=new qt("ROUTES");let XC=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=fn(vO)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Ch(t.loadComponent()).pipe(Ct(kS),Vr(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),DC(()=>{this.componentLoaders.delete(t)})),s=new FE(i,()=>new Hn).pipe(OC());return this.componentLoaders.set(t,s),s}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return tn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const u=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Ct(b=>{this.onLoadEndListener&&this.onLoadEndListener(i);let M,P,I=!1;Array.isArray(b)?P=b:(M=b.create(t).injector,P=UE(M.get(Qg,[],Zt.Self|Zt.Optional)));return{routes:P.map(HC),injector:M}}),DC(()=>{this.childrenLoaders.delete(i)})),m=new FE(u,()=>new Hn).pipe(OC());return this.childrenLoaders.set(i,m),m}loadModuleFactoryOrRoutes(t){return Ch(t()).pipe(Ct(kS),ki(i=>i instanceof A2||Array.isArray(i)?tn(i):to(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function kS(e){return function gV(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let ix=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Hn,this.configLoader=fn(XC),this.environmentInjector=fn(ja),this.urlSerializer=fn(R0),this.rootContexts=fn(V0),this.navigationId=0,this.afterPreactivation=()=>tn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new n6(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new t6(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Br({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:B0,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(zr(i=>0!==i.id),Ct(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),Sl(i=>{let s=!1,u=!1;return tn(i).pipe(Vr(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sl(m=>{const b=t.browserUrlTree.toString(),M=!t.navigated||m.extractedUrl.toString()!==b||b!==t.currentUrlTree.toString();if(!M&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const I="";return this.events.next(new q1(m.id,t.serializeUrl(i.rawUrl),I,0)),t.rawUrlTree=m.rawUrl,m.resolve(null),Gr}if(t.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return RS(m.source)&&(t.browserUrlTree=m.extractedUrl),tn(m).pipe(Sl(I=>{const U=this.transitions?.getValue();return this.events.next(new RC(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),U!==this.transitions?.getValue()?Gr:Promise.resolve(I)}),function eV(e,n,t,i){return Sl(s=>function Y6(e,n,t,i,s){return new Q6(e,n,t,i,s).apply()}(e,n,t,s.extractedUrl,i).pipe(Ct(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Vr(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},i.urlAfterRedirects=I.urlAfterRedirects}),function cV(e,n,t,i,s){return ki(u=>function iV(e,n,t,i,s,u,m="emptyOnly"){return new oV(e,n,t,i,s,m,u).recognize().pipe(Sl(b=>null===b?function nV(e){return new dn(n=>n.error(e))}(new tV):tn(b)))}(e,n,t,u.urlAfterRedirects,i.serialize(u.urlAfterRedirects),i,s).pipe(Ct(m=>({...u,targetSnapshot:m}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Vr(I=>{if(i.targetSnapshot=I.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!I.extras.skipLocationChange){const W=t.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);t.setBrowserUrl(W,I)}t.browserUrlTree=I.urlAfterRedirects}const U=new X8(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(U)}));if(M&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:I,extractedUrl:U,source:W,restoredState:oe,extras:be}=m,Te=new RC(I,this.urlSerializer.serialize(U),W,oe);this.events.next(Te);const ze=lS(U,this.rootComponentType).snapshot;return tn(i={...m,targetSnapshot:ze,urlAfterRedirects:U,extras:{...be,skipLocationChange:!1,replaceUrl:!1}})}{const I="";return this.events.next(new q1(m.id,t.serializeUrl(i.extractedUrl),I,1)),t.rawUrlTree=m.rawUrl,m.resolve(null),Gr}}),Vr(m=>{const b=new K8(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(b)}),Ct(m=>i={...m,guards:O6(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function F6(e,n){return ki(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:m}}=t;return 0===m.length&&0===u.length?tn({...t,guardsResult:!0}):function L6(e,n,t,i){return to(e).pipe(ki(s=>function $6(e,n,t,i,s){const u=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return u&&0!==u.length?tn(u.map(b=>{const M=U0(n)??s,P=Kg(b,M);return Ch(function k6(e){return e&&G0(e.canDeactivate)}(P)?P.canDeactivate(e,n,t,i):M.runInContext(()=>P(e,n,t,i))).pipe(bh())})).pipe(Yg()):tn(!0)}(s.component,s.route,t,n,i)),bh(s=>!0!==s,!0))}(m,i,s,e).pipe(ki(b=>b&&function E6(e){return"boolean"==typeof e}(b)?function B6(e,n,t,i){return to(n).pipe(Gp(s=>y0(function V6(e,n){return null!==e&&n&&n(new i6(e)),tn(!0)}(s.route.parent,i),function z6(e,n){return null!==e&&n&&n(new r6(e)),tn(!0)}(s.route,i),function j6(e,n,t){const i=n[n.length-1],u=n.slice(0,n.length-1).reverse().map(m=>function T6(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(m)).filter(m=>null!==m).map(m=>NE(()=>tn(m.guards.map(M=>{const P=U0(m.node)??t,I=Kg(M,P);return Ch(function I6(e){return e&&G0(e.canActivateChild)}(I)?I.canActivateChild(i,e):P.runInContext(()=>I(i,e))).pipe(bh())})).pipe(Yg())));return tn(u).pipe(Yg())}(e,s.path,t),function U6(e,n,t){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return tn(!0);const s=i.map(u=>NE(()=>{const m=U0(n)??t,b=Kg(u,m);return Ch(function A6(e){return e&&G0(e.canActivate)}(b)?b.canActivate(n,e):m.runInContext(()=>b(n,e))).pipe(bh())}));return tn(s).pipe(Yg())}(e,s.route,t))),bh(s=>!0!==s,!0))}(i,u,e,n):tn(b)),Ct(b=>({...t,guardsResult:b})))})}(this.environmentInjector,m=>this.events.next(m)),Vr(m=>{if(i.guardsResult=m.guardsResult,Wp(m.guardsResult))throw hS(0,m.guardsResult);const b=new Y8(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(b)}),zr(m=>!!m.guardsResult||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),JC(m=>{if(m.guards.canActivateChecks.length)return tn(m).pipe(Vr(b=>{const M=new Q8(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}),Sl(b=>{let M=!1;return tn(b).pipe(uV(t.paramsInheritanceStrategy,this.environmentInjector),Vr({next:()=>M=!0,complete:()=>{M||(t.restoreHistory(b),this.cancelNavigationTransition(b,"",2))}}))}),Vr(b=>{const M=new e6(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}))}),JC(m=>{const b=M=>{const P=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&P.push(this.configLoader.loadComponent(M.routeConfig).pipe(Vr(I=>{M.component=I}),Ct(()=>{})));for(const I of M.children)P.push(...b(I));return P};return m1(b(m.targetSnapshot.root)).pipe(B1(),or(1))}),JC(()=>this.afterPreactivation()),Ct(m=>{const b=function f6(e,n,t){const i=z0(e,n._root,t?t._root:void 0);return new aS(i,n)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return i={...m,targetRouterState:b}}),Vr(m=>{t.currentUrlTree=m.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),t.routerState=m.targetRouterState,"deferred"===t.urlUpdateStrategy&&(m.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,m),t.browserUrlTree=m.urlAfterRedirects)}),((e,n,t)=>Ct(i=>(new M6(n,i.targetRouterState,i.currentRouterState,t).activate(e),i)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m)),or(1),Vr({next:m=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new qp(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{s=!0}}),DC(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),wh(m=>{if(u=!0,gS(m)){fS(m)||(t.navigated=!0,t.restoreHistory(i,!0));const b=new W1(i.id,this.urlSerializer.serialize(i.extractedUrl),m.message,m.cancellationCode);if(this.events.next(b),fS(m)){const M=t.urlHandlingStrategy.merge(m.url,t.rawUrlTree),P={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||RS(i.source)};t.scheduleNavigation(M,B0,null,P,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const b=new NC(i.id,this.urlSerializer.serialize(i.extractedUrl),m,i.targetSnapshot??void 0);this.events.next(b);try{i.resolve(t.errorHandler(m))}catch(M){i.reject(M)}}return Gr}))}))}cancelNavigationTransition(t,i,s){const u=new W1(t.id,this.urlSerializer.serialize(t.extractedUrl),i,s);this.events.next(u),t.resolve(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function RS(e){return e!==B0}let NS=(()=>{class e{buildTitle(t){let i,s=t.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(u=>u.outlet===En);return i}getResolvedTitleForRoute(t){return t.data[I0]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return fn(mV)},providedIn:"root"}),e})(),mV=(()=>{class e extends NS{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return e.\u0275fac=function(t){return new(t||e)(Dt(jT))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return fn(vV)},providedIn:"root"}),e})();class yV{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let vV=(()=>{class e extends yV{}return e.\u0275fac=function(){let n;return function(i){return(n||(n=io(e)))(i||e)}}(),e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ox=new qt("",{providedIn:"root",factory:()=>({})});let bV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:function(){return fn(wV)},providedIn:"root"}),e})(),wV=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function CV(e){throw e}function MV(e,n,t){return n.parse("/")}const OV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wa=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=fn(Vk),this.isNgZoneEnabled=!1,this.options=fn(ox,{optional:!0})||{},this.errorHandler=this.options.errorHandler||CV,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||MV,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=fn(bV),this.routeReuseStrategy=fn(_V),this.urlCreationStrategy=fn(d6),this.titleStrategy=fn(NS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=UE(fn(Qg,{optional:!0})??[]),this.navigationTransitions=fn(ix),this.urlSerializer=fn(R0),this.location=fn(nw),this.isNgZoneEnabled=fn(ui)instanceof ui&&ui.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lS(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),B0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,s){const u={replaceUrl:!0},m=s?.navigationId?s:null;if(s){const M={...s};delete M.navigationId,delete M.\u0275routerPageId,0!==Object.keys(M).length&&(u.state=M)}const b=this.parseUrl(t);this.scheduleNavigation(b,i,m,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(HC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:s,queryParams:u,fragment:m,queryParamsHandling:b,preserveFragment:M}=i,P=M?this.currentUrlTree.fragment:m;let I=null;switch(b){case"merge":I={...this.currentUrlTree.queryParams,...u};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=u||null}return null!==I&&(I=this.removeEmptyProps(I)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,I,P??null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=Wp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,B0,null,i)}navigate(t,i={skipLocationChange:!1}){return function DV(e){for(let n=0;n<e.length;n++){const t=e[n];if(null==t)throw new tt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return i}isActive(t,i){let s;if(s=!0===i?{...OV}:!1===i?{...TV}:i,Wp(t))return GE(this.currentUrlTree,t,s);const u=this.parseUrl(t);return GE(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((i,s)=>{const u=t[s];return null!=u&&(i[s]=u),i},{})}scheduleNavigation(t,i,s,u,m){if(this.disposed)return Promise.resolve(!1);let b,M,P,I;return m?(b=m.resolve,M=m.reject,P=m.promise):P=new Promise((U,W)=>{b=U,M=W}),I="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:I,source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:b,reject:M,promise:P,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),P.catch(U=>Promise.reject(U))}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const m={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",m)}else{const u={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(s,"",u)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),W0=(()=>{class e{constructor(t,i,s,u,m,b){this.router=t,this.route=i,this.tabIndexAttribute=s,this.renderer=u,this.el=m,this.locationStrategy=b,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Hn;const M=m.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===M||"area"===M,this.isAnchorElement?this.subscription=t.events.subscribe(P=>{P instanceof qp&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Sg(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Sg(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Sg(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,s,u,m){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||s||u||m||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function e_(e,n,t){return function Lx(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Qm:hi}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const s=this.renderer,u=this.el.nativeElement;null!==i?s.setAttribute(u,t,i):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(ye(wa),ye(Xg),Vc("tabindex"),ye(es),ye(Gn),ye(Ap))},e.\u0275dir=vt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&Ke("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&we("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[gi]}),e})();class FS{}let SV=(()=>{class e{constructor(t,i,s,u,m){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=m}setUpPreloading(){this.subscription=this.router.events.pipe(zr(t=>t instanceof qp),Gp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const s=[];for(const u of i){u.providers&&!u._injector&&(u._injector=Nv(u.providers,t,`Route: ${u.path}`));const m=u._injector??t,b=u._loadedInjector??m;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(m,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(b,u.children??u._loadedRoutes))}return to(s).pipe(bc())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):tn(null);const u=s.pipe(ki(m=>null===m?tn(void 0):(i._loadedRoutes=m.routes,i._loadedInjector=m.injector,this.processRoutes(m.injector??t,m.routes))));return i.loadComponent&&!i._loadedComponent?to([u,this.loader.loadComponent(i)]).pipe(bc()):u})}}return e.\u0275fac=function(t){return new(t||e)(Dt(wa),Dt(vO),Dt(ja),Dt(FS),Dt(XC))},e.\u0275prov=yt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const YC=new qt("");let LS=(()=>{class e{constructor(t,i,s,u,m={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=s,this.zone=u,this.options=m,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},m.scrollPositionRestoration=m.scrollPositionRestoration||"disabled",m.anchorScrolling=m.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof RC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(t){!function Hu(){throw new Error("invalid")}()},e.\u0275prov=yt({token:e,factory:e.\u0275fac}),e})();var ol=(()=>((ol=ol||{})[ol.COMPLETE=0]="COMPLETE",ol[ol.FAILED=1]="FAILED",ol[ol.REDIRECTING=2]="REDIRECTING",ol))();const em=!1;function Oh(e,n){return{\u0275kind:e,\u0275providers:n}}const QC=new qt("",{providedIn:"root",factory:()=>!1});function zS(){const e=fn(_r);return n=>{const t=e.get(Eg);if(n!==t.components[0])return;const i=e.get(wa),s=e.get(VS);1===e.get(eM)&&i.initialNavigation(),e.get(US,null,Zt.Optional)?.setUpPreloading(),e.get(YC,null,Zt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const VS=new qt(em?"bootstrap done indicator":"",{factory:()=>new Hn}),eM=new qt(em?"initial navigation":"",{providedIn:"root",factory:()=>1});function NV(){let e=[];return e=em?[{provide:Wc,multi:!0,useFactory:()=>{const n=fn(wa);return()=>n.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function a6(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Oh(1,e)}const US=new qt(em?"router preloader":"");function FV(e){return Oh(0,[{provide:US,useExisting:SV},{provide:FS,useExisting:e}])}const q0=!1,jS=new qt(q0?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),LV=[nw,{provide:R0,useClass:PC},wa,V0,{provide:Xg,useFactory:function BS(e){return e.routerState.root},deps:[wa]},XC,q0?{provide:QC,useValue:!0}:[]];function BV(){return new DO("Router",wa)}let $S=(()=>{class e{constructor(t){}static forRoot(t,i){return{ngModule:e,providers:[LV,q0&&i?.enableTracing?NV().\u0275providers:[],{provide:Qg,multi:!0,useValue:t},{provide:jS,useFactory:jV,deps:[[wa,new Nr,new Di]]},{provide:ox,useValue:i||{}},i?.useHash?{provide:Ap,useClass:DR}:{provide:Ap,useClass:XO},{provide:YC,useFactory:()=>{const e=fn($3),n=fn(ui),t=fn(ox),i=fn(ix),s=fn(R0);return t.scrollOffset&&e.setOffset(t.scrollOffset),new LS(s,i,e,n,t)}},i?.preloadingStrategy?FV(i.preloadingStrategy).\u0275providers:[],{provide:DO,multi:!0,useFactory:BV},i?.initialNavigation?$V(i):[],[{provide:GS,useFactory:zS},{provide:TO,multi:!0,useExisting:GS}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Qg,multi:!0,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Dt(jS,8))},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[$C]}),e})();function jV(e){if(q0&&e)throw new tt(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $V(e){return["disabled"===e.initialNavigation?Oh(3,[{provide:zv,multi:!0,useFactory:()=>{const n=fn(wa);return()=>{n.setUpLocationChangeListener()}}},{provide:eM,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Oh(2,[{provide:eM,useValue:0},{provide:zv,multi:!0,deps:[_r],useFactory:n=>{const t=n.get(OR,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const s=n.get(wa),u=n.get(VS);(function AV(e,n){e.events.pipe(zr(t=>t instanceof qp||t instanceof W1||t instanceof NC||t instanceof q1),Ct(t=>t instanceof qp||t instanceof q1?ol.COMPLETE:t instanceof W1&&(0===t.code||1===t.code)?ol.REDIRECTING:ol.FAILED),zr(t=>t!==ol.REDIRECTING),or(1)).subscribe(()=>{n()})})(s,()=>{i(!0)}),n.get(ix).afterPreactivation=()=>(i(!0),u.closed?tn(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const GS=new qt(q0?"Router Initializer":"");function HV(e,n){if(1&e){const t=At();G(0,"header",38)(1,"nav")(2,"a",39),Ie(3,"img",40),J(),G(4,"div",41),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(5,"div",42)(6,"div",43)(7,"div",44),J(),G(8,"div",45),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(9,"div",42)(10,"div",43)(11,"div",44),J(),G(12,"ul",46)(13,"li")(14,"a",47),Ve(15,"Estoque"),J()(),G(16,"li")(17,"a",48),Ve(18,"Contato"),J()(),G(19,"li")(20,"a",49),Ve(21,"Localiza\xe7\xe3o"),J()(),G(22,"li")(23,"a",50),Ve(24,"Quem somos?"),J()()()()()}}function WV(e,n){if(1&e){const t=At();G(0,"div",51),Ie(1,"img",52),G(2,"div",41),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(3,"div",42)(4,"div",43)(5,"div",44),J()()}}function qV(e,n){1&e&&(G(0,"div",53)(1,"ul")(2,"li")(3,"a",47),Ve(4,"Estoque"),J()(),G(5,"li")(6,"a",48),Ve(7,"Contato"),J()(),G(8,"li")(9,"a",49),Ve(10,"Localiza\xe7\xe3o"),J()(),G(11,"li")(12,"a",50),Ve(13,"Quem somos?"),J()()()())}function ZV(e,n){1&e&&Ie(0,"div",54)}function JV(e,n){1&e&&Ie(0,"div",54)}function XV(e,n){1&e&&Ie(0,"div",54)}function KV(e,n){if(1&e&&(G(0,"div",58),Ie(1,"img",59),G(2,"div",60)(3,"h5",61),Ve(4),J(),G(5,"h5",62),Ve(6),J(),G(7,"h5",62),Ve(8),J(),G(9,"div",63)(10,"button",64),Ve(11," Saiba mais "),J()()()()),2&e){const t=n.$implicit;re(1),de("src",t.img,hi)("alt",t.alt),re(3),oi(" ",t.title," "),re(2),oi(" ",t.description," "),re(2),oi(" ",t.value," "),re(2),po("routerLink",t.link)}}function YV(e,n){if(1&e&&(G(0,"div",55)(1,"div",56),_e(2,KV,12,6,"div",57),J()()),2&e){const t=it();re(2),de("ngForOf",t.carros)}}function QV(e,n){if(1&e&&(G(0,"div",66),Ie(1,"img",67),G(2,"div",60)(3,"h5",68),Ve(4),J(),G(5,"div",63)(6,"button",64),Ve(7," Saiba mais "),J()()()()),2&e){const t=n.$implicit;re(1),de("src",t.img,hi)("alt",t.alt),re(3),oi(" ",t.title," "),re(2),po("routerLink",t.link)}}function eU(e,n){if(1&e&&(G(0,"div",55)(1,"div",56),_e(2,QV,8,4,"div",65),J()()),2&e){const t=it();re(2),de("ngForOf",t.motos)}}function tU(e,n){1&e&&(G(0,"div",69),Ie(1,"iframe",70),J())}function nU(e,n){1&e&&(G(0,"div",69),Ie(1,"iframe",71),J())}function iU(e,n){1&e&&(G(0,"div",69),Ie(1,"iframe",72),J())}function oU(e,n){1&e&&(G(0,"div",69),Ie(1,"iframe",73),J())}function rU(e,n){1&e&&(G(0,"div",69),Ie(1,"iframe",74),J())}function sU(e,n){1&e&&(G(0,"div",69),Ie(1,"iframe",75),J())}const aU=function(e,n,t){return{"img-1":e,"img-2":n,"img-3":t}},Z0=function(e){return{active:e}};let lU=(()=>{class e{constructor(){this.responsive=!1,this.formationSelected=1,this.banners=[{alt:"pessoa capacitadas",url:"/servicos/treinamentos",link:"/normas"},{alt:"alunas em sala de aula",url:"/normas",link:"/normas"},{title:"Confira nosso\nblog com conte\xfados\nexclusivos",alt:"professor em sala de aula",url:"https://www.sesirs.org.br/blog-sesi-saude",link:"https://www.sesirs.org.br/blog-sesi-saude"}],this.carros=[{title:"TORO RANCH",description:"AUTOM\xc1TICO",img:"assets/toro.png",alt:"normas tecnicas",link:"TORO",value:"R$ 160.000,00"},{title:"SPACEFOX",description:"MANUAL",img:"assets/space.png",alt:"normas tecnicas",link:"SPACEFOX",value:"R$ 57.000,00"},{title:"AMAROK SE",description:"MANUAL",img:"assets/amarok.png",alt:"normas tecnicas",link:"AMAROK",value:"R$ 95.000,00"},{title:"JETTA",description:"AUTOM\xc1TICO",img:"assets/jetta.png",alt:"normas tecnicas",link:"JETTA",value:"R$ 45.000,00"},{title:"PATHFINDER",description:"AUTOM\xc1TICO",img:"assets/pathfinder.png",alt:"normas tecnicas",link:"PATHFINDER",value:"R$ 82.000,00"},{title:"DUSTER EXPRESS",description:"MANUAL",img:"assets/duster.png",alt:"normas tecnicas",link:"DUSTER",value:"R$ 69.990,00"},{title:"ARGO TREKKING",description:"MANUAL",img:"assets/argo.png",alt:"normas tecnicas",link:"ARGO",value:"R$ 72.000,00"},{title:"ZAFIRA ELITE",description:"AUTOM\xc1TICO",img:"assets/zafira.png",alt:"normas tecnicas",link:"ZAFIRA",value:"R$ 36.000,00"},{title:"FIESTA",description:"MANUAL",img:"assets/fiesta.png",alt:"normas tecnicas",link:"FIESTA",value:"R$ 34.000,00"},{title:"FUSCA 1300L",description:"MANUAL",img:"assets/fusca.png",alt:"normas tecnicas",link:"FUSCA",value:"R$ 19.990,00"},{title:"PAMPA L",description:"MANUAL",img:"assets/pampa.png",alt:"normas tecnicas",link:"PAMPA",value:"R$ 29.990,00"},{title:"DOBLO",description:"MANUAL",img:"assets/doblo.png",alt:"normas tecnicas",link:"DOBLO",value:"R$ 48.500,00"}],this.motos=[],this.bannerSelected=this.banners[0],this.bannerSelectedIndex=0}ngOnInit(){this.innerWidth=window.innerWidth,this.responsive=!1}onResize(){this.innerWidth=window.innerWidth}abrirLink(){window.open("https://www.google.com/maps/place/AUTO+JB/@-29.931451,-51.0880416,17z/data=!4m6!3m5!1s0x951973a7b86023e7:0x24c98ba299e6676b!8m2!3d-29.9299719!4d-51.0865501!16s%2Fg%2F11q1s7pmrz?entry=ttu","_blank")}nextBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+1)%this.banners.length}abrir(){this.responsive=!1===this.responsive,console.log(this.responsive)}selectBanner(t){this.bannerSelected=this.banners[t],this.bannerSelectedIndex=t}previousBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+this.banners.length-1)%this.banners.length}selectFormation(t){this.formationSelected=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-estoque"]],hostBindings:function(t,i){1&t&&Ke("resize",function(u){return i.onResize(u)},0,eh)},decls:63,vars:34,consts:[[2,"overflow-x","hidden"],[1,"tela"],["class","navigation-above",4,"ngIf"],["class","box-black5","style","overflow-x: hidden",4,"ngIf"],["class","box-black6",4,"ngIf"],[1,"carousel","carousel-below",2,"margin-left","-0.5rem","margin-right","-1vh","z-index","2",3,"ngClass"],[1,"carousel-title",2,"padding","0 !important","margin-top","0.5rem"],["class","carousel-text",4,"ngIf"],[1,"controller-carousel"],[1,"carousel-arrow","arrow-left",3,"click"],["src","../assets/arrow.png",2,"width","60px"],[1,"controller"],[1,"controller-options",3,"ngClass","click"],[1,"carousel-arrow","arrow-right",3,"click"],["src","../assets/arrowRight.png",2,"width","60px"],[1,"gray-box"],[1,"options","flex-item","font-curso-responsive",3,"ngClass","click"],[1,"formacoes"],[1,"titles","text-align-center",2,"color","#000000 !important","margin-top","3rem"],["class","white-box",4,"ngIf"],[1,"box-responsive",2,"margin-top","3rem"],[1,"box-black3"],[1,"contato-text"],[1,"contatos",2,"margin-top","1rem"],[1,"icon-contato","insta"],[1,"icon-contato","face"],[1,"icon-contato","whats"],[1,"contato-localizacao-margin",2,"margin-top","4rem"],[1,"contato-text-localizacao"],[1,"contato-rua-margin"],[1,"contato-text-rua"],["style","margin-top: 2rem",4,"ngIf"],[1,"logo-autojb"],[1,"contato-slogan-margin",2,"padding-bottom","150px"],[1,"contato-text-slogan"],[1,"box-black4",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive2"],[1,"nav-list","responsive-text"],[1,"navigation-above"],["href","#",2,"z-index","0"],["src","assets/logo.png","alt","",1,"logo-responsive-header"],[1,"mobile-menu",3,"click"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"mobile-menu2","button-2",3,"click"],[1,"nav-list"],["routerLink","estoque"],["href","contato"],["href","localizacao"],["href",""],[1,"box-black5",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive3"],[1,"box-black6"],[1,"carousel-text"],[1,"white-box"],[1,"row","container-cards"],["class","card style-card ",4,"ngFor","ngForOf"],[1,"card","style-card"],[1,"card-img-top",3,"src","alt"],[1,"card-body","d-flex","flex-column",2,"height","200px"],[1,"card-title","title-white-cards","style-title-card",2,"color","white"],[1,"card-title","title-white-cards","style-title-card",2,"color","white","font-size","18px !important"],[1,"mt-auto"],["name","btnsaiba","_ngcontent-fts-c20","",1,"align-self-end","btn","btn-nrs","btn-carousel","color-button","style-btn-link",3,"routerLink"],["class","card style-card col-md-3 col-sm-4",4,"ngFor","ngForOf"],[1,"card","style-card","col-md-3","col-sm-4"],[1,"card-img-top","col-md-3",2,"height","300px",3,"src","alt"],[1,"card-title","title-white-cards","style-title-card","style-title-card",2,"color","white"],[2,"margin-top","2rem"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","1100","height","550","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","900","height","470","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","750","height","370","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","700","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","500","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","380","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"body",1),_e(2,HV,25,0,"header",2),J(),_e(3,WV,6,0,"div",3),_e(4,qV,14,0,"div",4),G(5,"div",5)(6,"div",6),_e(7,ZV,1,0,"div",7),_e(8,JV,1,0,"div",7),_e(9,XV,1,0,"div",7),J(),G(10,"div",8)(11,"a",9),Ke("click",function(){return i.previousBanner()}),Ie(12,"img",10),J(),G(13,"div",11)(14,"div",12),Ke("click",function(){return i.selectBanner(0)}),J(),G(15,"div",12),Ke("click",function(){return i.selectBanner(1)}),J(),G(16,"div",12),Ke("click",function(){return i.selectBanner(2)}),J()(),G(17,"a",13),Ke("click",function(){return i.nextBanner()}),Ie(18,"img",14),J()()(),G(19,"div",15)(20,"div",16),Ke("click",function(){return i.selectFormation(1)}),Ve(21," Carros "),J(),G(22,"div",16),Ke("click",function(){return i.selectFormation(2)}),Ve(23," Motos "),J()(),G(24,"div",17)(25,"h1",18),Ve(26," ESTOQUE "),J(),_e(27,YV,3,1,"div",19),G(28,"div",17),_e(29,eU,3,1,"div",19),J(),G(30,"div",20)(31,"div",21)(32,"div")(33,"div")(34,"a",22),Ve(35,"ENTRE EM CONTATO!"),J()(),G(36,"div",23),Ie(37,"div",24)(38,"div",25)(39,"div",26),J(),G(40,"div",27)(41,"a",28),Ve(42,"LOCALIZA\xc7\xc3O"),J()(),G(43,"div",29)(44,"a",30),Ve(45,"AV.Cai, 1712 - Princesa Isabel - Cachoeirinha - RS"),J()(),_e(46,tU,2,0,"div",31),_e(47,nU,2,0,"div",31),_e(48,iU,2,0,"div",31),_e(49,oU,2,0,"div",31),_e(50,rU,2,0,"div",31),_e(51,sU,2,0,"div",31),Ie(52,"div",32),G(53,"div",33)(54,"a",34),Ve(55,"A MELHOR OP\xc7\xc3O PARA VOC\xca!"),J()()()()(),G(56,"div")(57,"div",35),Ie(58,"img",36),G(59,"ul",37)(60,"li")(61,"p"),Ve(62,"\xa9 2023 AUTO JB - desenvolvido por webUp!"),J()()()()()()()),2&t&&(re(2),de("ngIf",i.innerWidth>999),re(1),de("ngIf",i.innerWidth<1e3),re(1),de("ngIf",!0===i.responsive),re(1),de("ngClass",ph(20,aU,0===i.bannerSelectedIndex,1===i.bannerSelectedIndex,2===i.bannerSelectedIndex)),re(2),de("ngIf",0===i.bannerSelectedIndex),re(1),de("ngIf",1===i.bannerSelectedIndex),re(1),de("ngIf",2===i.bannerSelectedIndex),re(5),de("ngClass",Gi(24,Z0,0===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(26,Z0,1===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(28,Z0,2===i.bannerSelectedIndex)),re(4),de("ngClass",Gi(30,Z0,1===i.formationSelected)),re(2),de("ngClass",Gi(32,Z0,2===i.formationSelected)),re(5),de("ngIf",1===i.formationSelected),re(2),de("ngIf",2===i.formationSelected),re(17),de("ngIf",i.innerWidth>1455),re(1),de("ngIf",i.innerWidth>1255&&i.innerWidth<1456),re(1),de("ngIf",i.innerWidth>1100&&i.innerWidth<1256),re(1),de("ngIf",i.innerWidth>772&&i.innerWidth<1101),re(1),de("ngIf",i.innerWidth>535&&i.innerWidth<773),re(1),de("ngIf",i.innerWidth<536))},dependencies:[Ag,ns,Lr,W0],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0}.tela[_ngcontent-%COMP%]{margin:-8px!important}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:.3s}.card-img-top[_ngcontent-%COMP%]{border-radius:30px 30px 0 0}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem}.style-btn-link[_ngcontent-%COMP%]{margin-top:-3rem;font-size:20px!important;width:70%!important;margin-left:3rem}.style-card[_ngcontent-%COMP%]{background-color:#606060;border-radius:30px!important;width:300px;margin:15px}p[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]:hover{opacity:.7}.logo-responsive[_ngcontent-%COMP%], .logo-responsive-header[_ngcontent-%COMP%]{width:340px;margin-left:-3rem}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;height:8vh}.nav-list[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:50vw}.logo-responsive3[_ngcontent-%COMP%]{width:340px;margin-left:-10rem;padding-bottom:2rem}@media only screen and (min-width: 724px) and (max-width: 830px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:43vw}}@media only screen and (min-width: 600px) and (max-width: 724px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:34vw}}@media only screen and (min-width: 560px) and (max-width: 600px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:27vw}}@media only screen and (min-width: 500px) and (max-width: 560px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}}@media only screen and (min-width: 400px) and (max-width: 500px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:12vw}.logo-responsive3[_ngcontent-%COMP%]{width:300px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 360px) and (max-width: 400px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:14vw}.logo-responsive3[_ngcontent-%COMP%]{width:250px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 326px) and (max-width: 360px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 326px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}.mobile-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}.nav-list2[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu2[_ngcontent-%COMP%]{display:none;cursor:pointer}.mobile-menu2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}@media (max-width: 999px){body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important}.mobile-menu[_ngcontent-%COMP%]{display:block}.nav-list[_ngcontent-%COMP%]{position:absolute;top:8vh;right:0;width:40vw;height:92vh;background:#23232e;flex-direction:column;align-items:center;justify-content:space-around;display:none}.logo-responsive[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem;z-index:3}}@media (max-width: 999px){.logo-responsive[_ngcontent-%COMP%], .logo-responsive2[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem}body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important;white-space:nowrap;margin-left:3rem}.mobile-menu2[_ngcontent-%COMP%]{display:block}.nav-list2[_ngcontent-%COMP%]{position:fixed;top:8vh;right:0;width:100vw;height:32vh;background:#23232e;flex-direction:column;align-items:flex-start;justify-content:space-evenly;transform:translate(0);overflow-y:hidden;margin-top:-3rem}.nav-list2.active[_ngcontent-%COMP%]{transform:translate(0)}.tela[_ngcontent-%COMP%]{margin:-8px!important;overflow-y:hidden}}.img-1[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png);zoom:100%}@media only screen and (min-width: 391px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 1900px) and (max-width: 3000px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 950px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (max-width: 390px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:220px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 300px) and (max-width: 480px){.btn-carousel[_ngcontent-%COMP%]{margin-top:-30px}}.img-2[_ngcontent-%COMP%]{background-image:url(audi.295562cd8fa596b7.png)}.img-3[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png)}.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:38px;transform:translateY(-10rem);cursor:pointer}.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:38px;transform:translateY(-10rem);cursor:pointer}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:20px;cursor:pointer;transform:translateY(-2rem)!important}}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:10px;transform:translateY(-2rem)!important;cursor:pointer}}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:10%;padding:0 150px;display:flex;align-items:center;top:0}.success-message[_ngcontent-%COMP%]{color:#fff!important}.button-responsive-home[_ngcontent-%COMP%]{width:260px!important;margin-left:0rem!important;margin-top:-1rem!important;height:60px!important;margin-top:1rem!important}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}}@media only screen and (min-width: 320px) and (max-width: 500px){.button-responsive-home[_ngcontent-%COMP%]{width:90px!important;margin-left:1rem!important;margin-top:-1rem!important;height:25px!important}}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000!important;font-weight:500}.gray-box[_ngcontent-%COMP%]{background-color:#fff;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center;color:#000}.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 600px){.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:18px}}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#5f0101;border-radius:10px}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#e4e4e4}.container-cards[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:wrap;align-content:center}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#e4e4e4;border-bottom-right-radius:30px;border-bottom-left-radius:30px;display:flex;align-content:center;align-items:center;flex-direction:column;flex-wrap:nowrap;justify-content:center}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 2px 2px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:1px;border-bottom-right-radius:1px}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px!important;border-radius:25px;height:10px;width:38px;background-color:#862b2b;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:60px;background-color:#f7f7f7;transition:.5s}.button-2[_ngcontent-%COMP%]{position:relative;z-index:2}.carousel-below[_ngcontent-%COMP%]{position:relative;z-index:0}.navigation-above[_ngcontent-%COMP%]{position:relative;z-index:1}.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:34px}@media only screen and (min-width: 600px) and (max-width: 998px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:24px}}@media only screen and (max-width: 600px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:20px}}.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:24px;margin-top:1rem;padding:10px 110px 0}@media only screen and (min-width: 600px) and (max-width: 998px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:20px;margin-top:1rem;padding:10px 90px 0}}@media only screen and (max-width: 600px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:16px;margin-top:1rem;padding:10px 20px 0}}.box-black[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;border-radius:10px 10px 0 0;padding:40px}.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px;margin-top:3rem}.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-slogan-margin[_ngcontent-%COMP%]{margin-top:1rem}.contato-localizacao-margin[_ngcontent-%COMP%]{margin-top:3rem}.contato-rua-margin[_ngcontent-%COMP%]{margin-top:1rem}.contatos[_ngcontent-%COMP%]{text-align:center}.box-black2[_ngcontent-%COMP%], .box-black3[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;text-align:center;padding:40px 150px 0}.box-black4[_ngcontent-%COMP%]{display:flex;align-items:center;background:#23232e;height:5rem;padding:40px 150px 0;overflow-y:hidden}.box-black5[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:6rem;padding:40px 150px 0;overflow-y:hidden}.box-black6[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:10rem;padding:40px 150px 0;overflow-y:hidden;animation-delay:1s}@keyframes _ngcontent-%COMP%_moveToRight{0%{transform:translatey(0)}to{transform:translatey(300px)}}.box-black6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-4rem}.box-black6[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:-8rem;padding-bottom:10px}.margin-contato[_ngcontent-%COMP%]{cursor:pointer}.icon-contato[_ngcontent-%COMP%]{display:inline-block;padding:0 45px 0 30px}.mapa[_ngcontent-%COMP%]{width:1200px;height:780px;background-image:url(mapa.bcd07dfac4f8aa9a.png);transition:.7s}.mapa[_ngcontent-%COMP%]:hover{width:1200px;height:780px;background-image:url(mapa2.c019904f9dccb07c.png);cursor:pointer}.logo-autojb[_ngcontent-%COMP%]{width:1200px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:40vw;white-space:nowrap;padding-right:3rem}.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-3rem;padding-bottom:2rem}@media only screen and (min-width: 1430px) and (max-width: 1600px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:33vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1336px) and (max-width: 1429px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:28vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1216px) and (max-width: 1336px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:23vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1150px) and (max-width: 1216px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:18vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:15vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 999px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}.insta[_ngcontent-%COMP%]{width:82px;height:82px;background-image:url(instagram.cc9d8965fca5b6ef.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s}.insta[_ngcontent-%COMP%]:hover{width:82px;height:82px;background-image:url(insta2.4265cd3a73f3e1da.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.face[_ngcontent-%COMP%]{width:86px;height:86px;background-image:url(facebook.c7c1dc1e44e2efb1.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.face[_ngcontent-%COMP%]:hover{width:86px;height:86px;background-image:url(face2.99ba37f1f09946c8.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.whats[_ngcontent-%COMP%]{width:79px;height:79px;background-image:url(whats.969f9ab178e3e0c2.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.whats[_ngcontent-%COMP%]:hover{width:79px;height:79px;background-image:url(whats2.2faea5cc7d7267f6.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.text-size[_ngcontent-%COMP%]{text-align:left;font-size:18px;color:#000;text-decoration:none}.text-color[_ngcontent-%COMP%]{align-items:left;color:#626262}.btn-enviar[_ngcontent-%COMP%]{border-radius:8px;width:357px;background-color:#0789e5;font-size:32px}.color-novidades[_ngcontent-%COMP%]{color:#022e4d!important}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.unidades-box[_ngcontent-%COMP%]{font-size:18px;color:#fff}.unidades-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#e4e4e4;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#fff;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 2px 2px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff;border-bottom-left-radius:1px;border-bottom-right-radius:1px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#747474;color:#fff;border-bottom-left-radius:1px;border-bottom-right-radius:1px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}.text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;position:absolute;margin-top:12.5px;margin-left:-350px}.font[_ngcontent-%COMP%], .font2[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 500px){.font[_ngcontent-%COMP%]{font-size:16px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.font2[_ngcontent-%COMP%]{font-size:18px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px;position:absolute;margin-top:8px!important;margin-left:-278px!important}}.font-size-responsive[_ngcontent-%COMP%]{font-size:18px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-size-responsive[_ngcontent-%COMP%]{font-size:14px!important}}.style-checkbox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]{background-color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]:after{display:block}.input-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container-box[_ngcontent-%COMP%]   .input-checkbox[_ngcontent-%COMP%]:after{top:3px;left:6.4px;width:5px;height:10px;border:solid rgb(255,255,255);border-width:0 2px 2px 0;transform:rotate(45deg)}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.container-box[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;color:#022e4d}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.legend-responsive[_ngcontent-%COMP%], .img-responsive[_ngcontent-%COMP%]{margin-left:0}.font-responsive[_ngcontent-%COMP%]{font-size:45px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-responsive[_ngcontent-%COMP%]{font-size:20px!important;margin-left:20px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.font-responsive[_ngcontent-%COMP%]{font-size:28px!important;margin-left:55px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.img-responsive[_ngcontent-%COMP%]{margin-left:-2px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:60px!important}}@media only screen and (min-width: 912px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:130px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}.text-responsive[_ngcontent-%COMP%]{font-size:24px}.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px}@media only screen and (min-width: 320px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:18px!important;color:#022e4d!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px!important;color:#022e4d!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive[_ngcontent-%COMP%]{font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive[_ngcontent-%COMP%]{font-size:24px!important;text-align:center!important;margin-left:100px!important}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#e5e5e5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d;border-radius:8px;border:none;height:82px;background:#e5e5e5}.style.title[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.logo-autojb[_ngcontent-%COMP%]{width:1150px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0 150px}@media only screen and (max-width: 1125px){.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0!important}}.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:32px}@media only screen and (min-width: 635px) and (max-width: 773px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:26px}}@media only screen and (min-width: 495px) and (max-width: 634px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:13px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px;margin-top:3rem}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px}}@media only screen and (min-width: 320px) and (max-width: 630px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:34px}}@media only screen and (min-width: 320px) and (max-width: 590px){.logo-autojb[_ngcontent-%COMP%]{width:800px;height:283px;background-image:url(autojbR.c30572b7e536d121.png)}}@media only screen and (min-width: 320px) and (max-width: 534px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:28px}}']}),e})();function cU(e,n){if(1&e&&(G(0,"div",13)(1,"div",14),Ie(2,"img",15),G(3,"div",16)(4,"h5",17),Ve(5),J(),G(6,"div")(7,"h5",18),Ve(8),J(),G(9,"h5",18),Ve(10),J()(),G(11,"div",19)(12,"a",20),Ve(13,"Saiba mais"),J()()()()()),2&e){const t=n.$implicit;re(2),de("src",t.img,hi)("alt",t.alt),re(3),fi(t.title),re(3),oi(" ",t.description," "),re(2),oi(" ",t.value," "),re(2),Ol("href","estoque/",t.link,"",hi)}}let HS=(()=>{class e{constructor(){this.slides=[],this.cards=[{title:"TORO RANCH",description:"AUTOM\xc1TICO",img:"assets/toro.png",alt:"normas tecnicas",link:"TORO",value:"R$ 160.000,00"},{title:"SPACEFOX",description:"MANUAL",img:"assets/space.png",alt:"normas tecnicas",link:"SPACEFOX",value:"R$ 57.000,00"},{title:"AMAROK SE",description:"MANUAL",img:"assets/amarok.png",alt:"normas tecnicas",link:"AMAROK",value:"R$ 95.000,00"},{title:"JETTA",description:"AUTOM\xc1TICO",img:"assets/jetta.png",alt:"normas tecnicas",link:"JETTA",value:"R$ 45.000,00"},{title:"PATHFINDER",description:"AUTOM\xc1TICO",img:"assets/pathfinder.png",alt:"normas tecnicas",link:"PATHFINDER",value:"R$ 82.000,00"},{title:"DUSTER EXPRESS",description:"MANUAL",img:"assets/duster.png",alt:"normas tecnicas",link:"DUSTER",value:"R$ 69.990,00"},{title:"ARGO TREKKING",description:"MANUAL",img:"assets/argo.png",alt:"normas tecnicas",link:"ARGO",value:"R$ 72.000,00"}]}ngOnInit(){this.slideConfig={slidesToShow:3,slidesToScroll:1,autoplay:!1,autoplaySpeed:1e3,arrows:!1,dots:!1,pauseOnHover:!1,responsive:[{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:520,settings:{slidesToShow:1}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-carousel-home"]],decls:14,vars:2,consts:[[1,"blue-container","formacoes",2,"margin-top","2rem"],[1,"white-box",2,"display","flex","flex-flow","column","align-items","center","padding-bottom","120px"],[1,"formation-row",2,"align-items","center"],[1,"btn","btn-angle","d-sm-none","d-md-block","d-none","d-sm-block",2,"font-size","54px","height","100px","cursor","pointer","margin-left","-60px !important",3,"click"],["src","assets/arrow-left.png","alt",""],[1,"container",2,"margin-left","10px !important","width","1240px !important",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide","style","margin-left: 30px;",4,"ngFor","ngForOf"],[1,"btn","btn-angle","d-sm-none","d-md-block","d-none","d-sm-block",2,"font-size","54px","height","100px","cursor","pointer","padding","0% !important","margin-left","1rem","margin-right","-2rem",3,"click"],["src","assets/arrow-right.png","alt",""],[1,"formation-row",2,"width","100%","padding-top","20px"],[1,"card"],["_ngcontent-ehq-c19","","href","estoque",1,"btn","btn-blue","btn-sm","btn-carousel","btn-ver-todas"],["ngxSlickItem","",1,"slide",2,"margin-left","30px"],[1,"card",2,"background-color","#606060","width","350px","height","551px","border-radius","30px !important"],[1,"card-img-top",2,"height","300px",3,"src","alt"],[1,"card-body","d-flex","flex-column",2,"padding","23px"],[1,"card-title","title-white-cards",2,"white-space","pre-wrap","font-family","'Roboto'","font-style","normal","font-weight","400","font-size","24px","line-height","28px","justify-content","center","text-align","center"],[1,"card-title","title-white-cards","style-title-card",2,"color","white","font-size","18px !important"],[1,"mt-auto"],["name","btnsaiba","_ngcontent-fts-c20","",1,"align-self-end","btn","btn-nrs","btn-carousel","color-button",2,"margin-top","auto","font-weight","500","font-size","20px","line-height","28px",3,"href"]],template:function(t,i){if(1&t){const s=At();G(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ke("click",function(){return Wt(s),Gt(rn(6).slickPrev())}),Ie(4,"img",4),J(),G(5,"ngx-slick-carousel",5,6),_e(7,cU,14,6,"div",7),J(),G(8,"button",8),Ke("click",function(){return Wt(s),Gt(rn(6).slickNext())}),Ie(9,"img",9),J()(),G(10,"div",10)(11,"div",11)(12,"a",12),Ve(13,"Ver estoque"),J()()()()()}2&t&&(re(5),de("config",i.slideConfig),re(2),de("ngForOf",i.cards))},dependencies:[ns,kg,m0],styles:[".text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.style-font-title[_ngcontent-%COMP%]{margin-bottom:40px!important;color:#022e4d!important}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem;color:#fff}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.picsum-img-wrapper[_ngcontent-%COMP%]{height:736px;width:100%}.carousel-img[_ngcontent-%COMP%]{width:100%}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000}.color-button[_ngcontent-%COMP%]:hover{background-color:#730101;color:#fff}.btn-ver-todas[_ngcontent-%COMP%]{width:100%;margin-left:8px!important;background-color:#730101;color:#fff;font-size:30px!important;font-weight:500}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px;border-radius:25px;height:15px;width:48px;background-color:#045590;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:80px;background-color:#0092f4;transition:.5s}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#E5E5E5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}"]}),e})();function uU(e,n){if(1&e&&(G(0,"div",12)(1,"div",13),Ie(2,"img",14),G(3,"div",15)(4,"h5",16),Ve(5),J(),G(6,"div")(7,"h5",17),Ve(8),J(),G(9,"h5",17),Ve(10),J()(),G(11,"div",18)(12,"h6",19),Ve(13),J(),G(14,"a",20),Ve(15,"Saiba mais"),J()()()()()),2&e){const t=n.$implicit;re(2),de("src",t.img,hi)("alt",t.alt),re(3),fi(t.title),re(3),oi(" ",t.description," "),re(2),oi(" ",t.value," "),re(3),oi(" ",t.sub," "),re(1),Ol("href","estoque/",t.link,"",hi)}}let WS=(()=>{class e{constructor(){this.cards=[{title:"TORO RANCH",description:"AUTOM\xc1TICO",img:"assets/toro.png",alt:"normas tecnicas",link:"TORO",value:"R$ 160.000,00"},{title:"SPACEFOX",description:"MANUAL",img:"assets/space.png",alt:"normas tecnicas",link:"SPACEFOX",value:"R$ 57.000,00"},{title:"AMAROK SE",description:"MANUAL",img:"assets/amarok.png",alt:"normas tecnicas",link:"AMAROK",value:"R$ 95.000,00"},{title:"JETTA",description:"AUTOM\xc1TICO",img:"assets/jetta.png",alt:"normas tecnicas",link:"JETTA",value:"R$ 45.000,00"},{title:"PATHFINDER",description:"AUTOM\xc1TICO",img:"assets/pathfinder.png",alt:"normas tecnicas",link:"PATHFINDER",value:"R$ 82.000,00"},{title:"DUSTER EXPRESS",description:"MANUAL",img:"assets/duster.png",alt:"normas tecnicas",link:"DUSTER",value:"R$ 69.990,00"},{title:"ARGO TREKKING",description:"MANUAL",img:"assets/argo.png",alt:"normas tecnicas",link:"ARGO",value:"R$ 72.000,00"}]}ngOnInit(){this.slideConfig={slidesToShow:2,slidesToScroll:1,autoplay:!1,autoplaySpeed:1e3,arrows:!1,dots:!1,pauseOnHover:!1,responsive:[{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:520,settings:{slidesToShow:1}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-carousel-home-responsive"]],decls:14,vars:2,consts:[[1,"blue-container","formacoes"],[1,"white-box",2,"display","flex","flex-flow","column","align-items","center","padding-bottom","120px"],[1,"formation-row",2,"align-items","center"],[1,"btn","btn-angle","d-sm-none","d-md-block","d-none","d-sm-block",2,"font-size","54px","height","100px","cursor","pointer",3,"click"],["src","assets/arrow-left.png","alt",""],[1,"container",2,"margin-left","-20px !important","width","820px !important","margin-top","2rem",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide","style","margin-left: 35px; width: 350px !important;",4,"ngFor","ngForOf"],["src","assets/arrow-right.png","alt",""],[1,"formation-row",2,"width","100%","padding-top","20px"],[1,"card"],["_ngcontent-ehq-c19","","href","estoque",1,"btn","btn-blue","btn-sm","btn-carousel","btn-ver-todas",2,"width","100%","color","white","font-weight","500"],["ngxSlickItem","",1,"slide",2,"margin-left","35px","width","350px !important"],[1,"card",2,"background-color","#606060","width","350px !important","height","551px","padding-left","-100px !important","border-radius","30px !important"],[1,"card-img-top",2,"height","300px",3,"src","alt"],[1,"card-body","d-flex","flex-column",2,"padding","23px"],[1,"card-title","title-white-cards",2,"white-space","pre-wrap","font-family","'Roboto'","font-style","normal","font-weight","400","font-size","24px","line-height","28px","justify-content","center","text-align","center"],[1,"card-title","title-white-cards","style-title-card",2,"color","white","font-size","18px !important"],[1,"mt-auto"],["_ngcontent-hst-c18","",1,"h6-box",2,"color","#0789E5"],["name","btnsaiba","_ngcontent-fts-c20","",1,"align-self-end","btn","btn-nrs","btn-carousel","color-button",2,"margin-top","auto","font-weight","500","font-size","20px","line-height","28px",3,"href"]],template:function(t,i){if(1&t){const s=At();G(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ke("click",function(){return Wt(s),Gt(rn(6).slickPrev())}),Ie(4,"img",4),J(),G(5,"ngx-slick-carousel",5,6),_e(7,uU,16,7,"div",7),J(),G(8,"button",3),Ke("click",function(){return Wt(s),Gt(rn(6).slickNext())}),Ie(9,"img",8),J()(),G(10,"div",9)(11,"div",10)(12,"a",11),Ve(13,"Ver estoque"),J()()()()()}2&t&&(re(5),de("config",i.slideConfig),re(2),de("ngForOf",i.cards))},dependencies:[ns,kg,m0],styles:[".text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.style-font-title[_ngcontent-%COMP%]{margin-bottom:40px!important;color:#022e4d!important}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem;color:#fff}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.picsum-img-wrapper[_ngcontent-%COMP%]{height:736px;width:100%}.carousel-img[_ngcontent-%COMP%]{width:100%}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}.btn-ver-todas[_ngcontent-%COMP%]{width:100%;margin-left:8px!important;background-color:#730101;color:#fff;font-size:30px!important;font-weight:500}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000}.color-button[_ngcontent-%COMP%]:hover{background-color:#730101;color:#fff}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px;border-radius:25px;height:15px;width:48px;background-color:#045590;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:80px;background-color:#0092f4;transition:.5s}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#E5E5E5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}"]}),e})();function dU(e,n){if(1&e&&(G(0,"div",12)(1,"div",13),Ie(2,"img",14),G(3,"div",15)(4,"h5",16),Ve(5),J(),G(6,"div")(7,"h5",17),Ve(8),J(),G(9,"h5",17),Ve(10),J()(),G(11,"div",18)(12,"h6",19),Ve(13),J(),G(14,"a",20),Ve(15,"Saiba mais"),J()()()()()),2&e){const t=n.$implicit;re(2),de("src",t.img,hi)("alt",t.alt),re(3),fi(t.title),re(3),oi(" ",t.description," "),re(2),oi(" ",t.value," "),re(3),oi(" ",t.sub," "),re(1),Ol("href","estoque/",t.link,"",hi)}}let qS=(()=>{class e{constructor(){this.cards=[{title:"TORO RANCH",description:"AUTOM\xc1TICO",img:"assets/toro.png",alt:"normas tecnicas",link:"TORO",value:"R$ 160.000,00"},{title:"SPACEFOX",description:"MANUAL",img:"assets/space.png",alt:"normas tecnicas",link:"SPACEFOX",value:"R$ 57.000,00"},{title:"AMAROK SE",description:"MANUAL",img:"assets/amarok.png",alt:"normas tecnicas",link:"AMAROK",value:"R$ 95.000,00"},{title:"JETTA",description:"AUTOM\xc1TICO",img:"assets/jetta.png",alt:"normas tecnicas",link:"JETTA",value:"R$ 45.000,00"},{title:"PATHFINDER",description:"AUTOM\xc1TICO",img:"assets/pathfinder.png",alt:"normas tecnicas",link:"PATHFINDER",value:"R$ 82.000,00"},{title:"DUSTER EXPRESS",description:"MANUAL",img:"assets/duster.png",alt:"normas tecnicas",link:"DUSTER",value:"R$ 69.990,00"},{title:"ARGO TREKKING",description:"MANUAL",img:"assets/argo.png",alt:"normas tecnicas",link:"ARGO",value:"R$ 72.000,00"}]}ngOnInit(){this.slideConfig={slidesToShow:1,slidesToScroll:1,autoplay:!1,autoplaySpeed:1e3,arrows:!1,dots:!1,pauseOnHover:!1,responsive:[{breakpoint:600,settings:{slidesToShow:3}},{breakpoint:520,settings:{slidesToShow:1}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-carousel-home-responsive2"]],decls:14,vars:2,consts:[[1,"blue-container","formacoes"],[1,"white-box",2,"display","flex","flex-flow","column","align-items","center","padding-bottom","120px"],[1,"formation-row",2,"align-items","center"],[1,"btn","btn-angle",2,"font-size","54px","height","100px","cursor","pointer",3,"click"],["src","assets/arrow-left.png","alt",""],[1,"container",2,"margin-left","-10px !important","width","420px !important","margin-top","2rem",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide","style","margin-left: 28px; width: 350px !important;",4,"ngFor","ngForOf"],["src","assets/arrow-right.png","alt",""],[1,"formation-row",2,"width","100%","padding-top","20px"],[1,"card"],["href","estoque",1,"btn","btn-blue","btn-sm","btn-carousel","btn-ver-todas",2,"width","100%","color","white","font-size","36px !important","font-weight","500"],["ngxSlickItem","",1,"slide",2,"margin-left","28px","width","350px !important"],[1,"card",2,"background-color","#606060","width","350px !important","height","551px","padding-left","-100px !important","border-radius","30px !important"],[1,"card-img-top",2,"height","300px",3,"src","alt"],[1,"card-body","d-flex","flex-column",2,"padding","23px"],[1,"card-title","title-white-cards",2,"white-space","pre-wrap","font-family","'Roboto'","font-style","normal","font-weight","400","font-size","24px","line-height","28px","justify-content","center","text-align","center"],[1,"card-title","title-white-cards","style-title-card",2,"color","white","font-size","18px !important"],[1,"mt-auto"],["_ngcontent-hst-c18","",1,"h6-box",2,"color","#0789E5"],["name","btnsaiba","_ngcontent-fts-c20","",1,"align-self-end","btn","btn-nrs","btn-carousel","color-button",2,"margin-top","auto","font-weight","500","font-size","20px","line-height","28px",3,"href"]],template:function(t,i){if(1&t){const s=At();G(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ke("click",function(){return Wt(s),Gt(rn(6).slickPrev())}),Ie(4,"img",4),J(),G(5,"ngx-slick-carousel",5,6),_e(7,dU,16,7,"div",7),J(),G(8,"button",3),Ke("click",function(){return Wt(s),Gt(rn(6).slickNext())}),Ie(9,"img",8),J()(),G(10,"div",9)(11,"div",10)(12,"a",11),Ve(13,"Ver estoque"),J()()()()()}2&t&&(re(5),de("config",i.slideConfig),re(2),de("ngForOf",i.cards))},dependencies:[ns,kg,m0],styles:[".text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.style-font-title[_ngcontent-%COMP%]{margin-bottom:40px!important;color:#022e4d!important}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem;color:#fff}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.picsum-img-wrapper[_ngcontent-%COMP%]{height:736px;width:100%}.carousel-img[_ngcontent-%COMP%]{width:100%}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000}.btn-ver-todas[_ngcontent-%COMP%]{width:100%;margin-left:8px!important;background-color:#730101;color:#fff;font-size:30px!important;font-weight:500}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px;border-radius:25px;height:15px;width:48px;background-color:#045590;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:80px;background-color:#0092f4;transition:.5s}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#E5E5E5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}"]}),e})();function hU(e,n){if(1&e&&(G(0,"div",8)(1,"div",9),Ie(2,"img",10),G(3,"div",11)(4,"h5",12),Ve(5),J(),G(6,"div")(7,"h5",13),Ve(8),J(),G(9,"h5",13),Ve(10),J()(),G(11,"div",14)(12,"h6",15),Ve(13),J(),G(14,"a",16),Ve(15,"Saiba mais"),J()()()()()),2&e){const t=n.$implicit;re(2),de("src",t.img,hi)("alt",t.alt),re(3),fi(t.title),re(3),oi(" ",t.description," "),re(2),oi(" ",t.value," "),re(3),oi(" ",t.sub," "),re(1),Ol("href","estoque/",t.link,"",hi)}}let ZS=(()=>{class e{constructor(){this.cards=[{title:"TORO RANCH",description:"AUTOM\xc1TICO",img:"assets/toro.png",alt:"normas tecnicas",link:"TORO",value:"R$ 160.000,00"},{title:"SPACEFOX",description:"MANUAL",img:"assets/space.png",alt:"normas tecnicas",link:"SPACEFOX",value:"R$ 57.000,00"},{title:"AMAROK SE",description:"MANUAL",img:"assets/amarok.png",alt:"normas tecnicas",link:"AMAROK",value:"R$ 95.000,00"},{title:"JETTA",description:"AUTOM\xc1TICO",img:"assets/jetta.png",alt:"normas tecnicas",link:"JETTA",value:"R$ 45.000,00"},{title:"PATHFINDER",description:"AUTOM\xc1TICO",img:"assets/pathfinder.png",alt:"normas tecnicas",link:"PATHFINDER",value:"R$ 82.000,00"},{title:"DUSTER EXPRESS",description:"MANUAL",img:"assets/duster.png",alt:"normas tecnicas",link:"DUSTER",value:"R$ 69.990,00"},{title:"ARGO TREKKING",description:"MANUAL",img:"assets/argo.png",alt:"normas tecnicas",link:"ARGO",value:"R$ 72.000,00"}]}goTo(t){}ngOnInit(){this.slideConfig={slidesToShow:1.2,slidesToScroll:1,autoplay:!1,autoplaySpeed:1e3,arrows:!1,dots:!1,pauseOnHover:!1,responsive:[{settings:{slidesToShow:3}},{settings:{slidesToShow:1}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-carousel-home-responsive3"]],decls:9,vars:2,consts:[[1,"formacoes",2,"padding-right","0% !important"],[2,"padding-bottom","120px","padding-right","0% !important"],[1,"formation-row",2,"align-items","center"],[1,"container",2,"margin","0","padding","0% !important","margin-top","20px",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide ","style","margin-left: 80px !important;",4,"ngFor","ngForOf"],[2,"justify-content","center","text-align","center","padding-top","20px"],["_ngcontent-ehq-c19","","href","estoque",1,"btn","btn-blue","btn-sm","btn-carousel","btn-ver-todas",2,"width","50%","color","white","font-size","20px !important","font-weight","500"],["ngxSlickItem","",1,"slide",2,"margin-left","80px !important"],[1,"card","card-height",2,"background-color","#606060","height","521px","width","290px"],[1,"card-img-top",2,"height","360px !important",3,"src","alt"],[1,"card-body","d-flex","flex-column",2,"height","300px"],[1,"card-title","title-white-cards",2,"white-space","pre-wrap","font-family","'Roboto'","font-style","normal","font-weight","400","font-size","18px","line-height","28px","justify-content","center","text-align","center","color","white !important"],[1,"card-title","title-white-cards","style-title-card",2,"color","white","font-size","18px !important"],[1,"mt-auto"],["_ngcontent-hst-c18","",1,"h6-box",2,"color","#0789E5","font-size","16px !important","margin-top","-25px !important"],["name","btnsaiba","_ngcontent-fts-c20","",1,"align-self-end","btn","btn-nrs","btn-carousel","color-button",2,"margin-top","auto","font-weight","500","font-size","20px","line-height","28px",3,"href"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"ngx-slick-carousel",3,4),_e(5,hU,16,7,"div",5),J()(),G(6,"div",6)(7,"a",7),Ve(8,"Ver estoque"),J()()()()),2&t&&(re(3),de("config",i.slideConfig),re(2),de("ngForOf",i.cards))},dependencies:[ns,kg,m0],styles:[".text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.style-font-title[_ngcontent-%COMP%]{margin-bottom:40px!important;color:#022e4d!important}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem;color:#fff}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.picsum-img-wrapper[_ngcontent-%COMP%]{height:736px;width:100%}.carousel-img[_ngcontent-%COMP%]{width:100%}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000}.btn-ver-todas[_ngcontent-%COMP%]{width:100%;background-color:#730101;color:#fff;font-size:30px!important;font-weight:500}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px;border-radius:25px;height:15px;width:48px;background-color:#045590;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:80px;background-color:#0092f4;transition:.5s}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#E5E5E5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}"]}),e})();function pU(e,n){if(1&e&&(G(0,"div",8)(1,"div",9),Ie(2,"img",10),G(3,"div",11)(4,"h5",12),Ve(5),J(),G(6,"div",13)(7,"h5",14),Ve(8),J(),G(9,"h5",14),Ve(10),J()(),G(11,"div",15)(12,"h6",16),Ve(13),J(),G(14,"a",17),Ve(15,"Saiba mais"),J()()()()()),2&e){const t=n.$implicit;re(2),de("src",t.img,hi)("alt",t.alt),re(3),fi(t.title),re(3),oi(" ",t.description," "),re(2),oi(" ",t.value," "),re(3),oi(" ",t.sub," "),re(1),Ol("href","estoque/",t.link,"",hi)}}let JS=(()=>{class e{constructor(){this.cards=[{title:"TORO RANCH",description:"AUTOM\xc1TICO",img:"assets/toro.png",alt:"normas tecnicas",link:"TORO",value:"R$ 160.000,00"},{title:"SPACEFOX",description:"MANUAL",img:"assets/space.png",alt:"normas tecnicas",link:"SPACEFOX",value:"R$ 57.000,00"},{title:"AMAROK SE",description:"MANUAL",img:"assets/amarok.png",alt:"normas tecnicas",link:"AMAROK",value:"R$ 95.000,00"},{title:"JETTA",description:"AUTOM\xc1TICO",img:"assets/jetta.png",alt:"normas tecnicas",link:"JETTA",value:"R$ 45.000,00"},{title:"PATHFINDER",description:"AUTOM\xc1TICO",img:"assets/pathfinder.png",alt:"normas tecnicas",link:"PATHFINDER",value:"R$ 82.000,00"},{title:"DUSTER EXPRESS",description:"MANUAL",img:"assets/duster.png",alt:"normas tecnicas",link:"DUSTER",value:"R$ 69.990,00"},{title:"ARGO TREKKING",description:"MANUAL",img:"assets/argo.png",alt:"normas tecnicas",link:"ARGO",value:"R$ 72.000,00"}]}goTo(t){}ngOnInit(){this.slideConfig={slidesToShow:1.2,slidesToScroll:1,autoplay:!1,autoplaySpeed:1e3,arrows:!1,dots:!1,pauseOnHover:!1,responsive:[{settings:{slidesToShow:3}},{settings:{slidesToShow:1}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-carousel-home-responsive4"]],decls:9,vars:2,consts:[[1,"formacoes",2,"padding-right","0% !important"],[2,"padding-bottom","120px","padding-right","0% !important"],[1,"formation-row",2,"align-items","center"],[1,"container",2,"margin","0","padding","0% !important","margin-top","20px",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide ","style","margin-left: 70px !important;",4,"ngFor","ngForOf"],[2,"justify-content","center","text-align","center","padding-top","20px"],["_ngcontent-ehq-c19","","href","estoque",1,"btn","btn-blue","btn-sm","btn-carousel","btn-ver-todas",2,"width","50%","color","white","font-size","20px !important","font-weight","500"],["ngxSlickItem","",1,"slide",2,"margin-left","70px !important"],[1,"card","card-height",2,"background-color","#606060","height","521px","width","290px"],[1,"card-img-top",2,"height","360px !important",3,"src","alt"],[1,"card-body","d-flex","flex-column",2,"height","300px"],[1,"card-title","title-white-cards",2,"white-space","pre-wrap","font-family","'Roboto'","font-style","normal","font-weight","400","font-size","18px","line-height","28px","justify-content","center","text-align","center","color","white !important"],[2,"text-align","center"],[1,"card-title","title-white-cards","style-title-card",2,"color","white","font-size","18px !important"],[1,"mt-auto"],["_ngcontent-hst-c18","",1,"h6-box",2,"color","#0789E5","font-size","16px !important","margin-top","-25px !important"],["name","btnsaiba","_ngcontent-fts-c20","",1,"align-self-end","btn","btn-nrs","btn-carousel","color-button",2,"margin-top","auto","font-weight","500","font-size","20px","line-height","28px",3,"href"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"ngx-slick-carousel",3,4),_e(5,pU,16,7,"div",5),J()(),G(6,"div",6)(7,"a",7),Ve(8,"Ver estoque"),J()()()()),2&t&&(re(3),de("config",i.slideConfig),re(2),de("ngForOf",i.cards))},dependencies:[ns,kg,m0],styles:[".text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.style-font-title[_ngcontent-%COMP%]{margin-bottom:40px!important;color:#022e4d!important}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem;color:#fff}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.picsum-img-wrapper[_ngcontent-%COMP%]{height:736px;width:100%}.carousel-img[_ngcontent-%COMP%]{width:100%}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000}.btn-ver-todas[_ngcontent-%COMP%]{width:100%;background-color:#730101;color:#fff;font-size:30px!important;font-weight:500}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px;border-radius:25px;height:15px;width:48px;background-color:#045590;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:80px;background-color:#0092f4;transition:.5s}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#E5E5E5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}"]}),e})();function fU(e,n){if(1&e){const t=At();G(0,"header",38)(1,"nav"),Ie(2,"img",39),G(3,"div",40),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(4,"div",41)(5,"div",42)(6,"div",43),J(),G(7,"div",44),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(8,"div",41)(9,"div",42)(10,"div",43),J(),G(11,"ul",45)(12,"li")(13,"a",46),Ve(14,"Estoque"),J()(),G(15,"li")(16,"a",47),Ve(17,"Contato"),J()(),G(18,"li")(19,"a",48),Ve(20,"Localiza\xe7\xe3o"),J()(),G(21,"li")(22,"a",49),Ve(23,"Quem somos?"),J()()()()()}}function gU(e,n){if(1&e){const t=At();G(0,"div",50),Ie(1,"img",51),G(2,"div",40),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(3,"div",41)(4,"div",42)(5,"div",43),J()()}}function mU(e,n){1&e&&(G(0,"div",52)(1,"ul")(2,"li")(3,"a",46),Ve(4,"Estoque"),J()(),G(5,"li")(6,"a",47),Ve(7,"Contato"),J()(),G(8,"li")(9,"a",48),Ve(10,"Localiza\xe7\xe3o"),J()(),G(11,"li")(12,"a",49),Ve(13,"Quem somos?"),J()()()())}function _U(e,n){1&e&&Ie(0,"div",53)}function yU(e,n){1&e&&Ie(0,"div",53)}function vU(e,n){1&e&&Ie(0,"div",53)}function xU(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home"),J())}function bU(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive"),J())}function wU(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive2"),J())}function CU(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive3"),J())}function MU(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive4"),J())}function OU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",55),J())}function TU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",56),J())}function DU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",57),J())}function PU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",58),J())}function EU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",59),J())}function SU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",60),J())}const AU=function(e,n,t){return{"img-1":e,"img-2":n,"img-3":t}},tM=function(e){return{active:e}};function kU(e,n){if(1&e){const t=At();G(0,"header",33)(1,"nav")(2,"a",34),Ie(3,"img",35),J(),G(4,"div",36),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(5,"div",37)(6,"div",38)(7,"div",39),J(),G(8,"div",40),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(9,"div",37)(10,"div",38)(11,"div",39),J(),G(12,"ul",41)(13,"li")(14,"a",42),Ve(15,"Estoque"),J()(),G(16,"li")(17,"a",43),Ve(18,"Contato"),J()(),G(19,"li")(20,"a",44),Ve(21,"Localiza\xe7\xe3o"),J()(),G(22,"li")(23,"a",45),Ve(24,"Quem somos?"),J()()()()()}}function RU(e,n){if(1&e){const t=At();G(0,"div",46)(1,"a",47),Ie(2,"img",48),J(),G(3,"div",36),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(4,"div",37)(5,"div",38)(6,"div",39),J()()}}function NU(e,n){1&e&&(G(0,"div",49)(1,"ul")(2,"li")(3,"a",42),Ve(4,"Estoque"),J()(),G(5,"li")(6,"a",43),Ve(7,"Contato"),J()(),G(8,"li")(9,"a",44),Ve(10,"Localiza\xe7\xe3o"),J()(),G(11,"li")(12,"a",45),Ve(13,"Quem somos?"),J()()()())}function FU(e,n){1&e&&Ie(0,"div",50)}function LU(e,n){1&e&&Ie(0,"div",50)}function BU(e,n){1&e&&Ie(0,"div",50)}function zU(e,n){1&e&&(G(0,"div",51),Ie(1,"iframe",52),J())}function VU(e,n){1&e&&(G(0,"div",51),Ie(1,"iframe",53),J())}function UU(e,n){1&e&&(G(0,"div",51),Ie(1,"iframe",54),J())}function jU(e,n){1&e&&(G(0,"div",51),Ie(1,"iframe",55),J())}function $U(e,n){1&e&&(G(0,"div",51),Ie(1,"iframe",56),J())}function GU(e,n){1&e&&(G(0,"div",51),Ie(1,"iframe",57),J())}const HU=function(e,n,t){return{"img-1":e,"img-2":n,"img-3":t}},nM=function(e){return{active:e}};function qU(e,n){if(1&e){const t=At();G(0,"header",36)(1,"nav")(2,"a",37),Ie(3,"img",38),J(),G(4,"div",39),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(5,"div",40)(6,"div",41)(7,"div",42),J(),G(8,"div",43),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(9,"div",40)(10,"div",41)(11,"div",42),J(),G(12,"ul",44)(13,"li")(14,"a",45),Ve(15,"Estoque"),J()(),G(16,"li")(17,"a",46),Ve(18,"Contato"),J()(),G(19,"li")(20,"a",47),Ve(21,"Localiza\xe7\xe3o"),J()(),G(22,"li")(23,"a",48),Ve(24,"Quem somos?"),J()()()()()}}function ZU(e,n){if(1&e){const t=At();G(0,"div",49)(1,"a",50),Ie(2,"img",51),J(),G(3,"div",39),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(4,"div",40)(5,"div",41)(6,"div",42),J()()}}function JU(e,n){1&e&&(G(0,"div",52)(1,"ul")(2,"li")(3,"a",45),Ve(4,"Estoque"),J()(),G(5,"li")(6,"a",46),Ve(7,"Contato"),J()(),G(8,"li")(9,"a",47),Ve(10,"Localiza\xe7\xe3o"),J()(),G(11,"li")(12,"a",48),Ve(13,"Quem somos?"),J()()()())}function XU(e,n){1&e&&Ie(0,"div",53)}function KU(e,n){1&e&&Ie(0,"div",53)}function YU(e,n){1&e&&Ie(0,"div",53)}function QU(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",55),J())}function ej(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",56),J())}function tj(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",57),J())}function nj(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",58),J())}function ij(e,n){1&e&&(G(0,"div",54),Ie(1,"iframe",59),J())}const oj=function(e,n,t){return{"img-1":e,"img-2":n,"img-3":t}},iM=function(e){return{active:e}};function sj(e,n){if(1&e){const t=At();G(0,"header",46)(1,"nav")(2,"a",47),Ie(3,"img",48),J(),G(4,"div",49),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(5,"div",50)(6,"div",51)(7,"div",52),J(),G(8,"div",53),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(9,"div",50)(10,"div",51)(11,"div",52),J(),G(12,"ul",54)(13,"li")(14,"a",55),Ve(15,"Estoque"),J()(),G(16,"li")(17,"a",56),Ve(18,"Contato"),J()(),G(19,"li")(20,"a",57),Ve(21,"Localiza\xe7\xe3o"),J()(),G(22,"li")(23,"a",58),Ve(24,"Quem somos?"),J()()()()()}}function aj(e,n){if(1&e){const t=At();G(0,"div",59),Ie(1,"img",60),G(2,"div",49),Ke("click",function(){return Wt(t),Gt(it().abrir())}),Ie(3,"div",50)(4,"div",51)(5,"div",52),J()()}}function lj(e,n){1&e&&(G(0,"div",61)(1,"ul")(2,"li")(3,"a",55),Ve(4,"Estoque"),J()(),G(5,"li")(6,"a",56),Ve(7,"Contato"),J()(),G(8,"li")(9,"a",57),Ve(10,"Localiza\xe7\xe3o"),J()(),G(11,"li")(12,"a",58),Ve(13,"Quem somos?"),J()()()())}function cj(e,n){1&e&&Ie(0,"div",62)}function uj(e,n){1&e&&Ie(0,"div",62)}function dj(e,n){1&e&&Ie(0,"div",62)}function hj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto1,hi)}}function pj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto2,hi)}}function fj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto3,hi)}}function gj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto4,hi)}}function mj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto5,hi)}}function _j(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto6,hi)}}function yj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto7,hi)}}function vj(e,n){if(1&e&&Ie(0,"img",66),2&e){const t=it(2);po("src",t.title[t.selectedNR].foto8,hi)}}function xj(e,n){if(1&e){const t=At();G(0,"div")(1,"a",63),Ke("click",function(){return Wt(t),Gt(it().voltar())}),Ie(2,"img",10),J(),_e(3,hj,1,1,"img",64),_e(4,pj,1,1,"img",64),_e(5,fj,1,1,"img",64),_e(6,gj,1,1,"img",64),_e(7,mj,1,1,"img",64),_e(8,_j,1,1,"img",64),_e(9,yj,1,1,"img",64),_e(10,vj,1,1,"img",64),G(11,"a",65),Ke("click",function(){return Wt(t),Gt(it().avancar())}),Ie(12,"img",14),J()()}if(2&e){const t=it();re(3),de("ngIf",1===t.foto),re(1),de("ngIf",2===t.foto),re(1),de("ngIf",3===t.foto),re(1),de("ngIf",4===t.foto),re(1),de("ngIf",5===t.foto),re(1),de("ngIf",6===t.foto),re(1),de("ngIf",7===t.foto),re(1),de("ngIf",8===t.foto)}}function bj(e,n){if(1&e&&(G(0,"div")(1,"div",67)(2,"div",68)(3,"div",69)(4,"div",70),Ie(5,"img",71),J(),G(6,"div",72),Ie(7,"img",73),J(),G(8,"div",74),Ie(9,"img",73),J(),G(10,"div",74),Ie(11,"img",73),J(),G(12,"div",74),Ie(13,"img",73),J(),G(14,"div",74),Ie(15,"img",73),J(),G(16,"div",74),Ie(17,"img",73),J(),G(18,"div",74),Ie(19,"img",73),J()(),G(20,"button",75),Ie(21,"span",76),G(22,"span",77),Ve(23,"Previous"),J()(),G(24,"button",78),Ie(25,"span",79),G(26,"span",77),Ve(27,"Next"),J()()()()()),2&e){const t=it();re(5),po("src",t.title[t.selectedNR].foto1,hi),re(2),po("src",t.title[t.selectedNR].foto2,hi),re(2),po("src",t.title[t.selectedNR].foto3,hi),re(2),po("src",t.title[t.selectedNR].foto4,hi),re(2),po("src",t.title[t.selectedNR].foto5,hi),re(2),po("src",t.title[t.selectedNR].foto6,hi),re(2),po("src",t.title[t.selectedNR].foto7,hi),re(2),po("src",t.title[t.selectedNR].foto8,hi)}}function wj(e,n){if(1&e&&(G(0,"div",80)(1,"div",81)(2,"p",23),Ve(3),J()(),G(4,"div")(5,"p",23),Ve(6),J()(),G(7,"div")(8,"p",23),Ve(9),J()(),G(10,"div")(11,"p",23),Ve(12),J()(),G(13,"div")(14,"p",23),Ve(15),J()(),G(16,"div")(17,"p",23),Ve(18),J()(),G(19,"div")(20,"p",23),Ve(21),J()(),G(22,"div",82)(23,"a",23),Ve(24),J()(),G(25,"div",83)(26,"button",84),Ve(27,"Falar com um vendedor"),J()()()),2&e){const t=it();re(3),fi(t.title[t.selectedNR].marca),re(3),fi(t.title[t.selectedNR].modelo),re(3),oi("ANO: ",t.title[t.selectedNR].ano,""),re(3),oi("COR: ",t.title[t.selectedNR].cor,""),re(3),oi("C\xc2MBIO: ",t.title[t.selectedNR].cambio,""),re(3),oi("KM: ",t.title[t.selectedNR].km,""),re(3),oi("COMBUST\xcdVEL: ",t.title[t.selectedNR].combustivel,""),re(3),fi(t.title[t.selectedNR].valor)}}const J0=function(e){return{"flex-column":e}};function Cj(e,n){if(1&e&&(G(0,"div",85)(1,"div",24)(2,"p",86),Ve(3),J(),G(4,"p",86),Ve(5),J(),G(6,"p",86),Ve(7),J(),G(8,"p",86),Ve(9),J()(),G(10,"div",24)(11,"p",86),Ve(12),J(),G(13,"p",86),Ve(14),J(),G(15,"p",86),Ve(16),J(),G(17,"p",86),Ve(18),J()(),G(19,"div",87)(20,"button",84),Ve(21,"Falar com um vendedor"),J()()()),2&e){const t=it();re(1),de("ngClass",Gi(10,J0,t.innerWidth<=530)),re(2),fi(t.title[t.selectedNR].marca),re(2),fi(t.title[t.selectedNR].modelo),re(2),oi("ANO: ",t.title[t.selectedNR].ano,"2020"),re(2),oi("COR: ",t.title[t.selectedNR].cor,""),re(1),de("ngClass",Gi(12,J0,t.innerWidth<=530)),re(2),oi("C\xc2MBIO: ",t.title[t.selectedNR].cambio,""),re(2),oi("KM: ",t.title[t.selectedNR].km,""),re(2),oi("COMBUST\xcdVEL: ",t.title[t.selectedNR].combustivel,""),re(2),fi(t.title[t.selectedNR].valor)}}function Mj(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home"),J())}function Oj(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive"),J())}function Tj(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive2"),J())}function Dj(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive3"),J())}function Pj(e,n){1&e&&(G(0,"div"),Ie(1,"app-carousel-home-responsive4"),J())}function Ej(e,n){1&e&&(G(0,"div",88),Ie(1,"iframe",89),J())}function Sj(e,n){1&e&&(G(0,"div",88),Ie(1,"iframe",90),J())}function Aj(e,n){1&e&&(G(0,"div",88),Ie(1,"iframe",91),J())}function Ij(e,n){1&e&&(G(0,"div",88),Ie(1,"iframe",92),J())}function kj(e,n){1&e&&(G(0,"div",88),Ie(1,"iframe",93),J())}function Rj(e,n){1&e&&(G(0,"div",88),Ie(1,"iframe",94),J())}const Nj=function(e,n,t){return{"img-1":e,"img-2":n,"img-3":t}},oM=function(e){return{active:e}},Fj=[{path:"",component:(()=>{class e{constructor(){this.responsive=!1,this.banners=[{alt:"pessoa capacitadas",url:"/servicos/treinamentos",link:"/normas"},{alt:"alunas em sala de aula",url:"/normas",link:"/normas"},{title:"Confira nosso\nblog com conte\xfados\nexclusivos",alt:"professor em sala de aula",url:"https://www.sesirs.org.br/blog-sesi-saude",link:"https://www.sesirs.org.br/blog-sesi-saude"}],this.bannerSelected=this.banners[0],this.bannerSelectedIndex=0}ngOnInit(){this.innerWidth=window.innerWidth,this.responsive=!1}onResize(){this.innerWidth=window.innerWidth}abrirLink(){window.open("https://www.google.com/maps/place/AUTO+JB/@-29.931451,-51.0880416,17z/data=!4m6!3m5!1s0x951973a7b86023e7:0x24c98ba299e6676b!8m2!3d-29.9299719!4d-51.0865501!16s%2Fg%2F11q1s7pmrz?entry=ttu","_blank")}nextBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+1)%this.banners.length}abrir(){this.responsive=!1===this.responsive,console.log(this.responsive)}previousBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+this.banners.length-1)%this.banners.length}selectBanner(t){this.bannerSelected=this.banners[t],this.bannerSelectedIndex=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-home"]],hostBindings:function(t,i){1&t&&Ke("resize",function(u){return i.onResize(u)},0,eh)},decls:64,vars:31,consts:[[2,"overflow-x","hidden"],[1,"tela"],["class","navigation-above",4,"ngIf"],["class","box-black5","style","overflow-x: hidden;",4,"ngIf"],["class","box-black6",4,"ngIf"],[1,"carousel","carousel-below",2,"margin-left","-0.5rem","margin-right","-1vh",3,"ngClass"],[1,"carousel-title",2,"padding","0 !important","margin-top","0.5rem"],["class","carousel-text",4,"ngIf"],[1,"controller-carousel"],[1,"carousel-arrow","arrow-left",3,"click"],["src","../assets/arrow.png",2,"width","60px"],[1,"controller"],[1,"controller-options",3,"ngClass","click"],[1,"carousel-arrow","arrow-right",3,"click"],["src","../assets/arrowRight.png",2,"width","60px"],[1,"text-margin"],[4,"ngIf"],[2,"text-align","center","margin-top","-6rem"],["src","assets/loja2.png","alt","",2,"width","1100px"],[1,"text-loja"],[1,"box-responsive",2,"margin-top","3rem"],[1,"box-black3"],[1,"contato-text"],[1,"contatos",2,"margin-top","1rem"],[1,"icon-contato","insta"],[1,"icon-contato","face"],[1,"icon-contato","whats"],[1,"contato-localizacao-margin",2,"margin-top","4rem"],[1,"contato-text-localizacao"],[1,"contato-rua-margin"],[1,"contato-text-rua"],["style","margin-top: 2rem;",4,"ngIf"],[1,"logo-autojb"],[1,"contato-slogan-margin",2,"padding-bottom","150px"],[1,"contato-text-slogan"],[1,"box-black4",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive2"],[1,"nav-list","responsive-text"],[1,"navigation-above"],["src","assets/logo.png","alt","",1,"logo-responsive-header"],[1,"mobile-menu",3,"click"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"mobile-menu2","button-2",3,"click"],[1,"nav-list"],["routerLink","estoque"],["href","contato"],["href","localizacao"],["href",""],[1,"box-black5",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive3"],[1,"box-black6"],[1,"carousel-text"],[2,"margin-top","2rem"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","1100","height","550","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","900","height","470","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","750","height","370","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","700","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","500","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","380","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"body",1),_e(2,fU,24,0,"header",2),J(),_e(3,gU,6,0,"div",3),_e(4,mU,14,0,"div",4),G(5,"div",5)(6,"div",6),_e(7,_U,1,0,"div",7),_e(8,yU,1,0,"div",7),_e(9,vU,1,0,"div",7),J(),G(10,"div",8)(11,"a",9),Ke("click",function(){return i.previousBanner()}),Ie(12,"img",10),J(),G(13,"div",11)(14,"div",12),Ke("click",function(){return i.selectBanner(0)}),J(),G(15,"div",12),Ke("click",function(){return i.selectBanner(1)}),J(),G(16,"div",12),Ke("click",function(){return i.selectBanner(2)}),J()(),G(17,"a",13),Ke("click",function(){return i.nextBanner()}),Ie(18,"img",14),J()()(),G(19,"div",15)(20,"h2"),Ve(21,"NOVIDADES NO ESTOQUE!"),J()(),_e(22,xU,2,0,"div",16),_e(23,bU,2,0,"div",16),_e(24,wU,2,0,"div",16),_e(25,CU,2,0,"div",16),_e(26,MU,2,0,"div",16),G(27,"div",17),Ie(28,"img",18),G(29,"h3",19),Ve(30," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing. "),J()(),G(31,"div",20)(32,"div",21)(33,"div")(34,"div")(35,"a",22),Ve(36,"ENTRE EM CONTATO!"),J()(),G(37,"div",23),Ie(38,"div",24)(39,"div",25)(40,"div",26),J(),G(41,"div",27)(42,"a",28),Ve(43,"LOCALIZA\xc7\xc3O"),J()(),G(44,"div",29)(45,"a",30),Ve(46,"AV.Cai, 1712 - Princesa Isabel - Cachoeirinha - RS"),J()(),_e(47,OU,2,0,"div",31),_e(48,TU,2,0,"div",31),_e(49,DU,2,0,"div",31),_e(50,PU,2,0,"div",31),_e(51,EU,2,0,"div",31),_e(52,SU,2,0,"div",31),Ie(53,"div",32),G(54,"div",33)(55,"a",34),Ve(56,"A MELHOR OP\xc7\xc3O PARA VOC\xca!"),J()()()()(),G(57,"div")(58,"div",35),Ie(59,"img",36),G(60,"ul",37)(61,"li")(62,"p"),Ve(63,"\xa9 2023 AUTO JB - desenvolvido por webUp!"),J()()()()()()),2&t&&(re(2),de("ngIf",i.innerWidth>999),re(1),de("ngIf",i.innerWidth<1e3),re(1),de("ngIf",!0===i.responsive),re(1),de("ngClass",ph(21,AU,0===i.bannerSelectedIndex,1===i.bannerSelectedIndex,2===i.bannerSelectedIndex)),re(2),de("ngIf",0===i.bannerSelectedIndex),re(1),de("ngIf",1===i.bannerSelectedIndex),re(1),de("ngIf",2===i.bannerSelectedIndex),re(5),de("ngClass",Gi(25,tM,0===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(27,tM,1===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(29,tM,2===i.bannerSelectedIndex)),re(6),de("ngIf",i.innerWidth>1430),re(1),de("ngIf",i.innerWidth>999&&i.innerWidth<=1430),re(1),de("ngIf",i.innerWidth>699&&i.innerWidth<=999),re(1),de("ngIf",i.innerWidth>365&&i.innerWidth<700),re(1),de("ngIf",i.innerWidth<366),re(21),de("ngIf",i.innerWidth>1455),re(1),de("ngIf",i.innerWidth>1255&&i.innerWidth<1456),re(1),de("ngIf",i.innerWidth>1100&&i.innerWidth<1256),re(1),de("ngIf",i.innerWidth>772&&i.innerWidth<1101),re(1),de("ngIf",i.innerWidth>535&&i.innerWidth<773),re(1),de("ngIf",i.innerWidth<536))},dependencies:[Ag,Lr,W0,HS,WS,qS,ZS,JS],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}.tela[_ngcontent-%COMP%]{margin:-8px!important}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:.3s}p[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]:hover{opacity:.7}.logo-responsive[_ngcontent-%COMP%], .logo-responsive-header[_ngcontent-%COMP%]{width:340px;margin-left:-3rem}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;height:8vh}.nav-list[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:50vw}.logo-responsive3[_ngcontent-%COMP%]{width:340px;margin-left:-10rem;padding-bottom:2rem}@media only screen and (min-width: 724px) and (max-width: 830px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:43vw}}@media only screen and (min-width: 600px) and (max-width: 724px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:34vw}}@media only screen and (min-width: 560px) and (max-width: 600px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:27vw}}@media only screen and (min-width: 500px) and (max-width: 560px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}}@media only screen and (min-width: 400px) and (max-width: 500px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:12vw}.logo-responsive3[_ngcontent-%COMP%]{width:300px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 360px) and (max-width: 400px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:14vw}.logo-responsive3[_ngcontent-%COMP%]{width:250px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 326px) and (max-width: 360px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 326px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}.mobile-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}.nav-list2[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu2[_ngcontent-%COMP%]{display:none;cursor:pointer}.mobile-menu2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}@media (max-width: 999px){body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important}.mobile-menu[_ngcontent-%COMP%]{display:block}.nav-list[_ngcontent-%COMP%]{position:absolute;top:8vh;right:0;width:40vw;height:92vh;background:#23232e;flex-direction:column;align-items:center;justify-content:space-around;display:none}.logo-responsive[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem;z-index:3}}@media (max-width: 999px){.logo-responsive[_ngcontent-%COMP%], .logo-responsive2[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem}body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important;white-space:nowrap;margin-left:3rem}.mobile-menu2[_ngcontent-%COMP%]{display:block}.nav-list2[_ngcontent-%COMP%]{position:fixed;top:8vh;right:0;width:100vw;height:32vh;background:#23232e;flex-direction:column;align-items:flex-start;justify-content:space-evenly;transform:translate(0);overflow-y:hidden;margin-top:-3rem}.nav-list2.active[_ngcontent-%COMP%]{transform:translate(0)}.tela[_ngcontent-%COMP%]{margin:-8px!important;overflow-y:hidden}}.img-1[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png);zoom:100%}@media only screen and (min-width: 391px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 1900px) and (max-width: 3000px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 950px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (max-width: 390px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:220px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 300px) and (max-width: 480px){.btn-carousel[_ngcontent-%COMP%]{margin-top:-30px}}.img-2[_ngcontent-%COMP%]{background-image:url(audi.295562cd8fa596b7.png)}.img-3[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png)}.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:38px;transform:translateY(-10rem);cursor:pointer}.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:38px;transform:translateY(-10rem);cursor:pointer}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:20px;cursor:pointer;transform:translateY(-2rem)!important}}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:10px;transform:translateY(-2rem)!important;cursor:pointer}}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:10%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}.success-message[_ngcontent-%COMP%]{color:#fff!important}.button-responsive-home[_ngcontent-%COMP%]{width:260px!important;margin-left:0rem!important;margin-top:-1rem!important;height:60px!important;margin-top:1rem!important}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (min-width: 320px) and (max-width: 500px){.button-responsive-home[_ngcontent-%COMP%]{width:90px!important;margin-left:1rem!important;margin-top:-1rem!important;height:25px!important}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#022e4d;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px;border-radius:25px;height:10px;width:38px;background-color:#862b2b;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:60px;background-color:#f7f7f7;transition:.5s}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.button-2[_ngcontent-%COMP%]{position:relative;z-index:2}.carousel-below[_ngcontent-%COMP%]{position:relative;z-index:0}.navigation-above[_ngcontent-%COMP%]{position:relative;z-index:1}.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:34px}@media only screen and (min-width: 600px) and (max-width: 998px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:24px}}@media only screen and (max-width: 600px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:20px}}.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:24px;margin-top:1rem;padding:10px 110px 0}@media only screen and (min-width: 600px) and (max-width: 998px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:20px;margin-top:1rem;padding:10px 90px 0}}@media only screen and (max-width: 600px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:16px;margin-top:1rem;padding:10px 20px 0}}.box-black[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;border-radius:10px 10px 0 0;padding:40px}.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px;margin-top:3rem}.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-slogan-margin[_ngcontent-%COMP%]{margin-top:1rem}.contato-localizacao-margin[_ngcontent-%COMP%]{margin-top:3rem}.contato-rua-margin[_ngcontent-%COMP%]{margin-top:1rem}.contatos[_ngcontent-%COMP%]{text-align:center}.box-black2[_ngcontent-%COMP%]{align-items:center;background:#23232e;text-align:center}.box-black3[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;text-align:center;padding:40px 150px 0}.box-black4[_ngcontent-%COMP%]{display:flex;align-items:center;background:#23232e;height:5rem;padding:40px 150px 0;overflow-y:hidden}.box-black5[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:6rem;padding:40px 150px 0;overflow-y:hidden}.box-black6[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:10rem;padding:40px 150px 0;overflow-y:hidden;animation-delay:1s}@keyframes _ngcontent-%COMP%_moveToRight{0%{transform:translatey(0)}to{transform:translatey(300px)}}.box-black6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-4rem}.box-black6[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:-8rem;padding-bottom:10px}.margin-contato[_ngcontent-%COMP%]{cursor:pointer}.icon-contato[_ngcontent-%COMP%]{display:inline-block;padding:0 45px 0 30px}.mapa[_ngcontent-%COMP%]{width:1200px;height:780px;background-image:url(mapa.bcd07dfac4f8aa9a.png);transition:.7s}.mapa[_ngcontent-%COMP%]:hover{width:1200px;height:780px;background-image:url(mapa2.c019904f9dccb07c.png);cursor:pointer}.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:40vw;white-space:nowrap;padding-right:3rem}.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-3rem;padding-bottom:2rem}@media only screen and (min-width: 1430px) and (max-width: 1600px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:33vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1336px) and (max-width: 1429px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:28vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1216px) and (max-width: 1336px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:23vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1150px) and (max-width: 1216px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:18vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:15vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 999px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}.insta[_ngcontent-%COMP%]{width:82px;height:82px;background-image:url(instagram.cc9d8965fca5b6ef.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s}.insta[_ngcontent-%COMP%]:hover{width:82px;height:82px;background-image:url(insta2.4265cd3a73f3e1da.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.face[_ngcontent-%COMP%]{width:86px;height:86px;background-image:url(facebook.c7c1dc1e44e2efb1.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.face[_ngcontent-%COMP%]:hover{width:86px;height:86px;background-image:url(face2.99ba37f1f09946c8.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.whats[_ngcontent-%COMP%]{width:79px;height:79px;background-image:url(whats.969f9ab178e3e0c2.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.whats[_ngcontent-%COMP%]:hover{width:79px;height:79px;background-image:url(whats2.2faea5cc7d7267f6.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.logo-autojb[_ngcontent-%COMP%]{width:1150px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0 150px}@media only screen and (max-width: 1125px){.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0!important}}.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:32px}@media only screen and (min-width: 635px) and (max-width: 773px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:26px}}@media only screen and (min-width: 495px) and (max-width: 634px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:13px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px;margin-top:3rem}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px}}@media only screen and (min-width: 320px) and (max-width: 630px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:34px}}@media only screen and (min-width: 320px) and (max-width: 590px){.logo-autojb[_ngcontent-%COMP%]{width:800px;height:283px;background-image:url(autojbR.c30572b7e536d121.png)}}@media only screen and (min-width: 320px) and (max-width: 534px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:28px}}"]}),e})()},{path:"estoque",component:lU},{path:"contato",component:(()=>{class e{constructor(){this.responsive=!1,this.formationSelected=1,this.banners=[{alt:"pessoa capacitadas",url:"/servicos/treinamentos",link:"/normas"},{alt:"alunas em sala de aula",url:"/normas",link:"/normas"},{title:"Confira nosso\nblog com conte\xfados\nexclusivos",alt:"professor em sala de aula",url:"https://www.sesirs.org.br/blog-sesi-saude",link:"https://www.sesirs.org.br/blog-sesi-saude"}],this.bannerSelected=this.banners[0],this.bannerSelectedIndex=0}ngOnInit(){this.innerWidth=window.innerWidth,this.responsive=!1}onResize(){this.innerWidth=window.innerWidth}abrirLink(){window.open("https://www.google.com/maps/place/AUTO+JB/@-29.931451,-51.0880416,17z/data=!4m6!3m5!1s0x951973a7b86023e7:0x24c98ba299e6676b!8m2!3d-29.9299719!4d-51.0865501!16s%2Fg%2F11q1s7pmrz?entry=ttu","_blank")}nextBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+1)%this.banners.length}abrir(){this.responsive=!1===this.responsive,console.log(this.responsive)}selectBanner(t){this.bannerSelected=this.banners[t],this.bannerSelectedIndex=t}previousBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+this.banners.length-1)%this.banners.length}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-contato"]],hostBindings:function(t,i){1&t&&Ke("resize",function(u){return i.onResize(u)},0,eh)},decls:52,vars:26,consts:[[2,"overflow-x","hidden"],[1,"tela"],["class","navigation-above",4,"ngIf"],["class","box-black5","style","overflow-x: hidden;",4,"ngIf"],["class","box-black6",4,"ngIf"],[1,"carousel","carousel-below",2,"margin-left","-0.5rem","margin-right","-1vh","z-index","2",3,"ngClass"],[1,"carousel-title",2,"padding","0 !important","margin-top","0.5rem"],["class","carousel-text",4,"ngIf"],[1,"controller-carousel"],[1,"carousel-arrow","arrow-left",3,"click"],["src","../assets/arrow.png",2,"width","60px"],[1,"controller"],[1,"controller-options",3,"ngClass","click"],[1,"carousel-arrow","arrow-right",3,"click"],["src","../assets/arrowRight.png",2,"width","60px"],[1,"box-responsive",2,"margin-top","3rem"],[1,"box-black3"],[1,"contato-text"],[1,"contatos",2,"margin-top","1rem"],[1,"icon-contato","insta"],[1,"icon-contato","face"],[1,"icon-contato","whats"],[1,"contato-localizacao-margin",2,"margin-top","4rem"],[1,"contato-text-localizacao"],[1,"contato-rua-margin"],[1,"contato-text-rua"],["style","margin-top: 2rem;",4,"ngIf"],[1,"logo-autojb"],[1,"contato-slogan-margin",2,"padding-bottom","150px"],[1,"contato-text-slogan"],[1,"box-black4",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive2"],[1,"nav-list","responsive-text"],[1,"navigation-above"],["href","#",2,"z-index","0"],["src","assets/logo.png","alt","",1,"logo-responsive-header"],[1,"mobile-menu",3,"click"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"mobile-menu2","button-2",3,"click"],[1,"nav-list"],["href","estoque"],["href","contato"],["href","localizacao"],["href",""],[1,"box-black5",2,"overflow-x","hidden"],["href","#",2,"z-index","1"],["src","assets/logo.png","alt","",1,"logo-responsive3"],[1,"box-black6"],[1,"carousel-text"],[2,"margin-top","2rem"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","1100","height","550","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","900","height","470","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","750","height","370","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","700","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","500","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","380","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"body",1),_e(2,kU,25,0,"header",2),J(),_e(3,RU,7,0,"div",3),_e(4,NU,14,0,"div",4),G(5,"div",5)(6,"div",6),_e(7,FU,1,0,"div",7),_e(8,LU,1,0,"div",7),_e(9,BU,1,0,"div",7),J(),G(10,"div",8)(11,"a",9),Ke("click",function(){return i.previousBanner()}),Ie(12,"img",10),J(),G(13,"div",11)(14,"div",12),Ke("click",function(){return i.selectBanner(0)}),J(),G(15,"div",12),Ke("click",function(){return i.selectBanner(1)}),J(),G(16,"div",12),Ke("click",function(){return i.selectBanner(2)}),J()(),G(17,"a",13),Ke("click",function(){return i.nextBanner()}),Ie(18,"img",14),J()()(),G(19,"div",15)(20,"div",16)(21,"div")(22,"div")(23,"a",17),Ve(24,"ENTRE EM CONTATO!"),J()(),G(25,"div",18),Ie(26,"div",19)(27,"div",20)(28,"div",21),J(),G(29,"div",22)(30,"a",23),Ve(31,"LOCALIZA\xc7\xc3O"),J()(),G(32,"div",24)(33,"a",25),Ve(34,"AV.Cai, 1712 - Princesa Isabel - Cachoeirinha - RS"),J()(),_e(35,zU,2,0,"div",26),_e(36,VU,2,0,"div",26),_e(37,UU,2,0,"div",26),_e(38,jU,2,0,"div",26),_e(39,$U,2,0,"div",26),_e(40,GU,2,0,"div",26),Ie(41,"div",27),G(42,"div",28)(43,"a",29),Ve(44,"A MELHOR OP\xc7\xc3O PARA VOC\xca!"),J()()()()(),G(45,"div")(46,"div",30),Ie(47,"img",31),G(48,"ul",32)(49,"li")(50,"p"),Ve(51,"\xa9 2023 AUTO JB - desenvolvido por webUp!"),J()()()()()()),2&t&&(re(2),de("ngIf",i.innerWidth>999),re(1),de("ngIf",i.innerWidth<1e3),re(1),de("ngIf",!0===i.responsive),re(1),de("ngClass",ph(16,HU,0===i.bannerSelectedIndex,1===i.bannerSelectedIndex,2===i.bannerSelectedIndex)),re(2),de("ngIf",0===i.bannerSelectedIndex),re(1),de("ngIf",1===i.bannerSelectedIndex),re(1),de("ngIf",2===i.bannerSelectedIndex),re(5),de("ngClass",Gi(20,nM,0===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(22,nM,1===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(24,nM,2===i.bannerSelectedIndex)),re(19),de("ngIf",i.innerWidth>1455),re(1),de("ngIf",i.innerWidth>1255&&i.innerWidth<1456),re(1),de("ngIf",i.innerWidth>1100&&i.innerWidth<1256),re(1),de("ngIf",i.innerWidth>772&&i.innerWidth<1101),re(1),de("ngIf",i.innerWidth>535&&i.innerWidth<773),re(1),de("ngIf",i.innerWidth<536))},dependencies:[Ag,Lr],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0}.tela[_ngcontent-%COMP%]{margin:-8px!important}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:.3s}p[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]:hover{opacity:.7}.logo-responsive[_ngcontent-%COMP%], .logo-responsive-header[_ngcontent-%COMP%]{width:340px;margin-left:-3rem}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;height:8vh}.nav-list[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:50vw}.logo-responsive3[_ngcontent-%COMP%]{width:340px;margin-left:-10rem;padding-bottom:2rem}@media only screen and (min-width: 724px) and (max-width: 830px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:43vw}}@media only screen and (min-width: 600px) and (max-width: 724px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:34vw}}@media only screen and (min-width: 560px) and (max-width: 600px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:27vw}}@media only screen and (min-width: 500px) and (max-width: 560px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}}@media only screen and (min-width: 400px) and (max-width: 500px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:12vw}.logo-responsive3[_ngcontent-%COMP%]{width:300px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 360px) and (max-width: 400px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:14vw}.logo-responsive3[_ngcontent-%COMP%]{width:250px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 326px) and (max-width: 360px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 326px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}.mobile-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}.nav-list2[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu2[_ngcontent-%COMP%]{display:none;cursor:pointer}.mobile-menu2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}@media (max-width: 999px){body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important}.mobile-menu[_ngcontent-%COMP%]{display:block}.nav-list[_ngcontent-%COMP%]{position:absolute;top:8vh;right:0;width:40vw;height:92vh;background:#23232e;flex-direction:column;align-items:center;justify-content:space-around;display:none}.logo-responsive[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem;z-index:3}}@media (max-width: 999px){.logo-responsive[_ngcontent-%COMP%], .logo-responsive2[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem}body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important;white-space:nowrap;margin-left:3rem}.mobile-menu2[_ngcontent-%COMP%]{display:block}.nav-list2[_ngcontent-%COMP%]{position:fixed;top:8vh;right:0;width:100vw;height:32vh;background:#23232e;flex-direction:column;align-items:flex-start;justify-content:space-evenly;transform:translate(0);overflow-y:hidden;margin-top:-3rem}.nav-list2.active[_ngcontent-%COMP%]{transform:translate(0)}.tela[_ngcontent-%COMP%]{margin:-8px!important;overflow-y:hidden}}.img-1[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png);zoom:100%}@media only screen and (min-width: 391px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 1900px) and (max-width: 3000px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 950px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (max-width: 390px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:220px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 300px) and (max-width: 480px){.btn-carousel[_ngcontent-%COMP%]{margin-top:-30px}}.img-2[_ngcontent-%COMP%]{background-image:url(audi.295562cd8fa596b7.png)}.img-3[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png)}.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:38px;transform:translateY(-10rem);cursor:pointer}.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:38px;transform:translateY(-10rem);cursor:pointer}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:20px;cursor:pointer;transform:translateY(-2rem)!important}}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:10px;transform:translateY(-2rem)!important;cursor:pointer}}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:10%;padding:0 150px;display:flex;align-items:center;top:0}.success-message[_ngcontent-%COMP%]{color:#fff!important}.button-responsive-home[_ngcontent-%COMP%]{width:260px!important;margin-left:0rem!important;margin-top:-1rem!important;height:60px!important;margin-top:1rem!important}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}}@media only screen and (min-width: 320px) and (max-width: 500px){.button-responsive-home[_ngcontent-%COMP%]{width:90px!important;margin-left:1rem!important;margin-top:-1rem!important;height:25px!important}}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000!important;font-weight:500}.gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center;color:#000}.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 600px){.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:18px}}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#5f0101;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px!important;border-radius:25px;height:10px;width:38px;background-color:#862b2b;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:60px;background-color:#f7f7f7;transition:.5s}.button-2[_ngcontent-%COMP%]{position:relative;z-index:2}.carousel-below[_ngcontent-%COMP%]{position:relative;z-index:0}.navigation-above[_ngcontent-%COMP%]{position:relative;z-index:1}.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:34px}@media only screen and (min-width: 600px) and (max-width: 998px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:24px}}@media only screen and (max-width: 600px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:20px}}.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:24px;margin-top:1rem;padding:10px 110px 0}@media only screen and (min-width: 600px) and (max-width: 998px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:20px;margin-top:1rem;padding:10px 90px 0}}@media only screen and (max-width: 600px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:16px;margin-top:1rem;padding:10px 20px 0}}.box-black[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;border-radius:10px 10px 0 0;padding:40px}.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px;margin-top:3rem}.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-slogan-margin[_ngcontent-%COMP%]{margin-top:1rem}.contato-localizacao-margin[_ngcontent-%COMP%]{margin-top:3rem}.contato-rua-margin[_ngcontent-%COMP%]{margin-top:1rem}.contatos[_ngcontent-%COMP%]{text-align:center}.box-black2[_ngcontent-%COMP%], .box-black3[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;text-align:center;padding:40px 150px 0}.box-black4[_ngcontent-%COMP%]{display:flex;align-items:center;background:#23232e;height:5rem;padding:40px 150px 0;overflow-y:hidden}.box-black5[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:6rem;padding:40px 150px 0;overflow-y:hidden}.box-black6[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:10rem;padding:40px 150px 0;overflow-y:hidden;animation-delay:1s}@keyframes _ngcontent-%COMP%_moveToRight{0%{transform:translatey(0)}to{transform:translatey(300px)}}.box-black6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-4rem}.box-black6[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:-8rem;padding-bottom:10px}.margin-contato[_ngcontent-%COMP%]{cursor:pointer}.icon-contato[_ngcontent-%COMP%]{display:inline-block;padding:0 45px 0 30px}.mapa[_ngcontent-%COMP%]{width:1200px;height:780px;background-image:url(mapa.bcd07dfac4f8aa9a.png);transition:.7s}.mapa[_ngcontent-%COMP%]:hover{width:1200px;height:780px;background-image:url(mapa2.c019904f9dccb07c.png);cursor:pointer}.logo-autojb[_ngcontent-%COMP%]{width:1200px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:40vw;white-space:nowrap;padding-right:3rem}.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-3rem;padding-bottom:2rem}@media only screen and (min-width: 1430px) and (max-width: 1600px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:33vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1336px) and (max-width: 1429px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:28vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1216px) and (max-width: 1336px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:23vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1150px) and (max-width: 1216px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:18vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:15vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 999px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}.insta[_ngcontent-%COMP%]{width:82px;height:82px;background-image:url(instagram.cc9d8965fca5b6ef.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s}.insta[_ngcontent-%COMP%]:hover{width:82px;height:82px;background-image:url(insta2.4265cd3a73f3e1da.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.face[_ngcontent-%COMP%]{width:86px;height:86px;background-image:url(facebook.c7c1dc1e44e2efb1.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.face[_ngcontent-%COMP%]:hover{width:86px;height:86px;background-image:url(face2.99ba37f1f09946c8.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.whats[_ngcontent-%COMP%]{width:79px;height:79px;background-image:url(whats.969f9ab178e3e0c2.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.whats[_ngcontent-%COMP%]:hover{width:79px;height:79px;background-image:url(whats2.2faea5cc7d7267f6.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.text-size[_ngcontent-%COMP%]{text-align:left;font-size:18px;color:#000;text-decoration:none}.text-color[_ngcontent-%COMP%]{align-items:left;color:#626262}.btn-enviar[_ngcontent-%COMP%]{border-radius:8px;width:357px;background-color:#0789e5;font-size:32px}.color-novidades[_ngcontent-%COMP%]{color:#022e4d!important}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.unidades-box[_ngcontent-%COMP%]{font-size:18px;color:#fff}.unidades-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#747474;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}.text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;position:absolute;margin-top:12.5px;margin-left:-350px}.font[_ngcontent-%COMP%], .font2[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 500px){.font[_ngcontent-%COMP%]{font-size:16px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.font2[_ngcontent-%COMP%]{font-size:18px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px;position:absolute;margin-top:8px!important;margin-left:-278px!important}}.font-size-responsive[_ngcontent-%COMP%]{font-size:18px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-size-responsive[_ngcontent-%COMP%]{font-size:14px!important}}.style-checkbox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]{background-color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]:after{display:block}.input-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container-box[_ngcontent-%COMP%]   .input-checkbox[_ngcontent-%COMP%]:after{top:3px;left:6.4px;width:5px;height:10px;border:solid rgb(255,255,255);border-width:0 2px 2px 0;transform:rotate(45deg)}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.container-box[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;color:#022e4d}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.legend-responsive[_ngcontent-%COMP%], .img-responsive[_ngcontent-%COMP%]{margin-left:0}.font-responsive[_ngcontent-%COMP%]{font-size:45px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-responsive[_ngcontent-%COMP%]{font-size:20px!important;margin-left:20px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.font-responsive[_ngcontent-%COMP%]{font-size:28px!important;margin-left:55px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.img-responsive[_ngcontent-%COMP%]{margin-left:-2px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:60px!important}}@media only screen and (min-width: 912px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:130px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}.text-responsive[_ngcontent-%COMP%]{font-size:24px}.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px}@media only screen and (min-width: 320px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:18px!important;color:#022e4d!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px!important;color:#022e4d!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive[_ngcontent-%COMP%]{font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive[_ngcontent-%COMP%]{font-size:24px!important;text-align:center!important;margin-left:100px!important}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#e5e5e5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d;border-radius:8px;border:none;height:82px;background:#e5e5e5}.style.title[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.logo-autojb[_ngcontent-%COMP%]{width:1150px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0 150px}@media only screen and (max-width: 1125px){.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0!important}}.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:32px}@media only screen and (min-width: 635px) and (max-width: 773px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:26px}}@media only screen and (min-width: 495px) and (max-width: 634px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:13px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px;margin-top:3rem}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px}}@media only screen and (min-width: 320px) and (max-width: 630px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:34px}}@media only screen and (min-width: 320px) and (max-width: 590px){.logo-autojb[_ngcontent-%COMP%]{width:800px;height:283px;background-image:url(autojbR.c30572b7e536d121.png)}}@media only screen and (min-width: 320px) and (max-width: 534px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:28px}}']}),e})()},{path:"localizacao",component:(()=>{class e{constructor(){this.responsive=!1,this.formationSelected=1,this.banners=[{alt:"pessoa capacitadas",url:"/servicos/treinamentos",link:"/normas"},{alt:"alunas em sala de aula",url:"/normas",link:"/normas"},{title:"Confira nosso\nblog com conte\xfados\nexclusivos",alt:"professor em sala de aula",url:"https://www.sesirs.org.br/blog-sesi-saude",link:"https://www.sesirs.org.br/blog-sesi-saude"}],this.bannerSelected=this.banners[0],this.bannerSelectedIndex=0}ngOnInit(){this.innerWidth=window.innerWidth,this.responsive=!1}onResize(){this.innerWidth=window.innerWidth}abrirLink(){window.open("https://www.google.com/maps/place/AUTO+JB/@-29.931451,-51.0880416,17z/data=!4m6!3m5!1s0x951973a7b86023e7:0x24c98ba299e6676b!8m2!3d-29.9299719!4d-51.0865501!16s%2Fg%2F11q1s7pmrz?entry=ttu","_blank")}nextBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+1)%this.banners.length}abrir(){this.responsive=!1===this.responsive,console.log(this.responsive)}selectBanner(t){this.bannerSelected=this.banners[t],this.bannerSelectedIndex=t}previousBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+this.banners.length-1)%this.banners.length}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-localizacao"]],hostBindings:function(t,i){1&t&&Ke("resize",function(u){return i.onResize(u)},0,eh)},decls:55,vars:25,consts:[[2,"overflow-x","hidden"],[1,"tela"],["class","navigation-above",4,"ngIf"],["class","box-black5","style","overflow-x: hidden;",4,"ngIf"],["class","box-black6",4,"ngIf"],[1,"carousel","carousel-below",2,"margin-left","-0.5rem","margin-right","-1vh","z-index","2",3,"ngClass"],[1,"carousel-title",2,"padding","0 !important","margin-top","0.5rem"],["class","carousel-text",4,"ngIf"],[1,"controller-carousel"],[1,"carousel-arrow","arrow-left",3,"click"],["src","../assets/arrow.png",2,"width","60px"],[1,"controller"],[1,"controller-options",3,"ngClass","click"],[1,"carousel-arrow","arrow-right",3,"click"],["src","../assets/arrowRight.png",2,"width","60px"],[2,"text-align","center","padding","0px 150px 0px 150px"],[1,"box-black3"],[1,"contato-localizacao-margin"],[1,"contato-text-localizacao",2,"color","black !important"],[1,"contato-rua-margin"],[1,"contato-text-rua",2,"color","black !important"],["style","margin-top: 2rem;",4,"ngIf"],[2,"text-align","center","padding","40px 150px 0px 150px"],[1,"box-black"],[1,"contato-text"],[1,"box-black2"],[1,"contatos"],[1,"icon-contato","insta"],[1,"icon-contato","face"],[1,"icon-contato","whats"],[1,"logo-autojb"],[1,"contato-slogan-margin",2,"padding-bottom","150px"],[1,"contato-text-slogan"],[1,"box-black4",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive2"],[1,"nav-list","responsive-text"],[1,"navigation-above"],["href","#",2,"z-index","0"],["src","assets/logo.png","alt","",1,"logo-responsive-header"],[1,"mobile-menu",3,"click"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"mobile-menu2","button-2",3,"click"],[1,"nav-list"],["href","estoque"],["href","contato"],["href","localizacao"],["href",""],[1,"box-black5",2,"overflow-x","hidden"],["href","#",2,"z-index","1"],["src","assets/logo.png","alt","",1,"logo-responsive3"],[1,"box-black6"],[1,"carousel-text"],[2,"margin-top","2rem"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","900","height","550","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","700","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","500","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","350","height","270","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","250","height","200","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"body",1),_e(2,qU,25,0,"header",2),J(),_e(3,ZU,7,0,"div",3),_e(4,JU,14,0,"div",4),G(5,"div",5)(6,"div",6),_e(7,XU,1,0,"div",7),_e(8,KU,1,0,"div",7),_e(9,YU,1,0,"div",7),J(),G(10,"div",8)(11,"a",9),Ke("click",function(){return i.previousBanner()}),Ie(12,"img",10),J(),G(13,"div",11)(14,"div",12),Ke("click",function(){return i.selectBanner(0)}),J(),G(15,"div",12),Ke("click",function(){return i.selectBanner(1)}),J(),G(16,"div",12),Ke("click",function(){return i.selectBanner(2)}),J()(),G(17,"a",13),Ke("click",function(){return i.nextBanner()}),Ie(18,"img",14),J()()(),G(19,"div",15)(20,"div",16)(21,"div")(22,"div",17)(23,"a",18),Ve(24,"LOCALIZA\xc7\xc3O"),J()(),G(25,"div",19)(26,"a",20),Ve(27,"AV.Cai, 1712 - Princesa Isabel - Cachoeirinha - RS"),J()(),_e(28,QU,2,0,"div",21),_e(29,ej,2,0,"div",21),_e(30,tj,2,0,"div",21),_e(31,nj,2,0,"div",21),_e(32,ij,2,0,"div",21),J()()(),G(33,"div",22)(34,"div",23)(35,"div")(36,"a",24),Ve(37,"ENTRE EM CONTATO!"),J()()()(),G(38,"div",15)(39,"div",25)(40,"div",26),Ie(41,"div",27)(42,"div",28)(43,"div",29)(44,"div",30),G(45,"div",31)(46,"a",32),Ve(47,"A MELHOR OP\xc7\xc3O PARA VOC\xca!"),J()()()()(),G(48,"div")(49,"div",33),Ie(50,"img",34),G(51,"ul",35)(52,"li")(53,"p"),Ve(54,"\xa9 2023 AUTO JB - desenvolvido por webUp!"),J()()()()()()),2&t&&(re(2),de("ngIf",i.innerWidth>999),re(1),de("ngIf",i.innerWidth<1e3),re(1),de("ngIf",!0===i.responsive),re(1),de("ngClass",ph(15,oj,0===i.bannerSelectedIndex,1===i.bannerSelectedIndex,2===i.bannerSelectedIndex)),re(2),de("ngIf",0===i.bannerSelectedIndex),re(1),de("ngIf",1===i.bannerSelectedIndex),re(1),de("ngIf",2===i.bannerSelectedIndex),re(5),de("ngClass",Gi(19,iM,0===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(21,iM,1===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(23,iM,2===i.bannerSelectedIndex)),re(12),de("ngIf",i.innerWidth>1269),re(1),de("ngIf",i.innerWidth>1064&&i.innerWidth<1270),re(1),de("ngIf",i.innerWidth>849&&i.innerWidth<1065),re(1),de("ngIf",i.innerWidth>699&&i.innerWidth<850),re(1),de("ngIf",i.innerWidth<700))},dependencies:[Ag,Lr],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0}.tela[_ngcontent-%COMP%]{margin:-8px!important}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:.3s}p[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]:hover{opacity:.7}.logo-responsive[_ngcontent-%COMP%], .logo-responsive-header[_ngcontent-%COMP%]{width:340px;margin-left:-3rem}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;height:8vh}.nav-list[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:50vw}.logo-responsive3[_ngcontent-%COMP%]{width:340px;margin-left:-10rem;padding-bottom:2rem}@media only screen and (min-width: 724px) and (max-width: 830px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:43vw}}@media only screen and (min-width: 600px) and (max-width: 724px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:34vw}}@media only screen and (min-width: 560px) and (max-width: 600px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:27vw}}@media only screen and (min-width: 500px) and (max-width: 560px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}}@media only screen and (min-width: 400px) and (max-width: 500px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:12vw}.logo-responsive3[_ngcontent-%COMP%]{width:300px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 360px) and (max-width: 400px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:14vw}.logo-responsive3[_ngcontent-%COMP%]{width:250px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 326px) and (max-width: 360px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 326px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}.mobile-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}.nav-list2[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu2[_ngcontent-%COMP%]{display:none;cursor:pointer}.mobile-menu2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}@media (max-width: 999px){body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important}.mobile-menu[_ngcontent-%COMP%]{display:block}.nav-list[_ngcontent-%COMP%]{position:absolute;top:8vh;right:0;width:40vw;height:92vh;background:#23232e;flex-direction:column;align-items:center;justify-content:space-around;display:none}.logo-responsive[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem;z-index:3}}@media (max-width: 999px){.logo-responsive[_ngcontent-%COMP%], .logo-responsive2[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem}body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important;white-space:nowrap;margin-left:3rem}.mobile-menu2[_ngcontent-%COMP%]{display:block}.nav-list2[_ngcontent-%COMP%]{position:fixed;top:8vh;right:0;width:100vw;height:32vh;background:#23232e;flex-direction:column;align-items:flex-start;justify-content:space-evenly;transform:translate(0);overflow-y:hidden;margin-top:-3rem}.nav-list2.active[_ngcontent-%COMP%]{transform:translate(0)}.tela[_ngcontent-%COMP%]{margin:-8px!important;overflow-y:hidden}}.img-1[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png);zoom:100%}@media only screen and (min-width: 391px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 1900px) and (max-width: 3000px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 950px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (max-width: 390px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:220px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 300px) and (max-width: 480px){.btn-carousel[_ngcontent-%COMP%]{margin-top:-30px}}.img-2[_ngcontent-%COMP%]{background-image:url(audi.295562cd8fa596b7.png)}.img-3[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png)}.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:38px;transform:translateY(-10rem);cursor:pointer}.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:38px;transform:translateY(-10rem);cursor:pointer}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:20px;cursor:pointer;transform:translateY(-2rem)!important}}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:10px;transform:translateY(-2rem)!important;cursor:pointer}}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:10%;padding:0 150px;display:flex;align-items:center;top:0}.success-message[_ngcontent-%COMP%]{color:#fff!important}.button-responsive-home[_ngcontent-%COMP%]{width:260px!important;margin-left:0rem!important;margin-top:-1rem!important;height:60px!important;margin-top:1rem!important}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}}@media only screen and (min-width: 320px) and (max-width: 500px){.button-responsive-home[_ngcontent-%COMP%]{width:90px!important;margin-left:1rem!important;margin-top:-1rem!important;height:25px!important}}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000!important;font-weight:500}.gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center;color:#000}.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 600px){.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:18px}}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#5f0101;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px!important;border-radius:25px;height:10px;width:38px;background-color:#862b2b;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:60px;background-color:#f7f7f7;transition:.5s}.button-2[_ngcontent-%COMP%]{position:relative;z-index:2}.carousel-below[_ngcontent-%COMP%]{position:relative;z-index:0}.navigation-above[_ngcontent-%COMP%]{position:relative;z-index:1}.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:34px}@media only screen and (min-width: 600px) and (max-width: 998px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:24px}}@media only screen and (max-width: 600px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:20px}}.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:24px;margin-top:1rem;padding:10px 110px 0}@media only screen and (min-width: 600px) and (max-width: 998px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:20px;margin-top:1rem;padding:10px 90px 0}}@media only screen and (max-width: 600px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:16px;margin-top:1rem;padding:10px 20px 0}}.box-black[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;border-radius:10px 10px 0 0;padding:40px}.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px;margin-top:3rem}.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:32px}.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-slogan-margin[_ngcontent-%COMP%]{margin-top:1rem}.contato-localizacao-margin[_ngcontent-%COMP%]{margin-top:3rem}.contato-rua-margin[_ngcontent-%COMP%]{margin-top:1rem}.contatos[_ngcontent-%COMP%]{text-align:center}.box-black2[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;text-align:center;padding:40px 150px 0}.box-black3[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#ffffff;text-align:center;padding:40px 150px 0}.box-black4[_ngcontent-%COMP%]{display:flex;align-items:center;background:#23232e;height:5rem;padding:40px 150px 0;overflow-y:hidden}.box-black5[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:6rem;padding:40px 150px 0;overflow-y:hidden}.box-black6[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:10rem;padding:40px 150px 0;overflow-y:hidden;animation-delay:1s}@keyframes _ngcontent-%COMP%_moveToRight{0%{transform:translatey(0)}to{transform:translatey(300px)}}.box-black6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-4rem}.box-black6[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:-8rem;padding-bottom:10px}.margin-contato[_ngcontent-%COMP%]{cursor:pointer}.icon-contato[_ngcontent-%COMP%]{display:inline-block;padding:0 45px 0 30px}.mapa[_ngcontent-%COMP%]{width:1200px;height:780px;background-image:url(mapa.bcd07dfac4f8aa9a.png);transition:.7s}.mapa[_ngcontent-%COMP%]:hover{width:1200px;height:780px;background-image:url(mapa2.c019904f9dccb07c.png);cursor:pointer}.logo-autojb[_ngcontent-%COMP%]{width:1200px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:40vw;white-space:nowrap;padding-right:3rem}.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-3rem;padding-bottom:2rem}@media only screen and (min-width: 1430px) and (max-width: 1600px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:33vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1336px) and (max-width: 1429px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:28vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1216px) and (max-width: 1336px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:23vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1150px) and (max-width: 1216px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:18vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:15vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 999px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}.insta[_ngcontent-%COMP%]{width:82px;height:82px;background-image:url(instagram.cc9d8965fca5b6ef.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s}.insta[_ngcontent-%COMP%]:hover{width:82px;height:82px;background-image:url(insta2.4265cd3a73f3e1da.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.face[_ngcontent-%COMP%]{width:86px;height:86px;background-image:url(facebook.c7c1dc1e44e2efb1.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.face[_ngcontent-%COMP%]:hover{width:86px;height:86px;background-image:url(face2.99ba37f1f09946c8.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.whats[_ngcontent-%COMP%]{width:79px;height:79px;background-image:url(whats.969f9ab178e3e0c2.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.whats[_ngcontent-%COMP%]:hover{width:79px;height:79px;background-image:url(whats2.2faea5cc7d7267f6.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.text-size[_ngcontent-%COMP%]{text-align:left;font-size:18px;color:#000;text-decoration:none}.text-color[_ngcontent-%COMP%]{align-items:left;color:#626262}.btn-enviar[_ngcontent-%COMP%]{border-radius:8px;width:357px;background-color:#0789e5;font-size:32px}.color-novidades[_ngcontent-%COMP%]{color:#022e4d!important}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.unidades-box[_ngcontent-%COMP%]{font-size:18px;color:#fff}.unidades-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#fff;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#e5e5e5;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#747474;color:#fff;border-bottom-left-radius:15px;border-bottom-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}.text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;position:absolute;margin-top:12.5px;margin-left:-350px}.font[_ngcontent-%COMP%], .font2[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 500px){.font[_ngcontent-%COMP%]{font-size:16px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.font2[_ngcontent-%COMP%]{font-size:18px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px;position:absolute;margin-top:8px!important;margin-left:-278px!important}}.font-size-responsive[_ngcontent-%COMP%]{font-size:18px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-size-responsive[_ngcontent-%COMP%]{font-size:14px!important}}.style-checkbox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]{background-color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]:after{display:block}.input-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container-box[_ngcontent-%COMP%]   .input-checkbox[_ngcontent-%COMP%]:after{top:3px;left:6.4px;width:5px;height:10px;border:solid rgb(255,255,255);border-width:0 2px 2px 0;transform:rotate(45deg)}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.container-box[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;color:#022e4d}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.legend-responsive[_ngcontent-%COMP%], .img-responsive[_ngcontent-%COMP%]{margin-left:0}.font-responsive[_ngcontent-%COMP%]{font-size:45px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-responsive[_ngcontent-%COMP%]{font-size:20px!important;margin-left:20px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.font-responsive[_ngcontent-%COMP%]{font-size:28px!important;margin-left:55px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.img-responsive[_ngcontent-%COMP%]{margin-left:-2px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:60px!important}}@media only screen and (min-width: 912px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:130px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}.text-responsive[_ngcontent-%COMP%]{font-size:24px}.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px}@media only screen and (min-width: 320px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:18px!important;color:#022e4d!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px!important;color:#022e4d!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive[_ngcontent-%COMP%]{font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive[_ngcontent-%COMP%]{font-size:24px!important;text-align:center!important;margin-left:100px!important}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#e5e5e5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d;border-radius:8px;border:none;height:82px;background:#e5e5e5}.style.title[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}']}),e})()},{path:"estoque/:link",component:(()=>{class e{constructor(t){this._router=t,this.responsive=!1,this.formationSelected=1,this.banners=[{alt:"pessoa capacitadas",url:"/servicos/treinamentos",link:"/normas"},{alt:"alunas em sala de aula",url:"/normas",link:"/normas"},{title:"Confira nosso\nblog com conte\xfados\nexclusivos",alt:"professor em sala de aula",url:"https://www.sesirs.org.br/blog-sesi-saude",link:"https://www.sesirs.org.br/blog-sesi-saude"}],this.title={TORO:{title:"FIAT TORO RANCH",foto1:"assets/toro1.png",foto2:"assets/toro2.png",foto3:"assets/toro3.png",foto4:"assets/toro4.png",foto5:"assets/toro5.png",foto6:"assets/toro6.png",foto7:"assets/toro7.png",foto8:"assets/toro8.png",marca:"FIAT",modelo:"TORO RANCH",ano:"2020",cor:"PRATA",cambio:"AUTOM\xc1TICO",km:"00.000",combustivel:"DIESEL",valor:"R$160.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},SPACEFOX:{title:"VOLKSWAGEN SPACEFOX",foto1:"assets/space1.svg",foto2:"assets/space2.svg",foto3:"assets/space3.png",foto4:"assets/space4.png",foto5:"assets/space5.png",foto6:"assets/space6.png",foto7:"assets/space7.png",foto8:"assets/space8.png",marca:"VOLKSWAGEN",modelo:"SPACEFOX",ano:"",cor:"PRATA",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 57.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},AMAROK:{title:"VOLKSWAGEN AMAROK SE",foto1:"assets/amarok1.png",foto2:"assets/amarok2.png",foto3:"assets/amarok3.png",foto4:"assets/amarok4.png",foto5:"assets/amarok5.png",foto6:"assets/amarok6.png",foto7:"assets/amarok7.png",foto8:"assets/amarok8.png",marca:"VOLKSWAGEN",modelo:"AMAROK SE",ano:"",cor:"PRATA",cambio:"MANUAL",km:"00.000",combustivel:"DIESEL",valor:"R$ 95.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},JETTA:{title:"VOLKSWAGEN JETTA",foto1:"assets/jetta1.png",foto2:"assets/jetta2.png",foto3:"assets/jetta3.png",foto4:"assets/jetta4.png",foto5:"assets/jetta5.png",foto6:"assets/jetta6.png",foto7:"assets/jetta7.png",foto8:"assets/jetta8.png",marca:"VOLKSWAGEN",modelo:"JETTA",ano:"2008",cor:"PRATA",cambio:"AUTOM\xc1TICO",km:"00.000",combustivel:"GASOLINA",valor:"R$ 45.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},PATHFINDER:{title:"NISSAN PATHFINDER",foto1:"assets/pathfinder1.png",foto2:"assets/pathfinder2.png",foto3:"assets/pathfinder3.png",foto4:"assets/pathfinder4.png",foto5:"assets/pathfinder5.png",foto6:"assets/pathfinder6.png",foto7:"assets/pathfinder7.png",foto8:"assets/pathfinder8.png",marca:"NISSAN",modelo:"PATHFINDER",ano:"2008",cor:"PRATA",cambio:"AUTOM\xc1TICO",km:"00.000",combustivel:"GASOLINA",valor:"R$ 82.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},DUSTER:{title:"RENAULT DUSTER EXPRESS",foto1:"assets/duster1.png",foto2:"assets/duster2.png",foto3:"assets/duster3.png",foto4:"assets/duster4.png",foto5:"assets/duster5.png",foto6:"assets/duster6.png",foto7:"assets/duster7.png",foto8:"assets/duster8.png",marca:"RENAULT",modelo:"DUSTER EXPRESS",ano:"2008",cor:"PRATA",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 69.990,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},ARGO:{title:"FIAT ARGO TREKKING",foto1:"assets/argo1.png",foto2:"assets/argo2.png",foto3:"assets/argo3.png",foto4:"assets/argo4.png",foto5:"assets/argo5.png",foto6:"assets/argo6.png",foto7:"assets/argo7.png",foto8:"assets/argo8.png",marca:"FIAT",modelo:"ARGO TREKKING",ano:"2008",cor:"PRATA",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 72.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},ZAFIRA:{title:"CHEVROLET ZAFIRA ELITE",foto1:"assets/zafira1.png",foto2:"assets/zafira2.png",foto3:"assets/zafira3.png",foto4:"assets/zafira4.png",foto5:"assets/zafira5.png",foto6:"assets/zafira6.png",foto7:"assets/zafira7.png",foto8:"assets/zafira8.png",marca:"CHEVROLET",modelo:"ZAFIRA ELITE",ano:"2008",cor:"PRATA",cambio:"AUTOM\xc1TICO",km:"00.000",combustivel:"GASOLINA",valor:"R$ 36.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},FIESTA:{title:"FORD FIESTA",foto1:"assets/fiesta1.png",foto2:"assets/fiesta2.png",foto3:"assets/fiesta3.png",foto4:"assets/fiesta4.png",foto5:"assets/fiesta5.png",foto6:"assets/fiesta6.png",foto7:"assets/fiesta7.png",foto8:"assets/fiesta8.png",marca:"FORD",modelo:"FIESTA",ano:"2008",cor:"PRATA",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 34.000,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},FUSCA:{title:"VOLKSWAGEN FUSCA 1300L",foto1:"assets/fusca1.png",foto2:"assets/fusca2.png",foto3:"assets/fusca3.png",foto4:"assets/fusca4.png",foto5:"assets/fusca5.png",foto6:"assets/fusca6.png",foto7:"assets/fusca7.png",foto8:"assets/fusca8.png",marca:"VOLKSWAGEN",modelo:"FUSCA 1300L",ano:"2008",cor:"AZUL",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 19.990,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},PAMPA:{title:"FORD PAMPA L",foto1:"assets/pampa1.png",foto2:"assets/pampa2.png",foto3:"assets/pampa3.png",foto4:"assets/pampa4.png",foto5:"assets/pampa5.png",foto6:"assets/pampa6.png",foto7:"assets/pampa7.png",foto8:"assets/pampa8.png",marca:"FORD",modelo:"PAMPA L",ano:"2008",cor:"AZUL",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 29.990,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""},DOBLO:{title:"FIAT DOBLO",foto1:"assets/doblo1.png",foto2:"assets/doblo2.png",foto3:"assets/doblo3.png",foto4:"assets/doblo4.png",foto5:"assets/doblo5.png",foto6:"assets/doblo6.png",foto7:"assets/doblo7.png",foto8:"assets/doblo8.png",marca:"FIAT",modelo:"DOBLO",ano:"2008",cor:"AZUL",cambio:"MANUAL",km:"00.000",combustivel:"GASOLINA",valor:"R$ 48.500,00",info1:"",info2:"",info3:"",info4:"",info5:"",info6:"",info7:"",info8:""}};let i=this._router.url.split("/");this.selectedNR=i[i.length-1].split("-",1).toString(),this.bannerSelected=this.banners[0],this.bannerSelectedIndex=0}selectFormation(t){this.formationSelected=t}ngOnInit(){this.foto=1,this.innerWidth=window.innerWidth}avancar(){this.foto=this.foto<8?this.foto+1:1}voltar(){this.foto=this.foto>1?this.foto-1:8}selectBanner(t){this.bannerSelected=this.banners[t],this.bannerSelectedIndex=t}nextBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+1)%this.banners.length}previousBanner(){this.bannerSelectedIndex=(this.bannerSelectedIndex+this.banners.length-1)%this.banners.length}onResize(){this.innerWidth=window.innerWidth}abrir(){this.responsive=!1===this.responsive,console.log(this.responsive)}}return e.\u0275fac=function(t){return new(t||e)(ye(wa))},e.\u0275cmp=zn({type:e,selectors:[["app-interna-carros"]],hostBindings:function(t,i){1&t&&Ke("resize",function(u){return i.onResize(u)},0,eh)},decls:91,vars:53,consts:[[2,"overflow-x","hidden"],[1,"tela"],["class","navigation-above",4,"ngIf"],["class","box-black5","style","overflow-x: hidden",4,"ngIf"],["class","box-black6",4,"ngIf"],[1,"carousel","carousel-below",2,"margin-left","-0.5rem","margin-right","-1vh","z-index","2",3,"ngClass"],[1,"carousel-title",2,"padding","0 !important","margin-top","0.5rem"],["class","carousel-text",4,"ngIf"],[1,"controller-carousel"],[1,"carousel-arrow","arrow-left",3,"click"],["src","../assets/arrow.png",2,"width","60px"],[1,"controller"],[1,"controller-options",3,"ngClass","click"],[1,"carousel-arrow","arrow-right",3,"click"],["src","../assets/arrowRight.png",2,"width","60px"],[1,"align-text"],[2,"margin-top","3rem"],[1,"d-flex","align-items-center","justify-content-center",2,"margin-top","3rem",3,"ngClass"],[4,"ngIf"],["class","box-car",4,"ngIf"],["class","box-car d-flex flex-column",4,"ngIf"],[1,"box-red","d-flex","flex-column"],[2,"margin-top","1rem"],[1,"text-info-carros"],[1,"items-descricao","col","d-flex","flex-row",2,"margin-top","2.5rem",3,"ngClass"],[1,"font-p","col"],[1,"font-p",2,"padding-bottom","1rem"],[1,"text-margin"],[1,"box-responsive",2,"margin-top","3rem"],[1,"box-black3"],[1,"contato-text"],[1,"contatos",2,"margin-top","1rem"],[1,"icon-contato","insta"],[1,"icon-contato","face"],[1,"icon-contato","whats"],[1,"contato-localizacao-margin",2,"margin-top","4rem"],[1,"contato-text-localizacao"],[1,"contato-rua-margin"],[1,"contato-text-rua"],["style","margin-top: 2rem;",4,"ngIf"],[1,"logo-autojb"],[1,"contato-slogan-margin",2,"padding-bottom","150px"],[1,"contato-text-slogan"],[1,"box-black4",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive2"],[1,"nav-list","responsive-text"],[1,"navigation-above"],["href","#",2,"z-index","0"],["src","assets/logo.png","alt","",1,"logo-responsive-header"],[1,"mobile-menu",3,"click"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"mobile-menu2","button-2",3,"click"],[1,"nav-list"],["href","estoque"],["href","contato"],["href","localizacao"],["href",""],[1,"box-black5",2,"overflow-x","hidden"],["src","assets/logo.png","alt","",1,"logo-responsive3"],[1,"box-black6"],[1,"carousel-text"],[2,"position","absolute","margin-top","18rem","margin-left","1.5rem","cursor","pointer",3,"click"],["class","foto-carro",3,"src",4,"ngIf"],[2,"position","absolute","margin-left","-5rem","margin-top","18rem","cursor","pointer",3,"click"],[1,"foto-carro",3,"src"],[1,"p-3","m-0","border-0","bd-example","m-0","border-0",2,"padding","0 !important","overflow-y","hidden"],["id","carouselExample",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],[1,"foto-carro","bd-placeholder-img","bd-placeholder-img-lg","d-block","w-100",2,"height","100%",3,"src"],[1,"carousel-item",2,"height","auto"],["alt","",1,"foto-carro","bd-placeholder-img","bd-placeholder-img-lg","d-block","w-100",3,"src"],[1,"carousel-item"],["type","button","data-bs-target","#carouselExample","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExample","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"box-car"],[2,"margin-top","15px"],[2,"margin-top","60px"],[2,"margin-top","0.3rem","margin-bottom","1rem"],[1,"btn-vendedor"],[1,"box-car","d-flex","flex-column"],[1,"text-info-carros","col"],[2,"margin-top","0.6rem"],[2,"margin-top","2rem"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","1100","height","550","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","900","height","470","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","750","height","370","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","700","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","500","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3457.7196608269205!2d-51.08873878488762!3d-29.92997188192413!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951973a7b86023e7%3A0x24c98ba299e6676b!2sAUTO%20JB!5e0!3m2!1spt-BR!2sbr!4v1685710398099!5m2!1spt-BR!2sbr","width","380","height","300","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"]],template:function(t,i){1&t&&(G(0,"div",0)(1,"body",1),_e(2,sj,25,0,"header",2),J(),_e(3,aj,6,0,"div",3),_e(4,lj,14,0,"div",4),G(5,"div",5)(6,"div",6),_e(7,cj,1,0,"div",7),_e(8,uj,1,0,"div",7),_e(9,dj,1,0,"div",7),J(),G(10,"div",8)(11,"a",9),Ke("click",function(){return i.previousBanner()}),Ie(12,"img",10),J(),G(13,"div",11)(14,"div",12),Ke("click",function(){return i.selectBanner(0)}),J(),G(15,"div",12),Ke("click",function(){return i.selectBanner(1)}),J(),G(16,"div",12),Ke("click",function(){return i.selectBanner(2)}),J()(),G(17,"a",13),Ke("click",function(){return i.nextBanner()}),Ie(18,"img",14),J()()(),G(19,"div",15)(20,"h1",16),Ve(21),J()(),G(22,"div",17),_e(23,xj,13,8,"div",18),_e(24,bj,28,8,"div",18),_e(25,wj,28,8,"div",19),_e(26,Cj,22,14,"div",20),J(),G(27,"div",15)(28,"div",21)(29,"div",22)(30,"h2",23),Ve(31,"INFORMA\xc7\xd5ES COMPLEMENTARES"),J()(),G(32,"div",24)(33,"p",25),Ve(34),J(),G(35,"p",25),Ve(36),J(),G(37,"p",25),Ve(38),J(),G(39,"p",25),Ve(40),J()(),G(41,"div",24)(42,"p",25),Ve(43),J(),G(44,"p",25),Ve(45),J(),G(46,"p",25),Ve(47),J(),G(48,"p",26),Ve(49),J()()()(),G(50,"div",27)(51,"h2"),Ve(52,"CONFIRA AQUI OUTROS MODELOS!"),J()(),_e(53,Mj,2,0,"div",18),_e(54,Oj,2,0,"div",18),_e(55,Tj,2,0,"div",18),_e(56,Dj,2,0,"div",18),_e(57,Pj,2,0,"div",18),G(58,"div",28)(59,"div",29)(60,"div")(61,"div")(62,"a",30),Ve(63,"ENTRE EM CONTATO!"),J()(),G(64,"div",31),Ie(65,"div",32)(66,"div",33)(67,"div",34),J(),G(68,"div",35)(69,"a",36),Ve(70,"LOCALIZA\xc7\xc3O"),J()(),G(71,"div",37)(72,"a",38),Ve(73,"AV.Cai, 1712 - Princesa Isabel - Cachoeirinha - RS"),J()(),_e(74,Ej,2,0,"div",39),_e(75,Sj,2,0,"div",39),_e(76,Aj,2,0,"div",39),_e(77,Ij,2,0,"div",39),_e(78,kj,2,0,"div",39),_e(79,Rj,2,0,"div",39),Ie(80,"div",40),G(81,"div",41)(82,"a",42),Ve(83,"A MELHOR OP\xc7\xc3O PARA VOC\xca!"),J()()()()(),G(84,"div")(85,"div",43),Ie(86,"img",44),G(87,"ul",45)(88,"li")(89,"p"),Ve(90,"\xa9 2023 AUTO JB - desenvolvido por webUp!"),J()()()()()()),2&t&&(re(2),de("ngIf",i.innerWidth>999),re(1),de("ngIf",i.innerWidth<1e3),re(1),de("ngIf",!0===i.responsive),re(1),de("ngClass",ph(37,Nj,0===i.bannerSelectedIndex,1===i.bannerSelectedIndex,2===i.bannerSelectedIndex)),re(2),de("ngIf",0===i.bannerSelectedIndex),re(1),de("ngIf",1===i.bannerSelectedIndex),re(1),de("ngIf",2===i.bannerSelectedIndex),re(5),de("ngClass",Gi(41,oM,0===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(43,oM,1===i.bannerSelectedIndex)),re(1),de("ngClass",Gi(45,oM,2===i.bannerSelectedIndex)),re(5),fi(i.title[i.selectedNR].title),re(1),de("ngClass",Gi(47,J0,i.innerWidth<=1200)),re(1),de("ngIf",i.innerWidth>1200),re(1),de("ngIf",i.innerWidth<=1200),re(1),de("ngIf",i.innerWidth>1200),re(1),de("ngIf",i.innerWidth<1201),re(6),de("ngClass",Gi(49,J0,i.innerWidth<=530)),re(2),fi(i.title[i.selectedNR].info1),re(2),fi(i.title[i.selectedNR].info2),re(2),fi(i.title[i.selectedNR].info3),re(2),fi(i.title[i.selectedNR].info4),re(1),de("ngClass",Gi(51,J0,i.innerWidth<=530)),re(2),fi(i.title[i.selectedNR].info5),re(2),fi(i.title[i.selectedNR].info6),re(2),fi(i.title[i.selectedNR].info7),re(2),fi(i.title[i.selectedNR].info8),re(4),de("ngIf",i.innerWidth>1430),re(1),de("ngIf",i.innerWidth>999&&i.innerWidth<=1430),re(1),de("ngIf",i.innerWidth>699&&i.innerWidth<=999),re(1),de("ngIf",i.innerWidth>365&&i.innerWidth<700),re(1),de("ngIf",i.innerWidth<366),re(17),de("ngIf",i.innerWidth>1455),re(1),de("ngIf",i.innerWidth>1255&&i.innerWidth<1456),re(1),de("ngIf",i.innerWidth>1100&&i.innerWidth<1256),re(1),de("ngIf",i.innerWidth>772&&i.innerWidth<1101),re(1),de("ngIf",i.innerWidth>535&&i.innerWidth<773),re(1),de("ngIf",i.innerWidth<536))},dependencies:[Ag,Lr,HS,WS,qS,ZS,JS],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0}.tela[_ngcontent-%COMP%]{margin:-8px!important}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:.3s}.card-img-top[_ngcontent-%COMP%]{border-radius:30px 30px 0 0}.style-title-card[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:24px!important;justify-content:center;text-align:center;padding-top:1rem}.style-btn-link[_ngcontent-%COMP%]{margin-top:-3rem;font-size:20px!important;width:70%!important;margin-left:3rem}.style-card[_ngcontent-%COMP%]{background-color:#606060;border-radius:30px!important;width:300px;margin:15px}p[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]:hover{opacity:.7}.logo-responsive[_ngcontent-%COMP%], .logo-responsive-header[_ngcontent-%COMP%]{width:340px;margin-left:-3rem}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;height:8vh}.nav-list[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:50vw}.logo-responsive3[_ngcontent-%COMP%]{width:340px;margin-left:-10rem;padding-bottom:2rem}@media only screen and (min-width: 724px) and (max-width: 830px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:43vw}}@media only screen and (min-width: 600px) and (max-width: 724px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:34vw}}@media only screen and (min-width: 560px) and (max-width: 600px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:27vw}}@media only screen and (min-width: 500px) and (max-width: 560px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}}@media only screen and (min-width: 400px) and (max-width: 500px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:12vw}.logo-responsive3[_ngcontent-%COMP%]{width:300px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 360px) and (max-width: 400px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:14vw}.logo-responsive3[_ngcontent-%COMP%]{width:250px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (min-width: 326px) and (max-width: 360px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 326px){.mobile-menu[_ngcontent-%COMP%]{display:none;cursor:pointer;margin-top:-28px;margin-left:20vw}.logo-responsive3[_ngcontent-%COMP%]{width:200px;margin-left:-10rem;padding-bottom:2rem}}.mobile-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}.nav-list2[_ngcontent-%COMP%]{list-style:none;display:flex}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{letter-spacing:3px;margin-left:32px}.mobile-menu2[_ngcontent-%COMP%]{display:none;cursor:pointer}.mobile-menu2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:32px;height:2px;background:white;margin:8px}@media (max-width: 999px){body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important}.mobile-menu[_ngcontent-%COMP%]{display:block}.nav-list[_ngcontent-%COMP%]{position:absolute;top:8vh;right:0;width:40vw;height:92vh;background:#23232e;flex-direction:column;align-items:center;justify-content:space-around;display:none}.logo-responsive[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem;z-index:3}}@media (max-width: 999px){.logo-responsive[_ngcontent-%COMP%], .logo-responsive2[_ngcontent-%COMP%]{width:240px!important;margin-left:-1.5rem}body[_ngcontent-%COMP%]{overflow-x:hidden!important}.nav-list2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:0;overflow-x:hidden!important;white-space:nowrap;margin-left:3rem}.mobile-menu2[_ngcontent-%COMP%]{display:block}.nav-list2[_ngcontent-%COMP%]{position:fixed;top:8vh;right:0;width:100vw;height:32vh;background:#23232e;flex-direction:column;align-items:flex-start;justify-content:space-evenly;transform:translate(0);overflow-y:hidden;margin-top:-3rem}.nav-list2.active[_ngcontent-%COMP%]{transform:translate(0)}.tela[_ngcontent-%COMP%]{margin:-8px!important;overflow-y:hidden}}.img-1[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png);zoom:100%}@media only screen and (min-width: 391px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 1900px) and (max-width: 3000px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 950px) and (max-width: 720px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:320px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (max-width: 390px){.img-1[_ngcontent-%COMP%]{padding:0 8px;height:220px;background-image:url(banner.e288ac9d259e64a4.png)}}@media only screen and (min-width: 300px) and (max-width: 480px){.btn-carousel[_ngcontent-%COMP%]{margin-top:-30px}}.img-2[_ngcontent-%COMP%]{background-image:url(audi.295562cd8fa596b7.png)}.img-3[_ngcontent-%COMP%]{background-image:url(banner.e288ac9d259e64a4.png)}.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:38px;transform:translateY(-10rem);cursor:pointer}.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:38px;transform:translateY(-10rem);cursor:pointer}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-right[_ngcontent-%COMP%]{position:absolute;bottom:20%;right:20px;cursor:pointer;transform:translateY(-2rem)!important}}@media only screen and (min-width: 300px) and (max-width: 790px){.arrow-left[_ngcontent-%COMP%]{position:absolute;bottom:20%;left:10px;transform:translateY(-2rem)!important;cursor:pointer}}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:10%;padding:0 150px;display:flex;align-items:center;top:0}.success-message[_ngcontent-%COMP%]{color:#fff!important}.button-responsive-home[_ngcontent-%COMP%]{width:260px!important;margin-left:0rem!important;margin-top:-1rem!important;height:60px!important;margin-top:1rem!important}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}}@media only screen and (min-width: 320px) and (max-width: 500px){.button-responsive-home[_ngcontent-%COMP%]{width:90px!important;margin-left:1rem!important;margin-top:-1rem!important;height:25px!important}}.color-button[_ngcontent-%COMP%]{background-color:#fff;color:#000!important;font-weight:500}.gray-box[_ngcontent-%COMP%]{background-color:#fff;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center;color:#000}.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 600px){.gray-box[_ngcontent-%COMP%]   .font-curso-responsive[_ngcontent-%COMP%]{font-size:18px}}.gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#5f0101;border-radius:10px}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#e4e4e4}.container-cards[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:wrap;align-content:center}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#e4e4e4;border-bottom-right-radius:30px;border-bottom-left-radius:30px;display:flex;align-content:center;align-items:center;flex-direction:column;flex-wrap:nowrap;justify-content:center}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 2px 2px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#606060;color:#fff;border-bottom-left-radius:1px;border-bottom-right-radius:1px}.controller[_ngcontent-%COMP%]{display:flex}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]{margin:0 2px!important;border-radius:25px;height:10px;width:38px;background-color:#862b2b;transition:.5s}.controller[_ngcontent-%COMP%]   .controller-options[_ngcontent-%COMP%]:hover{cursor:pointer}.controller[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{width:60px;background-color:#f7f7f7;transition:.5s}.button-2[_ngcontent-%COMP%]{position:relative;z-index:2}.carousel-below[_ngcontent-%COMP%]{position:relative;z-index:0}.navigation-above[_ngcontent-%COMP%]{position:relative;z-index:1}.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:34px}@media only screen and (min-width: 600px) and (max-width: 998px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:24px}}@media only screen and (max-width: 600px){.text-margin[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin-top:40px;font-size:20px}}.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:24px;margin-top:1rem;padding:10px 110px 0}@media only screen and (min-width: 600px) and (max-width: 998px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:20px;margin-top:1rem;padding:10px 90px 0}}@media only screen and (max-width: 600px){.text-loja[_ngcontent-%COMP%]{justify-content:center;text-align:center;align-items:center;font-size:16px;margin-top:1rem;padding:10px 20px 0}}.box-black[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;border-radius:10px 10px 0 0;padding:40px}.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px;margin-top:3rem}.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:40px}.contato-slogan-margin[_ngcontent-%COMP%]{margin-top:1rem}.contato-localizacao-margin[_ngcontent-%COMP%]{margin-top:3rem}.contato-rua-margin[_ngcontent-%COMP%]{margin-top:1rem}.contatos[_ngcontent-%COMP%]{text-align:center}.box-black2[_ngcontent-%COMP%], .box-black3[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;background:#23232e;text-align:center;padding:40px 150px 0}.box-black4[_ngcontent-%COMP%]{display:flex;align-items:center;background:#23232e;height:5rem;padding:40px 150px 0;overflow-y:hidden}.box-black5[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:6rem;padding:40px 150px 0;overflow-y:hidden}.box-black6[_ngcontent-%COMP%]{display:flex;margin-bottom:-1rem;align-items:center;background:#23232e;height:10rem;padding:40px 150px 0;overflow-y:hidden;animation-delay:1s}@keyframes _ngcontent-%COMP%_moveToRight{0%{transform:translatey(0)}to{transform:translatey(300px)}}.box-black6[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-4rem}.box-black6[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:-8rem;padding-bottom:10px}.margin-contato[_ngcontent-%COMP%]{cursor:pointer}.icon-contato[_ngcontent-%COMP%]{display:inline-block;padding:0 45px 0 30px}.mapa[_ngcontent-%COMP%]{width:1200px;height:780px;background-image:url(mapa.bcd07dfac4f8aa9a.png);transition:.7s}.mapa[_ngcontent-%COMP%]:hover{width:1200px;height:780px;background-image:url(mapa2.c019904f9dccb07c.png);cursor:pointer}.logo-autojb[_ngcontent-%COMP%]{width:1200px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:40vw;white-space:nowrap;padding-right:3rem}.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-3rem;padding-bottom:2rem}@media only screen and (min-width: 1430px) and (max-width: 1600px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:33vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1336px) and (max-width: 1429px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:28vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1216px) and (max-width: 1336px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:23vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1150px) and (max-width: 1216px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:18vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.responsive-text[_ngcontent-%COMP%]{padding-bottom:2rem;margin-left:15vw;white-space:nowrap;padding-right:3rem}}@media only screen and (min-width: 1000px) and (max-width: 1150px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}@media only screen and (max-width: 999px){.logo-responsive2[_ngcontent-%COMP%]{width:340px!important;margin-left:-10rem;padding-bottom:2rem}}.insta[_ngcontent-%COMP%]{width:82px;height:82px;background-image:url(instagram.cc9d8965fca5b6ef.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s}.insta[_ngcontent-%COMP%]:hover{width:82px;height:82px;background-image:url(insta2.4265cd3a73f3e1da.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.face[_ngcontent-%COMP%]{width:86px;height:86px;background-image:url(facebook.c7c1dc1e44e2efb1.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.face[_ngcontent-%COMP%]:hover{width:86px;height:86px;background-image:url(face2.99ba37f1f09946c8.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.whats[_ngcontent-%COMP%]{width:79px;height:79px;background-image:url(whats.969f9ab178e3e0c2.png);display:inline-block;margin-bottom:-2.4rem;transition:.3s;margin-left:2rem}.whats[_ngcontent-%COMP%]:hover{width:79px;height:79px;background-image:url(whats2.2faea5cc7d7267f6.png);display:inline-block;margin-bottom:-2.4rem;cursor:pointer}.text-size[_ngcontent-%COMP%]{text-align:left;font-size:18px;color:#000;text-decoration:none}.text-color[_ngcontent-%COMP%]{align-items:left;color:#626262}.btn-enviar[_ngcontent-%COMP%]{border-radius:8px;width:357px;background-color:#0789e5;font-size:32px}.color-novidades[_ngcontent-%COMP%]{color:#022e4d!important}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px}.remove-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.align-center[_ngcontent-%COMP%]{align-items:center;display:flex}.carousel-caption[_ngcontent-%COMP%]{top:40%;left:8%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;text-align:initial}.white-container-h6[_ngcontent-%COMP%]{font-family:roboto;font-weight:400;font-size:24px;color:#0789e5;padding-top:30px}.h6-box[_ngcontent-%COMP%]{font-size:18px;color:#0789e5}.h6-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.unidades-box[_ngcontent-%COMP%]{font-size:18px;color:#fff}.unidades-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1)>div > h6[_ngcontent-%COMP%]{padding-top:10px!important}.carousel[_ngcontent-%COMP%]{height:720px;max-height:736px;min-height:240px;position:relative;background-position:top center;background-size:cover}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{height:100%;padding:0 150px;display:flex;align-items:center;top:0}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{color:#fff;font-size:20px!important;padding:5px 40px}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]{position:absolute;bottom:30px;width:100%}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .titles-white[_ngcontent-%COMP%]{font-size:30px!important}.carousel[_ngcontent-%COMP%]   .controller-carousel[_ngcontent-%COMP%]   .controller[_ngcontent-%COMP%]{justify-content:center}@media only screen and (max-width: 991px){.carousel[_ngcontent-%COMP%]{max-height:536px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{padding:0 8px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .btn-carousel[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 790px){.carousel[_ngcontent-%COMP%]{max-height:336px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}@media only screen and (max-width: 550px){.carousel[_ngcontent-%COMP%]{max-height:240px}.carousel[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{align-items:center}}.white-box[_ngcontent-%COMP%]{width:100%;padding:0 10px;background-color:#e4e4e4;border-bottom-right-radius:30px;border-bottom-left-radius:30px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]{background-color:#fff;padding:7px;display:flex;flex-wrap:wrap;border-radius:10px;margin:43px 50px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{margin:5px;text-align:center}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{flex:1;padding:10px 5px}.white-box[_ngcontent-%COMP%]   .gray-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;background-color:#172959;border-radius:10px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 2px 2px 0;flex:1;width:100%;max-width:350px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{color:#fff;border-bottom-left-radius:1px;border-bottom-right-radius:1px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;margin:0 22px 22px 0;flex:1;width:100%;max-width:415px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-left-radius:15px;border-top-right-radius:15px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#747474;color:#fff;border-bottom-left-radius:1px;border-bottom-right-radius:1px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff!important;white-space:pre}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%], .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-decoration:underline;color:#fff;font-size:18px}.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]:hover, .white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#d3d3d3}@media only screen and (max-width: 500px){.white-box[_ngcontent-%COMP%]   .formation-row-item-color[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:0 0 22px}}.img-box[_ngcontent-%COMP%]{width:100%;max-width:526px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px}.text-align-center[_ngcontent-%COMP%]{text-align:center}.text-align-left[_ngcontent-%COMP%]{text-align:left}.text-align-right[_ngcontent-%COMP%]{text-align:right}.div-fit[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;padding:25px 0}.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;position:absolute;margin-top:12.5px;margin-left:-350px}.font[_ngcontent-%COMP%], .font2[_ngcontent-%COMP%]{font-size:30px}@media only screen and (min-width: 320px) and (max-width: 500px){.font[_ngcontent-%COMP%]{font-size:16px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.font2[_ngcontent-%COMP%]{font-size:18px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.input-checkbox[_ngcontent-%COMP%]{background-color:#cdd1d4;width:18px;height:18px;margin-top:4px;position:absolute;margin-top:8px!important;margin-left:-278px!important}}.font-size-responsive[_ngcontent-%COMP%]{font-size:18px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-size-responsive[_ngcontent-%COMP%]{font-size:14px!important}}.style-checkbox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]{background-color:#022e4d}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .input-checkbox[_ngcontent-%COMP%]:after{display:block}.input-checkbox[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container-box[_ngcontent-%COMP%]   .input-checkbox[_ngcontent-%COMP%]:after{top:3px;left:6.4px;width:5px;height:10px;border:solid rgb(255,255,255);border-width:0 2px 2px 0;transform:rotate(45deg)}.container-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.container-box[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;color:#022e4d}.btn-nrs[_ngcontent-%COMP%]{border-style:solid;border-color:#fff;width:100%;color:#fff}.legend-responsive[_ngcontent-%COMP%], .img-responsive[_ngcontent-%COMP%]{margin-left:0}.font-responsive[_ngcontent-%COMP%]{font-size:45px}@media only screen and (min-width: 320px) and (max-width: 500px){.font-responsive[_ngcontent-%COMP%]{font-size:20px!important;margin-left:20px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.font-responsive[_ngcontent-%COMP%]{font-size:28px!important;margin-left:55px!important}}@media only screen and (min-width: 500px) and (max-width: 620px){.img-responsive[_ngcontent-%COMP%]{margin-left:-2px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:60px!important}}@media only screen and (min-width: 912px) and (max-width: 1020px){.legend-responsive[_ngcontent-%COMP%]{margin-left:130px!important}}@media only screen and (min-width: 768px) and (max-width: 1020px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.img-responsive[_ngcontent-%COMP%]{margin-left:-15px!important}}.text-responsive[_ngcontent-%COMP%]{font-size:24px}.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px}@media only screen and (min-width: 320px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive3[_ngcontent-%COMP%]{margin-bottom:0;color:#626262;font-weight:700;font-size:24px!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:18px!important;color:#022e4d!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive2[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px!important;color:#022e4d!important;text-align:center!important;margin-left:100px!important}}@media only screen and (min-width: 320px) and (max-width: 500px){.text-responsive[_ngcontent-%COMP%]{font-size:12px!important;text-align:center!important;margin-left:50px!important}}@media only screen and (min-width: 768px) and (max-width: 1080px){.text-responsive[_ngcontent-%COMP%]{font-size:24px!important;text-align:center!important;margin-left:100px!important}}.title-banner[_ngcontent-%COMP%]{font-weight:700;font-size:45px;color:#fff}.white-box-inverse[_ngcontent-%COMP%]{border-top-right-radius:30px;border-top-left-radius:30px;width:100%;padding:0 10px;background-color:#fff}@media only screen and (max-width: 700px){.formation-row[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}.row-info[_ngcontent-%COMP%]   .box-text-info[_ngcontent-%COMP%]{max-width:645px;font-size:24px;font-family:roboto;font-weight:400;line-height:32px;color:#626262;text-align:justify;white-space:break-spaces}.box-img[_ngcontent-%COMP%]   .img-services[_ngcontent-%COMP%]{width:100%;max-width:526px}.reverse-line[_ngcontent-%COMP%]{flex-direction:initial}@media only screen and (max-width: 991px){.reverse-line[_ngcontent-%COMP%]{flex-direction:column-reverse}}.formacoes[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:15px}.formacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterTitle[_ngcontent-%COMP%]{font-weight:600;font-size:36px;line-height:60px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterFields[_ngcontent-%COMP%]{font-weight:600;font-size:24px;line-height:28px}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterInputs[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:28px;border-radius:8px;border:none;height:82px;background:#e5e5e5}.Assine[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nossa[_ngcontent-%COMP%]   newsletterCheckBox[_ngcontent-%COMP%]{font-weight:400;font-size:18px;line-height:28px;color:#022e4d;border-radius:8px;border:none;height:82px;background:#e5e5e5}.style.title[_ngcontent-%COMP%]{white-space:break-spaces;font-size:48px;color:#022e4d!important}.logo-autojb[_ngcontent-%COMP%]{width:1150px;height:283px;background-image:url(logo2.8fbd6b859af5cd82.png)}.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0 150px}@media only screen and (max-width: 1125px){.box-responsive[_ngcontent-%COMP%]{text-align:center;padding:0!important}}.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:32px}@media only screen and (min-width: 635px) and (max-width: 773px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:26px}}@media only screen and (min-width: 495px) and (max-width: 634px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-rua[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:13px}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px;margin-top:3rem}}@media only screen and (min-width: 320px) and (max-width: 494px){.contato-text-localizacao[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:30px}}@media only screen and (min-width: 320px) and (max-width: 630px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:34px}}@media only screen and (min-width: 320px) and (max-width: 590px){.logo-autojb[_ngcontent-%COMP%]{width:800px;height:283px;background-image:url(autojbR.c30572b7e536d121.png)}}@media only screen and (min-width: 320px) and (max-width: 534px){.contato-text-slogan[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:28px}}.align-text[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;align-items:center}.box-car[_ngcontent-%COMP%]{width:250px;height:646px;left:1041px;top:798px;background:#606060;display:flex;flex-direction:column;justify-content:space-between;text-align:center}.text-info-carros[_ngcontent-%COMP%]{font-family:League Gothic;font-style:normal;font-weight:400;font-size:30px;line-height:38px;text-decoration:none;color:#fff}.btn-vendedor[_ngcontent-%COMP%]{width:200px;height:49px;color:#000;font-family:League Gothic;font-style:normal;font-weight:400;font-size:28px;line-height:48px;background:#FFFFFF}.box-red[_ngcontent-%COMP%]{width:1220px;height:auto;background-color:#730101}.items-descricao[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.font-p[_ngcontent-%COMP%]{font-family:League Gothic;font-style:normal;font-weight:400;font-size:24px}.foto-carro[_ngcontent-%COMP%]{width:auto}@media (min-width: 420px) and (max-width: 430px){.foto-carro[_ngcontent-%COMP%]{margin-top:-1.3rem}}@media (max-width: 767px){.box-car[_ngcontent-%COMP%]{width:100%;height:auto}}@media (max-width: 991px){.box-car[_ngcontent-%COMP%]{width:100%;height:auto}.btn-vendedor[_ngcontent-%COMP%]{margin-bottom:1rem!important}}@media (min-width: 992px) and (max-width: 1199px){.box-car[_ngcontent-%COMP%]{width:100%;max-width:970px;height:auto}.btn-vendedor[_ngcontent-%COMP%]{margin-bottom:1rem!important}}']}),e})()}];let Lj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Qn({imports:[$S.forRoot(Fj),$S]}),e})(),Bj=(()=>{class e{constructor(){this.title="autojb"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=zn({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&Ie(0,"router-outlet")},dependencies:[jC]}),e})();b8().accessToken="pk.eyJ1IjoiYWxhbWJpcTMyIiwiYSI6ImNsaTVicTNwMjBkdmwzZHBjeXF2cm1zd3cifQ.6luiVXkBcBm4PXWcFC2u1Q";let zj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ei({type:e,bootstrap:[Bj]}),e.\u0275inj=Qn({imports:[UN,Lj,sL,v8]}),e})();VN().bootstrapModule(zj).catch(e=>console.error(e))},898:function(su){su.exports=function(){"use strict";var kl,sl,Ln;function Xs(p,Xe){if(kl)if(sl){var xs="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+kl+")(sharedChunk); ("+sl+")(sharedChunk); self.onerror = null;",Tr={};kl(Tr),Ln=Xe(Tr),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(Ln.workerUrl=window.URL.createObjectURL(new Blob([xs],{type:"text/javascript"})))}else sl=Xe;else kl=Xe}return Xs(0,function(p){var Xe=typeof self<"u"?self:{},xs="2.15.0";let Tr;const ln={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Tr){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Tr=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):r}catch{Tr=r}}return Tr},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ln.API_URL)return null;try{const r=new URL(ln.API_URL);return"api.mapbox.cn"===r.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===r.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},nn={supported:!1,testSupport:function(r){!Go&&Io&&(bs?Rl(r):Ki=r)}};let Ki,Io,Go=!1,bs=!1;function Rl(r){const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Io),r.isContextLost())return;nn.supported=!0}catch{}r.deleteTexture(o),Go=!0}Xe.document&&(Io=Xe.document.createElement("img"),Io.onload=function(){Ki&&Rl(Ki),Ki=null,bs=!0},Io.onerror=function(){Go=!0,Ki=null},Io.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const as="01";function rr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var sr=ko;function ko(r,o,a,c){this.cx=3*r,this.bx=3*(a-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(c-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=o,this.p2x=a,this.p2y=c}ko.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,o){if(void 0===o&&(o=1e-6),r<0)return 0;if(r>1)return 1;for(var a=r,c=0;c<8;c++){var h=this.sampleCurveX(a)-r;if(Math.abs(h)<o)return a;var g=this.sampleCurveDerivativeX(a);if(Math.abs(g)<1e-6)break;a-=h/g}var y=0,x=1;for(a=r,c=0;c<20&&(h=this.sampleCurveX(a),!(Math.abs(h-r)<o));c++)r>h?y=a:x=a,a=.5*(x-y)+y;return a},solve:function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))}};var Ks=rr(sr),ls=Dr;function Dr(r,o){this.x=r,this.y=o}Dr.prototype={clone:function(){return new Dr(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,o){return this.clone()._rotateAround(r,o)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var o=r.x-this.x,a=r.y-this.y;return o*o+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)},_matMult:function(r){var o=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=o,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var o=Math.cos(r),a=Math.sin(r),c=a*this.x+o*this.y;return this.x=o*this.x-a*this.y,this.y=c,this},_rotateAround:function(r,o){var a=Math.cos(r),c=Math.sin(r),h=o.y+c*(this.x-o.x)+a*(this.y-o.y);return this.x=o.x+a*(this.x-o.x)-c*(this.y-o.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Dr.convert=function(r){return r instanceof Dr?r:Array.isArray(r)?new Dr(r[0],r[1]):r};var ft=rr(ls);const yc=Math.PI/180,Ca=180/Math.PI;function cn(r){return r*yc}function ao(r){return r*Ca}const Nl=[[0,0],[1,0],[1,1],[0,1]];function Fl(r){if(r<=0)return 0;if(r>=1)return 1;const o=r*r,a=o*r;return 4*(r<.5?a:3*(r-o)+a-.75)}function Ma(r,o,a,c){const h=new Ks(r,o,a,c);return function(g){return h.solve(g)}}const ar=Ma(.25,.1,.25,1);function _n(r,o,a){return Math.min(a,Math.max(o,r))}function Oa(r,o,a){return(a=_n((a-r)/(o-r),0,1))*a*(3-2*a)}function dn(r,o,a){const c=a-o,h=((r-o)%c+c)%c+o;return h===o?a:h}function Yi(r,o,a){if(!r.length)return a(null,[]);let c=r.length;const h=new Array(r.length);let g=null;r.forEach((y,x)=>{o(y,(C,O)=>{C&&(g=C),h[x]=O,0==--c&&a(g,h)})})}function ws(r){const o=[];for(const a in r)o.push(r[a]);return o}function Bi(r,...o){for(const a of o)for(const c in a)r[c]=a[c];return r}let Cs=1;function Hn(){return Cs++}function Ys(){return function r(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function cs(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function xi(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Wn(r,o){r.forEach(a=>{o[a]&&(o[a]=o[a].bind(o))})}function Ta(r,o){return-1!==r.indexOf(o,r.length-o.length)}function Ct(r,o,a){const c={};for(const h in r)c[h]=o.call(a||this,r[h],h,r);return c}function Da(r,o,a){const c={};for(const h in r)o.call(a||this,r[h],h,r)&&(c[h]=r[h]);return c}function Pr(r){return Array.isArray(r)?r.map(Pr):"object"==typeof r&&r?Ct(r,Pr):r}const Pa={};function bi(r){Pa[r]||(typeof console<"u"&&console.warn(r),Pa[r]=!0)}function Ho(r,o,a){return(a.y-r.y)*(o.x-r.x)>(o.y-r.y)*(a.x-r.x)}function vc(r){let o=0;for(let a,c,h=0,g=r.length,y=g-1;h<g;y=h++)a=r[h],c=r[y],o+=(c.x-a.x)*(a.y+c.y);return o}function Ms(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ne(r){const o={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,c,h,g)=>{const y=h||g;return o[c]=!y||y.toLowerCase(),""}),o["max-age"]){const a=parseInt(o["max-age"],10);isNaN(a)?delete o["max-age"]:o["max-age"]=a}return o}let Ae=null;function Je(r){if(null==Ae){const o=r.navigator?r.navigator.userAgent:null;Ae=!!r.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ae}function lt(r){try{const o=Xe[r];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function Mt(r,o){return[r[4*o],r[4*o+1],r[4*o+2],r[4*o+3]]}const kt="mapbox-tiles";let wn,Oi,Ii=500,Yn=50;function us(){try{return Xe.caches}catch{}}function Ur(){us()&&!wn&&(wn=Xe.caches.open(kt))}function Os(r){const o=r.indexOf("?");if(o<0)return r;const c=function(h){const g=h.indexOf("?");return g>0?h.slice(g+1).split("&"):[]}(r).filter(h=>{const g=h.split("=");return"language"===g[0]||"worldview"===g[0]});return c.length?`${r.slice(0,o)}?${c.join("&")}`:r.slice(0,o)}let Wo=1/0;const lo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lo);class jr extends Error{constructor(o,a,c){401===a&&Ee(c)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=a,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const wi=Ms()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Xe.location.protocol?Xe.parent:Xe).location.href,$r=function(r,o){if(!(/^file:/.test(a=r.url)||/^file:/.test(wi())&&!/^\w+:/.test(a))){if(Xe.fetch&&Xe.Request&&Xe.AbortController&&Xe.Request.prototype.hasOwnProperty("signal"))return function(c,h){const g=new Xe.AbortController,y=new Xe.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:wi(),referrerPolicy:c.referrerPolicy,signal:g.signal});let x=!1,C=!1;const O=(E=y.url).indexOf("sku=")>0&&Ee(E);var E;"json"===c.type&&y.headers.set("Accept","application/json");const A=(F,L,V)=>{if(C)return;if(F&&"SecurityError"!==F.message&&bi(F.toString()),L&&V)return k(L);const q=Date.now();Xe.fetch(y).then(ee=>{if(ee.ok){const le=O?ee.clone():null;return k(ee,le,q)}return h(new jr(ee.statusText,ee.status,c.url))}).catch(ee=>{"AbortError"!==ee.name&&h(new Error(`${ee.message} ${c.url}`))})},k=(F,L,V)=>{("arrayBuffer"===c.type?F.arrayBuffer():"json"===c.type?F.json():F.text()).then(q=>{C||(L&&V&&function(ee,le,Q){if(Ur(),!wn)return;const ae={status:le.status,statusText:le.statusText,headers:new Xe.Headers};le.headers.forEach((we,Pe)=>ae.headers.set(Pe,we));const he=Ne(le.headers.get("Cache-Control")||"");if(he["no-store"])return;he["max-age"]&&ae.headers.set("Expires",new Date(Q+1e3*he["max-age"]).toUTCString());const ue=ae.headers.get("Expires");ue&&(new Date(ue).getTime()-Q<42e4||function(we,Pe){if(void 0===Oi)try{new Response(new ReadableStream),Oi=!0}catch{Oi=!1}Oi?Pe(we.body):we.blob().then(Pe)}(le,we=>{const Pe=new Xe.Response(we,ae);Ur(),wn&&wn.then(je=>je.put(Os(ee.url),Pe)).catch(je=>bi(je.message))}))}(y,L,V),x=!0,h(null,q,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(q=>{C||h(new Error(q.message))})};return O?function(F,L){if(Ur(),!wn)return L(null);const V=Os(F.url);wn.then(q=>{q.match(V).then(ee=>{const le=function(Q){if(!Q)return!1;const ae=new Date(Q.headers.get("Expires")||0),he=Ne(Q.headers.get("Cache-Control")||"");return ae>Date.now()&&!he["no-cache"]}(ee);q.delete(V),le&&q.put(V,ee.clone()),L(null,ee,le)}).catch(L)}).catch(L)}(y,A):A(null,null),{cancel:()=>{C=!0,x||g.abort()}}}(r,o);if(Ms()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,o,void 0,!0)}var a;return function(c,h){const g=new Xe.XMLHttpRequest;g.open(c.method||"GET",c.url,!0),"arrayBuffer"===c.type&&(g.responseType="arraybuffer");for(const y in c.headers)g.setRequestHeader(y,c.headers[y]);return"json"===c.type&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials="include"===c.credentials,g.onerror=()=>{h(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||0===g.status)&&null!==g.response){let y=g.response;if("json"===c.type)try{y=JSON.parse(g.response)}catch(x){return h(x)}h(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else h(new jr(g.statusText,g.status,c.url))},g.send(c.body),{cancel:()=>g.abort()}}(r,o)},al=function(r,o){return $r(Bi(r,{type:"arrayBuffer"}),o)};function xc(r){const o=Xe.document.createElement("a");return o.href=r,o.protocol===Xe.document.location.protocol&&o.host===Xe.document.location.host}const ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let j,$;j=[],$=0;const se=function(r,o){if(nn.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),$>=ln.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:r,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return j.push(g),g}$++;let a=!1;const c=()=>{if(!a)for(a=!0,$--;j.length&&$<ln.MAX_PARALLEL_IMAGE_REQUESTS;){const g=j.shift(),{requestParameters:y,callback:x,cancelled:C}=g;C||(g.cancel=se(y,x).cancel)}},h=al(r,(g,y,x,C)=>{c(),g?o(g):y&&(Xe.createImageBitmap?function(O,E){const A=new Xe.Blob([new Uint8Array(O)],{type:"image/png"});Xe.createImageBitmap(A).then(k=>{E(null,k)}).catch(k=>{E(new Error(`Could not load image because of ${k.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(O,E)=>o(O,E,x,C)):function(O,E){const A=new Xe.Image,k=Xe.URL;A.onload=()=>{E(null,A),k.revokeObjectURL(A.src),A.onload=null,Xe.requestAnimationFrame(()=>{A.src=ce})},A.onerror=()=>E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const F=new Xe.Blob([new Uint8Array(O)],{type:"image/png"});A.src=O.byteLength?k.createObjectURL(F):ce}(y,(O,E)=>o(O,E,x,C)))});return{cancel:()=>{h.cancel(),c()}}},pe="NO_ACCESS_TOKEN";function ve(r){return 0===r.indexOf("mapbox:")}function Ee(r){return ln.API_URL_REGEX.test(r)}function De(r){return ln.API_CDN_URL_REGEX.test(r)}function xe(r){return ln.API_STYLE_REGEX.test(r)&&!Be(r)}function Be(r){return ln.API_SPRITE_REGEX.test(r)}const pt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function gt(r){const o=r.match(pt);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function ct(r){const o=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${o}`}const on="mapbox.eventData";function hn(r){if(!r)return null;const o=r.split(".");if(!o||3!==o.length)return null;try{return JSON.parse(decodeURIComponent(Xe.atob(o[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ft{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const a=hn(ln.ACCESS_TOKEN);let c="";return c=a&&a.u?Xe.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(h,g)=>String.fromCharCode(Number("0x"+g)))):ln.ACCESS_TOKEN||"",o?`${on}.${o}:${c}`:`${on}:${c}`}fetchEventData(){const o=lt("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(o)try{const h=Xe.localStorage.getItem(a);h&&(this.eventData=JSON.parse(h));const g=Xe.localStorage.getItem(c);g&&(this.anonId=g)}catch{bi("Unable to read from LocalStorage")}}saveEventData(){const o=lt("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(o)try{Xe.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&Xe.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{bi("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,a,c,h){if(!ln.EVENTS_URL)return;const g=gt(ln.EVENTS_URL);g.params.push(`access_token=${h||ln.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(o).toISOString()},x=a?Bi(y,a):y,C={url:ct(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};var E;this.pendingRequest=(E=O=>{this.pendingRequest=null,c(O),this.saveEventData(),this.processRequests(h)},$r(Bi(C,{method:"POST"}),E))}queueRequest(o,a){this.queue.push(o),this.processRequests(a)}}const yn=new class extends Ft{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,o){ln.EVENTS_URL&&ln.ACCESS_TOKEN&&Array.isArray(r)&&r.some(a=>ve(a)||Ee(a))&&this.queueRequest(Date.now(),o)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=hn(ln.ACCESS_TOKEN),a=o?o.u:ln.ACCESS_TOKEN;let c=a!==this.eventData.tokenU;xi(this.anonId)||(this.anonId=Ys(),c=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),y=new Date(h),x=(h-this.eventData.lastSuccess)/864e5;c=c||x>=1||x<-1||g.getDate()!==y.getDate()}else c=!0;c?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:xs,skuId:as,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=h,this.eventData.tokenU=a)},r):this.processRequests()}},Tn=yn.postTurnstileEvent.bind(yn),Ei=new class extends Ft{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,o,a,c){this.skuToken=o,this.errorCb=c,ln.EVENTS_URL&&(a||ln.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},a):this.errorCb(new Error(pe)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:a}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),xi(this.anonId)||(this.anonId=Ys()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:xs,skuId:as,skuToken:this.skuToken,userId:this.anonId},c=>{c?this.errorCb(c):o&&(this.success[o]=!0)},r))}},Qi=Ei.postMapLoadEvent.bind(Ei),Ro=new class extends Ft{constructor(){super("gljs.performance")}postPerformanceEvent(r,o){ln.EVENTS_URL&&(r||ln.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},r)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:o,performanceData:a}=this.queue.shift(),c=function(h){const g=Xe.performance.getEntriesByType("resource"),y=Xe.performance.getEntriesByType("mark"),x=function(k){const F={};if(k)for(const L in k)if("other"!==L)for(const V of k[L]){const q=`${L}ResolveRangeMin`,ee=`${L}ResolveRangeMax`,le=`${L}RequestCount`,Q=`${L}RequestCachedCount`;F[q]=Math.min(F[q]||1/0,V.startTime),F[ee]=Math.max(F[ee]||-1/0,V.responseEnd);const ae=he=>{void 0===F[he]&&(F[he]=0),++F[he]};void 0!==V.transferSize&&0===V.transferSize&&ae(Q),ae(le)}return F}(function(k,F){const L={};if(k)for(const V of k){const q=F(V);void 0===L[q]&&(L[q]=[]),L[q].push(V)}return L}(g,Gr)),C=Xe.devicePixelRatio,O=Xe.navigator.connection||Xe.navigator.mozConnection||Xe.navigator.webkitConnection,E={counters:[],metadata:[],attributes:[]},A=(k,F,L)=>{null!=L&&k.push({name:F,value:L.toString()})};for(const k in x)A(E.counters,k,x[k]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(A(E.counters,"interactionRangeMin",h.interactionRange[0]),A(E.counters,"interactionRangeMax",h.interactionRange[1])),y)for(const k of Object.keys(ki)){const F=ki[k],L=y.find(V=>V.name===F);L&&A(E.counters,F,L.startTime)}return A(E.counters,"visibilityHidden",h.visibilityHidden),A(E.attributes,"style",function(k){if(k)for(const F of k){const L=F.name.split("?")[0];if(xe(L)){const V=L.split("/").slice(-2);if(2===V.length)return`mapbox://styles/${V[0]}/${V[1]}`}}}(g)),A(E.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),A(E.attributes,"fogEnabled",h.fogEnabled?"true":"false"),A(E.attributes,"projection",h.projection),A(E.attributes,"zoom",h.zoom),A(E.metadata,"devicePixelRatio",C),A(E.metadata,"connectionEffectiveType",O?O.effectiveType:void 0),A(E.metadata,"navigatorUserAgent",Xe.navigator.userAgent),A(E.metadata,"screenWidth",Xe.screen.width),A(E.metadata,"screenHeight",Xe.screen.height),A(E.metadata,"windowWidth",Xe.innerWidth),A(E.metadata,"windowHeight",Xe.innerHeight),A(E.metadata,"mapWidth",h.width/C),A(E.metadata,"mapHeight",h.height/C),A(E.metadata,"webglRenderer",h.renderer),A(E.metadata,"webglVendor",h.vendor),A(E.metadata,"sdkVersion",xs),A(E.metadata,"sdkIdentifier","mapbox-gl-js"),E}(a);for(const h of c.metadata);for(const h of c.counters);for(const h of c.attributes);this.postEvent(o,c,()=>{},r)}},co=Ro.postPerformanceEvent.bind(Ro),Qs=new class extends Ft{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,o,a,c){if(!ln.API_URL||!ln.SESSION_PATH)return;const h=gt(ln.API_URL+ln.SESSION_PATH);h.params.push(`sku=${o||""}`),h.params.push(`access_token=${c||ln.ACCESS_TOKEN||""}`);const g={url:ct(h),headers:{"Content-Type":"text/plain"}};var x;this.pendingRequest=(x=y=>{this.pendingRequest=null,a(y),this.saveEventData(),this.processRequests(c)},$r(Bi(g,{method:"GET"}),x))}getSessionAPI(r,o,a,c){this.skuToken=o,this.errorCb=c,ln.SESSION_PATH&&ln.API_URL&&(a||ln.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},a):this.errorCb(new Error(pe)))}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:a}=this.queue.shift();o&&this.success[o]||this.getSession(a,this.skuToken,c=>{c?this.errorCb(c):o&&(this.success[o]=!0)},r)}},Ti=Qs.getSessionAPI.bind(Qs),lr=new Set,ki={create:"create",load:"load",fullLoad:"fullLoad"},bc={mark(r){Xe.performance.mark(r)},measure(r,o,a){Xe.performance.measure(r,o,a)}};function Gr(r){const o=r.name.split("?")[0];return De(o)&&o.includes("mapbox-gl.js")?"javascript":De(o)&&o.includes("mapbox-gl.css")?"css":ln.API_FONTS_REGEX.test(o)?"fontRange":Be(o)?"sprite":xe(o)?"style":ln.API_TILEJSON_REGEX.test(o)?"tilejson":"other"}const qn=Xe.performance;function Dh(r){const o=r?r.url.toString():void 0;return qn.getEntriesByName(o)}let wc,au,Ll,Er;const Ea={now:()=>void 0!==Ll?Ll:Xe.performance.now(),setNow(r){Ll=r},restoreNow(){Ll=void 0},frame(r){const o=Xe.requestAnimationFrame(r);return{cancel:()=>Xe.cancelAnimationFrame(o)}},getImageData(r,o=0){const{width:a,height:c}=r;Er||(Er=Xe.document.createElement("canvas"));const h=Er.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(a>Er.width||c>Er.height)&&(Er.width=a,Er.height=c),h.clearRect(-o,-o,a+2*o,c+2*o),h.drawImage(r,0,0,a,c),h.getImageData(-o,-o,a+2*o,c+2*o)},resolveURL:r=>(wc||(wc=Xe.document.createElement("a")),wc.href=r,wc.href),get devicePixelRatio(){return Xe.devicePixelRatio},get prefersReducedMotion(){return!!Xe.matchMedia&&(null==au&&(au=Xe.matchMedia("(prefers-reduced-motion: reduce)")),au.matches)}};function id(r,o,a){a[r]&&-1!==a[r].indexOf(o)||(a[r]=a[r]||[],a[r].push(o))}function od(r,o,a){if(a&&a[r]){const c=a[r].indexOf(o);-1!==c&&a[r].splice(c,1)}}class Bl{constructor(o,a={}){Bi(this,a),this.type=o}}class Sa extends Bl{constructor(o,a={}){super("error",Bi({error:o},a))}}class lu{on(o,a){return this._listeners=this._listeners||{},id(o,a,this._listeners),this}off(o,a){return od(o,a,this._listeners),od(o,a,this._oneTimeListeners),this}once(o,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},id(o,a,this._oneTimeListeners),this):new Promise(c=>this.once(o,c))}fire(o,a){"string"==typeof o&&(o=new Bl(o,a||{}));const c=o.type;if(this.listens(c)){o.target=this;const h=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const x of h)x.call(this,o);const g=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const x of g)od(c,x,this._oneTimeListeners),x.call(this,o);const y=this._eventedParent;y&&(Bi(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),y.fire(o))}else o instanceof Sa&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,a){return this._eventedParent=o,this._eventedParentData=a,this}}var $e=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ea(r,...o){for(const a of o)for(const c in a)r[c]=a[c];return r}function eo(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function xo(r){if(Array.isArray(r))return r.map(xo);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const o={};for(const a in r)o[a]=xo(r[a]);return o}return eo(r)}class to extends Error{constructor(o,a){super(a),this.message=a,this.key=o}}var Ts=to;class Ph{constructor(o,a=[]){this.parent=o,this.bindings={};for(const[c,h]of a)this.bindings[c]=h}concat(o){return new Ph(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var rd=Ph;const Kn={kind:"null"},bt={kind:"number"},Lt={kind:"string"},pn={kind:"boolean"},Hr={kind:"color"},Ht={kind:"object"},mt={kind:"value"},cr={kind:"collator"},zl={kind:"formatted"},Cc={kind:"resolvedImage"};function Wr(r,o){return{kind:"array",itemType:r,N:o}}function tt(r){if("array"===r.kind){const o=tt(r.itemType);return"number"==typeof r.N?`array<${o}, ${r.N}>`:"value"===r.itemType.kind?"array":`array<${o}>`}return r.kind}const cu=[Kn,bt,Lt,pn,Hr,zl,Ht,Wr(mt),Cc];function Jt(r,o){if("error"===o.kind)return null;if("array"===r.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!Jt(r.itemType,o.itemType))&&("number"!=typeof r.N||r.N===o.N))return null}else{if(r.kind===o.kind)return null;if("value"===r.kind)for(const a of cu)if(!Jt(a,o))return null}return`Expected ${tt(r)} but found ${tt(o)} instead.`}function Bn(r,o){return o.some(a=>a.kind===r.kind)}function uu(r,o){return o.some(a=>"null"===a?null===r:"array"===a?Array.isArray(r):"object"===a?r&&!Array.isArray(r)&&"object"==typeof r:a===typeof r)}var Qp,ef={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ll(r){return(r=Math.round(r))<0?0:r>255?255:r}function No(r){return ll("%"===r[r.length-1]?parseFloat(r)/100*255:parseInt(r))}function Eh(r){return(o="%"===r[r.length-1]?parseFloat(r)/100:parseFloat(r))<0?0:o>1?1:o;var o}function Mc(r,o,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?r+(o-r)*a*6:2*a<1?o:3*a<2?r+(o-r)*(2/3-a)*6:r}try{Qp={}.parseCSSColor=function(r){var o,a=r.replace(/ /g,"").toLowerCase();if(a in ef)return ef[a].slice();if("#"===a[0])return 4===a.length?(o=parseInt(a.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:7===a.length&&(o=parseInt(a.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var c=a.indexOf("("),h=a.indexOf(")");if(-1!==c&&h+1===a.length){var g=a.substr(0,c),y=a.substr(c+1,h-(c+1)).split(","),x=1;switch(g){case"rgba":if(4!==y.length)return null;x=Eh(y.pop());case"rgb":return 3!==y.length?null:[No(y[0]),No(y[1]),No(y[2]),x];case"hsla":if(4!==y.length)return null;x=Eh(y.pop());case"hsl":if(3!==y.length)return null;var C=(parseFloat(y[0])%360+360)%360/360,O=Eh(y[1]),E=Eh(y[2]),A=E<=.5?E*(O+1):E+O-E*O,k=2*E-A;return[ll(255*Mc(k,A,C+1/3)),ll(255*Mc(k,A,C)),ll(255*Mc(k,A,C-1/3)),x];default:return null}}return null}}catch{}class qr{constructor(o,a,c,h=1){this.r=o,this.g=a,this.b=c,this.a=h}static parse(o){if(!o)return;if(o instanceof qr)return o;if("string"!=typeof o)return;const a=Qp(o);return a?new qr(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[o,a,c,h]=this.toArray();return`rgba(${Math.round(o)},${Math.round(a)},${Math.round(c)},${h})`}toArray(){const{r:o,g:a,b:c,a:h}=this;return 0===h?[0,0,0,0]:[255*o/h,255*a/h,255*c/h,h]}toArray01(){const{r:o,g:a,b:c,a:h}=this;return 0===h?[0,0,0,0]:[o/h,a/h,c/h,h]}toArray01PremultipliedAlpha(){const{r:o,g:a,b:c,a:h}=this;return[o,a,c,h]}}qr.black=new qr(0,0,0,1),qr.white=new qr(1,1,1,1),qr.transparent=new qr(0,0,0,0),qr.red=new qr(1,0,0,1),qr.blue=new qr(0,0,1,1);var di=qr;class tf{constructor(o,a,c){this.sensitivity=o?a?"variant":"case":a?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,a){return this.collator.compare(o,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class nf{constructor(o,a,c,h,g){this.text=o.normalize?o.normalize():o,this.image=a,this.scale=c,this.fontStack=h,this.textColor=g}}class Zr{constructor(o){this.sections=o}static fromString(o){return new Zr([new nf(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof Zr?o:Zr.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const a of this.sections){if(a.image){o.push(["image",a.image.name]);continue}o.push(a.text);const c={};a.fontStack&&(c["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(c["font-scale"]=a.scale),a.textColor&&(c["text-color"]=["rgba"].concat(a.textColor.toArray())),o.push(c)}return o}}class Ds{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Ds({name:o,available:!1}):null}serialize(){return["image",this.name]}}function rf(r,o,a,c){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===c||"number"==typeof c&&c>=0&&c<=1?null:`Invalid rgba value [${[r,o,a,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof c?[r,o,a,c]:[r,o,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sd(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof di||r instanceof tf||r instanceof Zr||r instanceof Ds)return!0;if(Array.isArray(r)){for(const o of r)if(!sd(o))return!1;return!0}if("object"==typeof r){for(const o in r)if(!sd(r[o]))return!1;return!0}return!1}function zi(r){if(null===r)return Kn;if("string"==typeof r)return Lt;if("boolean"==typeof r)return pn;if("number"==typeof r)return bt;if(r instanceof di)return Hr;if(r instanceof tf)return cr;if(r instanceof Zr)return zl;if(r instanceof Ds)return Cc;if(Array.isArray(r)){const o=r.length;let a;for(const c of r){const h=zi(c);if(a){if(a===h)continue;a=mt;break}a=h}return Wr(a||mt,o)}return Ht}function ad(r){const o=typeof r;return null===r?"":"string"===o||"number"===o||"boolean"===o?String(r):r instanceof di||r instanceof Zr||r instanceof Ds?r.toString():JSON.stringify(r)}class Sr{constructor(o,a){this.type=o,this.value=a}static parse(o,a){if(2!==o.length)return a.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!sd(o[1]))return a.error("invalid value");const c=o[1];let h=zi(c);const g=a.expectedType;return"array"!==h.kind||0!==h.N||!g||"array"!==g.kind||"number"==typeof g.N&&0!==g.N||(h=g),new Sr(h,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof di?["rgba"].concat(this.value.toArray()):this.value instanceof Zr?this.value.serialize():this.value}}var Rn=Sr,qo=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};const sf={string:Lt,number:bt,boolean:pn,object:Ht};class af{constructor(o,a){this.type=o,this.args=a}static parse(o,a){if(o.length<2)return a.error("Expected at least one argument.");let c,h=1;const g=o[0];if("array"===g){let x,C;if(o.length>2){const O=o[1];if("string"!=typeof O||!(O in sf)||"object"===O)return a.error('The item type argument of "array" must be one of string, number, boolean',1);x=sf[O],h++}else x=mt;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return a.error('The length argument to "array" must be a positive integer literal',2);C=o[2],h++}c=Wr(x,C)}else c=sf[g];const y=[];for(;h<o.length;h++){const x=a.parse(o[h],h,mt);if(!x)return null;y.push(x)}return new af(c,y)}evaluate(o){for(let a=0;a<this.args.length;a++){const c=this.args[a].evaluate(o);if(!Jt(this.type,zi(c)))return c;if(a===this.args.length-1)throw new qo(`Expected value to be of type ${tt(this.type)}, but found ${tt(zi(c))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,a=[o.kind];if("array"===o.kind){const c=o.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind){a.push(c.kind);const h=o.N;("number"==typeof h||this.args.length>1)&&a.push(h)}}return a.concat(this.args.map(c=>c.serialize()))}}var yt=af;class Vl{constructor(o){this.type=zl,this.sections=o}static parse(o,a){if(o.length<2)return a.error("Expected at least one argument.");const c=o[1];if(!Array.isArray(c)&&"object"==typeof c)return a.error("First argument must be an image or text section.");const h=[];let g=!1;for(let y=1;y<=o.length-1;++y){const x=o[y];if(g&&"object"==typeof x&&!Array.isArray(x)){g=!1;let C=null;if(x["font-scale"]&&(C=a.parse(x["font-scale"],1,bt),!C))return null;let O=null;if(x["text-font"]&&(O=a.parse(x["text-font"],1,Wr(Lt)),!O))return null;let E=null;if(x["text-color"]&&(E=a.parse(x["text-color"],1,Hr),!E))return null;const A=h[h.length-1];A.scale=C,A.font=O,A.textColor=E}else{const C=a.parse(o[y],1,mt);if(!C)return null;const O=C.type.kind;if("string"!==O&&"value"!==O&&"null"!==O&&"resolvedImage"!==O)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:C,scale:null,font:null,textColor:null})}}return new Vl(h)}evaluate(o){return new Zr(this.sections.map(a=>{const c=a.content.evaluate(o);return zi(c)===Cc?new nf("",c,null,null,null):new nf(ad(c),null,a.scale?a.scale.evaluate(o):null,a.font?a.font.evaluate(o).join(","):null,a.textColor?a.textColor.evaluate(o):null)}))}eachChild(o){for(const a of this.sections)o(a.content),a.scale&&o(a.scale),a.font&&o(a.font),a.textColor&&o(a.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const a of this.sections){o.push(a.content.serialize());const c={};a.scale&&(c["font-scale"]=a.scale.serialize()),a.font&&(c["text-font"]=a.font.serialize()),a.textColor&&(c["text-color"]=a.textColor.serialize()),o.push(c)}return o}}class Qn{constructor(o){this.type=Cc,this.input=o}static parse(o,a){if(2!==o.length)return a.error("Expected two arguments.");const c=a.parse(o[1],1,Lt);return c?new Qn(c):a.error("No image name provided.")}evaluate(o){const a=this.input.evaluate(o),c=Ds.fromString(a);return c&&o.availableImages&&(c.available=o.availableImages.indexOf(a)>-1),c}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ld={"to-boolean":pn,"to-color":Hr,"to-number":bt,"to-string":Lt};class Sh{constructor(o,a){this.type=o,this.args=a}static parse(o,a){if(o.length<2)return a.error("Expected at least one argument.");const c=o[0];if(("to-boolean"===c||"to-string"===c)&&2!==o.length)return a.error("Expected one argument.");const h=ld[c],g=[];for(let y=1;y<o.length;y++){const x=a.parse(o[y],y,mt);if(!x)return null;g.push(x)}return new Sh(h,g)}evaluate(o){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(o));if("color"===this.type.kind){let a,c;for(const h of this.args){if(a=h.evaluate(o),c=null,a instanceof di)return a;if("string"==typeof a){const g=o.parseColor(a);if(g)return g}else if(Array.isArray(a)&&(c=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:rf(a[0],a[1],a[2],a[3]),!c))return new di(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new qo(c||`Could not parse color from value '${"string"==typeof a?a:String(JSON.stringify(a))}'`)}if("number"===this.type.kind){let a=null;for(const c of this.args){if(a=c.evaluate(o),null===a)return 0;const h=Number(a);if(!isNaN(h))return h}throw new qo(`Could not convert ${JSON.stringify(a)} to number.`)}return"formatted"===this.type.kind?Zr.fromString(ad(this.args[0].evaluate(o))):"resolvedImage"===this.type.kind?Ds.fromString(ad(this.args[0].evaluate(o))):ad(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Vl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Qn(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild(a=>{o.push(a.serialize())}),o}}var Ul=Sh;const ta=["Unknown","Point","LineString","Polygon"];var cd=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ta[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:a,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*o-r[0])+this.featureDistanceData.bearing[1]*(c*o-r[1])}return 0}parseColor(r){let o=this._parseColorCache[r];return o||(o=this._parseColorCache[r]=di.parse(r)),o}};class na{constructor(o,a,c,h){this.name=o,this.type=a,this._evaluate=c,this.args=h}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,a){const c=o[0],h=na.definitions[c];if(!h)return a.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter(([O])=>!Array.isArray(O)||O.length===o.length-1);let C=null;for(const[O,E]of x){C=new Pc(a.registry,a.path,null,a.scope);const A=[];let k=!1;for(let F=1;F<o.length;F++){const L=o[F],V=Array.isArray(O)?O[F-1]:O.type,q=C.parse(L,1+A.length,V);if(!q){k=!0;break}A.push(q)}if(!k)if(Array.isArray(O)&&O.length!==A.length)C.error(`Expected ${O.length} arguments, but found ${A.length} instead.`);else{for(let F=0;F<A.length;F++){const L=Array.isArray(O)?O[F]:O.type,V=A[F];C.concat(F+1).checkSubtype(L,V.type)}if(0===C.errors.length)return new na(c,g,E,A)}}if(1===x.length)a.errors.push(...C.errors);else{const O=(x.length?x:y).map(([A])=>{return k=A,Array.isArray(k)?`(${k.map(tt).join(", ")})`:`(${tt(k.type)}...)`;var k}).join(" | "),E=[];for(let A=1;A<o.length;A++){const k=a.parse(o[A],1+E.length);if(!k)return null;E.push(tt(k.type))}a.error(`Expected arguments of type ${O}, but found (${E.join(", ")}) instead.`)}return null}static register(o,a){na.definitions=a;for(const c in a)o[c]=na}}var Ps=na;class Oc{constructor(o,a,c){this.type=cr,this.locale=c,this.caseSensitive=o,this.diacriticSensitive=a}static parse(o,a){if(2!==o.length)return a.error("Expected one argument.");const c=o[1];if("object"!=typeof c||Array.isArray(c))return a.error("Collator options argument must be an object.");const h=a.parse(void 0!==c["case-sensitive"]&&c["case-sensitive"],1,pn);if(!h)return null;const g=a.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,pn);if(!g)return null;let y=null;return c.locale&&(y=a.parse(c.locale,1,Lt),!y)?null:new Oc(h,g,y)}evaluate(o){return new tf(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Aa=8192;function Zt(r,o){r[0]=Math.min(r[0],o[0]),r[1]=Math.min(r[1],o[1]),r[2]=Math.max(r[2],o[0]),r[3]=Math.max(r[3],o[1])}function cl(r,o){return!(r[0]<=o[0]||r[2]>=o[2]||r[1]<=o[1]||r[3]>=o[3])}function du(r,o){const a=(180+r[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,o.z);return[Math.round(a*h*Aa),Math.round(c*h*Aa)]}function Jr(r,o,a){const c=r[0]-o[0],h=r[1]-o[1],g=r[0]-a[0],y=r[1]-a[1];return c*y-g*h==0&&c*g<=0&&h*y<=0}function hu(r,o){let a=!1;for(let y=0,x=o.length;y<x;y++){const C=o[y];for(let O=0,E=C.length;O<E-1;O++){if(Jr(r,C[O],C[O+1]))return!1;(h=C[O])[1]>(c=r)[1]!=(g=C[O+1])[1]>c[1]&&c[0]<(g[0]-h[0])*(c[1]-h[1])/(g[1]-h[1])+h[0]&&(a=!a)}}var c,h,g;return a}function lf(r,o){for(let a=0;a<o.length;a++)if(hu(r,o[a]))return!0;return!1}function Ci(r,o,a,c){const h=c[0]-a[0],g=c[1]-a[1],y=(r[0]-a[0])*g-h*(r[1]-a[1]),x=(o[0]-a[0])*g-h*(o[1]-a[1]);return y>0&&x<0||y<0&&x>0}function pu(r,o,a){for(const O of a)for(let E=0;E<O.length-1;++E)if((x=[(y=O[E+1])[0]-(g=O[E])[0],y[1]-g[1]])[0]*(C=[(h=o)[0]-(c=r)[0],h[1]-c[1]])[1]-x[1]*C[0]!=0&&Ci(c,h,g,y)&&Ci(g,y,c,h))return!0;var c,h,g,y,x,C;return!1}function Zn(r,o){for(let a=0;a<r.length;++a)if(!hu(r[a],o))return!1;for(let a=0;a<r.length-1;++a)if(pu(r[a],r[a+1],o))return!1;return!0}function Y0(r,o){for(let a=0;a<o.length;a++)if(Zn(r,o[a]))return!0;return!1}function jl(r,o,a){const c=[];for(let h=0;h<r.length;h++){const g=[];for(let y=0;y<r[h].length;y++){const x=du(r[h][y],a);Zt(o,x),g.push(x)}c.push(g)}return c}function ud(r,o,a){const c=[];for(let h=0;h<r.length;h++){const g=jl(r[h],o,a);c.push(g)}return c}function Tc(r,o,a,c){if(r[0]<a[0]||r[0]>a[2]){const h=.5*c;let g=r[0]-a[0]>h?-c:a[0]-r[0]>h?c:0;0===g&&(g=r[0]-a[2]>h?-c:a[2]-r[0]>h?c:0),r[0]+=g}Zt(o,r)}function cf(r,o,a,c){const h=Math.pow(2,c.z)*Aa,g=[c.x*Aa,c.y*Aa],y=[];if(!r)return y;for(const x of r)for(const C of x){const O=[C.x+g[0],C.y+g[1]];Tc(O,o,a,h),y.push(O)}return y}function Ah(r,o,a,c){const h=Math.pow(2,c.z)*Aa,g=[c.x*Aa,c.y*Aa],y=[];if(!r)return y;for(const C of r){const O=[];for(const E of C){const A=[E.x+g[0],E.y+g[1]];Zt(o,A),O.push(A)}y.push(O)}if(o[2]-o[0]<=h/2){(x=o)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const C of y)for(const O of C)Tc(O,o,a,h)}var x;return y}class Dc{constructor(o,a){this.type=pn,this.geojson=o,this.geometries=a}static parse(o,a){if(2!==o.length)return a.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(sd(o[1])){const c=o[1];if("FeatureCollection"===c.type)for(let h=0;h<c.features.length;++h){const g=c.features[h].geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new Dc(c,c.features[h].geometry)}else if("Feature"===c.type){const h=c.geometry.type;if("Polygon"===h||"MultiPolygon"===h)return new Dc(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new Dc(c,c)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(a,c){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(!y)return!1;if("Polygon"===c.type){const x=jl(c.coordinates,g,y),C=cf(a.geometry(),h,g,y);if(!cl(h,g))return!1;for(const O of C)if(!hu(O,x))return!1}if("MultiPolygon"===c.type){const x=ud(c.coordinates,g,y),C=cf(a.geometry(),h,g,y);if(!cl(h,g))return!1;for(const O of C)if(!lf(O,x))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(a,c){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(!y)return!1;if("Polygon"===c.type){const x=jl(c.coordinates,g,y),C=Ah(a.geometry(),h,g,y);if(!cl(h,g))return!1;for(const O of C)if(!Zn(O,x))return!1}if("MultiPolygon"===c.type){const x=ud(c.coordinates,g,y),C=Ah(a.geometry(),h,g,y);if(!cl(h,g))return!1;for(const O of C)if(!Y0(O,x))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var fu=Dc;function ia(r){if(r instanceof Ps&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof fu)return!1;let o=!0;return r.eachChild(a=>{o&&!ia(a)&&(o=!1)}),o}function Ar(r){if(r instanceof Ps&&"feature-state"===r.name)return!1;let o=!0;return r.eachChild(a=>{o&&!Ar(a)&&(o=!1)}),o}function $l(r,o){if(r instanceof Ps&&o.indexOf(r.name)>=0)return!1;let a=!0;return r.eachChild(c=>{a&&!$l(c,o)&&(a=!1)}),a}class Dt{constructor(o,a){this.type=a.type,this.name=o,this.boundExpression=a}static parse(o,a){if(2!==o.length||"string"!=typeof o[1])return a.error("'var' expression requires exactly one string literal argument.");const c=o[1];return a.scope.has(c)?new Dt(c,a.scope.get(c)):a.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ih=Dt;class fn{constructor(o,a=[],c,h=new rd,g=[]){this.registry=o,this.path=a,this.key=a.map(y=>`[${y}]`).join(""),this.scope=h,this.errors=g,this.expectedType=c}parse(o,a,c,h,g={}){return a?this.concat(a,c,h)._parse(o,g):this._parse(o,g)}_parse(o,a){function c(h,g,y){return"assert"===y?new yt(g,[h]):"coerce"===y?new Ul(g,[h]):h}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=o[0];if("string"!=typeof h)return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[h];if(g){let y=g.parse(o,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,C=y.type;if("string"!==x.kind&&"number"!==x.kind&&"boolean"!==x.kind&&"object"!==x.kind&&"array"!==x.kind||"value"!==C.kind)if("color"!==x.kind&&"formatted"!==x.kind&&"resolvedImage"!==x.kind||"value"!==C.kind&&"string"!==C.kind){if(this.checkSubtype(x,C))return null}else y=c(y,x,a.typeAnnotation||"coerce");else y=c(y,x,a.typeAnnotation||"assert")}if(!(y instanceof Rn)&&"resolvedImage"!==y.type.kind&&gu(y)){const x=new cd;try{y=new Rn(y.type,y.evaluate(x))}catch(C){return this.error(C.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,a,c){const h="number"==typeof o?this.path.concat(o):this.path,g=c?this.scope.concat(c):this.scope;return new fn(this.registry,h,a||null,g,this.errors)}error(o,...a){const c=`${this.key}${a.map(h=>`[${h}]`).join("")}`;this.errors.push(new Ts(c,o))}checkSubtype(o,a){const c=Jt(o,a);return c&&this.error(c),c}}var Pc=fn;function gu(r){if(r instanceof Ih)return gu(r.boundExpression);if(r instanceof Ps&&"error"===r.name||r instanceof Oc||r instanceof fu)return!1;const o=r instanceof Ul||r instanceof yt;let a=!0;return r.eachChild(c=>{a=o?a&&gu(c):a&&c instanceof Rn}),!!a&&ia(r)&&$l(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function ul(r,o){const a=r.length-1;let c,h,g=0,y=a,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),c=r[x],h=r[x+1],c<=o){if(x===a||o<h)return x;g=x+1}else{if(!(c>o))throw new qo("Input is not a number.");y=x-1}return 0}class dd{constructor(o,a,c){this.type=o,this.input=a,this.labels=[],this.outputs=[];for(const[h,g]of c)this.labels.push(h),this.outputs.push(g)}static parse(o,a){if(o.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return a.error("Expected an even number of arguments.");const c=a.parse(o[1],1,bt);if(!c)return null;const h=[];let g=null;a.expectedType&&"value"!==a.expectedType.kind&&(g=a.expectedType);for(let y=1;y<o.length;y+=2){const x=1===y?-1/0:o[y],C=o[y+1],O=y,E=y+1;if("number"!=typeof x)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(h.length&&h[h.length-1][0]>=x)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const A=a.parse(C,E,g);if(!A)return null;g=g||A.type,h.push([x,A])}return new dd(g,c,h)}evaluate(o){const a=this.labels,c=this.outputs;if(1===a.length)return c[0].evaluate(o);const h=this.input.evaluate(o);if(h<=a[0])return c[0].evaluate(o);const g=a.length;return h>=a[g-1]?c[g-1].evaluate(o):c[ul(a,h)].evaluate(o)}eachChild(o){o(this.input);for(const a of this.outputs)o(a)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&o.push(this.labels[a]),o.push(this.outputs[a].serialize());return o}}var kh=dd;function Sn(r,o,a){return r*(1-a)+o*a}var Xr=Object.freeze({__proto__:null,array:function(r,o,a){return r.map((c,h)=>Sn(c,o[h],a))},color:function(r,o,a){return new di(Sn(r.r,o.r,a),Sn(r.g,o.g,a),Sn(r.b,o.b,a),Sn(r.a,o.a,a))},number:Sn});const Es=.95047,ds=1.08883,oa=4/29,An=6/29,Ec=3*An*An,Rh=An*An*An,Nh=Math.PI/180,uf=180/Math.PI;function Ss(r){return r>Rh?Math.pow(r,1/3):r/Ec+oa}function Gl(r){return r>An?r*r*r:Ec*(r-oa)}function Fh(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function zn(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function df(r){const o=zn(r.r),a=zn(r.g),c=zn(r.b),h=Ss((.4124564*o+.3575761*a+.1804375*c)/Es),g=Ss((.2126729*o+.7151522*a+.072175*c)/1);return{l:116*g-16,a:500*(h-g),b:200*(g-Ss((.0193339*o+.119192*a+.9503041*c)/ds)),alpha:r.a}}function hf(r){let o=(r.l+16)/116,a=isNaN(r.a)?o:o+r.a/500,c=isNaN(r.b)?o:o-r.b/200;return o=1*Gl(o),a=Es*Gl(a),c=ds*Gl(c),new di(Fh(3.2404542*a-1.5371385*o-.4985314*c),Fh(-.969266*a+1.8760108*o+.041556*c),Fh(.0556434*a-.2040259*o+1.0572252*c),r.alpha)}function nm(r,o,a){const c=o-r;return r+a*(c>180||c<-180?c-360*Math.round(c/360):c)}const ei={forward:df,reverse:hf,interpolate:function(r,o,a){return{l:Sn(r.l,o.l,a),a:Sn(r.a,o.a,a),b:Sn(r.b,o.b,a),alpha:Sn(r.alpha,o.alpha,a)}}},Sc={forward:function(r){const{l:o,a,b:c}=df(r),h=Math.atan2(c,a)*uf;return{h:h<0?h+360:h,c:Math.sqrt(a*a+c*c),l:o,alpha:r.a}},reverse:function(r){const o=r.h*Nh,a=r.c;return hf({l:r.l,a:Math.cos(o)*a,b:Math.sin(o)*a,alpha:r.alpha})},interpolate:function(r,o,a){return{h:nm(r.h,o.h,a),c:Sn(r.c,o.c,a),l:Sn(r.l,o.l,a),alpha:Sn(r.alpha,o.alpha,a)}}};var hd=Object.freeze({__proto__:null,hcl:Sc,lab:ei});class vt{constructor(o,a,c,h,g){this.type=o,this.operator=a,this.interpolation=c,this.input=h,this.labels=[],this.outputs=[];for(const[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(o,a,c,h){let g=0;if("exponential"===o.name)g=Zo(a,o.base,c,h);else if("linear"===o.name)g=Zo(a,1,c,h);else if("cubic-bezier"===o.name){const y=o.controlPoints;g=new Ks(y[0],y[1],y[2],y[3]).solve(Zo(a,1,c,h))}return g}static parse(o,a){let[c,h,g,...y]=o;if(!Array.isArray(h)||0===h.length)return a.error("Expected an interpolation type expression.",1);if("linear"===h[0])h={name:"linear"};else if("exponential"===h[0]){const O=h[1];if("number"!=typeof O)return a.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:O}}else{if("cubic-bezier"!==h[0])return a.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const O=h.slice(1);if(4!==O.length||O.some(E=>"number"!=typeof E||E<0||E>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:O}}}if(o.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(g=a.parse(g,2,bt),!g)return null;const x=[];let C=null;"interpolate-hcl"===c||"interpolate-lab"===c?C=Hr:a.expectedType&&"value"!==a.expectedType.kind&&(C=a.expectedType);for(let O=0;O<y.length;O+=2){const E=y[O],A=y[O+1],k=O+3,F=O+4;if("number"!=typeof E)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(x.length&&x[x.length-1][0]>=E)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',k);const L=a.parse(A,F,C);if(!L)return null;C=C||L.type,x.push([E,L])}return"number"===C.kind||"color"===C.kind||"array"===C.kind&&"number"===C.itemType.kind&&"number"==typeof C.N?new vt(C,c,h,g,x):a.error(`Type ${tt(C)} is not interpolatable.`)}evaluate(o){const a=this.labels,c=this.outputs;if(1===a.length)return c[0].evaluate(o);const h=this.input.evaluate(o);if(h<=a[0])return c[0].evaluate(o);const g=a.length;if(h>=a[g-1])return c[g-1].evaluate(o);const y=ul(a,h),x=vt.interpolationFactor(this.interpolation,h,a[y],a[y+1]),C=c[y].evaluate(o),O=c[y+1].evaluate(o);return"interpolate"===this.operator?Xr[this.type.kind.toLowerCase()](C,O,x):"interpolate-hcl"===this.operator?Sc.reverse(Sc.interpolate(Sc.forward(C),Sc.forward(O),x)):ei.reverse(ei.interpolate(ei.forward(C),ei.forward(O),x))}eachChild(o){o(this.input);for(const a of this.outputs)o(a)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,o,this.input.serialize()];for(let c=0;c<this.labels.length;c++)a.push(this.labels[c],this.outputs[c].serialize());return a}}function Zo(r,o,a,c){const h=c-a,g=r-a;return 0===h?0:1===o?g/h:(Math.pow(o,g)-1)/(Math.pow(o,h)-1)}var Pn=vt;class go{constructor(o,a){this.type=o,this.args=a}static parse(o,a){if(o.length<2)return a.error("Expectected at least one argument.");let c=null;const h=a.expectedType;h&&"value"!==h.kind&&(c=h);const g=[];for(const x of o.slice(1)){const C=a.parse(x,1+g.length,c,void 0,{typeAnnotation:"omit"});if(!C)return null;c=c||C.type,g.push(C)}const y=h&&g.some(x=>Jt(h,x.type));return new go(y?mt:c,g)}evaluate(o){let a,c=null,h=0;for(const g of this.args){if(h++,c=g.evaluate(o),c&&c instanceof Ds&&!c.available&&(a||(a=c),c=null,h===this.args.length))return a;if(null!==c)break}return c}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(a=>{o.push(a.serialize())}),o}}var Jo=go;class Ia{constructor(o,a){this.type=a.type,this.bindings=[].concat(o),this.result=a}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const a of this.bindings)o(a[1]);o(this.result)}static parse(o,a){if(o.length<4)return a.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const c=[];for(let g=1;g<o.length-1;g+=2){const y=o[g];if("string"!=typeof y)return a.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return a.error("Variable names must contain only alphanumeric characters or '_'.",g);const x=a.parse(o[g+1],g+1);if(!x)return null;c.push([y,x])}const h=a.parse(o[o.length-1],o.length-1,a.expectedType,c);return h?new Ia(c,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[a,c]of this.bindings)o.push(a,c.serialize());return o.push(this.result.serialize()),o}}var Ir=Ia;class pd{constructor(o,a,c){this.type=o,this.index=a,this.input=c}static parse(o,a){if(3!==o.length)return a.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const c=a.parse(o[1],1,bt),h=a.parse(o[2],2,Wr(a.expectedType||mt));return c&&h?new pd(h.type.itemType,c,h):null}evaluate(o){const a=this.index.evaluate(o),c=this.input.evaluate(o);if(a<0)throw new qo(`Array index out of bounds: ${a} < 0.`);if(a>=c.length)throw new qo(`Array index out of bounds: ${a} > ${c.length-1}.`);if(a!==Math.floor(a))throw new qo(`Array index must be an integer, but found ${a} instead.`);return c[a]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var pf=pd;class Ac{constructor(o,a){this.type=pn,this.needle=o,this.haystack=a}static parse(o,a){if(3!==o.length)return a.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const c=a.parse(o[1],1,mt),h=a.parse(o[2],2,mt);return c&&h?Bn(c.type,[pn,Lt,bt,Kn,mt])?new Ac(c,h):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(c.type)} instead`):null}evaluate(o){const a=this.needle.evaluate(o),c=this.haystack.evaluate(o);if(null==c)return!1;if(!uu(a,["boolean","string","number","null"]))throw new qo(`Expected first argument to be of type boolean, string, number or null, but found ${tt(zi(a))} instead.`);if(!uu(c,["string","array"]))throw new qo(`Expected second argument to be of type array or string, but found ${tt(zi(c))} instead.`);return c.indexOf(a)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var hs=Ac;class St{constructor(o,a,c){this.type=bt,this.needle=o,this.haystack=a,this.fromIndex=c}static parse(o,a){if(o.length<=2||o.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const c=a.parse(o[1],1,mt),h=a.parse(o[2],2,mt);if(!c||!h)return null;if(!Bn(c.type,[pn,Lt,bt,Kn,mt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(c.type)} instead`);if(4===o.length){const g=a.parse(o[3],3,bt);return g?new St(c,h,g):null}return new St(c,h)}evaluate(o){const a=this.needle.evaluate(o),c=this.haystack.evaluate(o);if(!uu(a,["boolean","string","number","null"]))throw new qo(`Expected first argument to be of type boolean, string, number or null, but found ${tt(zi(a))} instead.`);if(!uu(c,["string","array"]))throw new qo(`Expected second argument to be of type array or string, but found ${tt(zi(c))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(o);return c.indexOf(a,h)}return c.indexOf(a)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Cn=St;class Ri{constructor(o,a,c,h,g,y){this.inputType=o,this.type=a,this.input=c,this.cases=h,this.outputs=g,this.otherwise=y}static parse(o,a){if(o.length<5)return a.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return a.error("Expected an even number of arguments.");let c,h;a.expectedType&&"value"!==a.expectedType.kind&&(h=a.expectedType);const g={},y=[];for(let O=2;O<o.length-1;O+=2){let E=o[O];const A=o[O+1];Array.isArray(E)||(E=[E]);const k=a.concat(O);if(0===E.length)return k.error("Expected at least one branch label.");for(const L of E){if("number"!=typeof L&&"string"!=typeof L)return k.error("Branch labels must be numbers or strings.");if("number"==typeof L&&Math.abs(L)>Number.MAX_SAFE_INTEGER)return k.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof L&&Math.floor(L)!==L)return k.error("Numeric branch labels must be integer values.");if(c){if(k.checkSubtype(c,zi(L)))return null}else c=zi(L);if(void 0!==g[String(L)])return k.error("Branch labels must be unique.");g[String(L)]=y.length}const F=a.parse(A,O,h);if(!F)return null;h=h||F.type,y.push(F)}const x=a.parse(o[1],1,mt);if(!x)return null;const C=a.parse(o[o.length-1],o.length-1,h);return C?"value"!==x.type.kind&&a.concat(1).checkSubtype(c,x.type)?null:new Ri(c,h,x,g,y,C):null}evaluate(o){const a=this.input.evaluate(o);return(zi(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),c=[],h={};for(const y of a){const x=h[this.cases[y]];void 0===x?(h[this.cases[y]]=c.length,c.push([this.cases[y],[y]])):c[x][1].push(y)}const g=y=>"number"===this.inputType.kind?Number(y):y;for(const[y,x]of c)o.push(1===x.length?g(x[0]):x.map(g)),o.push(this.outputs[y].serialize());return o.push(this.otherwise.serialize()),o}}var As=Ri;class ka{constructor(o,a,c){this.type=o,this.branches=a,this.otherwise=c}static parse(o,a){if(o.length<4)return a.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return a.error("Expected an odd number of arguments.");let c;a.expectedType&&"value"!==a.expectedType.kind&&(c=a.expectedType);const h=[];for(let y=1;y<o.length-1;y+=2){const x=a.parse(o[y],y,pn);if(!x)return null;const C=a.parse(o[y+1],y+1,c);if(!C)return null;h.push([x,C]),c=c||C.type}const g=a.parse(o[o.length-1],o.length-1,c);return g?new ka(c,h,g):null}evaluate(o){for(const[a,c]of this.branches)if(a.evaluate(o))return c.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[a,c]of this.branches)o(a),o(c);o(this.otherwise)}outputDefined(){return this.branches.every(([o,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(a=>{o.push(a.serialize())}),o}}var Fo=ka;class ra{constructor(o,a,c,h){this.type=o,this.input=a,this.beginIndex=c,this.endIndex=h}static parse(o,a){if(o.length<=2||o.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const c=a.parse(o[1],1,mt),h=a.parse(o[2],2,bt);if(!c||!h)return null;if(!Bn(c.type,[Wr(mt),Lt,mt]))return a.error(`Expected first argument to be of type array or string, but found ${tt(c.type)} instead`);if(4===o.length){const g=a.parse(o[3],3,bt);return g?new ra(c.type,c,h,g):null}return new ra(c.type,c,h)}evaluate(o){const a=this.input.evaluate(o),c=this.beginIndex.evaluate(o);if(!uu(a,["string","array"]))throw new qo(`Expected first argument to be of type array or string, but found ${tt(zi(a))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(o);return a.slice(c,h)}return a.slice(c)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Wi=ra;function Hl(r,o){return"=="===r||"!="===r?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function mu(r,o,a,c){return 0===c.compare(o,a)}function gn(r,o,a){const c="=="!==r&&"!="!==r;return class rA{constructor(g,y,x){this.type=pn,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument="value"===g.type.kind||"value"===y.type.kind}static parse(g,y){if(3!==g.length&&4!==g.length)return y.error("Expected two or three arguments.");const x=g[0];let C=y.parse(g[1],1,mt);if(!C)return null;if(!Hl(x,C.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${tt(C.type)}'.`);let O=y.parse(g[2],2,mt);if(!O)return null;if(!Hl(x,O.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${tt(O.type)}'.`);if(C.type.kind!==O.type.kind&&"value"!==C.type.kind&&"value"!==O.type.kind)return y.error(`Cannot compare types '${tt(C.type)}' and '${tt(O.type)}'.`);c&&("value"===C.type.kind&&"value"!==O.type.kind?C=new yt(O.type,[C]):"value"!==C.type.kind&&"value"===O.type.kind&&(O=new yt(C.type,[O])));let E=null;if(4===g.length){if("string"!==C.type.kind&&"string"!==O.type.kind&&"value"!==C.type.kind&&"value"!==O.type.kind)return y.error("Cannot use collator to compare non-string types.");if(E=y.parse(g[3],3,cr),!E)return null}return new rA(C,O,E)}evaluate(g){const y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(c&&this.hasUntypedArgument){const C=zi(y),O=zi(x);if(C.kind!==O.kind||"string"!==C.kind&&"number"!==C.kind)throw new qo(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${C.kind}, ${O.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const C=zi(y),O=zi(x);if("string"!==C.kind||"string"!==O.kind)return o(g,y,x)}return this.collator?a(g,y,x,this.collator.evaluate(g)):o(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[r];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const Lh=gn("==",function(r,o,a){return o===a},mu),_u=gn("!=",function(r,o,a){return o!==a},function(r,o,a,c){return!mu(0,o,a,c)}),ff=gn("<",function(r,o,a){return o<a},function(r,o,a,c){return c.compare(o,a)<0}),Ic=gn(">",function(r,o,a){return o>a},function(r,o,a,c){return c.compare(o,a)>0}),Xo=gn("<=",function(r,o,a){return o<=a},function(r,o,a,c){return c.compare(o,a)<=0}),kc=gn(">=",function(r,o,a){return o>=a},function(r,o,a,c){return c.compare(o,a)>=0});class Ra{constructor(o,a,c,h,g,y){this.type=Lt,this.number=o,this.locale=a,this.currency=c,this.unit=h,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(o,a){if(3!==o.length)return a.error("Expected two arguments.");const c=a.parse(o[1],1,bt);if(!c)return null;const h=o[2];if("object"!=typeof h||Array.isArray(h))return a.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=a.parse(h.locale,1,Lt),!g))return null;let y=null;if(h.currency&&(y=a.parse(h.currency,1,Lt),!y))return null;let x=null;if(h.unit&&(x=a.parse(h.unit,1,Lt),!x))return null;let C=null;if(h["min-fraction-digits"]&&(C=a.parse(h["min-fraction-digits"],1,bt),!C))return null;let O=null;return h["max-fraction-digits"]&&(O=a.parse(h["max-fraction-digits"],1,bt),!O)?null:new Ra(c,g,y,x,C,O)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class ur{constructor(o){this.type=bt,this.input=o}static parse(o,a){if(2!==o.length)return a.error(`Expected 1 argument, but found ${o.length-1} instead.`);const c=a.parse(o[1],1);return c?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?a.error(`Expected argument of type string or array, but found ${tt(c.type)} instead.`):new ur(c):null}evaluate(o){const a=this.input.evaluate(o);if("string"==typeof a||Array.isArray(a))return a.length;throw new qo(`Expected value to be of type string or array, but found ${tt(zi(a))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(a=>{o.push(a.serialize())}),o}}const Rc={"==":Lh,"!=":_u,">":Ic,"<":ff,">=":kc,"<=":Xo,array:yt,at:pf,boolean:yt,case:Fo,coalesce:Jo,collator:Oc,format:Vl,image:Qn,in:hs,"index-of":Cn,interpolate:Pn,"interpolate-hcl":Pn,"interpolate-lab":Pn,length:ur,let:Ir,literal:Rn,match:As,number:yt,"number-format":Ra,object:yt,slice:Wi,step:kh,string:yt,"to-boolean":Ul,"to-color":Ul,"to-number":Ul,"to-string":Ul,var:Ih,within:fu};function Bh(r,[o,a,c,h]){o=o.evaluate(r),a=a.evaluate(r),c=c.evaluate(r);const g=h?h.evaluate(r):1,y=rf(o,a,c,g);if(y)throw new qo(y);return new di(o/255*g,a/255*g,c/255*g,g)}function Jn(r,o){return r in o}function zh(r,o){const a=o[r];return void 0===a?null:a}function kr(r){return{type:r}}Ps.register(Rc,{error:[{kind:"error"},[Lt],(r,[o])=>{throw new qo(o.evaluate(r))}],typeof:[Lt,[mt],(r,[o])=>tt(zi(o.evaluate(r)))],"to-rgba":[Wr(bt,4),[Hr],(r,[o])=>o.evaluate(r).toArray()],rgb:[Hr,[bt,bt,bt],Bh],rgba:[Hr,[bt,bt,bt,bt],Bh],has:{type:pn,overloads:[[[Lt],(r,[o])=>Jn(o.evaluate(r),r.properties())],[[Lt,Ht],(r,[o,a])=>Jn(o.evaluate(r),a.evaluate(r))]]},get:{type:mt,overloads:[[[Lt],(r,[o])=>zh(o.evaluate(r),r.properties())],[[Lt,Ht],(r,[o,a])=>zh(o.evaluate(r),a.evaluate(r))]]},"feature-state":[mt,[Lt],(r,[o])=>zh(o.evaluate(r),r.featureState||{})],properties:[Ht,[],r=>r.properties()],"geometry-type":[Lt,[],r=>r.geometryType()],id:[mt,[],r=>r.id()],zoom:[bt,[],r=>r.globals.zoom],pitch:[bt,[],r=>r.globals.pitch||0],"distance-from-center":[bt,[],r=>r.distanceFromCenter()],"heatmap-density":[bt,[],r=>r.globals.heatmapDensity||0],"line-progress":[bt,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[bt,[],r=>r.globals.skyRadialProgress||0],accumulated:[mt,[],r=>void 0===r.globals.accumulated?null:r.globals.accumulated],"+":[bt,kr(bt),(r,o)=>{let a=0;for(const c of o)a+=c.evaluate(r);return a}],"*":[bt,kr(bt),(r,o)=>{let a=1;for(const c of o)a*=c.evaluate(r);return a}],"-":{type:bt,overloads:[[[bt,bt],(r,[o,a])=>o.evaluate(r)-a.evaluate(r)],[[bt],(r,[o])=>-o.evaluate(r)]]},"/":[bt,[bt,bt],(r,[o,a])=>o.evaluate(r)/a.evaluate(r)],"%":[bt,[bt,bt],(r,[o,a])=>o.evaluate(r)%a.evaluate(r)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(r,[o,a])=>Math.pow(o.evaluate(r),a.evaluate(r))],sqrt:[bt,[bt],(r,[o])=>Math.sqrt(o.evaluate(r))],log10:[bt,[bt],(r,[o])=>Math.log(o.evaluate(r))/Math.LN10],ln:[bt,[bt],(r,[o])=>Math.log(o.evaluate(r))],log2:[bt,[bt],(r,[o])=>Math.log(o.evaluate(r))/Math.LN2],sin:[bt,[bt],(r,[o])=>Math.sin(o.evaluate(r))],cos:[bt,[bt],(r,[o])=>Math.cos(o.evaluate(r))],tan:[bt,[bt],(r,[o])=>Math.tan(o.evaluate(r))],asin:[bt,[bt],(r,[o])=>Math.asin(o.evaluate(r))],acos:[bt,[bt],(r,[o])=>Math.acos(o.evaluate(r))],atan:[bt,[bt],(r,[o])=>Math.atan(o.evaluate(r))],min:[bt,kr(bt),(r,o)=>Math.min(...o.map(a=>a.evaluate(r)))],max:[bt,kr(bt),(r,o)=>Math.max(...o.map(a=>a.evaluate(r)))],abs:[bt,[bt],(r,[o])=>Math.abs(o.evaluate(r))],round:[bt,[bt],(r,[o])=>{const a=o.evaluate(r);return a<0?-Math.round(-a):Math.round(a)}],floor:[bt,[bt],(r,[o])=>Math.floor(o.evaluate(r))],ceil:[bt,[bt],(r,[o])=>Math.ceil(o.evaluate(r))],"filter-==":[pn,[Lt,mt],(r,[o,a])=>r.properties()[o.value]===a.value],"filter-id-==":[pn,[mt],(r,[o])=>r.id()===o.value],"filter-type-==":[pn,[Lt],(r,[o])=>r.geometryType()===o.value],"filter-<":[pn,[Lt,mt],(r,[o,a])=>{const c=r.properties()[o.value],h=a.value;return typeof c==typeof h&&c<h}],"filter-id-<":[pn,[mt],(r,[o])=>{const a=r.id(),c=o.value;return typeof a==typeof c&&a<c}],"filter->":[pn,[Lt,mt],(r,[o,a])=>{const c=r.properties()[o.value],h=a.value;return typeof c==typeof h&&c>h}],"filter-id->":[pn,[mt],(r,[o])=>{const a=r.id(),c=o.value;return typeof a==typeof c&&a>c}],"filter-<=":[pn,[Lt,mt],(r,[o,a])=>{const c=r.properties()[o.value],h=a.value;return typeof c==typeof h&&c<=h}],"filter-id-<=":[pn,[mt],(r,[o])=>{const a=r.id(),c=o.value;return typeof a==typeof c&&a<=c}],"filter->=":[pn,[Lt,mt],(r,[o,a])=>{const c=r.properties()[o.value],h=a.value;return typeof c==typeof h&&c>=h}],"filter-id->=":[pn,[mt],(r,[o])=>{const a=r.id(),c=o.value;return typeof a==typeof c&&a>=c}],"filter-has":[pn,[mt],(r,[o])=>o.value in r.properties()],"filter-has-id":[pn,[],r=>null!==r.id()&&void 0!==r.id()],"filter-type-in":[pn,[Wr(Lt)],(r,[o])=>o.value.indexOf(r.geometryType())>=0],"filter-id-in":[pn,[Wr(mt)],(r,[o])=>o.value.indexOf(r.id())>=0],"filter-in-small":[pn,[Lt,Wr(mt)],(r,[o,a])=>a.value.indexOf(r.properties()[o.value])>=0],"filter-in-large":[pn,[Lt,Wr(mt)],(r,[o,a])=>function(c,h,g,y){for(;g<=y;){const x=g+y>>1;if(h[x]===c)return!0;h[x]>c?y=x-1:g=x+1}return!1}(r.properties()[o.value],a.value,0,a.value.length-1)],all:{type:pn,overloads:[[[pn,pn],(r,[o,a])=>o.evaluate(r)&&a.evaluate(r)],[kr(pn),(r,o)=>{for(const a of o)if(!a.evaluate(r))return!1;return!0}]]},any:{type:pn,overloads:[[[pn,pn],(r,[o,a])=>o.evaluate(r)||a.evaluate(r)],[kr(pn),(r,o)=>{for(const a of o)if(a.evaluate(r))return!0;return!1}]]},"!":[pn,[pn],(r,[o])=>!o.evaluate(r)],"is-supported-script":[pn,[Lt],(r,[o])=>{const a=r.globals&&r.globals.isSupportedScript;return!a||a(o.evaluate(r))}],upcase:[Lt,[Lt],(r,[o])=>o.evaluate(r).toUpperCase()],downcase:[Lt,[Lt],(r,[o])=>o.evaluate(r).toLowerCase()],concat:[Lt,kr(mt),(r,o)=>o.map(a=>ad(a.evaluate(r))).join("")],"resolved-locale":[Lt,[cr],(r,[o])=>o.evaluate(r).resolvedLocale()]});var Nc=Rc;function yu(r){return{result:"success",value:r}}function sa(r){return{result:"error",value:r}}function Is(r){return"data-driven"===r["property-type"]}function bo(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Vh(r){return!!r.expression&&r.expression.interpolated}function sn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function dr(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function fd(r){return r}function dl(r,o){const a="color"===o.type,c=r.stops&&"object"==typeof r.stops[0][0],h=c||!(c||void 0!==r.property),g=r.type||(Vh(o)?"exponential":"interval");if(a&&((r=ea({},r)).stops&&(r.stops=r.stops.map(O=>[O[0],di.parse(O[1])])),r.default=di.parse(r.default?r.default:o.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!hd[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let y,x,C;if("exponential"===g)y=hl;else if("interval"===g)y=gd;else if("categorical"===g){y=ps,x=Object.create(null);for(const O of r.stops)x[O[0]]=O[1];C=typeof r.stops[0][0]}else{if("identity"!==g)throw new Error(`Unknown function type "${g}"`);y=gf}if(c){const O={},E=[];for(let F=0;F<r.stops.length;F++){const L=r.stops[F],V=L[0].zoom;void 0===O[V]&&(O[V]={zoom:V,type:r.type,property:r.property,default:r.default,stops:[]},E.push(V)),O[V].stops.push([L[0].value,L[1]])}const A=[];for(const F of E)A.push([O[F].zoom,dl(O[F],o)]);const k={name:"linear"};return{kind:"composite",interpolationType:k,interpolationFactor:Pn.interpolationFactor.bind(void 0,k),zoomStops:A.map(F=>F[0]),evaluate:({zoom:F},L)=>hl({stops:A,base:r.base},o,F).evaluate(F,L)}}if(h){const O="exponential"===g?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:Pn.interpolationFactor.bind(void 0,O),zoomStops:r.stops.map(E=>E[0]),evaluate:({zoom:E})=>y(r,o,E,x,C)}}return{kind:"source",evaluate(O,E){const A=E&&E.properties?E.properties[r.property]:void 0;return void 0===A?Na(r.default,o.default):y(r,o,A,x,C)}}}function Na(r,o,a){return void 0!==r?r:void 0!==o?o:void 0!==a?a:void 0}function ps(r,o,a,c,h){return Na(typeof a===h?c[a]:void 0,r.default,o.default)}function gd(r,o,a){if("number"!==sn(a))return Na(r.default,o.default);const c=r.stops.length;if(1===c||a<=r.stops[0][0])return r.stops[0][1];if(a>=r.stops[c-1][0])return r.stops[c-1][1];const h=ul(r.stops.map(g=>g[0]),a);return r.stops[h][1]}function hl(r,o,a){const c=void 0!==r.base?r.base:1;if("number"!==sn(a))return Na(r.default,o.default);const h=r.stops.length;if(1===h||a<=r.stops[0][0])return r.stops[0][1];if(a>=r.stops[h-1][0])return r.stops[h-1][1];const g=ul(r.stops.map(E=>E[0]),a),y=function(E,A,k,F){const L=F-k,V=E-k;return 0===L?0:1===A?V/L:(Math.pow(A,V)-1)/(Math.pow(A,L)-1)}(a,c,r.stops[g][0],r.stops[g+1][0]),x=r.stops[g][1],C=r.stops[g+1][1];let O=Xr[o.type]||fd;if(r.colorSpace&&"rgb"!==r.colorSpace){const E=hd[r.colorSpace];O=(A,k)=>E.reverse(E.interpolate(E.forward(A),E.forward(k),y))}return"function"==typeof x.evaluate?{evaluate(...E){const A=x.evaluate.apply(void 0,E),k=C.evaluate.apply(void 0,E);if(void 0!==A&&void 0!==k)return O(A,k,y)}}:O(x,C,y)}function gf(r,o,a){return"color"===o.type?a=di.parse(a):"formatted"===o.type?a=Zr.fromString(a.toString()):"resolvedImage"===o.type?a=Ds.fromString(a.toString()):sn(a)===o.type||"enum"===o.type&&o.values[a]||(a=void 0),Na(a,r.default,o.default)}class md{constructor(o,a){var c;this.expression=o,this._warningHistory={},this._evaluator=new cd,this._defaultValue=a?"color"===(c=a).type&&(dr(c.default)||Array.isArray(c.default))?new di(0,0,0,0):"color"===c.type?di.parse(c.default)||null:void 0===c.default?null:c.default:null,this._enumValues=a&&"enum"===a.type?a.values:null}evaluateWithoutErrorHandling(o,a,c,h,g,y,x,C){return this._evaluator.globals=o,this._evaluator.feature=a,this._evaluator.featureState=c,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=C||null,this.expression.evaluate(this._evaluator)}evaluate(o,a,c,h,g,y,x,C){this._evaluator.globals=o,this._evaluator.feature=a||null,this._evaluator.featureState=c||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=C||null;try{const O=this.expression.evaluate(this._evaluator);if(null==O||"number"==typeof O&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new qo(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console<"u"&&console.warn(O.message)),this._defaultValue}}}function vu(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in Nc}function xu(r,o){const a=new Pc(Nc,[],o?function(h){const g={color:Hr,string:Lt,number:bt,enum:Lt,boolean:pn,formatted:zl,resolvedImage:Cc};return"array"===h.type?Wr(g[h.value]||mt,h.length):g[h.type]}(o):void 0),c=a.parse(r,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return c?yu(new md(c,o)):sa(a.errors)}class mf{constructor(o,a){this.kind=o,this._styleExpression=a,this.isStateDependent="constant"!==o&&!Ar(a.expression)}evaluateWithoutErrorHandling(o,a,c,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(o,a,c,h,g,y)}evaluate(o,a,c,h,g,y){return this._styleExpression.evaluate(o,a,c,h,g,y)}}class _d{constructor(o,a,c,h){this.kind=o,this.zoomStops=c,this._styleExpression=a,this.isStateDependent="camera"!==o&&!Ar(a.expression),this.interpolationType=h}evaluateWithoutErrorHandling(o,a,c,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(o,a,c,h,g,y)}evaluate(o,a,c,h,g,y){return this._styleExpression.evaluate(o,a,c,h,g,y)}interpolationFactor(o,a,c){return this.interpolationType?Pn.interpolationFactor(this.interpolationType,o,a,c):0}}function yd(r,o){if("error"===(r=xu(r,o)).result)return r;const a=r.value.expression,c=ia(a);if(!c&&!Is(o))return sa([new Ts("","data expressions not supported")]);const h=$l(a,["zoom","pitch","distance-from-center"]);if(!h&&!bo(o))return sa([new Ts("","zoom expressions not supported")]);const g=jh(a);return g||h?g instanceof Ts?sa([g]):g instanceof Pn&&!Vh(o)?sa([new Ts("",'"interpolate" expressions cannot be used with this property')]):yu(g?new _d(c?"camera":"composite",r.value,g.labels,g instanceof Pn?g.interpolation:void 0):new mf(c?"constant":"source",r.value)):sa([new Ts("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Uh{constructor(o,a){this._parameters=o,this._specification=a,ea(this,dl(this._parameters,this._specification))}static deserialize(o){return new Uh(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function jh(r){let o=null;if(r instanceof Ir)o=jh(r.result);else if(r instanceof Jo){for(const a of r.args)if(o=jh(a),o)break}else(r instanceof kh||r instanceof Pn)&&r.input instanceof Ps&&"zoom"===r.input.name&&(o=r);return o instanceof Ts||r.eachChild(a=>{const c=jh(a);c instanceof Ts?o=c:!o&&c?o=new Ts("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&c&&o!==c&&(o=new Ts("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}class Tt{constructor(o,a,c,h){this.message=(o?`${o}: `:"")+c,h&&(this.identifier=h),null!=a&&a.__line__&&(this.line=a.__line__)}}function aa(r){const o=r.key,a=r.value,c=r.valueSpec||{},h=r.objectElementValidators||{},g=r.style,y=r.styleSpec;let x=[];const C=sn(a);if("object"!==C)return[new Tt(o,a,`object expected, ${C} found`)];for(const O in a){const E=O.split(".")[0];let A;h[E]?A=h[E]:c[E]?A=Vi:h["*"]?A=h["*"]:c["*"]&&(A=Vi),A?x=x.concat(A({key:(o&&`${o}.`)+O,value:a[O],valueSpec:c[E]||c["*"],style:g,styleSpec:y,object:a,objectKey:O},a)):x.push(new Tt(o,a[O],`unknown property "${O}"`))}for(const O in c)h[O]||c[O].required&&void 0===c[O].default&&void 0===a[O]&&x.push(new Tt(o,a,`missing required property "${O}"`));return x}function im(r){const o=r.value,a=r.valueSpec,c=r.style,h=r.styleSpec,g=r.key,y=r.arrayElementValidator||Vi;if("array"!==sn(o))return[new Tt(g,o,`array expected, ${sn(o)} found`)];if(a.length&&o.length!==a.length)return[new Tt(g,o,`array length ${a.length} expected, length ${o.length} found`)];if(a["min-length"]&&o.length<a["min-length"])return[new Tt(g,o,`array length at least ${a["min-length"]} expected, length ${o.length} found`)];let x={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};h.$version<7&&(x.function=a.function),"object"===sn(a.value)&&(x=a.value);let C=[];for(let O=0;O<o.length;O++)C=C.concat(y({array:o,arrayIndex:O,value:o[O],valueSpec:x,style:c,styleSpec:h,key:`${g}[${O}]`}));return C}function vd(r){const o=r.key,a=r.value,c=r.valueSpec;let h=sn(a);if("number"===h&&a!=a&&(h="NaN"),"number"!==h)return[new Tt(o,a,`number expected, ${h} found`)];if("minimum"in c){let g=c.minimum;if("array"===sn(c.minimum)&&(g=c.minimum[r.arrayIndex]),a<g)return[new Tt(o,a,`${a} is less than the minimum value ${g}`)]}if("maximum"in c){let g=c.maximum;if("array"===sn(c.maximum)&&(g=c.maximum[r.arrayIndex]),a>g)return[new Tt(o,a,`${a} is greater than the maximum value ${g}`)]}return[]}function xd(r){const o=r.valueSpec,a=eo(r.value.type);let c,h,g,y={};const x="categorical"!==a&&void 0===r.value.property,C=!x,O="array"===sn(r.value.stops)&&"array"===sn(r.value.stops[0])&&"object"===sn(r.value.stops[0][0]),E=aa({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if("identity"===a)return[new Tt(F.key,F.value,'identity function may not have a "stops" property')];let L=[];const V=F.value;return L=L.concat(im({key:F.key,value:V,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:A})),"array"===sn(V)&&0===V.length&&L.push(new Tt(F.key,V,"array must have at least one stop")),L},default:function(F){return Vi({key:F.key,value:F.value,valueSpec:o,style:F.style,styleSpec:F.styleSpec})}}});return"identity"===a&&x&&E.push(new Tt(r.key,r.value,'missing required property "property"')),"identity"===a||r.value.stops||E.push(new Tt(r.key,r.value,'missing required property "stops"')),"exponential"===a&&r.valueSpec.expression&&!Vh(r.valueSpec)&&E.push(new Tt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(C&&!Is(r.valueSpec)?E.push(new Tt(r.key,r.value,"property functions not supported")):x&&!bo(r.valueSpec)&&E.push(new Tt(r.key,r.value,"zoom functions not supported"))),"categorical"!==a&&!O||void 0!==r.value.property||E.push(new Tt(r.key,r.value,'"property" property is required')),E;function A(F){let L=[];const V=F.value,q=F.key;if("array"!==sn(V))return[new Tt(q,V,`array expected, ${sn(V)} found`)];if(2!==V.length)return[new Tt(q,V,`array length 2 expected, length ${V.length} found`)];if(O){if("object"!==sn(V[0]))return[new Tt(q,V,`object expected, ${sn(V[0])} found`)];if(void 0===V[0].zoom)return[new Tt(q,V,"object stop key must have zoom")];if(void 0===V[0].value)return[new Tt(q,V,"object stop key must have value")];const ee=eo(V[0].zoom);if("number"!=typeof ee)return[new Tt(q,V[0].zoom,"stop zoom values must be numbers")];if(g&&g>ee)return[new Tt(q,V[0].zoom,"stop zoom values must appear in ascending order")];ee!==g&&(g=ee,h=void 0,y={}),L=L.concat(aa({key:`${q}[0]`,value:V[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:vd,value:k}}))}else L=L.concat(k({key:`${q}[0]`,value:V[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},V));return vu(xo(V[1]))?L.concat([new Tt(`${q}[1]`,V[1],"expressions are not allowed in function stops.")]):L.concat(Vi({key:`${q}[1]`,value:V[1],valueSpec:o,style:F.style,styleSpec:F.styleSpec}))}function k(F,L){const V=sn(F.value),q=eo(F.value),ee=null!==F.value?F.value:L;if(c){if(V!==c)return[new Tt(F.key,ee,`${V} stop domain type must match previous stop domain type ${c}`)]}else c=V;if("number"!==V&&"string"!==V&&"boolean"!==V&&"number"!=typeof q&&"string"!=typeof q&&"boolean"!=typeof q)return[new Tt(F.key,ee,"stop domain value must be a number, string, or boolean")];if("number"!==V&&"categorical"!==a){let le=`number expected, ${V} found`;return Is(o)&&void 0===a&&(le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tt(F.key,ee,le)]}return"categorical"!==a||"number"!==V||"number"==typeof q&&isFinite(q)&&Math.floor(q)===q?"categorical"!==a&&"number"===V&&"number"==typeof q&&"number"==typeof h&&void 0!==h&&q<h?[new Tt(F.key,ee,"stop domain values must appear in ascending order")]:(h=q,"categorical"===a&&q in y?[new Tt(F.key,ee,"stop domain values must be unique")]:(y[q]=!0,[])):[new Tt(F.key,ee,`integer expected, found ${String(q)}`)]}}function mo(r){const o=("property"===r.expressionContext?yd:xu)(xo(r.value),r.valueSpec);if("error"===o.result)return o.value.map(c=>new Tt(`${r.key}${c.key}`,r.value,c.message));const a=o.value.expression||o.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!a.outputDefined())return[new Tt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===r.expressionContext&&"layout"===r.propertyType&&!Ar(a))return[new Tt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext)return Fc(a,r);if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!$l(a,["zoom","feature-state"]))return[new Tt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!ia(a))return[new Tt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fc(r,o){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const h of o.valueSpec.expression.parameters)a.delete(h);if(0===a.size)return[];const c=[];return r instanceof Ps&&a.has(r.name)?[new Tt(o.key,o.value,`["${r.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(r.eachChild(h=>{c.push(...Fc(h,o))}),c)}function $h(r){const o=r.key,a=r.value,c=r.valueSpec,h=[];return Array.isArray(c.values)?-1===c.values.indexOf(eo(a))&&h.push(new Tt(o,a,`expected one of [${c.values.join(", ")}], ${JSON.stringify(a)} found`)):-1===Object.keys(c.values).indexOf(eo(a))&&h.push(new Tt(o,a,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(a)} found`)),h}function _f(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const o of r.slice(1))if(!_f(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}function Gh(r,o="fill"){if(null==r)return{filter:()=>!0,needGeometry:!1,needFeature:!1};_f(r)||(r=Wl(r));const a=r;let c=!0;try{c=function(O){if(!gi(O))return O;let E=xo(O);return bd(E),E=pl(E),E}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(a,null,2)}\n        `)}const h=$e[`filter_${o}`],g=xu(c,h);let y=null;if("error"===g.result)throw new Error(g.value.map(O=>`${O.key}: ${O.message}`).join(", "));y=(O,E,A)=>g.value.evaluate(O,E,{},A);let x=null,C=null;if(c!==a){const O=xu(a,h);if("error"===O.result)throw new Error(O.value.map(E=>`${E.key}: ${E.message}`).join(", "));x=(E,A,k,F,L)=>O.value.evaluate(E,A,{},k,void 0,void 0,F,L),C=!ia(O.value.expression)}return{filter:y,dynamicFilter:x||void 0,needGeometry:yf(c),needFeature:!!C}}function pl(r){if(!Array.isArray(r))return r;const o=function(a){if(wd.has(a[0]))for(let c=1;c<a.length;c++)if(gi(a[c]))return!0;return a}(r);return!0===o?o:o.map(a=>pl(a))}function bd(r){let o=!1;const a=[];if("case"===r[0]){for(let c=1;c<r.length-1;c+=2)o=o||gi(r[c]),a.push(r[c+1]);a.push(r[r.length-1])}else if("match"===r[0]){o=o||gi(r[1]);for(let c=2;c<r.length-1;c+=2)a.push(r[c+1]);a.push(r[r.length-1])}else if("step"===r[0]){o=o||gi(r[1]);for(let c=1;c<r.length-1;c+=2)a.push(r[c+1])}o&&(r.length=0,r.push("any",...a));for(let c=1;c<r.length;c++)bd(r[c])}function gi(r){if(!Array.isArray(r))return!1;if("pitch"===(o=r[0])||"distance-from-center"===o)return!0;var o;for(let a=1;a<r.length;a++)if(gi(r[a]))return!0;return!1}const wd=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function om(r,o){return r<o?-1:r>o?1:0}function yf(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(let o=1;o<r.length;o++)if(yf(r[o]))return!0;return!1}function Wl(r){if(!r)return!0;const o=r[0];return r.length<=1?"any"!==o:"=="===o?Cd(r[1],r[2],"=="):"!="===o?Md(Cd(r[1],r[2],"==")):"<"===o||">"===o||"<="===o||">="===o?Cd(r[1],r[2],o):"any"===o?(a=r.slice(1),["any"].concat(a.map(Wl))):"all"===o?["all"].concat(r.slice(1).map(Wl)):"none"===o?["all"].concat(r.slice(1).map(Wl).map(Md)):"in"===o?Hh(r[1],r.slice(2)):"!in"===o?Md(Hh(r[1],r.slice(2))):"has"===o?bu(r[1]):"!has"===o?Md(bu(r[1])):"within"!==o||r;var a}function Cd(r,o,a){switch(r){case"$type":return[`filter-type-${a}`,o];case"$id":return[`filter-id-${a}`,o];default:return[`filter-${a}`,r,o]}}function Hh(r,o){if(0===o.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(a=>typeof a!=typeof o[0])?["filter-in-large",r,["literal",o.sort(om)]]:["filter-in-small",r,["literal",o]]}}function bu(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Md(r){return["!",r]}function Ko(r){return _f(xo(r.value))?mo(ea({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):Lc(r)}function Lc(r){const o=r.value,a=r.key;if("array"!==sn(o))return[new Tt(a,o,`array expected, ${sn(o)} found`)];const c=r.styleSpec;let h,g=[];if(o.length<1)return[new Tt(a,o,"filter array must have at least 1 element")];switch(g=g.concat($h({key:`${a}[0]`,value:o[0],valueSpec:c.filter_operator,style:r.style,styleSpec:r.styleSpec})),eo(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===eo(o[1])&&g.push(new Tt(a,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&g.push(new Tt(a,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(h=sn(o[1]),"string"!==h&&g.push(new Tt(`${a}[1]`,o[1],`string expected, ${h} found`)));for(let y=2;y<o.length;y++)h=sn(o[y]),"$type"===eo(o[1])?g=g.concat($h({key:`${a}[${y}]`,value:o[y],valueSpec:c.geometry_type,style:r.style,styleSpec:r.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&g.push(new Tt(`${a}[${y}]`,o[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<o.length;y++)g=g.concat(Lc({key:`${a}[${y}]`,value:o[y],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=sn(o[1]),2!==o.length?g.push(new Tt(a,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==h&&g.push(new Tt(`${a}[1]`,o[1],`string expected, ${h} found`));break;case"within":h=sn(o[1]),2!==o.length?g.push(new Tt(a,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==h&&g.push(new Tt(`${a}[1]`,o[1],`object expected, ${h} found`))}return g}function Od(r,o){const a=r.key,c=r.style,h=r.styleSpec,g=r.value,y=r.objectKey,x=h[`${o}_${r.layerType}`];if(!x)return[];const C=y.match(/^(.*)-transition$/);if("paint"===o&&C&&x[C[1]]&&x[C[1]].transition)return Vi({key:a,value:g,valueSpec:h.transition,style:c,styleSpec:h});const O=r.valueSpec||x[y];if(!O)return[new Tt(a,g,`unknown property "${y}"`)];let E;if("string"===sn(g)&&Is(O)&&!O.tokens&&(E=/^{([^}]+)}$/.exec(g))){const k=`\`{ "type": "identity", "property": ${E?JSON.stringify(E[1]):'"_"'} }\``;return[new Tt(a,g,`"${y}" does not support interpolation syntax\nUse an identity property function instead: ${k}.`)]}const A=[];return"symbol"===r.layerType&&("text-field"===y&&c&&!c.glyphs&&A.push(new Tt(a,g,'use of "text-field" requires a style "glyphs" property')),"text-font"===y&&dr(xo(g))&&"identity"===eo(g.type)&&A.push(new Tt(a,g,'"text-font" does not support identity functions'))),A.concat(Vi({key:r.key,value:g,valueSpec:O,style:c,styleSpec:h,expressionContext:"property",propertyType:o,propertyKey:y}))}function wo(r){return Od(r,"paint")}function Wh(r){return Od(r,"layout")}function wu(r){let o=[];const a=r.value,c=r.key,h=r.style,g=r.styleSpec;a.type||a.ref||o.push(new Tt(c,a,'either "type" or "ref" is required'));let y=eo(a.type);const x=eo(a.ref);if(a.id){const C=eo(a.id);for(let O=0;O<r.arrayIndex;O++){const E=h.layers[O];eo(E.id)===C&&o.push(new Tt(c,a.id,`duplicate layer id "${a.id}", previously used at line ${E.id.__line__}`))}}if("ref"in a){let C;["type","source","source-layer","filter","layout"].forEach(O=>{O in a&&o.push(new Tt(c,a[O],`"${O}" is prohibited for ref layers`))}),h.layers.forEach(O=>{eo(O.id)===x&&(C=O)}),C?C.ref?o.push(new Tt(c,a.ref,"ref cannot reference another ref layer")):y=eo(C.type):"string"==typeof x&&o.push(new Tt(c,a.ref,`ref layer "${x}" not found`))}else if("background"!==y&&"sky"!==y)if(a.source){const C=h.sources&&h.sources[a.source],O=C&&eo(C.type);C?"vector"===O&&"raster"===y?o.push(new Tt(c,a.source,`layer "${a.id}" requires a raster source`)):"raster"===O&&"raster"!==y?o.push(new Tt(c,a.source,`layer "${a.id}" requires a vector source`)):"vector"!==O||a["source-layer"]?"raster-dem"===O&&"hillshade"!==y?o.push(new Tt(c,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==y||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||"geojson"===O&&C.lineMetrics||o.push(new Tt(c,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Tt(c,a,`layer "${a.id}" must specify a "source-layer"`)):o.push(new Tt(c,a.source,`source "${a.source}" not found`))}else o.push(new Tt(c,a,'missing required property "source"'));return o=o.concat(aa({key:c,value:a,valueSpec:g.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vi({key:`${c}.type`,value:a.type,valueSpec:g.layer.type,style:r.style,styleSpec:r.styleSpec,object:a,objectKey:"type"}),filter:C=>Ko(ea({layerType:y},C)),layout:C=>aa({layer:a,key:C.key,value:C.value,valueSpec:{},style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":O=>Wh(ea({layerType:y},O))}}),paint:C=>aa({layer:a,key:C.key,value:C.value,valueSpec:{},style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":O=>wo(ea({layerType:y},O))}})}})),o}function uo(r){const o=r.value,a=r.key,c=sn(o);return"string"!==c?[new Tt(a,o,`string expected, ${c} found`)]:[]}const vf={promoteId:function({key:r,value:o}){if("string"===sn(o))return uo({key:r,value:o});{const a=[];for(const c in o)a.push(...uo({key:`${r}.${c}`,value:o[c]}));return a}}};function qh(r){const o=r.value,a=r.key,c=r.styleSpec,h=r.style;if(!o.type)return[new Tt(a,o,'"type" is required')];const g=eo(o.type);let y;switch(g){case"vector":case"raster":case"raster-dem":return y=aa({key:a,value:o,valueSpec:c[`source_${g.replace("-","_")}`],style:r.style,styleSpec:c,objectElementValidators:vf}),y;case"geojson":if(y=aa({key:a,value:o,valueSpec:c.source_geojson,style:h,styleSpec:c,objectElementValidators:vf}),o.cluster)for(const x in o.clusterProperties){const[C,O]=o.clusterProperties[x],E="string"==typeof C?[C,["accumulated"],["get",x]]:C;y.push(...mo({key:`${a}.${x}.map`,value:O,expressionContext:"cluster-map"})),y.push(...mo({key:`${a}.${x}.reduce`,value:E,expressionContext:"cluster-reduce"}))}return y;case"video":return aa({key:a,value:o,valueSpec:c.source_video,style:h,styleSpec:c});case"image":return aa({key:a,value:o,valueSpec:c.source_image,style:h,styleSpec:c});case"canvas":return[new Tt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $h({key:`${a}.type`,value:o.type,valueSpec:{values:Bc(c)},style:h,styleSpec:c})}}function Bc(r){return r.source.reduce((o,a)=>{const c=r[a];return"enum"===c.type.type&&(o=o.concat(Object.keys(c.type.values))),o},[])}function hr(r){const o=r.value,a=r.styleSpec,c=a.light,h=r.style;let g=[];const y=sn(o);if(void 0===o)return g;if("object"!==y)return g=g.concat([new Tt("light",o,`object expected, ${y} found`)]),g;for(const x in o){const C=x.match(/^(.*)-transition$/);g=g.concat(C&&c[C[1]]&&c[C[1]].transition?Vi({key:x,value:o[x],valueSpec:a.transition,style:h,styleSpec:a}):c[x]?Vi({key:x,value:o[x],valueSpec:c[x],style:h,styleSpec:a}):[new Tt(x,o[x],`unknown property "${x}"`)])}return g}function Zh(r){const o=r.value,a=r.key,c=r.style,h=r.styleSpec,g=h.terrain;let y=[];const x=sn(o);if(void 0===o)return y;if("object"!==x)return y=y.concat([new Tt("terrain",o,`object expected, ${x} found`)]),y;for(const C in o){const O=C.match(/^(.*)-transition$/);y=y.concat(O&&g[O[1]]&&g[O[1]].transition?Vi({key:C,value:o[C],valueSpec:h.transition,style:c,styleSpec:h}):g[C]?Vi({key:C,value:o[C],valueSpec:g[C],style:c,styleSpec:h}):[new Tt(C,o[C],`unknown property "${C}"`)])}if(o.source){const C=c.sources&&c.sources[o.source],O=C&&eo(C.type);C?"raster-dem"!==O&&y.push(new Tt(a,o.source,`terrain cannot be used with a source of type ${String(O)}, it only be used with a "raster-dem" source type`)):y.push(new Tt(a,o.source,`source "${o.source}" not found`))}else y.push(new Tt(a,o,'terrain is missing required property "source"'));return y}function Cu(r){const o=r.value,a=r.style,c=r.styleSpec,h=c.fog;let g=[];const y=sn(o);if(void 0===o)return g;if("object"!==y)return g=g.concat([new Tt("fog",o,`object expected, ${y} found`)]),g;for(const x in o){const C=x.match(/^(.*)-transition$/);g=g.concat(C&&h[C[1]]&&h[C[1]].transition?Vi({key:x,value:o[x],valueSpec:c.transition,style:a,styleSpec:c}):h[x]?Vi({key:x,value:o[x],valueSpec:h[x],style:a,styleSpec:c}):[new Tt(x,o[x],`unknown property "${x}"`)])}return g}const xf={"*":()=>[],array:im,boolean:function(r){const o=r.value,a=r.key,c=sn(o);return"boolean"!==c?[new Tt(a,o,`boolean expected, ${c} found`)]:[]},number:vd,color:function(r){const o=r.key,a=r.value,c=sn(a);return"string"!==c?[new Tt(o,a,`color expected, ${c} found`)]:null===Qp(a)?[new Tt(o,a,`color expected, "${a}" found`)]:[]},enum:$h,filter:Ko,function:xd,layer:wu,object:aa,source:qh,light:hr,terrain:Zh,fog:Cu,string:uo,formatted:function(r){return 0===uo(r).length?[]:mo(r)},resolvedImage:function(r){return 0===uo(r).length?[]:mo(r)},projection:function(r){const o=r.value,a=r.styleSpec,c=a.projection,h=r.style;let g=[];const y=sn(o);if("object"===y)for(const x in o)g=g.concat(Vi({key:x,value:o[x],valueSpec:c[x],style:h,styleSpec:a}));else"string"!==y&&(g=g.concat([new Tt("projection",o,`object or string expected, ${y} found`)]));return g}};function Vi(r){const o=r.value,a=r.valueSpec,c=r.styleSpec;return a.expression&&dr(eo(o))?xd(r):a.expression&&vu(xo(o))?mo(r):a.type&&xf[a.type]?xf[a.type](r):aa(ea({},r,{valueSpec:a.type?c[a.type]:a}))}function bf(r){const o=r.value,a=r.key,c=uo(r);return c.length||(-1===o.indexOf("{fontstack}")&&c.push(new Tt(a,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&c.push(new Tt(a,o,'"glyphs" url must include a "{range}" token'))),c}function Td(r,o=$e){return ks(Vi({key:"",value:r,valueSpec:o.$root,styleSpec:o,style:r,objectElementValidators:{glyphs:bf,"*":()=>[]}}))}const vn=r=>ks(wo(r)),wf=r=>ks(Wh(r));function ks(r){return r.slice().sort((o,a)=>o.line&&a.line?o.line-a.line:0)}function Cf(r,o){let a=!1;if(o&&o.length)for(const c of o)r.fire(new Sa(new Error(c.message))),a=!0;return a}var rm=Ns,Rs=3;function Ns(r,o,a){var c=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var h=new Int32Array(this.arrayBuffer);r=h[0],this.d=(o=h[1])+2*(a=h[2]);for(var g=0;g<this.d*this.d;g++){var y=h[Rs+g],x=h[Rs+g+1];c.push(y===x?null:h.subarray(y,x))}var C=h[Rs+c.length+1];this.keys=h.subarray(h[Rs+c.length],C),this.bboxes=h.subarray(C),this.insert=this._insertReadonly}else{this.d=o+2*a;for(var O=0;O<this.d*this.d;O++)c.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=a,this.scale=o/r,this.uid=0;var E=a/o*r;this.min=-E,this.max=r+E}Ns.prototype.insert=function(r,o,a,c,h){this._forEachCell(o,a,c,h,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(h)},Ns.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ns.prototype._insertCell=function(r,o,a,c,h,g){this.cells[h].push(g)},Ns.prototype.query=function(r,o,a,c,h){var g=this.min,y=this.max;if(r<=g&&o<=g&&y<=a&&y<=c&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(r,o,a,c,this._queryCell,x,{},h),x},Ns.prototype._queryCell=function(r,o,a,c,h,g,y,x){var C=this.cells[h];if(null!==C)for(var O=this.keys,E=this.bboxes,A=0;A<C.length;A++){var k=C[A];if(void 0===y[k]){var F=4*k;(x?x(E[F+0],E[F+1],E[F+2],E[F+3]):r<=E[F+2]&&o<=E[F+3]&&a>=E[F+0]&&c>=E[F+1])?(y[k]=!0,g.push(O[k])):y[k]=!1}}},Ns.prototype._forEachCell=function(r,o,a,c,h,g,y,x){for(var C=this._convertToCellCoord(r),O=this._convertToCellCoord(o),E=this._convertToCellCoord(a),A=this._convertToCellCoord(c),k=C;k<=E;k++)for(var F=O;F<=A;F++){var L=this.d*F+k;if((!x||x(this._convertFromCellCoord(k),this._convertFromCellCoord(F),this._convertFromCellCoord(k+1),this._convertFromCellCoord(F+1)))&&h.call(this,r,o,a,c,L,g,y,x))return}},Ns.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Ns.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Ns.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,o=Rs+this.cells.length+1+1,a=0,c=0;c<this.cells.length;c++)a+=this.cells[c].length;var h=new Int32Array(o+a+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var g=o,y=0;y<r.length;y++){var x=r[y];h[Rs+y]=g,h.set(x,g),g+=x.length}return h[Rs+r.length]=g,h.set(this.keys,g),h[Rs+r.length+1]=g+=this.keys.length,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer};var ql=rr(rm);const Dd={};function Oe(r,o,a={}){Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),Dd[o]={klass:r,omit:a.omit||[]}}Oe(Object,"Object"),ql.serialize=function(r,o){const a=r.toArrayBuffer();return o&&o.push(a),{buffer:a}},ql.deserialize=function(r){return new ql(r.buffer)},Object.defineProperty(ql,"name",{value:"Grid"}),Oe(ql,"Grid"),Oe(di,"Color"),Oe(Error,"Error"),Oe(jr,"AJAXError"),Oe(Ds,"ResolvedImage"),Oe(Uh,"StylePropertyFunction"),Oe(md,"StyleExpression",{omit:["_evaluator"]}),Oe(_d,"ZoomDependentExpression"),Oe(mf,"ZoomConstantExpression"),Oe(Ps,"CompoundExpression",{omit:["_evaluate"]});for(const r in Nc)Dd[Nc[r]._classRegistryKey]||Oe(Nc[r],`Expression${r}`);function Nn(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function Wt(r){return Xe.ImageBitmap&&r instanceof Xe.ImageBitmap}function Gt(r,o){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(Nn(r)||Wt(r))return o&&o.push(r),r;if(ArrayBuffer.isView(r)){const a=r;return o&&o.push(a.buffer),a}if(r instanceof Xe.ImageData)return o&&o.push(r.data.buffer),r;if(Array.isArray(r)){const a=[];for(const c of r)a.push(Gt(c,o));return a}if("object"==typeof r){const a=r.constructor,c=a._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const h=a.serialize?a.serialize(r,o):{};if(!a.serialize){for(const g in r)r.hasOwnProperty(g)&&(Dd[c].omit.indexOf(g)>=0||(h[g]=Gt(r[g],o)));r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==c&&(h.$name=c),h}throw new Error("can't serialize object of type "+typeof r)}function Ui(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Nn(r)||Wt(r)||ArrayBuffer.isView(r)||r instanceof Xe.ImageData)return r;if(Array.isArray(r))return r.map(Ui);if("object"==typeof r){const o=r.$name||"Object",{klass:a}=Dd[o];if(!a)throw new Error(`can't deserialize unregistered class ${o}`);if(a.deserialize)return a.deserialize(r);const c=Object.create(a.prototype);for(const h of Object.keys(r))"$name"!==h&&(c[h]=Ui(r[h]));return c}throw new Error("can't deserialize object of type "+typeof r)}const wt={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Zl(r){for(const o of r)if(Mu(o.charCodeAt(0)))return!0;return!1}function la(r){for(const o of r)if(!Pd(o.charCodeAt(0)))return!1;return!0}function Pd(r){return!(wt.Arabic(r)||wt["Arabic Supplement"](r)||wt["Arabic Extended-A"](r)||wt["Arabic Presentation Forms-A"](r)||wt["Arabic Presentation Forms-B"](r))}function Mu(r){return!(746!==r&&747!==r&&(r<4352||!(wt["Bopomofo Extended"](r)||wt.Bopomofo(r)||wt["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||wt["CJK Compatibility Ideographs"](r)||wt["CJK Compatibility"](r)||wt["CJK Radicals Supplement"](r)||wt["CJK Strokes"](r)||!(!wt["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||wt["CJK Unified Ideographs Extension A"](r)||wt["CJK Unified Ideographs"](r)||wt["Enclosed CJK Letters and Months"](r)||wt["Hangul Compatibility Jamo"](r)||wt["Hangul Jamo Extended-A"](r)||wt["Hangul Jamo Extended-B"](r)||wt["Hangul Jamo"](r)||wt["Hangul Syllables"](r)||wt.Hiragana(r)||wt["Ideographic Description Characters"](r)||wt.Kanbun(r)||wt["Kangxi Radicals"](r)||wt["Katakana Phonetic Extensions"](r)||wt.Katakana(r)&&12540!==r||!(!wt["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!wt["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||wt["Unified Canadian Aboriginal Syllabics"](r)||wt["Unified Canadian Aboriginal Syllabics Extended"](r)||wt["Vertical Forms"](r)||wt["Yijing Hexagram Symbols"](r)||wt["Yi Syllables"](r)||wt["Yi Radicals"](r))))}function Mf(r){return!(Mu(r)||(o=r,wt["Latin-1 Supplement"](o)&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||wt["General Punctuation"](o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||wt["Letterlike Symbols"](o)||wt["Number Forms"](o)||wt["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||wt["Control Pictures"](o)&&9251!==o||wt["Optical Character Recognition"](o)||wt["Enclosed Alphanumerics"](o)||wt["Geometric Shapes"](o)||wt["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||wt["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||wt["CJK Symbols and Punctuation"](o)||wt.Katakana(o)||wt["Private Use Area"](o)||wt["CJK Compatibility Forms"](o)||wt["Small Form Variants"](o)||wt["Halfwidth and Fullwidth Forms"](o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o}function sm(r){return r>=1424&&r<=2303||wt["Arabic Presentation Forms-A"](r)||wt["Arabic Presentation Forms-B"](r)}function Of(r,o){return!(!o&&sm(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||wt.Khmer(r))}function pr(r){for(const o of r)if(sm(o.charCodeAt(0)))return!0;return!1}const Fs="deferred",Ed="loading",fl="loaded";let Rr=null,f="unavailable",l=null;const d=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(f="error"),Rr&&Rr(r)};function _(){v.fire(new Bl("pluginStateChange",{pluginStatus:f,pluginURL:l}))}const v=new lu,w=function(){return f},T=function(){if(f!==Fs||!l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");f=Ed,_(),l&&al({url:l},r=>{r?d(r):(f=fl,_())})},D={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>f===fl||null!=D.applyArabicShaping,isLoading:()=>f===Ed,setState(r){f=r.pluginStatus,l=r.pluginURL},isParsed:()=>null!=D.applyArabicShaping&&null!=D.processBidirectionalText&&null!=D.processStyledBidirectionalText,getPluginURL:()=>l};class S{constructor(o,a){this.zoom=o,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return function(a,c){for(const h of a)if(!Of(h.charCodeAt(0),c))return!1;return!0}(o,D.isLoaded())}}class N{constructor(o,a){this.property=o,this.value=a,this.expression=function(c,h){if(dr(c))return new Uh(c,h);if(vu(c)){const g=yd(c,h);if("error"===g.result)throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=c;return"string"==typeof c&&"color"===h.type&&(g=di.parse(c)),{kind:"constant",evaluate:()=>g}}}(void 0===a?o.specification.default:a,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,a,c){return this.property.possiblyEvaluate(this,o,a,c)}}class R{constructor(o){this.property=o,this.value=new N(o,void 0)}transitioned(o,a){return new H(this.property,this.value,a,Bi({},o.transition,this.transition),o.now)}untransitioned(){return new H(this.property,this.value,null,{},0)}}class B{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Pr(this._values[o].value.value)}setValue(o,a){this._values.hasOwnProperty(o)||(this._values[o]=new R(this._values[o].property)),this._values[o].value=new N(this._values[o].property,null===a?void 0:Pr(a))}getTransition(o){return Pr(this._values[o].transition)}setTransition(o,a){this._values.hasOwnProperty(o)||(this._values[o]=new R(this._values[o].property)),this._values[o].transition=Pr(a)||void 0}serialize(){const o={};for(const a of Object.keys(this._values)){const c=this.getValue(a);void 0!==c&&(o[a]=c);const h=this.getTransition(a);void 0!==h&&(o[`${a}-transition`]=h)}return o}transitioned(o,a){const c=new X(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].transitioned(o,a._values[h]);return c}untransitioned(){const o=new X(this._properties);for(const a of Object.keys(this._values))o._values[a]=this._values[a].untransitioned();return o}}class H{constructor(o,a,c,h,g){const y=h.delay||0,x=h.duration||0;g=g||0,this.property=o,this.value=a,this.begin=g+y,this.end=this.begin+x,o.specification.transition&&(h.delay||h.duration)&&(this.prior=c)}possiblyEvaluate(o,a,c){const h=o.now||0,g=this.value.possiblyEvaluate(o,a,c),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(o,a,c);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(o,a,c),g,Fl(x))}}return g}}class X{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,a,c){const h=new te(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(o,a,c);return h}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Y{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return Pr(this._values[o].value)}setValue(o,a){this._values[o]=new N(this._values[o].property,null===a?void 0:Pr(a))}serialize(){const o={};for(const a of Object.keys(this._values)){const c=this.getValue(a);void 0!==c&&(o[a]=c)}return o}possiblyEvaluate(o,a,c){const h=new te(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(o,a,c);return h}}class K{constructor(o,a,c){this.property=o,this.value=a,this.parameters=c}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,a,c,h){return this.property.evaluate(this.value,this.parameters,o,a,c,h)}}class te{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class z{constructor(o){this.specification=o}possiblyEvaluate(o,a){return o.expression.evaluate(a)}interpolate(o,a,c){const h=Xr[this.specification.type];return h?h(o,a,c):o}}class Z{constructor(o,a){this.specification=o,this.overrides=a}possiblyEvaluate(o,a,c,h){return new K(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(a,null,{},c,h)}:o.expression,a)}interpolate(o,a,c){if("constant"!==o.value.kind||"constant"!==a.value.kind)return o;if(void 0===o.value.value||void 0===a.value.value)return new K(this,{kind:"constant",value:void 0},o.parameters);const h=Xr[this.specification.type];return h?new K(this,{kind:"constant",value:h(o.value.value,a.value.value,c)},o.parameters):o}evaluate(o,a,c,h,g,y){return"constant"===o.kind?o.value:o.evaluate(a,c,h,g,y)}}class ie{constructor(o){this.specification=o}possiblyEvaluate(o,a,c,h){return!!o.expression.evaluate(a,null,{},c,h)}interpolate(){return!1}}class ne{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new S(0,{});for(const c in o){const h=o[c];h.specification.overridable&&this.overridableProperties.push(c);const g=this.defaultPropertyValues[c]=new N(h,void 0),y=this.defaultTransitionablePropertyValues[c]=new R(h);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=g.possiblyEvaluate(a)}}}function fe(r,o){return 256*(r=_n(Math.floor(r),0,255))+_n(Math.floor(o),0,255)}Oe(Z,"DataDrivenProperty"),Oe(z,"DataConstantProperty"),Oe(ie,"ColorRampProperty");const me={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ge{constructor(o,a){this._structArray=o,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Me{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,a){return o._trim(),a&&(o.isTransferred=!0,a.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const a=Object.create(this.prototype);return a.arrayBuffer=o.arrayBuffer,a.length=o.length,a.capacity=o.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ce(r,o=1){let a=0,c=0;return{members:r.map(h=>{const g=me[h.type].BYTES_PER_ELEMENT,y=a=Re(a,Math.max(o,g)),x=h.components||1;return c=Math.max(c,g),a+=g*x,{name:h.name,type:h.type,components:x,offset:y}}),size:Re(a,Math.max(c,o)),alignment:o}}function Re(r,o){return Math.ceil(r/o)*o}class ot extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a){const c=this.length;return this.resize(c+1),this.emplace(c,o,a)}emplace(o,a,c){const h=2*o;return this.int16[h+0]=a,this.int16[h+1]=c,o}}ot.prototype.bytesPerElement=4,Oe(ot,"StructArrayLayout2i4");class Se extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,a,c)}emplace(o,a,c,h){const g=3*o;return this.int16[g+0]=a,this.int16[g+1]=c,this.int16[g+2]=h,o}}Se.prototype.bytesPerElement=6,Oe(Se,"StructArrayLayout3i6");class He extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,c,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,c,h)}emplace(o,a,c,h,g){const y=4*o;return this.int16[y+0]=a,this.int16[y+1]=c,this.int16[y+2]=h,this.int16[y+3]=g,o}}He.prototype.bytesPerElement=8,Oe(He,"StructArrayLayout4i8");class Le extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,o,a,c,h,g,y,x)}emplace(o,a,c,h,g,y,x,C){const O=6*o,E=12*o,A=3*o;return this.int16[O+0]=a,this.int16[O+1]=c,this.uint8[E+4]=h,this.uint8[E+5]=g,this.uint8[E+6]=y,this.uint8[E+7]=x,this.float32[A+2]=C,o}}Le.prototype.bytesPerElement=12,Oe(Le,"StructArrayLayout2i4ub1f12");class rt extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,c,h)}emplace(o,a,c,h,g){const y=4*o;return this.float32[y+0]=a,this.float32[y+1]=c,this.float32[y+2]=h,this.float32[y+3]=g,o}}rt.prototype.bytesPerElement=16,Oe(rt,"StructArrayLayout4f16");class ke extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,a,c,h,g)}emplace(o,a,c,h,g,y){const x=6*o,C=3*o;return this.uint16[x+0]=a,this.uint16[x+1]=c,this.uint16[x+2]=h,this.uint16[x+3]=g,this.float32[C+2]=y,o}}ke.prototype.bytesPerElement=12,Oe(ke,"StructArrayLayout4ui1f12");class Ge extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,c,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,c,h)}emplace(o,a,c,h,g){const y=4*o;return this.uint16[y+0]=a,this.uint16[y+1]=c,this.uint16[y+2]=h,this.uint16[y+3]=g,o}}Ge.prototype.bytesPerElement=8,Oe(Ge,"StructArrayLayout4ui8");class st extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,o,a,c,h,g,y)}emplace(o,a,c,h,g,y,x){const C=6*o;return this.int16[C+0]=a,this.int16[C+1]=c,this.int16[C+2]=h,this.int16[C+3]=g,this.int16[C+4]=y,this.int16[C+5]=x,o}}st.prototype.bytesPerElement=12,Oe(st,"StructArrayLayout6i12");class Qe extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y,x,C,O,E,A,k){const F=this.length;return this.resize(F+1),this.emplace(F,o,a,c,h,g,y,x,C,O,E,A,k)}emplace(o,a,c,h,g,y,x,C,O,E,A,k,F){const L=12*o;return this.int16[L+0]=a,this.int16[L+1]=c,this.int16[L+2]=h,this.int16[L+3]=g,this.uint16[L+4]=y,this.uint16[L+5]=x,this.uint16[L+6]=C,this.uint16[L+7]=O,this.int16[L+8]=E,this.int16[L+9]=A,this.int16[L+10]=k,this.int16[L+11]=F,o}}Qe.prototype.bytesPerElement=24,Oe(Qe,"StructArrayLayout4i4ui4i24");class ut extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y){const x=this.length;return this.resize(x+1),this.emplace(x,o,a,c,h,g,y)}emplace(o,a,c,h,g,y,x){const C=10*o,O=5*o;return this.int16[C+0]=a,this.int16[C+1]=c,this.int16[C+2]=h,this.float32[O+2]=g,this.float32[O+3]=y,this.float32[O+4]=x,o}}ut.prototype.bytesPerElement=20,Oe(ut,"StructArrayLayout3i3f20");class Rt extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const a=this.length;return this.resize(a+1),this.emplace(a,o)}emplace(o,a){return this.uint32[1*o+0]=a,o}}Rt.prototype.bytesPerElement=4,Oe(Rt,"StructArrayLayout1ul4");class Xt extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y,x,C,O,E,A,k,F){const L=this.length;return this.resize(L+1),this.emplace(L,o,a,c,h,g,y,x,C,O,E,A,k,F)}emplace(o,a,c,h,g,y,x,C,O,E,A,k,F,L){const V=20*o,q=10*o;return this.int16[V+0]=a,this.int16[V+1]=c,this.int16[V+2]=h,this.int16[V+3]=g,this.int16[V+4]=y,this.float32[q+3]=x,this.float32[q+4]=C,this.float32[q+5]=O,this.float32[q+6]=E,this.int16[V+14]=A,this.uint32[q+8]=k,this.uint16[V+18]=F,this.uint16[V+19]=L,o}}Xt.prototype.bytesPerElement=40,Oe(Xt,"StructArrayLayout5i4f1i1ul2ui40");class Et extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,o,a,c,h,g,y,x)}emplace(o,a,c,h,g,y,x,C){const O=8*o;return this.int16[O+0]=a,this.int16[O+1]=c,this.int16[O+2]=h,this.int16[O+4]=g,this.int16[O+5]=y,this.int16[O+6]=x,this.int16[O+7]=C,o}}Et.prototype.bytesPerElement=16,Oe(Et,"StructArrayLayout3i2i2i16");class jt extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,a,c,h,g)}emplace(o,a,c,h,g,y){const x=4*o,C=8*o;return this.float32[x+0]=a,this.float32[x+1]=c,this.float32[x+2]=h,this.int16[C+6]=g,this.int16[C+7]=y,o}}jt.prototype.bytesPerElement=16,Oe(jt,"StructArrayLayout2f1f2i16");class Mn extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,c,h)}emplace(o,a,c,h,g){const y=12*o,x=3*o;return this.uint8[y+0]=a,this.uint8[y+1]=c,this.float32[x+1]=h,this.float32[x+2]=g,o}}Mn.prototype.bytesPerElement=12,Oe(Mn,"StructArrayLayout2ub2f12");class bn extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,a,c)}emplace(o,a,c,h){const g=3*o;return this.float32[g+0]=a,this.float32[g+1]=c,this.float32[g+2]=h,o}}bn.prototype.bytesPerElement=12,Oe(bn,"StructArrayLayout3f12");class It extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,o,a,c)}emplace(o,a,c,h){const g=3*o;return this.uint16[g+0]=a,this.uint16[g+1]=c,this.uint16[g+2]=h,o}}It.prototype.bytesPerElement=6,Oe(It,"StructArrayLayout3ui6");class Vn extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q,ee,le,Q,ae,he){const ue=this.length;return this.resize(ue+1),this.emplace(ue,o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q,ee,le,Q,ae,he)}emplace(o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q,ee,le,Q,ae,he,ue){const we=30*o,Pe=15*o,je=60*o;return this.int16[we+0]=a,this.int16[we+1]=c,this.int16[we+2]=h,this.float32[Pe+2]=g,this.float32[Pe+3]=y,this.uint16[we+8]=x,this.uint16[we+9]=C,this.uint32[Pe+5]=O,this.uint32[Pe+6]=E,this.uint32[Pe+7]=A,this.uint16[we+16]=k,this.uint16[we+17]=F,this.uint16[we+18]=L,this.float32[Pe+10]=V,this.float32[Pe+11]=q,this.uint8[je+48]=ee,this.uint8[je+49]=le,this.uint8[je+50]=Q,this.uint32[Pe+13]=ae,this.int16[we+28]=he,this.uint8[je+58]=ue,o}}Vn.prototype.bytesPerElement=60,Oe(Vn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ti extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q,ee,le,Q,ae,he,ue,we,Pe,je,nt,Fe,qe,Ze,et){const at=this.length;return this.resize(at+1),this.emplace(at,o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q,ee,le,Q,ae,he,ue,we,Pe,je,nt,Fe,qe,Ze,et)}emplace(o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q,ee,le,Q,ae,he,ue,we,Pe,je,nt,Fe,qe,Ze,et,at){const Ue=38*o,_t=19*o;return this.int16[Ue+0]=a,this.int16[Ue+1]=c,this.int16[Ue+2]=h,this.float32[_t+2]=g,this.float32[_t+3]=y,this.int16[Ue+8]=x,this.int16[Ue+9]=C,this.int16[Ue+10]=O,this.int16[Ue+11]=E,this.int16[Ue+12]=A,this.int16[Ue+13]=k,this.uint16[Ue+14]=F,this.uint16[Ue+15]=L,this.uint16[Ue+16]=V,this.uint16[Ue+17]=q,this.uint16[Ue+18]=ee,this.uint16[Ue+19]=le,this.uint16[Ue+20]=Q,this.uint16[Ue+21]=ae,this.uint16[Ue+22]=he,this.uint16[Ue+23]=ue,this.uint16[Ue+24]=we,this.uint16[Ue+25]=Pe,this.uint16[Ue+26]=je,this.uint16[Ue+27]=nt,this.uint16[Ue+28]=Fe,this.uint32[_t+15]=qe,this.float32[_t+16]=Ze,this.float32[_t+17]=et,this.float32[_t+18]=at,o}}ti.prototype.bytesPerElement=76,Oe(ti,"StructArrayLayout3i2f6i15ui1ul3f76");class Un extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const a=this.length;return this.resize(a+1),this.emplace(a,o)}emplace(o,a){return this.float32[1*o+0]=a,o}}Un.prototype.bytesPerElement=4,Oe(Un,"StructArrayLayout1f4");class ni extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,c,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,o,a,c,h,g)}emplace(o,a,c,h,g,y){const x=5*o;return this.float32[x+0]=a,this.float32[x+1]=c,this.float32[x+2]=h,this.float32[x+3]=g,this.float32[x+4]=y,o}}ni.prototype.bytesPerElement=20,Oe(ni,"StructArrayLayout5f20");class Lo extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,c,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,c,h)}emplace(o,a,c,h,g){const y=6*o;return this.uint32[3*o+0]=a,this.uint16[y+2]=c,this.uint16[y+3]=h,this.uint16[y+4]=g,o}}Lo.prototype.bytesPerElement=12,Oe(Lo,"StructArrayLayout1ul3ui12");class no extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a){const c=this.length;return this.resize(c+1),this.emplace(c,o,a)}emplace(o,a,c){const h=2*o;return this.uint16[h+0]=a,this.uint16[h+1]=c,o}}no.prototype.bytesPerElement=4,Oe(no,"StructArrayLayout2ui4");class fs extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const a=this.length;return this.resize(a+1),this.emplace(a,o)}emplace(o,a){return this.uint16[1*o+0]=a,o}}fs.prototype.bytesPerElement=2,Oe(fs,"StructArrayLayout1ui2");class Kr extends Me{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a){const c=this.length;return this.resize(c+1),this.emplace(c,o,a)}emplace(o,a,c){const h=2*o;return this.float32[h+0]=a,this.float32[h+1]=c,o}}Kr.prototype.bytesPerElement=8,Oe(Kr,"StructArrayLayout2f8");class mi extends ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}mi.prototype.size=40;class Xn extends Xt{get(o){return new mi(this,o)}}Oe(Xn,"CollisionBoxArray");class jn extends ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}jn.prototype.size=60;class qi extends Vn{get(o){return new jn(this,o)}}Oe(qi,"PlacedSymbolArray");class Yo extends ge{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Yo.prototype.size=76;class Mi extends ti{get(o){return new Yo(this,o)}}Oe(Mi,"SymbolInstanceArray");class ji extends Un{getoffsetX(o){return this.float32[1*o+0]}}Oe(ji,"GlyphOffsetArray");class Sd extends ot{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Oe(Sd,"SymbolLineVertexArray");class ca extends ge{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ca.prototype.size=12;class Jl extends Lo{get(o){return new ca(this,o)}}Oe(Jl,"FeatureIndexArray");class ua extends no{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Oe(ua,"FillExtrusionCentroidArray");const da=Ce([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Fa=Ce([{name:"a_dash",components:4,type:"Uint16"}]);var Ad={exports:{}},lm=function(r,o){var a,c,h,g,y,x,C,O;for(c=r.length-(a=3&r.length),h=o,y=3432918353,x=461845907,O=0;O<c;)C=255&r.charCodeAt(O)|(255&r.charCodeAt(++O))<<8|(255&r.charCodeAt(++O))<<16|(255&r.charCodeAt(++O))<<24,++O,h=27492+(65535&(g=5*(65535&(h=(h^=C=(65535&(C=(C=(65535&C)*y+(((C>>>16)*y&65535)<<16)&4294967295)<<15|C>>>17))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(C=0,a){case 3:C^=(255&r.charCodeAt(O+2))<<16;case 2:C^=(255&r.charCodeAt(O+1))<<8;case 1:h^=C=(65535&(C=(C=(65535&(C^=255&r.charCodeAt(O)))*y+(((C>>>16)*y&65535)<<16)&4294967295)<<15|C>>>17))*x+(((C>>>16)*x&65535)<<16)&4294967295}return h^=r.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0},ux=function(r,o){for(var a,c=r.length,h=o^c,g=0;c>=4;)a=1540483477*(65535&(a=255&r.charCodeAt(g)|(255&r.charCodeAt(++g))<<8|(255&r.charCodeAt(++g))<<16|(255&r.charCodeAt(++g))<<24))+((1540483477*(a>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),c-=4,++g;switch(c){case 3:h^=(255&r.charCodeAt(g+2))<<16;case 2:h^=(255&r.charCodeAt(g+1))<<8;case 1:h=1540483477*(65535&(h^=255&r.charCodeAt(g)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};Ad.exports=lm,Ad.exports.murmur3=lm,Ad.exports.murmur2=ux;var kd=rr(Ad.exports);class gl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,a,c,h){this.ids.push(Q0(o)),this.positions.push(a,c,h)}getPositions(o){const a=Q0(o);let c=0,h=this.ids.length-1;for(;c<h;){const y=c+h>>1;this.ids[y]>=a?h=y:c=y+1}const g=[];for(;this.ids[c]===a;)g.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return g}static serialize(o,a){const c=new Float64Array(o.ids),h=new Uint32Array(o.positions);return Tf(c,h,0,c.length-1),a&&a.push(c.buffer,h.buffer),{ids:c,positions:h}}static deserialize(o){const a=new gl;return a.ids=o.ids,a.positions=o.positions,a.indexed=!0,a}}function Q0(r){const o=+r;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:kd(String(r))}function Tf(r,o,a,c){for(;a<c;){const h=r[a+c>>1];let g=a-1,y=c+1;for(;;){do{g++}while(r[g]<h);do{y--}while(r[y]>h);if(g>=y)break;Jh(r,g,y),Jh(o,3*g,3*y),Jh(o,3*g+1,3*y+1),Jh(o,3*g+2,3*y+2)}y-a<c-y?(Tf(r,o,a,y),a=y+1):(Tf(r,o,y+1,c),c=y)}}function Jh(r,o,a){const c=r[o];r[o]=r[a],r[a]=c}Oe(gl,"FeaturePositionMap");class gs{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,a),this.initialized=!0),!!this.location}}class Df extends gs{constructor(o){super(o),this.current=0}set(o,a,c){this.fetchUniformLocation(o,a)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class io extends gs{constructor(o){super(o),this.current=[0,0,0,0]}set(o,a,c){this.fetchUniformLocation(o,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class Pf extends gs{constructor(o){super(o),this.current=di.transparent}set(o,a,c){this.fetchUniformLocation(o,a)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const dx=new Float32Array(16),ey=new Float32Array(9),Vc=new Float32Array(4);function Uc(r){return[fe(255*r.r,255*r.g),fe(255*r.b,255*r.a)]}class ml{constructor(o,a,c){this.value=o,this.uniformNames=a.map(h=>`u_${h}`),this.type=c}setUniform(o,a,c,h,g){a.set(o,g,h.constantOr(this.value))}getBinding(o,a){return"color"===this.type?new Pf(o):new Df(o)}}class La{constructor(o,a){this.uniformNames=a.map(c=>`u_${c}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,a,c,h,g){const y="u_pattern"===g||"u_dash"===g?this.pattern:"u_pixel_ratio"===g?this.pixelRatio:null;y&&a.set(o,g,y)}getBinding(o,a){return"u_pattern"===a||"u_dash"===a?new io(o):new Df(o)}}class _l{constructor(o,a,c,h){this.expression=o,this.type=c,this.maxValue=0,this.paintVertexAttributes=a.map(g=>({name:`a_${g}`,type:"Float32",components:"color"===c?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(o,a,c,h,g,y){const x=this.paintVertexArray.length,C=this.expression.evaluate(new S(0),a,{},g,h,y);this.paintVertexArray.resize(o),this._setPaintValue(x,o,C)}updatePaintArray(o,a,c,h,g){const y=this.expression.evaluate({zoom:0},c,h,void 0,g);this._setPaintValue(o,a,y)}_setPaintValue(o,a,c){if("color"===this.type){const h=Uc(c);for(let g=o;g<a;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=o;h<a;h++)this.paintVertexArray.emplace(h,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ls{constructor(o,a,c,h,g,y){this.expression=o,this.uniformNames=a.map(x=>`u_${x}_t`),this.type=c,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===c?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(o,a,c,h,g,y){const x=this.expression.evaluate(new S(this.zoom),a,{},g,h,y),C=this.expression.evaluate(new S(this.zoom+1),a,{},g,h,y),O=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(O,o,x,C)}updatePaintArray(o,a,c,h,g){const y=this.expression.evaluate({zoom:this.zoom},c,h,void 0,g),x=this.expression.evaluate({zoom:this.zoom+1},c,h,void 0,g);this._setPaintValue(o,a,y,x)}_setPaintValue(o,a,c,h){if("color"===this.type){const g=Uc(c),y=Uc(h);for(let x=o;x<a;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=o;g<a;g++)this.paintVertexArray.emplace(g,c,h);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,a,c,h,g){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,x=_n(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);a.set(o,g,x)}getBinding(o,a){return new Df(o)}}class Bs{constructor(o,a,c,h,g){this.expression=o,this.layerId=g,this.paintVertexAttributes=("array"===c?Fa:da).members;for(let y=0;y<a.length;++y);this.paintVertexArray=new h}populatePaintArray(o,a,c){const h=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(h,o,a.patterns&&a.patterns[this.layerId],c)}updatePaintArray(o,a,c,h,g,y){this._setPaintValues(o,a,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(o,a,c,h){if(!h||!c)return;const g=h[c];if(!g)return;const{tl:y,br:x,pixelRatio:C}=g;for(let O=o;O<a;O++)this.paintVertexArray.emplace(O,y[0],y[1],x[0],x[1],C)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ou{constructor(o,a,c=(()=>!0)){this.binders={},this._buffers=[];const h=[];for(const g in o.paint._values){if(!c(g))continue;const y=o.paint.get(g);if(!(y instanceof K&&Is(y.property.specification)))continue;const x=cM(g,o.type),C=y.value,O=y.property.specification.type,E=!!y.property.useIntegerZoom,A="line-dasharray"===g||g.endsWith("pattern"),k="line-dasharray"===g&&"constant"!==o.layout.get("line-cap").value.kind;if("constant"!==C.kind||k)if("source"===C.kind||k||A){const F=hx(g,O,"source");this.binders[g]=A?new Bs(C,x,O,F,o.id):new _l(C,x,O,F),h.push(`/a_${g}`)}else{const F=hx(g,O,"composite");this.binders[g]=new Ls(C,x,O,E,a,F),h.push(`/z_${g}`)}else this.binders[g]=A?new La(C.value,x):new ml(C.value,x,O),h.push(`/u_${g}`)}this.cacheKey=h.sort().join("")}getMaxValue(o){const a=this.binders[o];return a instanceof _l||a instanceof Ls?a.maxValue:0}populatePaintArrays(o,a,c,h,g,y){for(const x in this.binders){const C=this.binders[x];(C instanceof _l||C instanceof Ls||C instanceof Bs)&&C.populatePaintArray(o,a,c,h,g,y)}}setConstantPatternPositions(o){for(const a in this.binders){const c=this.binders[a];c instanceof La&&c.setConstantPatternPositions(o)}}updatePaintArrays(o,a,c,h,g,y){let x=!1;for(const C in o){const O=a.getPositions(C);for(const E of O){const A=c.feature(E.index);for(const k in this.binders){const F=this.binders[k];if((F instanceof _l||F instanceof Ls||F instanceof Bs)&&!0===F.expression.isStateDependent){const L=h.paint.get(k);F.expression=L.value,F.updatePaintArray(E.start,E.end,A,o[C],g,y),x=!0}}}}return x}defines(){const o=[];for(const a in this.binders){const c=this.binders[a];(c instanceof ml||c instanceof La)&&o.push(...c.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return o}getBinderAttributes(){const o=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof _l||c instanceof Ls||c instanceof Bs)for(let h=0;h<c.paintVertexAttributes.length;h++)o.push(c.paintVertexAttributes[h].name)}return o}getBinderUniforms(){const o=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof ml||c instanceof La||c instanceof Ls)for(const h of c.uniformNames)o.push(h)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const a=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof ml||h instanceof La||h instanceof Ls)for(const g of h.uniformNames)a.push({name:g,property:c,binding:h.getBinding(o,g)})}return a}setUniforms(o,a,c,h,g){for(const{name:y,property:x,binding:C}of c)this.binders[x].setUniform(o,C,g,h.get(x),y)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const a=this.binders[o];(a instanceof _l||a instanceof Ls||a instanceof Bs)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(o){for(const a in this.binders){const c=this.binders[a];(c instanceof _l||c instanceof Ls||c instanceof Bs)&&c.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const a=this.binders[o];(a instanceof _l||a instanceof Ls||a instanceof Bs)&&a.destroy()}}}class Tu{constructor(o,a,c=(()=>!0)){this.programConfigurations={};for(const h of o)this.programConfigurations[h.id]=new Ou(h,a,c);this.needsUpload=!1,this._featureMap=new gl,this._bufferOffset=0}populatePaintArrays(o,a,c,h,g,y,x){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(o,a,h,g,y,x);void 0!==a.id&&this._featureMap.add(a.id,c,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,a,c,h,g){for(const y of c)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(o,this._featureMap,a,y,h,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const qt={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function cM(r,o){return qt[r]||[r.replace(`${o}-`,"").replace(/-/g,"_")]}const uM={"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke},"line-dasharray":{source:Ge,composite:Ge}},dM={color:{source:Kr,composite:rt},number:{source:Un,composite:Kr}};function hx(r,o,a){const c=uM[r];return c&&c[a]||dM[o][a]}Oe(ml,"ConstantBinder"),Oe(La,"PatternConstantBinder"),Oe(_l,"SourceExpressionBinder"),Oe(Bs,"PatternCompositeBinder"),Oe(Ls,"CompositeExpressionBinder"),Oe(Ou,"ProgramConfiguration",{omit:["_buffers"]}),Oe(Tu,"ProgramConfigurationSet");const px="-transition";class yl extends lu{constructor(o,a){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&"sky"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),a.layout&&(this._unevaluatedLayout=new Y(a.layout)),a.paint)){this._transitionablePaint=new B(a.paint);for(const c in o.paint)this.setPaintProperty(c,o.paint[c],{validate:!1});for(const c in o.layout)this.setLayoutProperty(c,o.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new te(a.paint)}}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,a,c={}){null!=a&&this._validate(wf,`layers.${this.id}.layout.${o}`,o,a,c)||("visibility"!==o?this._unevaluatedLayout.setValue(o,a):this.visibility=a)}getPaintProperty(o){return Ta(o,px)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,a,c={}){if(null!=a&&this._validate(vn,`layers.${this.id}.paint.${o}`,o,a,c))return!1;if(Ta(o,px))return this._transitionablePaint.setTransition(o.slice(0,-11),a||void 0),!1;{const h=this._transitionablePaint._values[o],g=h.value.isDataDriven(),y=h.value;this._transitionablePaint.setValue(o,a),this._handleSpecialPaintPropertyUpdate(o);const x=this._transitionablePaint._values[o].value,C=x.isDataDriven(),O=Ta(o,"pattern")||"line-dasharray"===o;return C||g||O||this._handleOverridablePaintPropertyUpdate(o,y,x)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,a,c){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,a)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Da(o,(a,c)=>!(void 0===a||"layout"===c&&!Object.keys(a).length||"paint"===c&&!Object.keys(a).length))}_validate(o,a,c,h,g={}){return(!g||!1!==g.validate)&&Cf(this,o.call(Td,{key:a,layerType:this.type,objectKey:c,value:h,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const a=this.paint.get(o);if(a instanceof K&&Is(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Gh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const hM=Ce([{name:"a_pos",components:2,type:"Int16"}],4),Xh=Ce([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ho{constructor(o=[]){this.segments=o}prepareSegment(o,a,c,h){let g=this.segments[this.segments.length-1];return o>ho.MAX_VERTEX_ARRAY_LENGTH&&bi(`Max vertices per segment is ${ho.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!g||g.vertexLength+o>ho.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h)&&(g={vertexOffset:a.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},void 0!==h&&(g.sortKey=h),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const o of this.segments)for(const a in o.vaos)o.vaos[a].destroy()}static simpleSegment(o,a,c,h){return new ho([{vertexOffset:o,primitiveOffset:a,vertexLength:c,primitiveLength:h,vaos:{},sortKey:0}])}}ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Oe(ho,"SegmentVector");var Ut=8192;class Ni{constructor(o,a){o&&(a?this.setSouthWest(o).setNorthEast(a):4===o.length?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof $n?new $n(o.lng,o.lat):$n.convert(o),this}setSouthWest(o){return this._sw=o instanceof $n?new $n(o.lng,o.lat):$n.convert(o),this}extend(o){const a=this._sw,c=this._ne;let h,g;if(o instanceof $n)h=o,g=o;else{if(!(o instanceof Ni))return Array.isArray(o)?4===o.length||o.every(Array.isArray)?this.extend(Ni.convert(o)):this.extend($n.convert(o)):"object"==typeof o&&null!==o&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend($n.convert(o)):this;if(h=o._sw,g=o._ne,!h||!g)return this}return a||c?(a.lng=Math.min(h.lng,a.lng),a.lat=Math.min(h.lat,a.lat),c.lng=Math.max(g.lng,c.lng),c.lat=Math.max(g.lat,c.lat)):(this._sw=new $n(h.lng,h.lat),this._ne=new $n(g.lng,g.lat)),this}getCenter(){return new $n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new $n(this.getWest(),this.getNorth())}getSouthEast(){return new $n(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:a,lat:c}=$n.convert(o);let h=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h}static convert(o){return!o||o instanceof Ni?o:new Ni(o)}}var Rd=1e-6,Qo=typeof Float32Array<"u"?Float32Array:Array;function ty(){var r=new Qo(9);return Qo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function zs(r,o,a){var c=o[0],h=o[1],g=o[2],y=o[3],x=o[4],C=o[5],O=o[6],E=o[7],A=o[8],k=a[0],F=a[1],L=a[2],V=a[3],q=a[4],ee=a[5],le=a[6],Q=a[7],ae=a[8];return r[0]=k*c+F*y+L*O,r[1]=k*h+F*x+L*E,r[2]=k*g+F*C+L*A,r[3]=V*c+q*y+ee*O,r[4]=V*h+q*x+ee*E,r[5]=V*g+q*C+ee*A,r[6]=le*c+Q*y+ae*O,r[7]=le*h+Q*x+ae*E,r[8]=le*g+Q*C+ae*A,r}function fr(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ef(r,o){var a=o[0],c=o[1],h=o[2],g=o[3],y=o[4],x=o[5],C=o[6],O=o[7],E=o[8],A=o[9],k=o[10],F=o[11],L=o[12],V=o[13],q=o[14],ee=o[15],le=a*x-c*y,Q=a*C-h*y,ae=a*O-g*y,he=c*C-h*x,ue=c*O-g*x,we=h*O-g*C,Pe=E*V-A*L,je=E*q-k*L,nt=E*ee-F*L,Fe=A*q-k*V,qe=A*ee-F*V,Ze=k*ee-F*q,et=le*Ze-Q*qe+ae*Fe+he*nt-ue*je+we*Pe;return et?(r[0]=(x*Ze-C*qe+O*Fe)*(et=1/et),r[1]=(h*qe-c*Ze-g*Fe)*et,r[2]=(V*we-q*ue+ee*he)*et,r[3]=(k*ue-A*we-F*he)*et,r[4]=(C*nt-y*Ze-O*je)*et,r[5]=(a*Ze-h*nt+g*je)*et,r[6]=(q*ae-L*we-ee*Q)*et,r[7]=(E*we-k*ae+F*Q)*et,r[8]=(y*qe-x*nt+O*Pe)*et,r[9]=(c*nt-a*qe-g*Pe)*et,r[10]=(L*ue-V*ae+ee*le)*et,r[11]=(A*ae-E*ue-F*le)*et,r[12]=(x*je-y*Fe-C*Pe)*et,r[13]=(a*Fe-c*je+h*Pe)*et,r[14]=(V*Q-L*he-q*le)*et,r[15]=(E*he-A*Q+k*le)*et,r):null}function vl(r,o,a){var c=o[0],h=o[1],g=o[2],y=o[3],x=o[4],C=o[5],O=o[6],E=o[7],A=o[8],k=o[9],F=o[10],L=o[11],V=o[12],q=o[13],ee=o[14],le=o[15],Q=a[0],ae=a[1],he=a[2],ue=a[3];return r[0]=Q*c+ae*x+he*A+ue*V,r[1]=Q*h+ae*C+he*k+ue*q,r[2]=Q*g+ae*O+he*F+ue*ee,r[3]=Q*y+ae*E+he*L+ue*le,r[4]=(Q=a[4])*c+(ae=a[5])*x+(he=a[6])*A+(ue=a[7])*V,r[5]=Q*h+ae*C+he*k+ue*q,r[6]=Q*g+ae*O+he*F+ue*ee,r[7]=Q*y+ae*E+he*L+ue*le,r[8]=(Q=a[8])*c+(ae=a[9])*x+(he=a[10])*A+(ue=a[11])*V,r[9]=Q*h+ae*C+he*k+ue*q,r[10]=Q*g+ae*O+he*F+ue*ee,r[11]=Q*y+ae*E+he*L+ue*le,r[12]=(Q=a[12])*c+(ae=a[13])*x+(he=a[14])*A+(ue=a[15])*V,r[13]=Q*h+ae*C+he*k+ue*q,r[14]=Q*g+ae*O+he*F+ue*ee,r[15]=Q*y+ae*E+he*L+ue*le,r}function Xl(r,o,a){var c,h,g,y,x,C,O,E,A,k,F,L,V=a[0],q=a[1],ee=a[2];return o===r?(r[12]=o[0]*V+o[4]*q+o[8]*ee+o[12],r[13]=o[1]*V+o[5]*q+o[9]*ee+o[13],r[14]=o[2]*V+o[6]*q+o[10]*ee+o[14],r[15]=o[3]*V+o[7]*q+o[11]*ee+o[15]):(h=o[1],g=o[2],y=o[3],x=o[4],C=o[5],O=o[6],E=o[7],A=o[8],k=o[9],F=o[10],L=o[11],r[0]=c=o[0],r[1]=h,r[2]=g,r[3]=y,r[4]=x,r[5]=C,r[6]=O,r[7]=E,r[8]=A,r[9]=k,r[10]=F,r[11]=L,r[12]=c*V+x*q+A*ee+o[12],r[13]=h*V+C*q+k*ee+o[13],r[14]=g*V+O*q+F*ee+o[14],r[15]=y*V+E*q+L*ee+o[15]),r}function Du(r,o,a){var c=a[0],h=a[1],g=a[2];return r[0]=o[0]*c,r[1]=o[1]*c,r[2]=o[2]*c,r[3]=o[3]*c,r[4]=o[4]*h,r[5]=o[5]*h,r[6]=o[6]*h,r[7]=o[7]*h,r[8]=o[8]*g,r[9]=o[9]*g,r[10]=o[10]*g,r[11]=o[11]*g,r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r}function ny(r,o,a){var c=Math.sin(a),h=Math.cos(a),g=o[4],y=o[5],x=o[6],C=o[7],O=o[8],E=o[9],A=o[10],k=o[11];return o!==r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[4]=g*h+O*c,r[5]=y*h+E*c,r[6]=x*h+A*c,r[7]=C*h+k*c,r[8]=O*h-g*c,r[9]=E*h-y*c,r[10]=A*h-x*c,r[11]=k*h-C*c,r}function Sf(r,o,a){var c=Math.sin(a),h=Math.cos(a),g=o[0],y=o[1],x=o[2],C=o[3],O=o[8],E=o[9],A=o[10],k=o[11];return o!==r&&(r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[0]=g*h-O*c,r[1]=y*h-E*c,r[2]=x*h-A*c,r[3]=C*h-k*c,r[8]=g*c+O*h,r[9]=y*c+E*h,r[10]=x*c+A*h,r[11]=C*c+k*h,r}function fx(r,o){return r[0]=o[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=o[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ms(r,o,a){var c,h,g,y=a[0],x=a[1],C=a[2],O=Math.hypot(y,x,C);return O<Rd?null:(y*=O=1/O,x*=O,C*=O,c=Math.sin(o),h=Math.cos(o),r[0]=y*y*(g=1-h)+h,r[1]=x*y*g+C*c,r[2]=C*y*g-x*c,r[3]=0,r[4]=y*x*g-C*c,r[5]=x*x*g+h,r[6]=C*x*g+y*c,r[7]=0,r[8]=y*C*g+x*c,r[9]=x*C*g-y*c,r[10]=C*C*g+h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}Math.hypot||(Math.hypot=function(){for(var r=0,o=arguments.length;o--;)r+=arguments[o]*arguments[o];return Math.sqrt(r)});var cm=vl;function jc(){var r=new Qo(3);return Qo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function gx(r){var o=new Qo(3);return o[0]=r[0],o[1]=r[1],o[2]=r[2],o}function Nd(r){return Math.hypot(r[0],r[1],r[2])}function Fd(r,o,a){var c=new Qo(3);return c[0]=r,c[1]=o,c[2]=a,c}function Kl(r,o,a){return r[0]=o[0]+a[0],r[1]=o[1]+a[1],r[2]=o[2]+a[2],r}function um(r,o,a){return r[0]=o[0]-a[0],r[1]=o[1]-a[1],r[2]=o[2]-a[2],r}function iy(r,o,a){return r[0]=o[0]*a[0],r[1]=o[1]*a[1],r[2]=o[2]*a[2],r}function Kh(r,o,a){return r[0]=Math.min(o[0],a[0]),r[1]=Math.min(o[1],a[1]),r[2]=Math.min(o[2],a[2]),r}function Yh(r,o,a){return r[0]=Math.max(o[0],a[0]),r[1]=Math.max(o[1],a[1]),r[2]=Math.max(o[2],a[2]),r}function Yr(r,o,a){return r[0]=o[0]*a,r[1]=o[1]*a,r[2]=o[2]*a,r}function $c(r,o,a,c){return r[0]=o[0]+a[0]*c,r[1]=o[1]+a[1]*c,r[2]=o[2]+a[2]*c,r}function er(r,o){var a=o[0],c=o[1],h=o[2],g=a*a+c*c+h*h;return g>0&&(g=1/Math.sqrt(g)),r[0]=o[0]*g,r[1]=o[1]*g,r[2]=o[2]*g,r}function Nr(r,o){return r[0]*o[0]+r[1]*o[1]+r[2]*o[2]}function Af(r,o,a){var c=o[0],h=o[1],g=o[2],y=a[0],x=a[1],C=a[2];return r[0]=h*C-g*x,r[1]=g*y-c*C,r[2]=c*x-h*y,r}function Di(r,o,a){var c=o[0],h=o[1],g=o[2],y=a[3]*c+a[7]*h+a[11]*g+a[15];return r[0]=(a[0]*c+a[4]*h+a[8]*g+a[12])/(y=y||1),r[1]=(a[1]*c+a[5]*h+a[9]*g+a[13])/y,r[2]=(a[2]*c+a[6]*h+a[10]*g+a[14])/y,r}function oy(r,o,a){var c=a[0],h=a[1],g=a[2],y=o[0],x=o[1],C=o[2],O=h*C-g*x,E=g*y-c*C,A=c*x-h*y,k=h*A-g*E,F=g*O-c*A,L=c*E-h*O,V=2*a[3];return E*=V,A*=V,F*=2,L*=2,r[0]=y+(O*=V)+(k*=2),r[1]=x+E+F,r[2]=C+A+L,r}var Ld,Qr=um,If=iy,ry=Nd;function sy(r,o,a){return r[0]=o[0]*a,r[1]=o[1]*a,r[2]=o[2]*a,r[3]=o[3]*a,r}function ay(r,o){var a=o[0],c=o[1],h=o[2],g=o[3],y=a*a+c*c+h*h+g*g;return y>0&&(y=1/Math.sqrt(y)),r[0]=a*y,r[1]=c*y,r[2]=h*y,r[3]=g*y,r}function ha(r,o,a){var c=o[0],h=o[1],g=o[2],y=o[3];return r[0]=a[0]*c+a[4]*h+a[8]*g+a[12]*y,r[1]=a[1]*c+a[5]*h+a[9]*g+a[13]*y,r[2]=a[2]*c+a[6]*h+a[10]*g+a[14]*y,r[3]=a[3]*c+a[7]*h+a[11]*g+a[15]*y,r}function Bd(){var r=new Qo(4);return Qo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function ly(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function mx(r,o,a){a*=.5;var c=o[0],h=o[1],g=o[2],y=o[3],x=Math.sin(a),C=Math.cos(a);return r[0]=c*C+y*x,r[1]=h*C+g*x,r[2]=g*C-h*x,r[3]=y*C-c*x,r}function dm(r,o,a){a*=.5;var c=o[0],h=o[1],g=o[2],y=o[3],x=Math.sin(a),C=Math.cos(a);return r[0]=c*C-g*x,r[1]=h*C+y*x,r[2]=g*C+c*x,r[3]=y*C-h*x,r}jc(),Ld=new Qo(4),Qo!=Float32Array&&(Ld[0]=0,Ld[1]=0,Ld[2]=0,Ld[3]=0);var _x=ay;jc(),Fd(1,0,0),Fd(0,1,0),Bd(),Bd(),ty();const pM=Ce([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:cy}=pM,uy=Ce([{name:"a_pos_3",components:3,type:"Int16"}]);var Qh=Ce([{name:"a_pos",type:"Int16",components:2}]);class zd{constructor(o,a){this.pos=o,this.dir=a}intersectsPlane(o,a,c){const h=Nr(a,this.dir);if(Math.abs(h)<1e-6)return!1;const g=((o[0]-this.pos[0])*a[0]+(o[1]-this.pos[1])*a[1]+(o[2]-this.pos[2])*a[2])/h;return c[0]=this.pos[0]+this.dir[0]*g,c[1]=this.pos[1]+this.dir[1]*g,c[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(o,a,c){if(V=(F=this.pos)[0],q=F[1],ee=F[2],le=(L=o)[0],Q=L[1],ae=L[2],Math.abs(V-le)<=Rd*Math.max(1,Math.abs(V),Math.abs(le))&&Math.abs(q-Q)<=Rd*Math.max(1,Math.abs(q),Math.abs(Q))&&Math.abs(ee-ae)<=Rd*Math.max(1,Math.abs(ee),Math.abs(ae))||0===a)return c[0]=c[1]=c[2]=0,!1;var F,L,V,q,ee,le,Q,ae;const[h,g,y]=this.dir,x=this.pos[0]-o[0],C=this.pos[1]-o[1],O=this.pos[2]-o[2],E=h*h+g*g+y*y,A=2*(x*h+C*g+O*y),k=A*A-4*E*(x*x+C*C+O*O-a*a);if(k<0){const F=Math.max(-A/2,0),L=x+h*F,V=C+g*F,q=O+y*F,ee=Math.hypot(L,V,q);return c[0]=L*a/ee,c[1]=V*a/ee,c[2]=q*a/ee,!1}{const F=(-A-Math.sqrt(k))/(2*E);if(F<0){const L=Math.hypot(x,C,O);return c[0]=x*a/L,c[1]=C*a/L,c[2]=O*a/L,!1}return c[0]=x+h*F,c[1]=C+g*F,c[2]=O+y*F,!0}}}class kf{constructor(o,a,c,h,g){this.TL=o,this.TR=a,this.BR=c,this.BL=h,this.horizon=g}static fromInvProjectionMatrix(o,a,c){const h=[-1,1,1],g=[1,1,1],y=[1,-1,1],x=[-1,-1,1],C=Di(h,h,o),O=Di(g,g,o),E=Di(y,y,o),A=Di(x,x,o);return new kf(C,O,E,A,a/c)}}class hm{constructor(o,a){this.points=o,this.planes=a}static fromInvProjectionMatrix(o,a,c,h){const g=Math.pow(2,c),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const O=ha([],C,o),E=1/O[3]/a*g;return(A=O)[0]=(k=O)[0]*(F=[E,E,h?1/O[3]:E,E])[0],A[1]=k[1]*F[1],A[2]=k[2]*F[2],A[3]=k[3]*F[3],A;var A,k,F}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const O=er([],Af([],Qr([],y[C[0]],y[C[1]]),Qr([],y[C[2]],y[C[1]]))),E=-Nr(O,y[C[1]]);return O.concat(E)});return new hm(y,x)}}class gr{static fromPoints(o){const a=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const h of o)Kh(a,a,h),Yh(c,c,h);return new gr(a,c)}static applyTransform(o,a){const c=o.getCorners();for(let h=0;h<c.length;++h)Di(c[h],c[h],a);return gr.fromPoints(c)}constructor(o,a){this.min=o,this.max=a,this.center=Yr([],Kl([],this.min,this.max),.5)}quadrant(o){const a=[o%2==0,o<2],c=gx(this.min),h=gx(this.max);for(let g=0;g<a.length;g++)c[g]=a[g]?this.min[g]:this.center[g],h[g]=a[g]?this.center[g]:this.max[g];return h[2]=this.max[2],new gr(c,h)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,a=this.max;return[[o[0],o[1],o[2]],[a[0],o[1],o[2]],[a[0],a[1],o[2]],[o[0],a[1],o[2]],[o[0],o[1],a[2]],[a[0],o[1],a[2]],[a[0],a[1],a[2]],[o[0],a[1],a[2]]]}intersects(o){const a=this.getCorners();let c=!0;for(let h=0;h<o.planes.length;h++){const g=o.planes[h];let y=0;for(let x=0;x<a.length;x++)y+=Nr(g,a[x])+g[3]>=0;if(0===y)return 0;y!==a.length&&(c=!1)}if(c)return 2;for(let h=0;h<3;h++){let g=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let x=0;x<o.points.length;x++){const C=o.points[x][h]-this.min[h];g=Math.min(g,C),y=Math.max(y,C)}if(y<0||g>this.max[h]-this.min[h])return 0}return 1}}const dy=5,pm=6,Yl=Ut/Math.PI/2,yx=16383,Eu=[64,32,16],Ba=-Yl,za=Yl,fm=[new gr([Ba,Ba,Ba],[za,za,za]),new gr([Ba,Ba,Ba],[0,0,za]),new gr([0,Ba,Ba],[za,0,za]),new gr([Ba,0,Ba],[0,za,za]),new gr([0,0,Ba],[za,za,za])];function gm(r){return r*Yl/jd}function vx(r,o,a,c=!0){const h=Yr([],r._camera.position,r.worldSize),g=[o,a,1,1];ha(g,g,r.pixelMatrixInverse),sy(g,g,1/g[3]);const y=er([],Qr([],g,h)),x=r.globeMatrix,C=[x[12],x[13],x[14]],O=Qr([],C,h),E=Nd(O),A=er([],O),k=r.worldSize/(2*Math.PI),F=Nr(A,y),L=Math.asin(k/E);if(L<Math.acos(F)){if(!c)return null;const nt=[],Fe=[];Yr(nt,y,E/F),er(Fe,Qr(Fe,nt,O)),er(y,Kl(y,O,Yr(y,Fe,Math.tan(L)*E)))}const V=[];new zd(h,y).closestPointOnSphere(C,k,V);const q=er([],Mt(x,0)),ee=er([],Mt(x,1)),le=er([],Mt(x,2)),Q=Nr(q,V),ae=Nr(ee,V),he=Nr(le,V),ue=ao(Math.asin(-ae/k));let we=ao(Math.atan2(Q,he));we=r.center.lng+function(nt,Fe){const qe=(Fe-nt+180)%360-180;return qe<-180?qe+360:qe}(r.center.lng,we);const Pe=Va(we),je=_n(xl(ue),0,1);return new $d(Pe,je)}class fM{constructor(o,a,c){this.a=Qr([],o,c),this.b=Qr([],a,c),this.center=c;const h=er([],this.a),g=er([],this.b);this.angle=Math.acos(Nr(h,g))}}function hy(r,o){if(0===r.angle)return null;let a;return a=0===r.a[o]?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[o]/r.a[o]/Math.sin(r.angle)-1/Math.tan(r.angle)),a<0||a>1?null:function(c,h,g,y){const x=Math.sin(g);return c*(Math.sin((1-y)*g)/x)+h*(Math.sin(y*g)/x)}(r.a[o],r.b[o],r.angle,_n(a,0,1))+r.center[o]}function Ql(r){if(r.z<=1)return fm[r.z+2*r.y+r.x];const o=Nf(ep(r));return gr.fromPoints(o)}function Su(r,o,a){return Yr(r,r,1-a),$c(r,r,o,a)}function mm(r,o){const a=Ud(o.zoom);if(0===a)return Ql(r);const c=ep(r),h=Nf(c),g=Va(c.getWest())*o.worldSize,y=Va(c.getEast())*o.worldSize,x=xl(c.getNorth())*o.worldSize,C=xl(c.getSouth())*o.worldSize,O=[g,x,0],E=[y,x,0],A=[g,C,0],k=[y,C,0],F=Ef([],o.globeMatrix);return Di(O,O,F),Di(E,E,F),Di(A,A,F),Di(k,k,F),h[0]=Su(h[0],A,a),h[1]=Su(h[1],k,a),h[2]=Su(h[2],E,a),h[3]=Su(h[3],O,a),gr.fromPoints(h)}function Rf(r,o,a){for(const c of r)Di(c,c,o),Yr(c,c,a)}function ep({x:r,y:o,z:a}){const c=1/(1<<a),h=new $n(Vs(r*c),zo((o+1)*c)),g=new $n(Vs((r+1)*c),zo(o*c));return new Ni(h,g)}function Nf(r){const o=cn(r.getNorth()),a=cn(r.getSouth()),c=Math.cos(o),h=Math.cos(a),g=Math.sin(o),y=Math.sin(a),x=r.getWest(),C=r.getEast();return[Bo(h,y,x),Bo(h,y,C),Bo(c,g,C),Bo(c,g,x)]}function Bo(r,o,a,c=Yl){return a=cn(a),[r*Math.sin(a)*c,-o*c,r*Math.cos(a)*c]}function Vd(r,o,a){return Bo(Math.cos(cn(r)),Math.sin(cn(r)),o,a)}function tp(r,o,a,c){const h=1<<a.z,g=(r/Ut+a.x)/h;return Vd(zo((o/Ut+a.y)/h),Vs(g),c)}function Ff({min:r,max:o}){return yx/Math.max(o[0]-r[0],o[1]-r[1],o[2]-r[2])}const _m=new Float64Array(16);function Au(r){const o=Ff(r),a=fx(_m,[o,o,o]);return Xl(a,a,((c=[])[0]=-(h=r.min)[0],c[1]=-h[1],c[2]=-h[2],c));var c,h}function ym(r){const o=(c=r.min,(a=_m)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a);var a,c;const h=1/Ff(r);return Du(o,o,[h,h,h])}function fy(r,o,a,c,h){const g=function(C){const O=Ut/(2*Math.PI);return C/(2*Math.PI)/O}(a),y=[r,o,-a/(2*Math.PI)],x=fr(new Float64Array(16));return Xl(x,x,y),Du(x,x,[g,g,g]),ny(x,x,cn(-h)),Sf(x,x,cn(-c)),x}function Ud(r){return Oa(dy,pm,r)}function vm(r,o){const a=Vd(o.lat,o.lng);return y=(h=um([],function(L){const V=Vd(L._center.lat,L._center.lng);let q=Af([],Fd(0,1,0),V);const ee=ms([],-L.angle,V);q=Di(q,q,ee),ms(ee,-L._pitch,q);const le=er([],V);return Yr(le,le,gm(L.cameraToCenterDistance/L.pixelsPerMeter)),Di(le,le,ee),Kl([],V,le)}(r),a))[0],x=h[1],C=h[2],O=(g=a)[0],E=g[1],A=g[2],F=(k=Math.sqrt(y*y+x*x+C*C)*Math.sqrt(O*O+E*E+A*A))&&Nr(h,g)/k,Math.acos(Math.min(Math.max(F,-1),1));var h,g,y,x,C,O,E,A,k,F}function xm(r,o){return vm(r,o)>Math.PI/2*1.01}const gy=cn(85),_s=Math.cos(gy),bm=Math.sin(gy),jd=6371008.8,Lf=2*Math.PI*jd;class oo{constructor(o,a){if(isNaN(o)||isNaN(a))throw new Error(`Invalid LngLat object: (${o}, ${a})`);if(this.lng=+o,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new oo(dn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const a=Math.PI/180,c=this.lat*a,h=o.lat*a,g=Math.sin(c)*Math.sin(h)+Math.cos(c)*Math.cos(h)*Math.cos((o.lng-this.lng)*a);return jd*Math.acos(Math.min(g,1))}toBounds(o=0){const a=360*o/40075017,c=a/Math.cos(Math.PI/180*this.lat);return new Ni(new oo(this.lng-c,this.lat-a),new oo(this.lng+c,this.lat+a))}toEcef(o){const a=gm(o);return Vd(this.lat,this.lng,Yl+a)}static convert(o){if(o instanceof oo)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new oo(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new oo(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var $n=oo;function Bf(r){return Lf*Math.cos(r*Math.PI/180)}function Va(r){return(180+r)/360}function xl(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function pa(r,o){return r/Bf(o)}function Vs(r){return 360*r-180}function zo(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function my(r,o){return r*Bf(zo(o))}const Vo=85.051129;function _y(r){return 1/Math.cos(r*Math.PI/180)}class $d{constructor(o,a,c=0){this.x=+o,this.y=+a,this.z=+c}static fromLngLat(o,a=0){const c=$n.convert(o);return new $d(Va(c.lng),xl(c.lat),pa(a,c.lat))}toLngLat(){return new $n(Vs(this.x),zo(this.y))}toAltitude(){return my(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Lf*_y(zo(this.y))}}function np(r,o,a,c,h,g,y,x,C){const O=(o+c)/2,E=(a+h)/2,A=new ft(O,E);x(A),function(k,F,L,V,q,ee){const le=L-q,Q=V-ee;return Math.abs((V-F)*le-(L-k)*Q)/Math.hypot(le,Q)}(A.x,A.y,g.x,g.y,y.x,y.y)>=C?(np(r,o,a,O,E,g,A,x,C),np(r,O,E,c,h,A,y,x,C)):r.push(y)}function zf(r,o,a){let c=r[0],h=c.x,g=c.y;o(c);const y=[c];for(let x=1;x<r.length;x++){const C=r[x],{x:O,y:E}=C;o(C),np(y,h,g,O,E,c,C,o,a),h=O,g=E,c=C}return y}function wm(r,o,a,c){if(c(o,a)){const h=o.add(a)._mult(.5);wm(r,o,h,c),wm(r,h,a,c)}else r.push(a)}function ip(r,o){let a=r[0];const c=[a];for(let h=1;h<r.length;h++){const g=r[h];wm(c,a,g,o),a=g}return c}const Cm=Math.pow(2,14)-1,yy=-Cm-1;function Mm(r,o){const a=Math.round(r.x*o),c=Math.round(r.y*o);return r.x=_n(a,yy,Cm),r.y=_n(c,yy,Cm),(a<r.x||a>r.x+1||c<r.y||c>r.y+1)&&bi("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function Ua(r,o,a){const c=r.loadGeometry(),h=r.extent,g=Ut/h;if(o&&a&&a.projection.isReprojectedInTileSpace){const y=1<<o.z,{scale:x,x:C,y:O,projection:E}=a,A=k=>{const F=Vs((o.x+k.x/h)/y),L=zo((o.y+k.y/h)/y),V=E.project(F,L);k.x=(V.x*x-C)*h,k.y=(V.y*x-O)*h};for(let k=0;k<c.length;k++)if(1!==r.type)c[k]=zf(c[k],A,1);else{const F=[];for(const L of c[k])L.x<0||L.x>=h||L.y<0||L.y>=h||(A(L),F.push(L));c[k]=F}}for(const y of c)for(const x of y)Mm(x,g);return c}function Gc(r,o){return{type:r.type,id:r.id,properties:r.properties,geometry:o?Ua(r):[]}}function ec(r,o,a,c,h){r.emplaceBack(2*o+(c+1)/2,2*a+(h+1)/2)}function Gd(r,o,a){r.emplaceBack(o.x,o.y,o.z,16384*a[0],16384*a[1],16384*a[2])}class Vf{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new ot,this.indexArray=new It,this.segments=new ho,this.programConfigurations=new Tu(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(o,a,c,h){const g=this.layers[0],y=[];let x=null;"circle"===g.type&&(x=g.layout.get("circle-sort-key"));for(const{feature:O,id:E,index:A,sourceLayerIndex:k}of o){const F=this.layers[0]._featureFilter.needGeometry,L=Gc(O,F);if(!this.layers[0]._featureFilter.filter(new S(this.zoom),L,c))continue;const V=x?x.evaluate(L,{},c):void 0,q={id:E,properties:O.properties,type:O.type,sourceLayerIndex:k,index:A,geometry:F?L.geometry:Ua(O,c,h),patterns:{},sortKey:V};y.push(q)}x&&y.sort((O,E)=>O.sortKey-E.sortKey);let C=null;"globe"===h.projection.name&&(this.globeExtVertexArray=new st,C=h.projection);for(const O of y){const{geometry:E,index:A,sourceLayerIndex:k}=O,F=o[A].feature;this.addFeature(O,E,A,a.availableImages,c,C),a.featureIndex.insert(F,E,A,k,this.index)}}update(o,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,hM.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,Xh.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,a,c,h,g,y){for(const x of a)for(const C of x){const O=C.x,E=C.y;if(O<0||O>=Ut||E<0||E>=Ut)continue;if(y){const F=y.projectTilePoint(O,E,g),L=y.upVector(g,O,E),V=this.globeExtVertexArray;Gd(V,F,L),Gd(V,F,L),Gd(V,F,L),Gd(V,F,L)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),k=A.vertexLength;ec(this.layoutVertexArray,O,E,-1,-1),ec(this.layoutVertexArray,O,E,1,-1),ec(this.layoutVertexArray,O,E,1,1),ec(this.layoutVertexArray,O,E,-1,1),this.indexArray.emplaceBack(k,k+1,k+2),this.indexArray.emplaceBack(k,k+2,k+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,c,{},h,g)}}function vy(r,o){for(let a=0;a<r.length;a++)if(tc(o,r[a]))return!0;for(let a=0;a<o.length;a++)if(tc(r,o[a]))return!0;return!!Tm(r,o)}function Om(r,o,a){return!!tc(r,o)||!!Dm(o,r,a)}function xy(r,o){if(1===r.length)return Pm(o,r[0]);for(let a=0;a<o.length;a++){const c=o[a];for(let h=0;h<c.length;h++)if(tc(r,c[h]))return!0}for(let a=0;a<r.length;a++)if(Pm(o,r[a]))return!0;for(let a=0;a<o.length;a++)if(Tm(r,o[a]))return!0;return!1}function xx(r,o,a){if(r.length>1){if(Tm(r,o))return!0;for(let c=0;c<o.length;c++)if(Dm(o[c],r,a))return!0}for(let c=0;c<r.length;c++)if(Dm(r[c],o,a))return!0;return!1}function Tm(r,o){if(0===r.length||0===o.length)return!1;for(let a=0;a<r.length-1;a++){const c=r[a],h=r[a+1];for(let g=0;g<o.length-1;g++)if(bx(c,h,o[g],o[g+1]))return!0}return!1}function bx(r,o,a,c){return Ho(r,a,c)!==Ho(o,a,c)&&Ho(r,o,a)!==Ho(r,o,c)}function Dm(r,o,a){const c=a*a;if(1===o.length)return r.distSqr(o[0])<c;for(let h=1;h<o.length;h++)if(by(r,o[h-1],o[h])<c)return!0;return!1}function by(r,o,a){const c=o.distSqr(a);if(0===c)return r.distSqr(o);const h=((r.x-o.x)*(a.x-o.x)+(r.y-o.y)*(a.y-o.y))/c;return r.distSqr(h<0?o:h>1?a:a.sub(o)._mult(h)._add(o))}function Pm(r,o){let a,c,h,g=!1;for(let y=0;y<r.length;y++){a=r[y];for(let x=0,C=a.length-1;x<a.length;C=x++)c=a[x],h=a[C],c.y>o.y!=h.y>o.y&&o.x<(h.x-c.x)*(o.y-c.y)/(h.y-c.y)+c.x&&(g=!g)}return g}function tc(r,o){let a=!1;for(let c=0,h=r.length-1;c<r.length;h=c++){const g=r[c],y=r[h];g.y>o.y!=y.y>o.y&&o.x<(y.x-g.x)*(o.y-g.y)/(y.y-g.y)+g.x&&(a=!a)}return a}function Em(r,o,a,c,h){for(const y of r)if(o<=y.x&&a<=y.y&&c>=y.x&&h>=y.y)return!0;const g=[new ft(o,a),new ft(o,h),new ft(c,h),new ft(c,a)];if(r.length>2)for(const y of g)if(tc(r,y))return!0;for(let y=0;y<r.length-1;y++)if(Sm(r[y],r[y+1],g))return!0;return!1}function Sm(r,o,a){const c=a[0],h=a[2];if(r.x<c.x&&o.x<c.x||r.x>h.x&&o.x>h.x||r.y<c.y&&o.y<c.y||r.y>h.y&&o.y>h.y)return!1;const g=Ho(r,o,a[0]);return g!==Ho(r,o,a[1])||g!==Ho(r,o,a[2])||g!==Ho(r,o,a[3])}function Hd(r,o,a){const c=o.paint.get(r).value;return"constant"===c.kind?c.value:a.programConfigurations.get(o.id).getMaxValue(r)}function Uf(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Am(r,o,a,c,h){if(!o[0]&&!o[1])return r;const g=ft.convert(o)._mult(h);"viewport"===a&&g._rotate(-c);const y=[];for(let x=0;x<r.length;x++)y.push(r[x].sub(g));return y}function Im(r,o,a,c){const h=ft.convert(r)._mult(c);return"viewport"===o&&h._rotate(-a),h}Oe(Vf,"CircleBucket",{omit:["layers"]});const Iu=new ne({"circle-sort-key":new Z($e.layout_circle["circle-sort-key"])});var wy={paint:new ne({"circle-radius":new Z($e.paint_circle["circle-radius"]),"circle-color":new Z($e.paint_circle["circle-color"]),"circle-blur":new Z($e.paint_circle["circle-blur"]),"circle-opacity":new Z($e.paint_circle["circle-opacity"]),"circle-translate":new z($e.paint_circle["circle-translate"]),"circle-translate-anchor":new z($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new z($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new z($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Z($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Z($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Z($e.paint_circle["circle-stroke-opacity"])}),layout:Iu};function km(r,o,a,c,h,g,y,x,C){if(g&&r.queryGeometry.isAboveHorizon)return!1;g&&(C*=r.pixelToTileUnitsFactor);const O=r.tileID.canonical,E=a.projection.upVectorScale(O,a.center.lat,a.worldSize).metersToTile;for(const A of o)for(const k of A){const F=k.add(x),L=h&&a.elevation?a.elevation.exaggeration()*h.getElevationAt(F.x,F.y,!0):0,V=a.projection.projectTilePoint(F.x,F.y,O);if(L>0){const Q=a.projection.upVector(O,F.x,F.y);V.x+=Q[0]*E*L,V.y+=Q[1]*E*L,V.z+=Q[2]*E*L}const q=g?F:wx(V.x,V.y,V.z,c),ee=g?r.tilespaceRays.map(Q=>Mx(Q,L)):r.queryGeometry.screenGeometry,le=ha([],[V.x,V.y,V.z,1],c);if(!y&&g?C*=le[3]/a.cameraToCenterDistance:y&&!g&&(C*=a.cameraToCenterDistance/le[3]),g){const Q=zo((k.y/Ut+O.y)/(1<<O.z));C/=a.projection.pixelsPerMeter(Q,1)/pa(1,Q)}if(Om(ee,q,C))return!0}return!1}function wx(r,o,a,c){const h=ha([],[r,o,a,1],c);return new ft(h[0]/h[3],h[1]/h[3])}const Cx=Fd(0,0,0),jf=Fd(0,0,1);function Mx(r,o){const a=jc();return Cx[2]=o,r.intersectsPlane(Cx,jf,a),new ft(a[0],a[1])}class Rm extends Vf{}function Nm(r,{width:o,height:a},c,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==o*a*c)throw new RangeError("mismatched image size")}else h=new Uint8Array(o*a*c);return r.width=o,r.height=a,r.data=h,r}function Fm(r,o,a){const{width:c,height:h}=o;c===r.width&&h===r.height||(op(r,o,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,c),height:Math.min(r.height,h)},a),r.width=c,r.height=h,r.data=o.data)}function op(r,o,a,c,h,g){if(0===h.width||0===h.height)return o;if(h.width>r.width||h.height>r.height||a.x>r.width-h.width||a.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>o.width||h.height>o.height||c.x>o.width-h.width||c.y>o.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=r.data,x=o.data;for(let C=0;C<h.height;C++){const O=((a.y+C)*r.width+a.x)*g,E=((c.y+C)*o.width+c.x)*g;for(let A=0;A<h.width*g;A++)x[E+A]=y[O+A]}return o}Oe(Rm,"HeatmapBucket",{omit:["layers"]});class bl{constructor(o,a){Nm(this,o,1,a)}resize(o){Fm(this,new bl(o),1)}clone(){return new bl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,a,c,h,g){op(o,a,c,h,g,1)}}class mr{constructor(o,a){Nm(this,o,4,a)}resize(o){Fm(this,new mr(o),4)}replace(o,a){a?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new mr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,a,c,h,g){op(o,a,c,h,g,4)}}Oe(bl,"AlphaImage"),Oe(mr,"RGBAImage");var $f={paint:new ne({"heatmap-radius":new Z($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Z($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new z($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ie($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new z($e.paint_heatmap["heatmap-opacity"])})};function Gf(r){const o={},a=r.resolution||256,c=r.clips?r.clips.length:1,h=r.image||new mr({width:a,height:c}),g=(y,x,C)=>{o[r.evaluationKey]=C;const O=r.expression.evaluate(o);h.data[y+x+0]=Math.floor(255*O.r/O.a),h.data[y+x+1]=Math.floor(255*O.g/O.a),h.data[y+x+2]=Math.floor(255*O.b/O.a),h.data[y+x+3]=Math.floor(255*O.a)};if(r.clips)for(let y=0,x=0;y<c;++y,x+=4*a)for(let C=0,O=0;C<a;C++,O+=4){const E=C/(a-1),{start:A,end:k}=r.clips[y];g(x,O,A*(1-E)+k*E)}else for(let y=0,x=0;y<a;y++,x+=4)g(0,x,y/(a-1));return h}var Lm={paint:new ne({"hillshade-illumination-direction":new z($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new z($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new z($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new z($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new z($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new z($e.paint_hillshade["hillshade-accent-color"])})};const Bm=Ce([{name:"a_pos",components:2,type:"Int16"}],4),{members:zm}=Bm;var ku={exports:{}};function Hf(r,o,a){a=a||2;var c,h,g,y,x,C,O,E=o&&o.length,A=E?o[0]*a:r.length,k=Vm(r,0,A,a,!0),F=[];if(!k||k.next===k.prev)return F;if(E&&(k=function(V,q,ee,le){var Q,ae,he,ue=[];for(Q=0,ae=q.length;Q<ae;Q++)(he=Vm(V,q[Q]*le,Q<ae-1?q[Q+1]*le:V.length,le,!1))===he.next&&(he.steiner=!0),ue.push(gM(he));for(ue.sort(Um),Q=0;Q<ue.length;Q++)ee=Wd(ue[Q],ee);return ee}(r,o,k,a)),r.length>80*a){c=g=r[0],h=y=r[1];for(var L=a;L<A;L+=a)(x=r[L])<c&&(c=x),(C=r[L+1])<h&&(h=C),x>g&&(g=x),C>y&&(y=C);O=0!==(O=Math.max(g-c,y-h))?32767/O:0}return rp(k,F,a,c,h,O,0),F}function Vm(r,o,a,c,h){var g,y;if(h===qm(r,o,a,c)>0)for(g=o;g<a;g+=c)y=Hm(g,r[g],r[g+1],y);else for(g=a-c;g>=o;g-=c)y=Hm(g,r[g],r[g+1],y);return y&&sp(y,y.next)&&(cp(y),y=y.next),y}function Ru(r,o){if(!r)return r;o||(o=r);var a,c=r;do{if(a=!1,c.steiner||!sp(c,c.next)&&0!==ro(c.prev,c,c.next))c=c.next;else{if(cp(c),(c=o=c.prev)===c.next)break;a=!0}}while(a||c!==o);return o}function rp(r,o,a,c,h,g,y){if(r){!y&&g&&function(E,A,k,F){var L=E;do{0===L.z&&(L.z=jm(L.x,L.y,A,k,F)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next}while(L!==E);L.prevZ.nextZ=null,L.prevZ=null,function(V){var q,ee,le,Q,ae,he,ue,we,Pe=1;do{for(ee=V,V=null,ae=null,he=0;ee;){for(he++,le=ee,ue=0,q=0;q<Pe&&(ue++,le=le.nextZ);q++);for(we=Pe;ue>0||we>0&&le;)0!==ue&&(0===we||!le||ee.z<=le.z)?(Q=ee,ee=ee.nextZ,ue--):(Q=le,le=le.nextZ,we--),ae?ae.nextZ=Q:V=Q,Q.prevZ=ae,ae=Q;ee=le}ae.nextZ=null,Pe*=2}while(he>1)}(L)}(r,c,h,g);for(var x,C,O=r;r.prev!==r.next;)if(x=r.prev,C=r.next,g?Cy(r,c,h,g):Ox(r))o.push(x.i/a|0),o.push(r.i/a|0),o.push(C.i/a|0),cp(r),r=C.next,O=C.next;else if((r=C)===O){y?1===y?rp(r=My(Ru(r),o,a),o,a,c,h,g,2):2===y&&Wf(r,o,a,c,h,g):rp(Ru(r),o,a,c,h,g,1);break}}}function Ox(r){var o=r.prev,a=r,c=r.next;if(ro(o,a,c)>=0)return!1;for(var h=o.x,g=a.x,y=c.x,x=o.y,C=a.y,O=c.y,E=h<g?h<y?h:y:g<y?g:y,A=x<C?x<O?x:O:C<O?C:O,k=h>g?h>y?h:y:g>y?g:y,F=x>C?x>O?x:O:C>O?C:O,L=c.next;L!==o;){if(L.x>=E&&L.x<=k&&L.y>=A&&L.y<=F&&qd(h,x,g,C,y,O,L.x,L.y)&&ro(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function Cy(r,o,a,c){var h=r.prev,g=r,y=r.next;if(ro(h,g,y)>=0)return!1;for(var x=h.x,C=g.x,O=y.x,E=h.y,A=g.y,k=y.y,F=x<C?x<O?x:O:C<O?C:O,L=E<A?E<k?E:k:A<k?A:k,V=x>C?x>O?x:O:C>O?C:O,q=E>A?E>k?E:k:A>k?A:k,ee=jm(F,L,o,a,c),le=jm(V,q,o,a,c),Q=r.prevZ,ae=r.nextZ;Q&&Q.z>=ee&&ae&&ae.z<=le;){if(Q.x>=F&&Q.x<=V&&Q.y>=L&&Q.y<=q&&Q!==h&&Q!==y&&qd(x,E,C,A,O,k,Q.x,Q.y)&&ro(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,ae.x>=F&&ae.x<=V&&ae.y>=L&&ae.y<=q&&ae!==h&&ae!==y&&qd(x,E,C,A,O,k,ae.x,ae.y)&&ro(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;Q&&Q.z>=ee;){if(Q.x>=F&&Q.x<=V&&Q.y>=L&&Q.y<=q&&Q!==h&&Q!==y&&qd(x,E,C,A,O,k,Q.x,Q.y)&&ro(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;ae&&ae.z<=le;){if(ae.x>=F&&ae.x<=V&&ae.y>=L&&ae.y<=q&&ae!==h&&ae!==y&&qd(x,E,C,A,O,k,ae.x,ae.y)&&ro(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function My(r,o,a){var c=r;do{var h=c.prev,g=c.next.next;!sp(h,g)&&ap(h,c,c.next,g)&&Jd(h,g)&&Jd(g,h)&&(o.push(h.i/a|0),o.push(c.i/a|0),o.push(g.i/a|0),cp(c),cp(c.next),c=r=g),c=c.next}while(c!==r);return Ru(c)}function Wf(r,o,a,c,h,g){var y=r;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&$m(y,x)){var C=Gm(y,x);return y=Ru(y,y.next),C=Ru(C,C.next),rp(y,o,a,c,h,g,0),void rp(C,o,a,c,h,g,0)}x=x.next}y=y.next}while(y!==r)}function Um(r,o){return r.x-o.x}function Wd(r,o){var a=function(h,g){var y,x=g,C=h.x,O=h.y,E=-1/0;do{if(O<=x.y&&O>=x.next.y&&x.next.y!==x.y){var A=x.x+(O-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(A<=C&&A>E&&(E=A,y=x.x<x.next.x?x:x.next,A===C))return y}x=x.next}while(x!==g);if(!y)return null;var k,F=y,L=y.x,V=y.y,q=1/0;x=y;do{C>=x.x&&x.x>=L&&C!==x.x&&qd(O<V?C:E,O,L,V,O<V?E:C,O,x.x,x.y)&&(k=Math.abs(O-x.y)/(C-x.x),Jd(x,h)&&(k<q||k===q&&(x.x>y.x||x.x===y.x&&Tx(y,x)))&&(y=x,q=k)),x=x.next}while(x!==F);return y}(r,o);if(!a)return o;var c=Gm(a,r);return Ru(c,c.next),Ru(a,a.next)}function Tx(r,o){return ro(r.prev,r,o.prev)<0&&ro(o.next,r,r.next)<0}function jm(r,o,a,c,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-a)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-c)*h|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function gM(r){var o=r,a=r;do{(o.x<a.x||o.x===a.x&&o.y<a.y)&&(a=o),o=o.next}while(o!==r);return a}function qd(r,o,a,c,h,g,y,x){return(h-y)*(o-x)>=(r-y)*(g-x)&&(r-y)*(c-x)>=(a-y)*(o-x)&&(a-y)*(g-x)>=(h-y)*(c-x)}function $m(r,o){return r.next.i!==o.i&&r.prev.i!==o.i&&!function(a,c){var h=a;do{if(h.i!==a.i&&h.next.i!==a.i&&h.i!==c.i&&h.next.i!==c.i&&ap(h,h.next,a,c))return!0;h=h.next}while(h!==a);return!1}(r,o)&&(Jd(r,o)&&Jd(o,r)&&function(a,c){var h=a,g=!1,y=(a.x+c.x)/2,x=(a.y+c.y)/2;do{h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next}while(h!==a);return g}(r,o)&&(ro(r.prev,r,o.prev)||ro(r,o.prev,o))||sp(r,o)&&ro(r.prev,r,r.next)>0&&ro(o.prev,o,o.next)>0)}function ro(r,o,a){return(o.y-r.y)*(a.x-o.x)-(o.x-r.x)*(a.y-o.y)}function sp(r,o){return r.x===o.x&&r.y===o.y}function ap(r,o,a,c){var h=lp(ro(r,o,a)),g=lp(ro(r,o,c)),y=lp(ro(a,c,r)),x=lp(ro(a,c,o));return h!==g&&y!==x||!(0!==h||!Zd(r,a,o))||!(0!==g||!Zd(r,c,o))||!(0!==y||!Zd(a,r,c))||!(0!==x||!Zd(a,o,c))}function Zd(r,o,a){return o.x<=Math.max(r.x,a.x)&&o.x>=Math.min(r.x,a.x)&&o.y<=Math.max(r.y,a.y)&&o.y>=Math.min(r.y,a.y)}function lp(r){return r>0?1:r<0?-1:0}function Jd(r,o){return ro(r.prev,r,r.next)<0?ro(r,o,r.next)>=0&&ro(r,r.prev,o)>=0:ro(r,o,r.prev)<0||ro(r,r.next,o)<0}function Gm(r,o){var a=new Wm(r.i,r.x,r.y),c=new Wm(o.i,o.x,o.y),h=r.next,g=o.prev;return r.next=o,o.prev=r,a.next=h,h.prev=a,c.next=a,a.prev=c,g.next=c,c.prev=g,c}function Hm(r,o,a,c){var h=new Wm(r,o,a);return c?(h.next=c.next,h.prev=c,c.next.prev=h,c.next=h):(h.prev=h,h.next=h),h}function cp(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Wm(r,o,a){this.i=r,this.x=o,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qm(r,o,a,c){for(var h=0,g=o,y=a-c;g<a;g+=c)h+=(r[y]-r[g])*(r[g+1]+r[y+1]),y=g;return h}ku.exports=Hf,ku.exports.default=Hf,Hf.deviation=function(r,o,a,c){var h=o&&o.length,g=Math.abs(qm(r,0,h?o[0]*a:r.length,a));if(h)for(var y=0,x=o.length;y<x;y++)g-=Math.abs(qm(r,o[y]*a,y<x-1?o[y+1]*a:r.length,a));var C=0;for(y=0;y<c.length;y+=3){var O=c[y]*a,E=c[y+1]*a,A=c[y+2]*a;C+=Math.abs((r[O]-r[A])*(r[E+1]-r[O+1])-(r[O]-r[E])*(r[A+1]-r[O+1]))}return 0===g&&0===C?0:Math.abs((C-g)/g)},Hf.flatten=function(r){for(var o=r[0][0].length,a={vertices:[],holes:[],dimensions:o},c=0,h=0;h<r.length;h++){for(var g=0;g<r[h].length;g++)for(var y=0;y<o;y++)a.vertices.push(r[h][g][y]);h>0&&a.holes.push(c+=r[h-1].length)}return a};var Zm=rr(ku.exports);function Dx(r,o,a,c,h){nc(r,o,a||0,c||r.length-1,h||Px)}function nc(r,o,a,c,h){for(;c>a;){if(c-a>600){var g=c-a+1,y=o-a+1,x=Math.log(g),C=.5*Math.exp(2*x/3),O=.5*Math.sqrt(x*C*(g-C)/g)*(y-g/2<0?-1:1);nc(r,o,Math.max(a,Math.floor(o-y*C/g+O)),Math.min(c,Math.floor(o+(g-y)*C/g+O)),h)}var E=r[o],A=a,k=c;for(ic(r,a,o),h(r[c],E)>0&&ic(r,a,c);A<k;){for(ic(r,A,k),A++,k--;h(r[A],E)<0;)A++;for(;h(r[k],E)>0;)k--}0===h(r[a],E)?ic(r,a,k):ic(r,++k,c),k<=o&&(a=k+1),o<=k&&(c=k-1)}}function ic(r,o,a){var c=r[o];r[o]=r[a],r[a]=c}function Px(r,o){return r<o?-1:r>o?1:0}function Oy(r,o){const a=r.length;if(a<=1)return[r];const c=[];let h,g;for(let y=0;y<a;y++){const x=vc(r[y]);0!==x&&(r[y].area=Math.abs(x),void 0===g&&(g=x<0),g===x<0?(h&&c.push(h),h=[r[y]]):h.push(r[y]))}if(h&&c.push(h),o>1)for(let y=0;y<c.length;y++)c[y].length<=o||(Dx(c[y],o,1,c[y].length-1,mM),c[y]=c[y].slice(0,o));return c}function mM(r,o){return o.area-r.area}function Ty(r,o,a){const c=a.patternDependencies;let h=!1;for(const g of o){const y=g.paint.get(`${r}-pattern`);y.isConstant()||(h=!0);const x=y.constantOr(null);x&&(h=!0,c[x]=!0)}return h}function Dy(r,o,a,c,h){const g=h.patternDependencies;for(const y of o){const x=y.paint.get(`${r}-pattern`).value;if("constant"!==x.kind){let C=x.evaluate({zoom:c},a,{},h.availableImages);C=C&&C.name?C.name:C,g[C]=!0,a.patterns[y.id]=C}}return a}class Jm{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ot,this.indexArray=new It,this.indexArray2=new no,this.programConfigurations=new Tu(o.layers,o.zoom),this.segments=new ho,this.segments2=new ho,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=o.projection}populate(o,a,c,h){this.hasPattern=Ty("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:x,id:C,index:O,sourceLayerIndex:E}of o){const A=this.layers[0]._featureFilter.needGeometry,k=Gc(x,A);if(!this.layers[0]._featureFilter.filter(new S(this.zoom),k,c))continue;const F=g?g.evaluate(k,{},c,a.availableImages):void 0,L={id:C,properties:x.properties,type:x.type,sourceLayerIndex:E,index:O,geometry:A?k.geometry:Ua(x,c,h),patterns:{},sortKey:F};y.push(L)}g&&y.sort((x,C)=>x.sortKey-C.sortKey);for(const x of y){const{geometry:C,index:O,sourceLayerIndex:E}=x;if(this.hasPattern){const A=Dy("fill",this.layers,x,this.zoom,a);this.patternFeatures.push(A)}else this.addFeature(x,C,O,c,{},a.availableImages);a.featureIndex.insert(o[O].feature,C,O,E,this.index)}}update(o,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,c,h)}addFeatures(o,a,c,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,zm),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,a,c,h,g,y=[]){for(const x of Oy(a,500)){let C=0;for(const L of x)C+=L.length;const O=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),E=O.vertexLength,A=[],k=[];for(const L of x){if(0===L.length)continue;L!==x[0]&&k.push(A.length/2);const V=this.segments2.prepareSegment(L.length,this.layoutVertexArray,this.indexArray2),q=V.vertexLength;this.layoutVertexArray.emplaceBack(L[0].x,L[0].y),this.indexArray2.emplaceBack(q+L.length-1,q),A.push(L[0].x),A.push(L[0].y);for(let ee=1;ee<L.length;ee++)this.layoutVertexArray.emplaceBack(L[ee].x,L[ee].y),this.indexArray2.emplaceBack(q+ee-1,q+ee),A.push(L[ee].x),A.push(L[ee].y);V.vertexLength+=L.length,V.primitiveLength+=L.length}const F=Zm(A,k);for(let L=0;L<F.length;L+=3)this.indexArray.emplaceBack(E+F[L],E+F[L+1],E+F[L+2]);O.vertexLength+=C,O.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,c,g,y,h)}}Oe(Jm,"FillBucket",{omit:["layers","patternFeatures"]});const Py=new ne({"fill-sort-key":new Z($e.layout_fill["fill-sort-key"])});var Ex={paint:new ne({"fill-antialias":new z($e.paint_fill["fill-antialias"]),"fill-opacity":new Z($e.paint_fill["fill-opacity"]),"fill-color":new Z($e.paint_fill["fill-color"]),"fill-outline-color":new Z($e.paint_fill["fill-outline-color"]),"fill-translate":new z($e.paint_fill["fill-translate"]),"fill-translate-anchor":new z($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Z($e.paint_fill["fill-pattern"])}),layout:Py};const Sx=Ce([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ax=Ce([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Ix=Ce([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Xm}=Sx;var fa={},up=ls,Km=Nu;function Nu(r,o,a,c,h){this.properties={},this.extent=a,this.type=0,this._pbf=r,this._geometry=-1,this._keys=c,this._values=h,r.readFields(Ey,this,o)}function Ey(r,o,a){1==r?o.id=a.readVarint():2==r?function(c,h){for(var g=c.readVarint()+c.pos;c.pos<g;){var y=h._keys[c.readVarint()],x=h._values[c.readVarint()];h.properties[y]=x}}(a,o):3==r?o.type=a.readVarint():4==r&&(o._geometry=a.pos)}function _M(r){for(var o,a,c=0,h=0,g=r.length,y=g-1;h<g;y=h++)c+=((a=r[y]).x-(o=r[h]).x)*(o.y+a.y);return c}Nu.types=["Unknown","Point","LineString","Polygon"],Nu.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var o,a=r.readVarint()+r.pos,c=1,h=0,g=0,y=0,x=[];r.pos<a;){if(h<=0){var C=r.readVarint();c=7&C,h=C>>3}if(h--,1===c||2===c)g+=r.readSVarint(),y+=r.readSVarint(),1===c&&(o&&x.push(o),o=[]),o.push(new up(g,y));else{if(7!==c)throw new Error("unknown command "+c);o&&o.push(o[0].clone())}}return o&&x.push(o),x},Nu.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var o=r.readVarint()+r.pos,a=1,c=0,h=0,g=0,y=1/0,x=-1/0,C=1/0,O=-1/0;r.pos<o;){if(c<=0){var E=r.readVarint();a=7&E,c=E>>3}if(c--,1===a||2===a)(h+=r.readSVarint())<y&&(y=h),h>x&&(x=h),(g+=r.readSVarint())<C&&(C=g),g>O&&(O=g);else if(7!==a)throw new Error("unknown command "+a)}return[y,C,x,O]},Nu.prototype.toGeoJSON=function(r,o,a){var c,h,g=this.extent*Math.pow(2,a),y=this.extent*r,x=this.extent*o,C=this.loadGeometry(),O=Nu.types[this.type];function E(F){for(var L=0;L<F.length;L++){var V=F[L];F[L]=[360*(V.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(V.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(c=0;c<C.length;c++)A[c]=C[c][0];E(C=A);break;case 2:for(c=0;c<C.length;c++)E(C[c]);break;case 3:for(C=function(F){var L=F.length;if(L<=1)return[F];for(var V,q,ee=[],le=0;le<L;le++){var Q=_M(F[le]);0!==Q&&(void 0===q&&(q=Q<0),q===Q<0?(V&&ee.push(V),V=[F[le]]):V.push(F[le]))}return V&&ee.push(V),ee}(C),c=0;c<C.length;c++)for(h=0;h<C[c].length;h++)E(C[c][h])}1===C.length?C=C[0]:O="Multi"+O;var k={type:"Feature",geometry:{type:O,coordinates:C},properties:this.properties};return"id"in this&&(k.id=this.id),k};var yM=Km,kx=qf;function qf(r,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Ym,this,o),this.length=this._features.length}function Ym(r,o,a){15===r?o.version=a.readVarint():1===r?o.name=a.readString():5===r?o.extent=a.readVarint():2===r?o._features.push(a.pos):3===r?o._keys.push(a.readString()):4===r&&o._values.push(function(c){for(var h=null,g=c.readVarint()+c.pos;c.pos<g;){var y=c.readVarint()>>3;h=1===y?c.readString():2===y?c.readFloat():3===y?c.readDouble():4===y?c.readVarint64():5===y?c.readVarint():6===y?c.readSVarint():7===y?c.readBoolean():null}return h}(a))}qf.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var o=this._pbf.readVarint()+this._pbf.pos;return new yM(this._pbf,o,this.extent,this._keys,this._values)};var vM=kx;function xM(r,o,a){if(3===r){var c=new vM(a,a.readVarint()+a.pos);c.length&&(o[c.name]=c)}}var Zf=fa.VectorTile=function(r,o){this.layers=r.readFields(xM,{},o)},Jf=fa.VectorTileFeature=Km;function Xf(r,o,a,c){const h=[],g=0===c?(y,x,C,O,E,A)=>{y.push(new ft(A,C+(A-x)/(O-x)*(E-C)))}:(y,x,C,O,E,A)=>{y.push(new ft(x+(A-C)/(E-C)*(O-x),A))};for(const y of r){const x=[];for(const C of y){if(C.length<=2)continue;const O=[];for(let k=0;k<C.length-1;k++){const F=C[k].x,L=C[k].y,V=C[k+1].x,q=C[k+1].y,ee=0===c?F:L,le=0===c?V:q;ee<o?le>o&&g(O,F,L,V,q,o):ee>a?le<a&&g(O,F,L,V,q,a):O.push(C[k]),le<o&&ee>=o&&g(O,F,L,V,q,o),le>a&&ee<=a&&g(O,F,L,V,q,a)}let E=C[C.length-1];const A=0===c?E.x:E.y;A>=o&&A<=a&&O.push(E),O.length&&(E=O[O.length-1],O[0].x===E.x&&O[0].y===E.y||O.push(O[0]),x.push(O))}x.length&&h.push(x)}return h}fa.VectorTileLayer=kx;const Rx=Jf.types,Nx=Math.pow(2,13);function Xd(r,o,a,c,h,g,y,x){r.emplaceBack((o<<1)+y,(a<<1)+g,(Math.floor(c*Nx)<<1)+h,Math.round(x))}function Hc(r,o,a){r.emplaceBack(o.x,o.y,o.z,16384*a[0],16384*a[1],16384*a[2])}class Sy{constructor(){this.acc=new ft(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ft(o.x,o.y),this.max=new ft(o.x,o.y))}append(o,a){this.currentPolyCount.edges++,this.acc._add(o);const c=this.min,h=this.max;o.x<c.x?c.x=o.x:o.x>h.x&&(h.x=o.x),o.y<c.y?c.y=o.y:o.y>h.y&&(h.y=o.y),((0===o.x||o.x===Ut)&&o.x===a.x)!=((0===o.y||o.y===Ut)&&o.y===a.y)&&this.processBorderOverlap(o,a),a.x<0!=o.x<0&&this.addBorderIntersection(0,Sn(a.y,o.y,(0-a.x)/(o.x-a.x))),a.x>Ut!=o.x>Ut&&this.addBorderIntersection(1,Sn(a.y,o.y,(Ut-a.x)/(o.x-a.x))),a.y<0!=o.y<0&&this.addBorderIntersection(2,Sn(a.x,o.x,(0-a.y)/(o.y-a.y))),a.y>Ut!=o.y>Ut&&this.addBorderIntersection(3,Sn(a.x,o.x,(Ut-a.y)/(o.y-a.y)))}addBorderIntersection(o,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[o];a<c[0]&&(c[0]=a),a>c[1]&&(c[1]=a)}processBorderOverlap(o,a){if(o.x===a.x){if(o.y===a.y)return;const c=0===o.x?0:1;this.addBorderIntersection(c,a.y),this.addBorderIntersection(c,o.y)}else{const c=0===o.y?2:3;this.addBorderIntersection(c,a.x),this.addBorderIntersection(c,o.x)}}centroid(){const o=this.polyCount.reduce((a,c)=>a+c.edges,0);return 0!==o?this.acc.div(o)._round():new ft(0,0)}span(){return new ft(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((o,a)=>o+ +(a[0]!==Number.MAX_VALUE),0)}}class Fu{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new He,this.centroidVertexArray=new ua,this.indexArray=new It,this.programConfigurations=new Tu(o.layers,o.zoom),this.segments=new ho,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=o.enableTerrain}populate(o,a,c,h){this.features=[],this.hasPattern=Ty("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const y=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*y/(y*y+1)/Ut/(1<<g.z)}(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:y,index:x,sourceLayerIndex:C}of o){const O=this.layers[0]._featureFilter.needGeometry,E=Gc(g,O);if(!this.layers[0]._featureFilter.filter(new S(this.zoom),E,c))continue;const A={id:y,sourceLayerIndex:C,index:x,geometry:O?E.geometry:Ua(g,c,h),properties:g.properties,type:g.type,patterns:{}},k=this.layoutVertexArray.length;this.hasPattern?this.features.push(Dy("fill-extrusion",this.layers,A,this.zoom,a)):this.addFeature(A,A.geometry,x,c,{},a.availableImages,h),a.featureIndex.insert(g,A.geometry,x,C,this.index,k)}this.sortBorders()}addFeatures(o,a,c,h,g){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,a,c,h,g)}this.sortBorders()}update(o,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Xm),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,Ix.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Ax.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,a,c,h,g,y,x){const C=[new ft(0,0),new ft(Ut,Ut)],O=x.projection,E="globe"===O.name,A=this.enableTerrain&&!E?new Sy:null,k="Polygon"===Rx[o.type];E&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new st);const F=Oy(a,500);for(let ee=F.length-1;ee>=0;ee--){const le=F[ee];(0===le.length||(L=le[0]).every(Q=>Q.x<=0)||L.every(Q=>Q.x>=Ut)||L.every(Q=>Q.y<=0)||L.every(Q=>Q.y>=Ut))&&F.splice(ee,1)}var L;let V;if(E)V=Ny(F,C,h);else{V=[];for(const ee of F)V.push({polygon:ee,bounds:C})}const q=k?this.edgeRadius:0;for(const{polygon:ee,bounds:le}of V){let Q=0,ae=0;for(const ue of ee)k&&!ue[0].equals(ue[ue.length-1])&&ue.push(ue[0]),ae+=k?ue.length-1:ue.length;const he=this.segments.prepareSegment((k?5:4)*ae,this.layoutVertexArray,this.indexArray);if(k){const ue=[],we=[];Q=he.vertexLength;for(const je of ee){let nt,Fe;je.length&&je!==ee[0]&&we.push(ue.length/2),nt=je[1].sub(je[0])._perp()._unit();for(let qe=1;qe<je.length;qe++){const Ze=je[qe],et=je[qe===je.length-1?1:qe+1];let{x:at,y:Ue}=Ze;if(q){Fe=et.sub(Ze)._perp()._unit();const _t=nt.add(Fe)._unit(),Pt=q*Math.min(4,1/(nt.x*_t.x+nt.y*_t.y));at+=Pt*_t.x,Ue+=Pt*_t.y,nt=Fe}Xd(this.layoutVertexArray,at,Ue,0,0,1,1,0),he.vertexLength++,ue.push(Ze.x,Ze.y),E&&Hc(this.layoutVertexExtArray,O.projectTilePoint(at,Ue,h),O.upVector(h,at,Ue))}}const Pe=Zm(ue,we);for(let je=0;je<Pe.length;je+=3)this.indexArray.emplaceBack(Q+Pe[je],Q+Pe[je+2],Q+Pe[je+1]),he.primitiveLength++}for(const ue of ee){A&&ue.length&&A.startRing(ue[0]);let we,Pe,je,nt=ue.length>4&&hi(ue[ue.length-2],ue[0],ue[1]),Fe=q?Co(ue[ue.length-2],ue[0],ue[1],q):0;Pe=ue[1].sub(ue[0])._perp()._unit();let qe=!0;for(let Ze=1,et=0;Ze<ue.length;Ze++){let at=ue[Ze-1],Ue=ue[Ze];const _t=ue[Ze===ue.length-1?1:Ze+1];if(A&&k&&A.currentPolyCount.top++,ky(Ue,at,le)){q&&(Pe=_t.sub(Ue)._perp()._unit(),qe=!qe);continue}A&&A.append(Ue,at);const Pt=Ue.sub(at)._perp(),xt=Pt.x/(Math.abs(Pt.x)+Math.abs(Pt.y)),Yt=Pt.y>0?1:0,dt=at.dist(Ue);if(et+dt>32768&&(et=0),q){je=_t.sub(Ue)._perp()._unit();let en=Iy(at,Ue,_t,Ay(Pe,je),q);isNaN(en)&&(en=0);const $t=Ue.sub(at)._unit();at=at.add($t.mult(Fe))._round(),Ue=Ue.add($t.mult(-en))._round(),Fe=en,Pe=je}const Bt=he.vertexLength,Qt=ue.length>4&&hi(at,Ue,_t);let In=Qm(et,nt,qe);if(Xd(this.layoutVertexArray,at.x,at.y,xt,Yt,0,0,In),Xd(this.layoutVertexArray,at.x,at.y,xt,Yt,0,1,In),et+=dt,In=Qm(et,Qt,!qe),nt=Qt,Xd(this.layoutVertexArray,Ue.x,Ue.y,xt,Yt,0,0,In),Xd(this.layoutVertexArray,Ue.x,Ue.y,xt,Yt,0,1,In),he.vertexLength+=4,this.indexArray.emplaceBack(Bt+0,Bt+1,Bt+2),this.indexArray.emplaceBack(Bt+1,Bt+3,Bt+2),he.primitiveLength+=2,q){const en=Q+(1===Ze?ue.length-2:Ze-2),$t=1===Ze?Q:en+1;if(this.indexArray.emplaceBack(Bt+1,en,Bt+3),this.indexArray.emplaceBack(en,$t,Bt+3),he.primitiveLength+=2,void 0===we&&(we=Bt),!ky(_t,ue[Ze],le)){const _i=Ze===ue.length-1?we:he.vertexLength;this.indexArray.emplaceBack(Bt+2,Bt+3,_i),this.indexArray.emplaceBack(Bt+3,_i+1,_i),this.indexArray.emplaceBack(Bt+3,$t,_i+1),he.primitiveLength+=3}qe=!qe}if(E){const en=this.layoutVertexExtArray,$t=O.projectTilePoint(at.x,at.y,h),_i=O.projectTilePoint(Ue.x,Ue.y,h),_e=O.upVector(h,at.x,at.y),an=O.upVector(h,Ue.x,Ue.y);Hc(en,$t,_e),Hc(en,$t,_e),Hc(en,_i,an),Hc(en,_i,an)}}k&&(Q+=ue.length-1)}}if(A&&A.polyCount.length>0){if(A.borders){A.vertexArrayOffset=this.centroidVertexArray.length;const ee=A.borders,le=this.featuresOnBorder.push(A)-1;for(let Q=0;Q<4;Q++)ee[Q][0]!==Number.MAX_VALUE&&this.borders[Q].push(le)}this.encodeCentroid(A.borders?void 0:A.centroid(),A)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,c,g,y,h)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort((a,c)=>this.featuresOnBorder[a].borders[o][0]-this.featuresOnBorder[c].borders[o][0])}encodeCentroid(o,a,c=!0){let h,g;if(o)if(0!==o.y){const x=a.span()._mult(this.tileToMeter);h=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(x.x/10)),g=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else h=Math.ceil(7*(o.x+450)),g=0;else h=0,g=+c;let y=c?this.centroidVertexArray.length:a.vertexArrayOffset;for(const x of a.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let C=0;C<x.top;C++)this.centroidVertexArray.emplace(y++,h,g);for(let C=0;C<2*x.edges;C++)this.centroidVertexArray.emplace(y++,0,g),this.centroidVertexArray.emplace(y++,h,g)}}}function Ay(r,o){const a=r.add(o)._unit();return r.x*a.x+r.y*a.y}function Co(r,o,a,c){const h=o.sub(r)._perp()._unit(),g=a.sub(o)._perp()._unit();return Iy(r,o,a,Ay(h,g),c)}function Iy(r,o,a,c,h){const g=Math.sqrt(1-c*c);return Math.min(r.dist(o)/3,o.dist(a)/3,h*g/c)}function ky(r,o,a){return r.x<a[0].x&&o.x<a[0].x||r.x>a[1].x&&o.x>a[1].x||r.y<a[0].y&&o.y<a[0].y||r.y>a[1].y&&o.y>a[1].y}function hi(r,o,a){if(r.x<0||r.x>=Ut||o.x<0||o.x>=Ut||a.x<0||a.x>=Ut)return!1;const c=a.sub(o),h=c.perp(),g=r.sub(o);return(c.x*g.x+c.y*g.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(g.x*g.x+g.y*g.y))>-.866&&h.x*g.x+h.y*g.y<0}function Qm(r,o,a){const c=o?2|r:-3&r;return a?1|c:-2&c}function Ry(){const r=Math.PI/32,o=Math.tan(r),a=jd;return a*Math.sqrt(1+2*o*o)-a}function Ny(r,o,a){const c=1<<a.z,h=Vs(a.x/c),g=Vs((a.x+1)/c),y=zo(a.y/c),x=zo((a.y+1)/c);return function(C,O,E,A,k=0,F){const L=[];if(!C.length||!E||!A)return L;const V=(ue,we)=>{for(const Pe of ue)L.push({polygon:Pe,bounds:we})},q=Math.ceil(Math.log2(E)),ee=Math.ceil(Math.log2(A)),le=q-ee,Q=[];for(let ue=0;ue<Math.abs(le);ue++)Q.push(le>0?0:1);for(let ue=0;ue<Math.min(q,ee);ue++)Q.push(0),Q.push(1);let ae=C;if(ae=Xf(ae,O[0].y-k,O[1].y+k,1),ae=Xf(ae,O[0].x-k,O[1].x+k,0),!ae.length)return L;const he=[];for(Q.length?he.push({polygons:ae,bounds:O,depth:0}):V(ae,O);he.length;){const ue=he.pop(),we=ue.depth,Pe=Q[we],je=ue.bounds[0],nt=ue.bounds[1],Fe=0===Pe?je.x:je.y,qe=0===Pe?nt.x:nt.y,Ze=F?F(Pe,Fe,qe):.5*(Fe+qe),et=Xf(ue.polygons,Fe-k,Ze+k,Pe),at=Xf(ue.polygons,Ze-k,qe+k,Pe);if(et.length){const Ue=[je,new ft(0===Pe?Ze:nt.x,1===Pe?Ze:nt.y)];Q.length>we+1?he.push({polygons:et,bounds:Ue,depth:we+1}):V(et,Ue)}if(at.length){const Ue=[new ft(0===Pe?Ze:je.x,1===Pe?Ze:je.y),nt];Q.length>we+1?he.push({polygons:at,bounds:Ue,depth:we+1}):V(at,Ue)}}return L}(r,o,Math.ceil((g-h)/11.25),Math.ceil((y-x)/11.25),1,(C,O,E)=>{if(0===C)return.5*(O+E);{const A=zo((a.y+O/Ut)/c);return(xl(.5*(zo((a.y+E/Ut)/c)+A))*c-a.y)*Ut}})}Oe(Fu,"FillExtrusionBucket",{omit:["layers","features"]}),Oe(Sy,"PartMetadata");const Fx=new ne({"fill-extrusion-edge-radius":new z($e["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Lx={paint:new ne({"fill-extrusion-opacity":new z($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Z($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new z($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new z($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Z($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Z($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Z($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new z($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new z($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new z($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new z($e["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Fx};function e_(r,o,a){var c=2*Math.PI*6378137/256/Math.pow(2,a);return[r*c-2*Math.PI*6378137/2,o*c-2*Math.PI*6378137/2]}class t_{constructor(o,a,c){this.z=o,this.x=a,this.y=c,this.key=Wc(0,o,o,a,c)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,a){const c=(y=this.y,x=this.z,C=e_(256*(g=this.x),256*(y=Math.pow(2,x)-y-1),x),O=e_(256*(g+1),256*(y+1),x),C[0]+","+C[1]+","+O[0]+","+O[1]),h=function(g,y,x){let C,O="";for(let E=g;E>0;E--)C=1<<E-1,O+=(y&C?1:0)+(x&C?2:0);return O}(this.z,this.x,this.y);var g,y,x,C,O;return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===a?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Bx{constructor(o,a){this.wrap=o,this.canonical=a,this.key=Wc(o,a.z,a.z,a.x,a.y)}}class Mo{constructor(o,a,c,h,g){this.overscaledZ=o,this.wrap=a,this.canonical=new t_(c,+h,+g),this.key=0===a&&o===c?this.canonical.key:Wc(a,o,c,h,g)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const a=this.canonical.z-o;return o>this.canonical.z?new Mo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(o,this.wrap,o,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(o,a=!0){if(this.overscaledZ===o&&a)return this.key;if(o>this.canonical.z)return Wc(this.wrap*+a,o,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-o;return Wc(this.wrap*+a,o,o,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const a=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>a&&o.canonical.y===this.canonical.y>>a}children(o){if(this.overscaledZ>=o)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,c=2*this.canonical.x,h=2*this.canonical.y;return[new Mo(a,this.wrap,a,c,h),new Mo(a,this.wrap,a,c+1,h),new Mo(a,this.wrap,a,c,h+1),new Mo(a,this.wrap,a,c+1,h+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Mo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Bx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wc(r,o,a,c,h){const g=1<<Math.min(a,22);let y=g*(h%g)+c%g;return r&&a<22&&(y+=g*g*((r<0?-2*r-1:2*r)%(1<<2*(22-a)))),16*(32*y+a)+(o-a)}Oe(t_,"CanonicalTileID"),Oe(Mo,"OverscaledTileID",{omit:["projMatrix"]});class Lu extends ft{constructor(o,a,c){super(o,a),this.z=c}}function Kd(r,o){return r.x*o.x+r.y*o.y}function n_(r,o){if(1===r.length){let a=0;const c=o[a++];let h;for(;!h||c.equals(h);)if(h=o[a++],!h)return 1/0;for(;a<o.length;a++){const g=o[a],y=r[0],x=h.sub(c),C=g.sub(c),O=y.sub(c),E=Kd(x,x),A=Kd(x,C),k=Kd(C,C),F=Kd(O,x),L=Kd(O,C),V=E*k-A*A,q=(k*F-A*L)/V,ee=(E*L-A*F)/V,le=c.z*(1-q-ee)+h.z*q+g.z*ee;if(isFinite(le))return le}return 1/0}{let a=1/0;for(const c of o)a=Math.min(a,c.z);return a}}function zx(r,o,a,c,h,g,y,x){const C=y*h.getElevationAt(r,o,!0,!0),O=0!==g[0],E=O?0===g[1]?y*(g[0]/7-450):y*function(A,k,F){const L=Math.floor(k[0]/8),V=Math.floor(k[1]/8),q=10*(k[0]-8*L),ee=10*(k[1]-8*V),le=A.getElevationAt(L,V,!0,!0),Q=A.getMeterToDEM(F),ae=Math.floor(.5*(q*Q-1)),he=Math.floor(.5*(ee*Q-1)),ue=A.tileCoordToPixel(L,V),we=2*ae+1,Pe=2*he+1,je=(Pt=we,xt=Pe,[(at=A).getElevationAtPixel(Ue=ue.x-ae,_t=ue.y-he,!0),at.getElevationAtPixel(Ue+xt,_t,!0),at.getElevationAtPixel(Ue,_t+xt,!0),at.getElevationAtPixel(Ue+Pt,_t+xt,!0)]),nt=Math.abs(je[0]-je[1]),Fe=Math.abs(je[2]-je[3]),qe=Math.abs(je[0]-je[2])+Math.abs(je[1]-je[3]),Ze=Math.min(.25,.5*Q*(nt+Fe)/we),et=Math.min(.25,.5*Q*qe/Pe);var at,Ue,_t,Pt,xt;return le+Math.max(Ze*q,et*ee)}(h,g,x):C;return{base:C+(0===a)?-1:a,top:O?Math.max(E+c,C+a+2):C+c}}const Vx=Ce([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Fy}=Vx,Ly=Ce([{name:"a_packed",components:4,type:"Float32"}]),{members:i_}=Ly,bM=Jf.types,o_=Math.cos(Math.PI/180*37.5);class Kf{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Le,this.layoutVertexArray2=new rt,this.indexArray=new It,this.programConfigurations=new Tu(o.layers,o.zoom),this.segments=new ho,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(o,a,c,h){this.hasPattern=Ty("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:E,id:A,index:k,sourceLayerIndex:F}of o){const L=this.layers[0]._featureFilter.needGeometry,V=Gc(E,L);if(!this.layers[0]._featureFilter.filter(new S(this.zoom),V,c))continue;const q=g?g.evaluate(V,{},c):void 0,ee={id:A,properties:E.properties,type:E.type,sourceLayerIndex:F,index:k,geometry:L?V.geometry:Ua(E,c,h),patterns:{},sortKey:q};y.push(ee)}g&&y.sort((E,A)=>E.sortKey-A.sortKey);const{lineAtlas:x,featureIndex:C}=a,O=this.addConstantDashes(x);for(const E of y){const{geometry:A,index:k,sourceLayerIndex:F}=E;if(O&&this.addFeatureDashes(E,x),this.hasPattern){const L=Dy("line",this.layers,E,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(E,A,k,c,x.positions,a.availableImages);C.insert(o[k].feature,A,k,F,this.index)}}addConstantDashes(o){let a=!1;for(const c of this.layers){const h=c.paint.get("line-dasharray").value,g=c.layout.get("line-cap").value;if("constant"!==h.kind||"constant"!==g.kind)a=!0;else{const y=g.value,x=h.value;if(!x)continue;o.addDash(x,y)}}return a}addFeatureDashes(o,a){const c=this.zoom;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if("constant"===g.kind&&"constant"===y.kind)continue;let x,C;if("constant"===g.kind){if(x=g.value,!x)continue}else x=g.evaluate({zoom:c},o);C="constant"===y.kind?y.value:y.evaluate({zoom:c},o),a.addDash(x,C),o.patterns[h.id]=a.getKey(x,C)}}update(o,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,c,h)}addFeatures(o,a,c,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,c,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,i_)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Fy),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,a,c,h,g,y){const x=this.layers[0].layout,C=x.get("line-join").evaluate(o,{}),O=x.get("line-cap").evaluate(o,{}),E=x.get("line-miter-limit"),A=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const k of a)this.addLine(k,o,C,O,E,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,c,g,y,h)}addLine(o,a,c,h,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ee=0;ee<o.length-1;ee++)this.totalDistance+=o[ee].dist(o[ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x="Polygon"===bM[a.type];let C=o.length;for(;C>=2&&o[C-1].equals(o[C-2]);)C--;let O=0;for(;O<C-1&&o[O].equals(o[O+1]);)O++;if(C<(x?3:2))return;"bevel"===c&&(g=1.05);const E=this.overscaling<=16?15*Ut/(512*this.overscaling):0,A=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let k,F,L,V,q;this.e1=this.e2=-1,x&&(k=o[C-2],q=o[O].sub(k)._unit()._perp());for(let ee=O;ee<C;ee++){if(L=ee===C-1?x?o[O+1]:void 0:o[ee+1],L&&o[ee].equals(L))continue;q&&(V=q),k&&(F=k),k=o[ee],q=L?L.sub(k)._unit()._perp():V,V=V||q;let le=V.add(q);0===le.x&&0===le.y||le._unit();const Q=V.x*q.x+V.y*q.y,ae=le.x*q.x+le.y*q.y,he=0!==ae?1/ae:1/0,ue=2*Math.sqrt(2-2*ae),we=ae<o_&&F&&L,Pe=V.x*q.y-V.y*q.x>0;if(we&&ee>O){const Fe=k.dist(F);if(Fe>2*E){const qe=k.sub(k.sub(F)._mult(E/Fe)._round());this.updateDistance(F,qe),this.addCurrentVertex(qe,V,0,0,A),F=qe}}const je=F&&L;let nt=je?c:x?"butt":h;if(je&&"round"===nt&&(he<y?nt="miter":he<=2&&(nt="fakeround")),"miter"===nt&&he>g&&(nt="bevel"),"bevel"===nt&&(he>2&&(nt="flipbevel"),he<g&&(nt="miter")),F&&this.updateDistance(F,k),"miter"===nt)le._mult(he),this.addCurrentVertex(k,le,0,0,A);else if("flipbevel"===nt){if(he>100)le=q.mult(-1);else{const Fe=he*V.add(q).mag()/V.sub(q).mag();le._perp()._mult(Fe*(Pe?-1:1))}this.addCurrentVertex(k,le,0,0,A),this.addCurrentVertex(k,le.mult(-1),0,0,A)}else if("bevel"===nt||"fakeround"===nt){const Fe=-Math.sqrt(he*he-1),qe=Pe?Fe:0,Ze=Pe?0:Fe;if(F&&this.addCurrentVertex(k,V,qe,Ze,A),"fakeround"===nt){const et=Math.round(180*ue/Math.PI/20);for(let at=1;at<et;at++){let Ue=at/et;if(.5!==Ue){const Pt=Ue-.5;Ue+=Ue*Pt*(Ue-1)*((1.0904+Q*(Q*(3.55645-1.43519*Q)-3.2452))*Pt*Pt+(.848013+Q*(.215638*Q-1.06021)))}const _t=q.sub(V)._mult(Ue)._add(V)._unit()._mult(Pe?-1:1);this.addHalfVertex(k,_t.x,_t.y,!1,Pe,0,A)}}L&&this.addCurrentVertex(k,q,-qe,-Ze,A)}else if("butt"===nt)this.addCurrentVertex(k,le,0,0,A);else if("square"===nt){const Fe=F?1:-1;F||this.addCurrentVertex(k,le,Fe,Fe,A),this.addCurrentVertex(k,le,0,0,A),F&&this.addCurrentVertex(k,le,Fe,Fe,A)}else"round"===nt&&(F&&(this.addCurrentVertex(k,V,0,0,A),this.addCurrentVertex(k,V,1,1,A,!0)),L&&(this.addCurrentVertex(k,q,-1,-1,A,!0),this.addCurrentVertex(k,q,0,0,A)));if(we&&ee<C-1){const Fe=k.dist(L);if(Fe>2*E){const qe=k.add(L.sub(k)._mult(E/Fe)._round());this.updateDistance(k,qe),this.addCurrentVertex(qe,q,0,0,A),k=qe}}}}addCurrentVertex(o,a,c,h,g,y=!1){const x=a.y*h-a.x,C=-a.y-a.x*h;this.addHalfVertex(o,a.x+a.y*c,a.y-a.x*c,y,!1,c,g),this.addHalfVertex(o,x,C,y,!0,-h,g)}addHalfVertex({x:o,y:a},c,h,g,y,x,C){this.layoutVertexArray.emplaceBack((o<<1)+(g?1:0),(a<<1)+(y?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(0===x?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const O=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,O),C.primitiveLength++),y?this.e2=O:this.e1=O}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,a){this.distance+=o.dist(a),this.updateScaledDistance()}}Oe(Kf,"LineBucket",{omit:["layers","patternFeatures"]});const r_=new ne({"line-cap":new Z($e.layout_line["line-cap"]),"line-join":new Z($e.layout_line["line-join"]),"line-miter-limit":new z($e.layout_line["line-miter-limit"]),"line-round-limit":new z($e.layout_line["line-round-limit"]),"line-sort-key":new Z($e.layout_line["line-sort-key"])});var s_={paint:new ne({"line-opacity":new Z($e.paint_line["line-opacity"]),"line-color":new Z($e.paint_line["line-color"]),"line-translate":new z($e.paint_line["line-translate"]),"line-translate-anchor":new z($e.paint_line["line-translate-anchor"]),"line-width":new Z($e.paint_line["line-width"]),"line-gap-width":new Z($e.paint_line["line-gap-width"]),"line-offset":new Z($e.paint_line["line-offset"]),"line-blur":new Z($e.paint_line["line-blur"]),"line-dasharray":new Z($e.paint_line["line-dasharray"]),"line-pattern":new Z($e.paint_line["line-pattern"]),"line-gradient":new ie($e.paint_line["line-gradient"]),"line-trim-offset":new z($e.paint_line["line-trim-offset"])}),layout:r_};const a_=new class extends Z{possiblyEvaluate(r,o){return o=new S(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,a,c){return o=Bi({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,a,c)}}(s_.paint.properties["line-width"].specification);function qc(r,o){return o>0?o+2*r:r}a_.useIntegerZoom=!0;const Ux=Ce([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),l_=Ce([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Yf=Ce([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ce([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jx=Ce([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),c_=Ce([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ce([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dp=Ce([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ja=Ce([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ce([{name:"triangle",components:3,type:"Uint16"}]),Ce([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ce([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ce([{type:"Float32",name:"offsetX"}]),Ce([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Oo=24;const Us=128;function u_(r,o){const{expression:a}=o;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new S(r+1))};if("source"===a.kind)return{kind:"source"};{const{zoomStops:c,interpolationType:h}=a;let g=0;for(;g<c.length&&c[g]<=r;)g++;g=Math.max(0,g-1);let y=g;for(;y<c.length&&c[y]<r+1;)y++;y=Math.min(c.length-1,y);const x=c[g],C=c[y];return"composite"===a.kind?{kind:"composite",minZoom:x,maxZoom:C,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:C,minSize:a.evaluate(new S(x)),maxSize:a.evaluate(new S(C)),interpolationType:h}}}function Qf(r,{uSize:o,uSizeT:a},{lowerSize:c,upperSize:h}){return"source"===r.kind?c/Us:"composite"===r.kind?Sn(c/Us,h/Us,a):o}function Bu(r,o){let a=0,c=0;if("constant"===r.kind)c=r.layoutSize;else if("source"!==r.kind){const{interpolationType:h,minZoom:g,maxZoom:y}=r,x=h?_n(Pn.interpolationFactor(h,o,g,y),0,1):0;"camera"===r.kind?c=Sn(r.minSize,r.maxSize,x):a=x}return{uSizeT:a,uSize:c}}var Yd=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Us,evaluateSizeForFeature:Qf,evaluateSizeForZoom:Bu,getSizeData:u_});function $x(r,o,a){return r.sections.forEach(c=>{c.text=function(h,g,y){const x=g.layout.get("text-transform").evaluate(y,{});return"uppercase"===x?h=h.toLocaleUpperCase():"lowercase"===x&&(h=h.toLocaleLowerCase()),D.applyArabicShaping&&(h=D.applyArabicShaping(h)),h}(c.text,o,a)}),r}const hp={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function Gx(r){return"\ufe36"===r||"\ufe48"===r||"\ufe38"===r||"\ufe44"===r||"\ufe42"===r||"\ufe3e"===r||"\ufe3c"===r||"\ufe3a"===r||"\ufe18"===r||"\ufe40"===r||"\ufe10"===r||"\ufe13"===r||"\ufe14"===r||"\uff40"===r||"\uffe3"===r||"\ufe11"===r||"\ufe12"===r}function d_(r){return"\ufe35"===r||"\ufe47"===r||"\ufe37"===r||"\ufe43"===r||"\ufe41"===r||"\ufe3d"===r||"\ufe3b"===r||"\ufe39"===r||"\ufe17"===r||"\ufe3f"===r}var By=si,h_=function(r,o,a,c,h){var g,y,x=8*h-c-1,C=(1<<x)-1,O=C>>1,E=-7,A=a?h-1:0,k=a?-1:1,F=r[o+A];for(A+=k,g=F&(1<<-E)-1,F>>=-E,E+=x;E>0;g=256*g+r[o+A],A+=k,E-=8);for(y=g&(1<<-E)-1,g>>=-E,E+=c;E>0;y=256*y+r[o+A],A+=k,E-=8);if(0===g)g=1-O;else{if(g===C)return y?NaN:1/0*(F?-1:1);y+=Math.pow(2,c),g-=O}return(F?-1:1)*y*Math.pow(2,g-c)},zy=function(r,o,a,c,h,g){var y,x,C,O=8*g-h-1,E=(1<<O)-1,A=E>>1,k=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,F=c?0:g-1,L=c?1:-1,V=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(x=isNaN(o)?1:0,y=E):(y=Math.floor(Math.log(o)/Math.LN2),o*(C=Math.pow(2,-y))<1&&(y--,C*=2),(o+=y+A>=1?k/C:k*Math.pow(2,1-A))*C>=2&&(y++,C/=2),y+A>=E?(x=0,y=E):y+A>=1?(x=(o*C-1)*Math.pow(2,h),y+=A):(x=o*Math.pow(2,A-1)*Math.pow(2,h),y=0));h>=8;r[a+F]=255&x,F+=L,x/=256,h-=8);for(y=y<<h|x,O+=h;O>0;r[a+F]=255&y,F+=L,y/=256,O-=8);r[a+F-L]|=128*V};function si(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}si.Varint=0,si.Fixed64=1,si.Bytes=2,si.Fixed32=5;var Vy=4294967296,Uy=1/Vy,Qd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function oc(r){return r.type===si.Bytes?r.readVarint()+r.pos:r.pos+1}function Gn(r,o,a){var c=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));a.realloc(c);for(var h=a.pos-1;h>=r;h--)a.buf[h+c]=a.buf[h]}function Hx(r,o){for(var a=0;a<r.length;a++)o.writeVarint(r[a])}function p_(r,o){for(var a=0;a<r.length;a++)o.writeSVarint(r[a])}function es(r,o){for(var a=0;a<r.length;a++)o.writeFloat(r[a])}function Wx(r,o){for(var a=0;a<r.length;a++)o.writeDouble(r[a])}function qx(r,o){for(var a=0;a<r.length;a++)o.writeBoolean(r[a])}function pp(r,o){for(var a=0;a<r.length;a++)o.writeFixed32(r[a])}function Zx(r,o){for(var a=0;a<r.length;a++)o.writeSFixed32(r[a])}function f_(r,o){for(var a=0;a<r.length;a++)o.writeFixed64(r[a])}function g_(r,o){for(var a=0;a<r.length;a++)o.writeSFixed64(r[a])}function eg(r,o){return(r[o]|r[o+1]<<8|r[o+2]<<16)+16777216*r[o+3]}function Zc(r,o,a){r[a]=o,r[a+1]=o>>>8,r[a+2]=o>>>16,r[a+3]=o>>>24}function zu(r,o){return(r[o]|r[o+1]<<8|r[o+2]<<16)+(r[o+3]<<24)}si.prototype={destroy:function(){this.buf=null},readFields:function(r,o,a){for(a=a||this.length;this.pos<a;){var c=this.readVarint(),h=c>>3,g=this.pos;this.type=7&c,r(h,o,this),this.pos===g&&this.skip(c)}return o},readMessage:function(r,o){return this.readFields(r,o,this.readVarint()+this.pos)},readFixed32:function(){var r=eg(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=zu(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=eg(this.buf,this.pos)+eg(this.buf,this.pos+4)*Vy;return this.pos+=8,r},readSFixed64:function(){var r=eg(this.buf,this.pos)+zu(this.buf,this.pos+4)*Vy;return this.pos+=8,r},readFloat:function(){var r=h_(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=h_(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var o,a,c=this.buf;return o=127&(a=c[this.pos++]),a<128?o:(o|=(127&(a=c[this.pos++]))<<7,a<128?o:(o|=(127&(a=c[this.pos++]))<<14,a<128?o:(o|=(127&(a=c[this.pos++]))<<21,a<128?o:function(h,g,y){var x,C,O=y.buf;if(x=(112&(C=O[y.pos++]))>>4,C<128||(x|=(127&(C=O[y.pos++]))<<3,C<128)||(x|=(127&(C=O[y.pos++]))<<10,C<128)||(x|=(127&(C=O[y.pos++]))<<17,C<128)||(x|=(127&(C=O[y.pos++]))<<24,C<128)||(x|=(1&(C=O[y.pos++]))<<31,C<128))return function $a(r,o,a){return a?4294967296*o+(r>>>0):4294967296*(o>>>0)+(r>>>0)}(h,x,g);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(a=c[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,o=this.pos;return this.pos=r,r-o>=12&&Qd?Qd.decode(this.buf.subarray(o,r)):function(a,c,h){for(var g="",y=c;y<h;){var x,C,O,E=a[y],A=null,k=E>239?4:E>223?3:E>191?2:1;if(y+k>h)break;1===k?E<128&&(A=E):2===k?128==(192&(x=a[y+1]))&&(A=(31&E)<<6|63&x)<=127&&(A=null):3===k?(C=a[y+2],128==(192&(x=a[y+1]))&&128==(192&C)&&((A=(15&E)<<12|(63&x)<<6|63&C)<=2047||A>=55296&&A<=57343)&&(A=null)):4===k&&(C=a[y+2],O=a[y+3],128==(192&(x=a[y+1]))&&128==(192&C)&&128==(192&O)&&((A=(15&E)<<18|(63&x)<<12|(63&C)<<6|63&O)<=65535||A>=1114112)&&(A=null)),null===A?(A=65533,k=1):A>65535&&(A-=65536,g+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),g+=String.fromCharCode(A),y+=k}return g}(this.buf,o,r)},readBytes:function(){var r=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,r);return this.pos=r,o},readPackedVarint:function(r,o){if(this.type!==si.Bytes)return r.push(this.readVarint(o));var a=oc(this);for(r=r||[];this.pos<a;)r.push(this.readVarint(o));return r},readPackedSVarint:function(r){if(this.type!==si.Bytes)return r.push(this.readSVarint());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==si.Bytes)return r.push(this.readBoolean());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==si.Bytes)return r.push(this.readFloat());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==si.Bytes)return r.push(this.readDouble());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==si.Bytes)return r.push(this.readFixed32());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==si.Bytes)return r.push(this.readSFixed32());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==si.Bytes)return r.push(this.readFixed64());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==si.Bytes)return r.push(this.readSFixed64());var o=oc(this);for(r=r||[];this.pos<o;)r.push(this.readSFixed64());return r},skip:function(r){var o=7&r;if(o===si.Varint)for(;this.buf[this.pos++]>127;);else if(o===si.Bytes)this.pos=this.readVarint()+this.pos;else if(o===si.Fixed32)this.pos+=4;else{if(o!==si.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(r,o){this.writeVarint(r<<3|o)},realloc:function(r){for(var o=this.length||16;o<this.pos+r;)o*=2;if(o!==this.length){var a=new Uint8Array(o);a.set(this.buf),this.buf=a,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Zc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Zc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Zc(this.buf,-1&r,this.pos),Zc(this.buf,Math.floor(r*Uy),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Zc(this.buf,-1&r,this.pos),Zc(this.buf,Math.floor(r*Uy),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(o,a){var c,h,g,x;if(o>=0?(c=o%4294967296|0,h=o/4294967296|0):(h=~(-o/4294967296),4294967295^(c=~(-o%4294967296))?c=c+1|0:(c=0,h=h+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),g=c,(x=a).buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7),function(g,y){var x=(7&g)<<4;y.buf[y.pos++]|=x|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(h,a)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var o=this.pos;this.pos=function(c,h,g){for(var y,x,C=0;C<h.length;C++){if((y=h.charCodeAt(C))>55295&&y<57344){if(!x){y>56319||C+1===h.length?(c[g++]=239,c[g++]=191,c[g++]=189):x=y;continue}if(y<56320){c[g++]=239,c[g++]=191,c[g++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(c[g++]=239,c[g++]=191,c[g++]=189,x=null);y<128?c[g++]=y:(y<2048?c[g++]=y>>6|192:(y<65536?c[g++]=y>>12|224:(c[g++]=y>>18|240,c[g++]=y>>12&63|128),c[g++]=y>>6&63|128),c[g++]=63&y|128)}return g}(this.buf,r,this.pos);var a=this.pos-o;a>=128&&Gn(o,a,this),this.pos=o-1,this.writeVarint(a),this.pos+=a},writeFloat:function(r){this.realloc(4),zy(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),zy(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var o=r.length;this.writeVarint(o),this.realloc(o);for(var a=0;a<o;a++)this.buf[this.pos++]=r[a]},writeRawMessage:function(r,o){this.pos++;var a=this.pos;r(o,this);var c=this.pos-a;c>=128&&Gn(a,c,this),this.pos=a-1,this.writeVarint(c),this.pos+=c},writeMessage:function(r,o,a){this.writeTag(r,si.Bytes),this.writeRawMessage(o,a)},writePackedVarint:function(r,o){o.length&&this.writeMessage(r,Hx,o)},writePackedSVarint:function(r,o){o.length&&this.writeMessage(r,p_,o)},writePackedBoolean:function(r,o){o.length&&this.writeMessage(r,qx,o)},writePackedFloat:function(r,o){o.length&&this.writeMessage(r,es,o)},writePackedDouble:function(r,o){o.length&&this.writeMessage(r,Wx,o)},writePackedFixed32:function(r,o){o.length&&this.writeMessage(r,pp,o)},writePackedSFixed32:function(r,o){o.length&&this.writeMessage(r,Zx,o)},writePackedFixed64:function(r,o){o.length&&this.writeMessage(r,f_,o)},writePackedSFixed64:function(r,o){o.length&&this.writeMessage(r,g_,o)},writeBytesField:function(r,o){this.writeTag(r,si.Bytes),this.writeBytes(o)},writeFixed32Field:function(r,o){this.writeTag(r,si.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(r,o){this.writeTag(r,si.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(r,o){this.writeTag(r,si.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(r,o){this.writeTag(r,si.Fixed64),this.writeSFixed64(o)},writeVarintField:function(r,o){this.writeTag(r,si.Varint),this.writeVarint(o)},writeSVarintField:function(r,o){this.writeTag(r,si.Varint),this.writeSVarint(o)},writeStringField:function(r,o){this.writeTag(r,si.Bytes),this.writeString(o)},writeFloatField:function(r,o){this.writeTag(r,si.Fixed32),this.writeFloat(o)},writeDoubleField:function(r,o){this.writeTag(r,si.Fixed64),this.writeDouble(o)},writeBooleanField:function(r,o){this.writeVarintField(r,Boolean(o))}};var tg=rr(By);const m_=3;function Jx(r,o,a){o.glyphs=[],1===r&&a.readMessage(Xx,o)}function Xx(r,o,a){if(3===r){const{id:c,bitmap:h,width:g,height:y,left:x,top:C,advance:O}=a.readMessage(eh,{});o.glyphs.push({id:c,bitmap:new bl({width:g+2*m_,height:y+2*m_},h),metrics:{width:g,height:y,left:x,top:C,advance:O}})}else 4===r?o.ascender=a.readSVarint():5===r&&(o.descender=a.readSVarint())}function eh(r,o,a){1===r?o.id=a.readVarint():2===r?o.bitmap=a.readBytes():3===r?o.width=a.readVarint():4===r?o.height=a.readVarint():5===r?o.left=a.readSVarint():6===r?o.top=a.readSVarint():7===r&&(o.advance=a.readVarint())}const jy=m_;function __(r){let o=0,a=0;for(const y of r)o+=y.w*y.h,a=Math.max(a,y.w);r.sort((y,x)=>x.h-y.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),a),h:1/0}];let h=0,g=0;for(const y of r)for(let x=c.length-1;x>=0;x--){const C=c[x];if(!(y.w>C.w||y.h>C.h)){if(y.x=C.x,y.y=C.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===C.w&&y.h===C.h){const O=c.pop();x<c.length&&(c[x]=O)}else y.h===C.h?(C.x+=y.w,C.w-=y.w):y.w===C.w?(C.y+=y.h,C.h-=y.h):(c.push({x:C.x+y.w,y:C.y,w:C.w-y.w,h:y.h}),C.y+=y.h,C.h-=y.h);break}}return{w:h,h:g,fill:o/(h*g)||0}}const To=1;class Ga{constructor(o,{pixelRatio:a,version:c,stretchX:h,stretchY:g,content:y}){this.paddedRect=o,this.pixelRatio=a,this.stretchX=h,this.stretchY=g,this.content=y,this.version=c}get tl(){return[this.paddedRect.x+To,this.paddedRect.y+To]}get br(){return[this.paddedRect.x+this.paddedRect.w-To,this.paddedRect.y+this.paddedRect.h-To]}get displaySize(){return[(this.paddedRect.w-2*To)/this.pixelRatio,(this.paddedRect.h-2*To)/this.pixelRatio]}}class $y{constructor(o,a){const c={},h={};this.haveRenderCallbacks=[];const g=[];this.addImages(o,c,g),this.addImages(a,h,g);const{w:y,h:x}=__(g),C=new mr({width:y||1,height:x||1});for(const O in o){const E=o[O],A=c[O].paddedRect;mr.copy(E.data,C,{x:0,y:0},{x:A.x+To,y:A.y+To},E.data)}for(const O in a){const E=a[O],A=h[O].paddedRect,k=A.x+To,F=A.y+To,L=E.data.width,V=E.data.height;mr.copy(E.data,C,{x:0,y:0},{x:k,y:F},E.data),mr.copy(E.data,C,{x:0,y:V-1},{x:k,y:F-1},{width:L,height:1}),mr.copy(E.data,C,{x:0,y:0},{x:k,y:F+V},{width:L,height:1}),mr.copy(E.data,C,{x:L-1,y:0},{x:k-1,y:F},{width:1,height:V}),mr.copy(E.data,C,{x:0,y:0},{x:k+L,y:F},{width:1,height:V})}this.image=C,this.iconPositions=c,this.patternPositions=h}addImages(o,a,c){for(const h in o){const g=o[h],y={x:0,y:0,w:g.data.width+2*To,h:g.data.height+2*To};c.push(y),a[h]=new Ga(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(o,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>o.hasImage(c)),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in o.updatedImages)this.patchUpdatedImage(this.iconPositions[c],o.getImage(c),a),this.patchUpdatedImage(this.patternPositions[c],o.getImage(c),a)}patchUpdatedImage(o,a,c){if(!o||!a||o.version===a.version)return;o.version=a.version;const[h,g]=o.tl;c.update(a.data,void 0,{x:h,y:g})}}Oe(Ga,"ImagePosition"),Oe($y,"ImageAtlas");const js={horizontal:1,vertical:2,horizontalOnly:3},Kx=-17;class ng{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,a){const c=new ng;return c.scale=o||1,c.fontStack=a,c}static forImage(o){const a=new ng;return a.imageName=o,a}}class Vu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,a){const c=new Vu;for(let h=0;h<o.sections.length;h++){const g=o.sections[h];g.image?c.addImageSection(g):c.addTextSection(g,a)}return c}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=function(a,c){let h="";for(let g=0;g<a.length;g++){const y=a.charCodeAt(g+1)||null,x=a.charCodeAt(g-1)||null;h+=!c&&(y&&Mf(y)&&!hp[a[g+1]]||x&&Mf(x)&&!hp[a[g-1]])||!hp[a[g]]?a[g]:hp[a[g]]}return h}(this.text,o)}trim(){let o=0;for(let c=0;c<this.text.length&&fp[this.text.charCodeAt(c)];c++)o++;let a=this.text.length;for(let c=this.text.length-1;c>=0&&c>=o&&fp[this.text.charCodeAt(c)];c--)a--;this.text=this.text.substring(o,a),this.sectionIndex=this.sectionIndex.slice(o,a)}substring(o,a){const c=new Vu;return c.text=this.text.substring(o,a),c.sectionIndex=this.sectionIndex.slice(o,a),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,a)=>Math.max(o,this.sections[a].scale),0)}addTextSection(o,a){this.text+=o.text,this.sections.push(ng.forText(o.scale,o.fontStack||a));const c=this.sections.length-1;for(let h=0;h<o.text.length;++h)this.sectionIndex.push(c)}addImageSection(o){const a=o.image?o.image.name:"";if(0===a.length)return void bi("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(ng.forImage(a)),this.sectionIndex.push(this.sections.length-1)):bi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Gy(r,o,a,c,h,g,y,x,C,O,E,A,k,F,L){const V=Vu.fromFeature(r,h);A===js.vertical&&V.verticalizePunctuation(k);let q=[];const ee=function(ue,we,Pe,je,nt,Fe){if(!ue)return[];const qe=[],Ze=function(_t,Pt,xt,Yt,dt,Bt){let Qt=0;for(let In=0;In<_t.length();In++){const en=_t.getSection(In);Qt+=Wy(_t.getCharCode(In),en,Yt,dt,Pt,Bt)}return Qt/Math.max(1,Math.ceil(Qt/xt))}(ue,we,Pe,je,nt,Fe),et=ue.text.indexOf("\u200b")>=0;let at=0;for(let _t=0;_t<ue.length();_t++){const Pt=ue.getSection(_t),xt=ue.getCharCode(_t);if(fp[xt]||(at+=Wy(xt,Pt,je,nt,we,Fe)),_t<ue.length()-1){const Yt=!((Ue=xt)<11904||!(wt["Bopomofo Extended"](Ue)||wt.Bopomofo(Ue)||wt["CJK Compatibility Forms"](Ue)||wt["CJK Compatibility Ideographs"](Ue)||wt["CJK Compatibility"](Ue)||wt["CJK Radicals Supplement"](Ue)||wt["CJK Strokes"](Ue)||wt["CJK Symbols and Punctuation"](Ue)||wt["CJK Unified Ideographs Extension A"](Ue)||wt["CJK Unified Ideographs"](Ue)||wt["Enclosed CJK Letters and Months"](Ue)||wt["Halfwidth and Fullwidth Forms"](Ue)||wt.Hiragana(Ue)||wt["Ideographic Description Characters"](Ue)||wt["Kangxi Radicals"](Ue)||wt["Katakana Phonetic Extensions"](Ue)||wt.Katakana(Ue)||wt["Vertical Forms"](Ue)||wt["Yi Radicals"](Ue)||wt["Yi Syllables"](Ue)));(Hy[xt]||Yt||Pt.imageName)&&qe.push(qy(_t+1,at,Ze,qe,Yx(xt,ue.getCharCode(_t+1),Yt&&et),!1))}}var Ue;return ga(qy(ue.length(),at,Ze,qe,0,!0))}(V,O,g,o,c,F),{processBidirectionalText:le,processStyledBidirectionalText:Q}=D;if(le&&1===V.sections.length){const ue=le(V.toString(),ee);for(const we of ue){const Pe=new Vu;Pe.text=we,Pe.sections=V.sections;for(let je=0;je<we.length;je++)Pe.sectionIndex.push(0);q.push(Pe)}}else if(Q){const ue=Q(V.text,V.sectionIndex,ee);for(const we of ue){const Pe=new Vu;Pe.text=we[0],Pe.sectionIndex=we[1],Pe.sections=V.sections,q.push(Pe)}}else q=function(ue,we){const Pe=[],je=ue.text;let nt=0;for(const Fe of we)Pe.push(ue.substring(nt,Fe)),nt=Fe;return nt<je.length&&Pe.push(ue.substring(nt,je.length)),Pe}(V,ee);const ae=[],he={positionedLines:ae,text:V.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,we,Pe,je,nt,Fe,qe,Ze,et,at,Ue,_t){let Pt=0,xt=0,Yt=0;const dt="right"===Ze?1:"left"===Ze?0:.5;let Bt=!1;for(const _e of nt){const an=_e.getSections();for(const rn of an){if(rn.imageName)continue;const de=we[rn.fontStack];if(de&&(Bt=void 0!==de.ascender&&void 0!==de.descender,!Bt))break}if(!Bt)break}let Qt=0;for(const _e of nt){_e.trim();const an=_e.getMaxScale(),rn=(an-1)*Oo,de={positionedGlyphs:[],lineOffset:0};ue.positionedLines[Qt]=de;const ii=de.positionedGlyphs;let ai=0;if(!_e.length()){xt+=Fe,++Qt;continue}let G=0,J=0;for(let li=0;li<_e.length();li++){const $i=_e.getSection(li),Fi=_e.getSectionIndex(li),Si=_e.getCharCode(li);let At=$i.scale,Ai=null,ci=null,tr=null,Ke=Oo,Do=0;const Po=!(et===js.horizontal||!Ue&&!Mu(Si)||Ue&&(fp[Si]||(In=Si,wt.Arabic(In)||wt["Arabic Supplement"](In)||wt["Arabic Extended-A"](In)||wt["Arabic Presentation Forms-A"](In)||wt["Arabic Presentation Forms-B"](In))));if($i.imageName){const yr=je[$i.imageName];if(!yr)continue;tr=$i.imageName,ue.iconsInText=ue.iconsInText||!0,ci=yr.paddedRect;const _o=yr.displaySize;At=At*Oo/_t,Ai={width:_o[0],height:_o[1],left:To,top:-jy,advance:Po?_o[1]:_o[0],localGlyph:!1},Do=Bt?-Ai.height*At:Kx+an*Oo-_o[1]*At,Ke=Ai.advance;const va=(Po?_o[0]:_o[1])*At-Oo*an;va>0&&va>ai&&(ai=va)}else{const yr=Pe[$i.fontStack];if(!yr)continue;yr[Si]&&(ci=yr[Si]);const _o=we[$i.fontStack];if(!_o)continue;const va=_o.glyphs[Si];if(!va)continue;if(Ai=va.metrics,Ke=8203!==Si?Oo:0,Bt){const it=void 0!==_o.ascender?Math.abs(_o.ascender):0,Tp=void 0!==_o.descender?Math.abs(_o.descender):0,Ml=(it+Tp)*At;G<Ml&&(G=Ml,J=(it-Tp)/2*At),Do=-it*At}else Do=Kx+(an-At)*Oo}Po?(ue.verticalizable=!0,ii.push({glyph:Si,imageName:tr,x:Pt,y:xt+Do,vertical:Po,scale:At,localGlyph:Ai.localGlyph,fontStack:$i.fontStack,sectionIndex:Fi,metrics:Ai,rect:ci}),Pt+=Ke*At+at):(ii.push({glyph:Si,imageName:tr,x:Pt,y:xt+Do,vertical:Po,scale:At,localGlyph:Ai.localGlyph,fontStack:$i.fontStack,sectionIndex:Fi,metrics:Ai,rect:ci}),Pt+=Ai.advance*At+at)}0!==ii.length&&(Yt=Math.max(Pt-at,Yt),Bt?x_(ii,dt,ai,J,Fe*an/2):x_(ii,dt,ai,0,Fe/2)),Pt=0;const Ie=Fe*an+ai;de.lineOffset=Math.max(ai,rn),xt+=Ie,++Qt}var In;const en=xt,{horizontalAlign:$t,verticalAlign:_i}=v_(qe);(function(_e,an,rn,de,ii,ai){const G=(an-rn)*ii,J=-ai*de;for(const Ie of _e)for(const li of Ie.positionedGlyphs)li.x+=G,li.y+=J})(ue.positionedLines,dt,$t,_i,Yt,en),ue.top+=-_i*en,ue.bottom=ue.top+en,ue.left+=-$t*Yt,ue.right=ue.left+Yt,ue.hasBaseline=Bt}(he,o,a,c,q,y,x,C,A,O,k,L),!function(ue){for(const we of ue)if(0!==we.positionedGlyphs.length)return!1;return!0}(ae)&&he}const fp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hy={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Wy(r,o,a,c,h,g){if(o.imageName){const y=c[o.imageName];return y?y.displaySize[0]*o.scale*Oo/g+h:0}{const y=a[o.fontStack],x=y&&y.glyphs[r];return x?x.metrics.advance*o.scale+h:0}}function y_(r,o,a,c){const h=Math.pow(r-o,2);return c?r<o?h/2:2*h:h+Math.abs(a)*a}function Yx(r,o,a){let c=0;return 10===r&&(c-=1e4),a&&(c+=150),40!==r&&65288!==r||(c+=50),41!==o&&65289!==o||(c+=50),c}function qy(r,o,a,c,h,g){let y=null,x=y_(o,a,h,g);for(const C of c){const O=y_(o-C.x,a,h,g)+C.badness;O<=x&&(y=C,x=O)}return{index:r,x:o,priorBreak:y,badness:x}}function ga(r){return r?ga(r.priorBreak).concat(r.index):[]}function v_(r){let o=.5,a=.5;switch(r){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:o,verticalAlign:a}}function x_(r,o,a,c,h){if(!(o||a||c||h))return;const g=r.length-1,y=r[g],x=(y.x+y.metrics.advance*y.scale)*o;for(let C=0;C<=g;C++)r[C].x-=x,r[C].y+=a+c+h}function Qx(r,o,a){const{horizontalAlign:c,verticalAlign:h}=v_(a),g=o[0]-r.displaySize[0]*c,y=o[1]-r.displaySize[1]*h;return{image:r,top:y,bottom:y+r.displaySize[1],left:g,right:g+r.displaySize[0]}}function Zy(r,o,a,c,h,g){const y=r.image;let x;if(y.content){const q=y.content,ee=y.pixelRatio||1;x=[q[0]/ee,q[1]/ee,y.displaySize[0]-q[2]/ee,y.displaySize[1]-q[3]/ee]}const C=o.left*g,O=o.right*g;let E,A,k,F;"width"===a||"both"===a?(F=h[0]+C-c[3],A=h[0]+O+c[1]):(F=h[0]+(C+O-y.displaySize[0])/2,A=F+y.displaySize[0]);const L=o.top*g,V=o.bottom*g;return"height"===a||"both"===a?(E=h[1]+L-c[0],k=h[1]+V+c[2]):(E=h[1]+(L+V-y.displaySize[1])/2,k=E+y.displaySize[1]),{image:y,top:E,right:A,bottom:k,left:F,collisionPadding:x}}class rc extends ft{constructor(o,a,c,h,g){super(o,a),this.angle=h,this.z=c,void 0!==g&&(this.segment=g)}clone(){return new rc(this.x,this.y,this.z,this.angle,this.segment)}}function Jy(r,o,a,c,h){if(void 0===o.segment)return!0;let g=o,y=o.segment+1,x=0;for(;x>-a/2;){if(y--,y<0)return!1;x-=r[y].dist(g),g=r[y]}x+=r[y].dist(r[y+1]),y++;const C=[];let O=0;for(;x<a/2;){const E=r[y],A=r[y+1];if(!A)return!1;let k=r[y-1].angleTo(E)-E.angleTo(A);for(k=Math.abs((k+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:x,angleDelta:k}),O+=k;x-C[0].distance>c;)O-=C.shift().angleDelta;if(O>h)return!1;y++,x+=E.dist(A)}return!0}function b_(r){let o=0;for(let a=0;a<r.length-1;a++)o+=r[a].dist(r[a+1]);return o}function Xy(r,o,a){return r?.6*o*a:0}function Ky(r,o){return Math.max(r?r.right-r.left:0,o?o.right-o.left:0)}function eb(r,o,a,c,h,g){const y=Xy(a,h,g),x=Ky(a,c)*g;let C=0;const O=b_(r)/2;for(let E=0;E<r.length-1;E++){const A=r[E],k=r[E+1],F=A.dist(k);if(C+F>O){const L=(O-C)/F,V=Sn(A.x,k.x,L),q=Sn(A.y,k.y,L),ee=new rc(V,q,0,k.angleTo(A),E);return!y||Jy(r,ee,x,y,o)?ee:void 0}C+=F}}function On(r,o,a,c,h,g,y,x,C){const O=Xy(c,g,y),E=Ky(c,h),A=E*y,k=0===r[0].x||r[0].x===C||0===r[0].y||r[0].y===C;return o-A<o/4&&(o=A+o/4),re(r,k?o/2*x%o:(E/2+2*g)*y*x%o,o,O,a,A,k,!1,C)}function re(r,o,a,c,h,g,y,x,C){const O=g/2,E=b_(r);let A=0,k=o-a,F=[];for(let L=0;L<r.length-1;L++){const V=r[L],q=r[L+1],ee=V.dist(q),le=q.angleTo(V);for(;k+a<A+ee;){k+=a;const Q=(k-A)/ee,ae=Sn(V.x,q.x,Q),he=Sn(V.y,q.y,Q);if(ae>=0&&ae<C&&he>=0&&he<C&&k-O>=0&&k+O<=E){const ue=new rc(ae,he,0,le,L);ue._round(),c&&!Jy(r,ue,g,c,h)||F.push(ue)}}A+=ee}return x||F.length||y||(F=re(r,A/2,a,c,h,g,y,!0,C)),F}function w_(r,o,a,c,h){const g=[];for(let y=0;y<r.length;y++){const x=r[y];let C;for(let O=0;O<x.length-1;O++){let E=x[O],A=x[O+1];E.x<o&&A.x<o||(E.x<o?E=new ft(o,E.y+(o-E.x)/(A.x-E.x)*(A.y-E.y))._round():A.x<o&&(A=new ft(o,E.y+(o-E.x)/(A.x-E.x)*(A.y-E.y))._round()),E.y<a&&A.y<a||(E.y<a?E=new ft(E.x+(a-E.y)/(A.y-E.y)*(A.x-E.x),a)._round():A.y<a&&(A=new ft(E.x+(a-E.y)/(A.y-E.y)*(A.x-E.x),a)._round()),E.x>=c&&A.x>=c||(E.x>=c?E=new ft(c,E.y+(c-E.x)/(A.x-E.x)*(A.y-E.y))._round():A.x>=c&&(A=new ft(c,E.y+(c-E.x)/(A.x-E.x)*(A.y-E.y))._round()),E.y>=h&&A.y>=h||(E.y>=h?E=new ft(E.x+(h-E.y)/(A.y-E.y)*(A.x-E.x),h)._round():A.y>=h&&(A=new ft(E.x+(h-E.y)/(A.y-E.y)*(A.x-E.x),h)._round()),C&&E.equals(C[C.length-1])||(C=[E],g.push(C)),C.push(A)))))}}return g}Oe(rc,"Anchor");const th=1e20;function Yy(r,o,a,c,h,g,y,x,C){for(let O=o;O<o+c;O++)Qy(r,a*g+O,g,h,y,x,C);for(let O=a;O<a+h;O++)Qy(r,O*g+o,1,c,y,x,C)}function Qy(r,o,a,c,h,g,y){g[0]=0,y[0]=-th,y[1]=th,h[0]=r[o];for(let x=1,C=0,O=0;x<c;x++){h[x]=r[o+x*a];const E=x*x;do{const A=g[C];O=(h[x]-h[A]+E-A*A)/(x-A)/2}while(O<=y[C]&&--C>-1);C++,g[C]=x,y[C]=O,y[C+1]=th}for(let x=0,C=0;x<c;x++){for(;y[C+1]<x;)C++;const O=g[C],E=x-O;r[o+x*a]=h[O]+E*E}}const ma=2,C_={none:0,ideographs:1,all:2};class Uu{constructor(o,a,c){this.requestManager=o,this.localGlyphMode=a,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,a){const c=[];for(const h in o)for(const g of o[h])c.push({stack:h,id:g});Yi(c,({stack:h,id:g},y)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let C=x.glyphs[g];if(void 0!==C)return void y(null,{stack:h,id:g,glyph:C});if(C=this._tinySDF(x,h,g),C)return x.glyphs[g]=C,void y(null,{stack:h,id:g,glyph:C});const O=Math.floor(g/256);if(256*O>65535)return void y(new Error("glyphs > 65535 not supported"));if(x.ranges[O])return void y(null,{stack:h,id:g,glyph:C});let E=x.requests[O];E||(E=x.requests[O]=[],Uu.loadGlyphRange(h,O,this.url,this.requestManager,(A,k)=>{if(k){x.ascender=k.ascender,x.descender=k.descender;for(const F in k.glyphs)this._doesCharSupportLocalGlyph(+F)||(x.glyphs[+F]=k.glyphs[+F]);x.ranges[O]=!0}for(const F of E)F(A,k);delete x.requests[O]})),E.push((A,k)=>{A?y(A):k&&y(null,{stack:h,id:g,glyph:k.glyphs[g]||null})})},(h,g)=>{if(h)a(h);else if(g){const y={};for(const{stack:x,id:C,glyph:O}of g)void 0===y[x]&&(y[x]={}),void 0===y[x].glyphs&&(y[x].glyphs={}),y[x].glyphs[C]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics},y[x].ascender=this.entries[x].ascender,y[x].descender=this.entries[x].descender;a(null,y)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==C_.none&&(this.localGlyphMode===C_.all?!!this.localFontFamily:!!this.localFontFamily&&(wt["CJK Unified Ideographs"](o)||wt["Hangul Syllables"](o)||wt.Hiragana(o)||wt.Katakana(o)||wt["CJK Symbols and Punctuation"](o)))}_tinySDF(o,a,c){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(c))return;let g=o.tinySDF;if(!g){let V="400";/bold/i.test(a)?V="900":/medium/i.test(a)?V="500":/light/i.test(a)&&(V="200"),g=o.tinySDF=new Uu.TinySDF({fontFamily:h,fontWeight:V,fontSize:24*ma,buffer:3*ma,radius:8*ma}),g.fontWeight=V}if(this.localGlyphs[g.fontWeight][c])return this.localGlyphs[g.fontWeight][c];const y=String.fromCharCode(c),{data:x,width:C,height:O,glyphWidth:E,glyphHeight:A,glyphLeft:k,glyphTop:F,glyphAdvance:L}=g.draw(y);return this.localGlyphs[g.fontWeight][c]={id:c,bitmap:new bl({width:C,height:O},x),metrics:{width:E/ma,height:A/ma,left:k/ma,top:F/ma-27,advance:L/ma,localGlyph:!0}}}}Uu.loadGlyphRange=function(r,o,a,c,h){const g=256*o,y=g+255,x=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",r).replace("{range}",`${g}-${y}`),lo.Glyphs);al(x,(C,O)=>{if(C)h(C);else if(O){const E={},A=new tg(O).readFields(Jx,{});for(const k of A.glyphs)E[k.id]=k;h(null,{glyphs:E,ascender:A.ascender,descender:A.descender})}})},Uu.TinySDF=class{constructor({fontSize:r=24,buffer:o=3,radius:a=8,cutoff:c=.25,fontFamily:h="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=o,this.cutoff=c,this.radius=a;const x=this.size=r+4*o,C=this._createCanvas(x),O=this.ctx=C.getContext("2d",{willReadFrequently:!0});O.font=`${y} ${g} ${r}px ${h}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(r){const o=document.createElement("canvas");return o.width=o.height=r,o}draw(r){const{width:o,actualBoundingBoxAscent:a,actualBoundingBoxDescent:c,actualBoundingBoxLeft:h,actualBoundingBoxRight:g}=this.ctx.measureText(r),y=Math.ceil(a),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-h))),C=Math.min(this.size-this.buffer,y+Math.ceil(c)),O=x+2*this.buffer,E=C+2*this.buffer,A=Math.max(O*E,0),k=new Uint8ClampedArray(A),F={data:k,width:O,height:E,glyphWidth:x,glyphHeight:C,glyphTop:y,glyphLeft:0,glyphAdvance:o};if(0===x||0===C)return F;const{ctx:L,buffer:V,gridInner:q,gridOuter:ee}=this;L.clearRect(V,V,x,C),L.fillText(r,V,V+y);const le=L.getImageData(V,V,x,C);ee.fill(th,0,A),q.fill(0,0,A);for(let Q=0;Q<C;Q++)for(let ae=0;ae<x;ae++){const he=le.data[4*(Q*x+ae)+3]/255;if(0===he)continue;const ue=(Q+V)*O+ae+V;if(1===he)ee[ue]=0,q[ue]=th;else{const we=.5-he;ee[ue]=we>0?we*we:0,q[ue]=we<0?we*we:0}}Yy(ee,0,0,O,E,O,this.f,this.v,this.z),Yy(q,V,V,x,C,O,this.f,this.v,this.z);for(let Q=0;Q<A;Q++){const ae=Math.sqrt(ee[Q])-Math.sqrt(q[Q]);k[Q]=Math.round(255-255*(ae/this.radius+this.cutoff))}return F}};const nh=To;function ev(r,o,a,c){const h=[],g=r.image,y=g.pixelRatio,x=g.paddedRect.w-2*nh,C=g.paddedRect.h-2*nh,O=r.right-r.left,E=r.bottom-r.top,A=g.stretchX||[[0,x]],k=g.stretchY||[[0,C]],F=(Fe,qe)=>Fe+qe[1]-qe[0],L=A.reduce(F,0),V=k.reduce(F,0),q=x-L,ee=C-V;let le=0,Q=L,ae=0,he=V,ue=0,we=q,Pe=0,je=ee;if(g.content&&c){const Fe=g.content;le=M_(A,0,Fe[0]),ae=M_(k,0,Fe[1]),Q=M_(A,Fe[0],Fe[2]),he=M_(k,Fe[1],Fe[3]),ue=Fe[0]-le,Pe=Fe[1]-ae,we=Fe[2]-Fe[0]-Q,je=Fe[3]-Fe[1]-he}const nt=(Fe,qe,Ze,et)=>{const at=gp(Fe.stretch-le,Q,O,r.left),Ue=_r(Fe.fixed-ue,we,Fe.stretch,L),_t=gp(qe.stretch-ae,he,E,r.top),Pt=_r(qe.fixed-Pe,je,qe.stretch,V),xt=gp(Ze.stretch-le,Q,O,r.left),Yt=_r(Ze.fixed-ue,we,Ze.stretch,L),dt=gp(et.stretch-ae,he,E,r.top),Bt=_r(et.fixed-Pe,je,et.stretch,V),Qt=new ft(at,_t),In=new ft(xt,_t),en=new ft(xt,dt),$t=new ft(at,dt),_i=new ft(Ue/y,Pt/y),_e=new ft(Yt/y,Bt/y),an=o*Math.PI/180;if(an){const ii=Math.sin(an),ai=Math.cos(an),G=[ai,-ii,ii,ai];Qt._matMult(G),In._matMult(G),$t._matMult(G),en._matMult(G)}const rn=Fe.stretch+Fe.fixed,de=qe.stretch+qe.fixed;return{tl:Qt,tr:In,bl:$t,br:en,tex:{x:g.paddedRect.x+nh+rn,y:g.paddedRect.y+nh+de,w:Ze.stretch+Ze.fixed-rn,h:et.stretch+et.fixed-de},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_i,pixelOffsetBR:_e,minFontScaleX:we/y/O,minFontScaleY:je/y/E,isSDF:a}};if(c&&(g.stretchX||g.stretchY)){const Fe=O_(A,q,L),qe=O_(k,ee,V);for(let Ze=0;Ze<Fe.length-1;Ze++){const et=Fe[Ze],at=Fe[Ze+1];for(let Ue=0;Ue<qe.length-1;Ue++)h.push(nt(et,qe[Ue],at,qe[Ue+1]))}}else h.push(nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:C+1}));return h}function M_(r,o,a){let c=0;for(const h of r)c+=Math.max(o,Math.min(a,h[1]))-Math.max(o,Math.min(a,h[0]));return c}function O_(r,o,a){const c=[{fixed:-nh,stretch:0}];for(const[h,g]of r){const y=c[c.length-1];c.push({fixed:h-y.stretch,stretch:y.stretch}),c.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return c.push({fixed:o+nh,stretch:a}),c}function gp(r,o,a,c){return r/o*a+c}function _r(r,o,a,c){return r-o*a/c}function tb(r,o,a,c){const h=o+r.positionedLines[c].lineOffset;return 0===c?a+h/2:a+(h+(o+r.positionedLines[c-1].lineOffset))/2}class T_{constructor(o=[],a=D_){if(this.data=o,this.length=this.data.length,this.compare=a,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:a,compare:c}=this,h=a[o];for(;o>0;){const g=o-1>>1,y=a[g];if(c(h,y)>=0)break;a[o]=y,o=g}a[o]=h}_down(o){const{data:a,compare:c}=this,h=this.length>>1,g=a[o];for(;o<h;){let y=1+(o<<1),x=a[y];const C=y+1;if(C<this.length&&c(a[C],x)<0&&(y=C,x=a[C]),c(x,g)>=0)break;a[o]=x,o=y}a[o]=g}}function D_(r,o){return r<o?-1:r>o?1:0}function nb(r,o=1,a=!1){let c=1/0,h=1/0,g=-1/0,y=-1/0;const x=r[0];for(let F=0;F<x.length;F++){const L=x[F];(!F||L.x<c)&&(c=L.x),(!F||L.y<h)&&(h=L.y),(!F||L.x>g)&&(g=L.x),(!F||L.y>y)&&(y=L.y)}const C=Math.min(g-c,y-h);let O=C/2;const E=new T_([],wM);if(0===C)return new ft(c,h);for(let F=c;F<g;F+=C)for(let L=h;L<y;L+=C)E.push(new mp(F+O,L+O,O,r));let A=function(F){let L=0,V=0,q=0;const ee=F[0];for(let le=0,Q=ee.length,ae=Q-1;le<Q;ae=le++){const he=ee[le],ue=ee[ae],we=he.x*ue.y-ue.x*he.y;V+=(he.x+ue.x)*we,q+=(he.y+ue.y)*we,L+=3*we}return new mp(V/L,q/L,0,F)}(r),k=E.length;for(;E.length;){const F=E.pop();(F.d>A.d||!A.d)&&(A=F,a&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,k)),F.max-A.d<=o||(O=F.h/2,E.push(new mp(F.p.x-O,F.p.y-O,O,r)),E.push(new mp(F.p.x+O,F.p.y-O,O,r)),E.push(new mp(F.p.x-O,F.p.y+O,O,r)),E.push(new mp(F.p.x+O,F.p.y+O,O,r)),k+=4)}return a&&(console.log(`num probes: ${k}`),console.log(`best distance: ${A.d}`)),A.p}function wM(r,o){return o.max-r.max}class mp{constructor(o,a,c,h){this.p=new ft(o,a),this.h=c,this.d=function(g,y){let x=!1,C=1/0;for(let O=0;O<y.length;O++){const E=y[O];for(let A=0,k=E.length,F=k-1;A<k;F=A++){const L=E[A],V=E[F];L.y>g.y!=V.y>g.y&&g.x<(V.x-L.x)*(g.y-L.y)/(V.y-L.y)+L.x&&(x=!x),C=Math.min(C,by(g,L,V))}}return(x?1:-1)*Math.sqrt(C)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const _p=7,P_=Number.POSITIVE_INFINITY,tv=Math.sqrt(2);function ib(r,[o,a]){let c=0,h=0;if(a===P_){o<0&&(o=0);const g=o/tv;switch(r){case"top-right":case"top-left":h=g-_p;break;case"bottom-right":case"bottom-left":h=-g+_p;break;case"bottom":h=-o+_p;break;case"top":h=o-_p}switch(r){case"top-right":case"bottom-right":c=-g;break;case"top-left":case"bottom-left":c=g;break;case"left":c=o;break;case"right":c=-o}}else{switch(o=Math.abs(o),a=Math.abs(a),r){case"top-right":case"top-left":case"top":h=a-_p;break;case"bottom-right":case"bottom-left":case"bottom":h=-a+_p}switch(r){case"top-right":case"bottom-right":case"right":c=-o;break;case"top-left":case"bottom-left":case"left":c=o}}return[c,h]}function ob(r,o,a,c,h,g,y,x,C,O){r.createArrays(),r.tilePixelRatio=Ut/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const E=r.layers[0].layout,A=r.layers[0]._unevaluatedLayout._values,k={};if("composite"===r.textSizeData.kind){const{minZoom:V,maxZoom:q}=r.textSizeData;k.compositeTextSizes=[A["text-size"].possiblyEvaluate(new S(V),x),A["text-size"].possiblyEvaluate(new S(q),x)]}if("composite"===r.iconSizeData.kind){const{minZoom:V,maxZoom:q}=r.iconSizeData;k.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new S(V),x),A["icon-size"].possiblyEvaluate(new S(q),x)]}k.layoutTextSize=A["text-size"].possiblyEvaluate(new S(C+1),x),k.layoutIconSize=A["icon-size"].possiblyEvaluate(new S(C+1),x),k.textMaxSize=A["text-size"].possiblyEvaluate(new S(18),x);const F="map"===E.get("text-rotation-alignment")&&"point"!==E.get("symbol-placement"),L=E.get("text-size");for(const V of r.features){const q=E.get("text-font").evaluate(V,{},x).join(","),ee=L.evaluate(V,{},x),le=k.layoutTextSize.evaluate(V,{},x),Q=(k.layoutIconSize.evaluate(V,{},x),{horizontal:{},vertical:void 0}),ae=V.text;let he,ue=[0,0];if(ae){const je=ae.toString(),nt=E.get("text-letter-spacing").evaluate(V,{},x)*Oo,Fe=E.get("text-line-height").evaluate(V,{},x)*Oo,qe=la(je)?nt:0,Ze=E.get("text-anchor").evaluate(V,{},x),et=E.get("text-variable-anchor");if(!et){const xt=E.get("text-radial-offset").evaluate(V,{},x);ue=xt?ib(Ze,[xt*Oo,P_]):E.get("text-offset").evaluate(V,{},x).map(Yt=>Yt*Oo)}let at=F?"center":E.get("text-justify").evaluate(V,{},x);const Ue="point"===E.get("symbol-placement"),_t=Ue?E.get("text-max-width").evaluate(V,{},x)*Oo:1/0,Pt=xt=>{r.allowVerticalPlacement&&Zl(je)&&(Q.vertical=Gy(ae,o,a,h,q,_t,Fe,Ze,xt,qe,ue,js.vertical,!0,le,ee))};if(!F&&et){const xt="auto"===at?et.map(dt=>Jc(dt)):[at];let Yt=!1;for(let dt=0;dt<xt.length;dt++){const Bt=xt[dt];if(!Q.horizontal[Bt])if(Yt)Q.horizontal[Bt]=Q.horizontal[0];else{const Qt=Gy(ae,o,a,h,q,_t,Fe,"center",Bt,qe,ue,js.horizontal,!1,le,ee);Qt&&(Q.horizontal[Bt]=Qt,Yt=1===Qt.positionedLines.length)}}Pt("left")}else{if("auto"===at&&(at=Jc(Ze)),Ue||E.get("text-writing-mode").indexOf("horizontal")>=0||!Zl(je)){const xt=Gy(ae,o,a,h,q,_t,Fe,Ze,at,qe,ue,js.horizontal,!1,le,ee);xt&&(Q.horizontal[at]=xt)}Pt(Ue?"left":at)}}let we=!1;if(V.icon&&V.icon.name){const je=c[V.icon.name];je&&(he=Qx(h[V.icon.name],E.get("icon-offset").evaluate(V,{},x),E.get("icon-anchor").evaluate(V,{},x)),we=je.sdf,void 0===r.sdfIcons?r.sdfIcons=je.sdf:r.sdfIcons!==je.sdf&&bi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==r.pixelRatio||0!==E.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}const Pe=E_(Q.horizontal)||Q.vertical;r.iconsInText||(r.iconsInText=!!Pe&&Pe.iconsInText),(Pe||he)&&rb(r,V,Q,he,c,k,le,0,ue,we,y,x,O)}g&&r.generateCollisionDebugBuffers(C,r.collisionBoxArray)}function Jc(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function rb(r,o,a,c,h,g,y,x,C,O,E,A,k){let F=g.textMaxSize.evaluate(o,{},A);void 0===F&&(F=y);const L=r.layers[0].layout,V=L.get("icon-offset").evaluate(o,{},A),q=E_(a.horizontal)||a.vertical,ee="globe"===k.name,le=Oo,Q=y/le,ae=r.tilePixelRatio*F/le,he=(Ze=r.overscaling,r.zoom>18&&Ze>2&&(Ze>>=1),Math.max(Ut/(512*Ze),1)*L.get("symbol-spacing")),ue=L.get("text-padding")*r.tilePixelRatio,we=L.get("icon-padding")*r.tilePixelRatio,Pe=cn(L.get("text-max-angle")),je="map"===L.get("text-rotation-alignment")&&"point"!==L.get("symbol-placement"),nt="map"===L.get("icon-rotation-alignment")&&"point"!==L.get("symbol-placement"),Fe=L.get("symbol-placement"),qe=he/2;var Ze;const et=L.get("icon-text-fit");let at;c&&"none"!==et&&(r.allowVerticalPlacement&&a.vertical&&(at=Zy(c,a.vertical,et,L.get("icon-text-fit-padding"),V,Q)),q&&(c=Zy(c,q,et,L.get("icon-text-fit-padding"),V,Q)));const Ue=(_t,Pt,xt)=>{if(Pt.x<0||Pt.x>=Ut||Pt.y<0||Pt.y>=Ut)return;let Yt=null;if(ee){const{x:dt,y:Bt,z:Qt}=k.projectTilePoint(Pt.x,Pt.y,xt);Yt={anchor:new rc(dt,Bt,Qt,0,void 0),up:k.upVector(xt,Pt.x,Pt.y)}}!function(dt,Bt,Qt,In,en,$t,_i,_e,an,rn,de,ii,ai,G,J,Ie,li,$i,Fi,Si,At,Ai,ci,tr,Ke){const Do=dt.addToLineVertexArray(Bt,In);let Po,yr,_o,va,it,Tp,Ml,Zu=0,po=0,Ol=0,$_=0,_g=-1,yg=-1;const Xa={};let G_=kd("");const Qc=Qt?Qt.anchor:Bt;let vg=0,xg=0;if(void 0===an._unevaluatedLayout.getValue("text-radial-offset")?[vg,xg]=an.layout.get("text-offset").evaluate(At,{},Ke).map(vs=>vs*Oo):(vg=an.layout.get("text-radial-offset").evaluate(At,{},Ke)*Oo,xg=P_),dt.allowVerticalPlacement&&en.vertical){const vs=en.vertical;if(J)Tp=S_(vs),_e&&(Ml=S_(_e));else{const Fr=an.layout.get("text-rotate").evaluate(At,{},Ke)+90;_o=ig(rn,Qc,Bt,de,ii,ai,vs,G,Fr,Ie),_e&&(va=ig(rn,Qc,Bt,de,ii,ai,_e,$i,Fr))}}if($t){const vs=an.layout.get("icon-rotate").evaluate(At,{},Ke),Fr="none"!==an.layout.get("icon-text-fit"),Ya=ev($t,vs,ci,Fr),Dp=_e?ev(_e,vs,ci,Fr):void 0;yr=ig(rn,Qc,Bt,de,ii,ai,$t,$i,vs),Zu=4*Ya.length;const Ev=dt.iconSizeData;let ac=null;"source"===Ev.kind?(ac=[Us*an.layout.get("icon-size").evaluate(At,{},Ke)],ac[0]>Ha&&bi(`${dt.layerIds[0]}: Value for "icon-size" is >= ${ih}. Reduce your "icon-size".`)):"composite"===Ev.kind&&(ac=[Us*Ai.compositeIconSizes[0].evaluate(At,{},Ke),Us*Ai.compositeIconSizes[1].evaluate(At,{},Ke)],(ac[0]>Ha||ac[1]>Ha)&&bi(`${dt.layerIds[0]}: Value for "icon-size" is >= ${ih}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,Ya,ac,Si,Fi,At,!1,Qt,Bt,Do.lineStartIndex,Do.lineLength,-1,tr,Ke),_g=dt.icon.placedSymbolArray.length-1,Dp&&(po=4*Dp.length,dt.addSymbols(dt.icon,Dp,ac,Si,Fi,At,js.vertical,Qt,Bt,Do.lineStartIndex,Do.lineLength,-1,tr,Ke),yg=dt.icon.placedSymbolArray.length-1)}for(const vs in en.horizontal){const Fr=en.horizontal[vs];Po||(G_=kd(Fr.text),J?it=S_(Fr):Po=ig(rn,Qc,Bt,de,ii,ai,Fr,G,an.layout.get("text-rotate").evaluate(At,{},Ke),Ie));const Ya=1===Fr.positionedLines.length;if(Ol+=nv(dt,Qt,Bt,Fr,_i,an,J,At,Ie,Do,en.vertical?js.horizontal:js.horizontalOnly,Ya?Object.keys(en.horizontal):[vs],Xa,_g,Ai,tr,Ke),Ya)break}en.vertical&&($_+=nv(dt,Qt,Bt,en.vertical,_i,an,J,At,Ie,Do,js.vertical,["vertical"],Xa,yg,Ai,tr,Ke));let Ka=-1;const Tl=(vs,Fr)=>vs?Math.max(vs,Fr):Fr;Ka=Tl(it,Ka),Ka=Tl(Tp,Ka),Ka=Tl(Ml,Ka);const mb=Ka>-1?1:0;dt.glyphOffsetArray.length>=sc.MAX_GLYPHS&&bi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==At.sortKey&&dt.addToSortKeyRanges(dt.symbolInstances.length,At.sortKey),dt.symbolInstances.emplaceBack(Qc.x,Qc.y,Qc.z,Bt.x,Bt.y,Xa.right>=0?Xa.right:-1,Xa.center>=0?Xa.center:-1,Xa.left>=0?Xa.left:-1,Xa.vertical>=0?Xa.vertical:-1,_g,yg,G_,void 0!==Po?Po:dt.collisionBoxArray.length,void 0!==Po?Po+1:dt.collisionBoxArray.length,void 0!==_o?_o:dt.collisionBoxArray.length,void 0!==_o?_o+1:dt.collisionBoxArray.length,void 0!==yr?yr:dt.collisionBoxArray.length,void 0!==yr?yr+1:dt.collisionBoxArray.length,va||dt.collisionBoxArray.length,va?va+1:dt.collisionBoxArray.length,de,Ol,$_,Zu,po,mb,0,vg,xg,Ka)}(r,Pt,Yt,_t,a,c,h,at,r.layers[0],r.collisionBoxArray,o.index,o.sourceLayerIndex,r.index,ue,je,C,0,we,nt,V,o,g,O,E,A)};if("line"===Fe)for(const _t of w_(o.geometry,0,0,Ut,Ut)){const Pt=On(_t,he,Pe,a.vertical||q,c,le,ae,r.overscaling,Ut);for(const xt of Pt)q&&sb(r,q.text,qe,xt)||Ue(_t,xt,A)}else if("line-center"===Fe){for(const _t of o.geometry)if(_t.length>1){const Pt=eb(_t,Pe,a.vertical||q,c,le,ae);Pt&&Ue(_t,Pt,A)}}else if("Polygon"===o.type)for(const _t of Oy(o.geometry,0)){const Pt=nb(_t,16);Ue(_t[0],new rc(Pt.x,Pt.y,0,0,void 0),A)}else if("LineString"===o.type)for(const _t of o.geometry)Ue(_t,new rc(_t[0].x,_t[0].y,0,0,void 0),A);else if("Point"===o.type)for(const _t of o.geometry)for(const Pt of _t)Ue([Pt],new rc(Pt.x,Pt.y,0,0,void 0),A)}const ih=255,Ha=ih*Us;function nv(r,o,a,c,h,g,y,x,C,O,E,A,k,F,L,V,q){const ee=function(ae,he,ue,we,Pe,je,nt,Fe){const qe=[];if(0===he.positionedLines.length)return qe;const Ze=we.layout.get("text-rotate").evaluate(je,{})*Math.PI/180,et=function(xt){const Yt=xt[0],dt=xt[1],Bt=Yt*dt;return Bt>0?[Yt,-dt]:Bt<0?[-Yt,dt]:0===Yt?[dt,Yt]:[dt,-Yt]}(ue);let at=Math.abs(he.top-he.bottom);for(const xt of he.positionedLines)at-=xt.lineOffset;const Ue=he.positionedLines.length,_t=at/Ue;let Pt=he.top-ue[1];for(let xt=0;xt<Ue;++xt){const Yt=he.positionedLines[xt];Pt=tb(he,_t,Pt,xt);for(const dt of Yt.positionedGlyphs){if(!dt.rect)continue;const Bt=dt.rect||{};let Qt=jy+1,In=!0,en=1,$t=0;if(dt.imageName){const ci=nt[dt.imageName];if(!ci)continue;if(ci.sdf){bi("SDF images are not supported in formatted text and will be ignored.");continue}In=!1,en=ci.pixelRatio,Qt=To/en}const _i=(Pe||Fe)&&dt.vertical,_e=dt.metrics.advance*dt.scale/2,an=dt.metrics,rn=dt.rect;if(null===rn)continue;Fe&&he.verticalizable&&($t=dt.imageName?_e-dt.metrics.width*dt.scale/2:0);const de=Pe?[dt.x+_e,dt.y]:[0,0];let ii=[0,0],ai=[0,0],G=!1;Pe||(_i?(ai=[dt.x+_e+et[0],dt.y+et[1]-$t],G=!0):ii=[dt.x+_e+ue[0],dt.y+ue[1]-$t]);const J=rn.w*dt.scale/(en*(dt.localGlyph?ma:1)),Ie=rn.h*dt.scale/(en*(dt.localGlyph?ma:1));let li,$i,Fi,Si;if(_i){const ci=dt.y-Pt,tr=new ft(-_e,_e-ci),Ke=-Math.PI/2,Do=new ft(...ai);li=new ft(-_e+ii[0],ii[1]),li._rotateAround(Ke,tr)._add(Do),li.x+=-ci+_e,li.y-=(an.left-Qt)*dt.scale;const Po=dt.imageName?an.advance*dt.scale:Oo*dt.scale,yr=String.fromCharCode(dt.glyph);Gx(yr)?li.x+=(1-Qt)*dt.scale:d_(yr)?li.x+=Po-an.height*dt.scale+(-Qt-1)*dt.scale:li.x+=dt.imageName||an.width+2*Qt===rn.w&&an.height+2*Qt===rn.h?(Po-Ie)/2:(Po-(an.height+2*Qt)*dt.scale)/2,$i=new ft(li.x,li.y-J),Fi=new ft(li.x+Ie,li.y),Si=new ft(li.x+Ie,li.y-J)}else{const ci=(an.left-Qt)*dt.scale-_e+ii[0],tr=(-an.top-Qt)*dt.scale+ii[1],Ke=ci+J,Do=tr+Ie;li=new ft(ci,tr),$i=new ft(Ke,tr),Fi=new ft(ci,Do),Si=new ft(Ke,Do)}if(Ze){let ci;ci=Pe?new ft(0,0):G?new ft(et[0],et[1]):new ft(ue[0],ue[1]),li._rotateAround(Ze,ci),$i._rotateAround(Ze,ci),Fi._rotateAround(Ze,ci),Si._rotateAround(Ze,ci)}const At=new ft(0,0),Ai=new ft(0,0);qe.push({tl:li,tr:$i,bl:Fi,br:Si,tex:Bt,writingMode:he.writingMode,glyphOffset:de,sectionIndex:dt.sectionIndex,isSDF:In,pixelOffsetTL:At,pixelOffsetBR:Ai,minFontScaleX:0,minFontScaleY:0})}}return qe}(0,c,C,g,y,x,h,r.allowVerticalPlacement),le=r.textSizeData;let Q=null;"source"===le.kind?(Q=[Us*g.layout.get("text-size").evaluate(x,{},q)],Q[0]>Ha&&bi(`${r.layerIds[0]}: Value for "text-size" is >= ${ih}. Reduce your "text-size".`)):"composite"===le.kind&&(Q=[Us*L.compositeTextSizes[0].evaluate(x,{},q),Us*L.compositeTextSizes[1].evaluate(x,{},q)],(Q[0]>Ha||Q[1]>Ha)&&bi(`${r.layerIds[0]}: Value for "text-size" is >= ${ih}. Reduce your "text-size".`)),r.addSymbols(r.text,ee,Q,C,y,x,E,o,a,O.lineStartIndex,O.lineLength,F,V,q);for(const ae of A)k[ae]=r.text.placedSymbolArray.length-1;return 4*ee.length}function E_(r){for(const o in r)return r[o];return null}function ig(r,o,a,c,h,g,y,x,C,O){let E=y.top,A=y.bottom,k=y.left,F=y.right;const L=y.collisionPadding;if(L&&(k-=L[0],E-=L[1],F+=L[2],A+=L[3]),C){const V=new ft(k,E),q=new ft(F,E),ee=new ft(k,A),le=new ft(F,A),Q=cn(C);let ae=new ft(0,0);O&&(ae=new ft(O[0],O[1])),V._rotateAround(Q,ae),q._rotateAround(Q,ae),ee._rotateAround(Q,ae),le._rotateAround(Q,ae),k=Math.min(V.x,q.x,ee.x,le.x),F=Math.max(V.x,q.x,ee.x,le.x),E=Math.min(V.y,q.y,ee.y,le.y),A=Math.max(V.y,q.y,ee.y,le.y)}return r.emplaceBack(o.x,o.y,o.z,a.x,a.y,k,E,F,A,x,c,h,g),r.length-1}function S_(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const o=r.bottom-r.top;return o>0?Math.max(10,o):null}function sb(r,o,a,c){const h=r.compareText;if(o in h){const g=h[o];for(let y=g.length-1;y>=0;y--)if(c.dist(g[y])<a)return!0}else h[o]=[];return h[o].push(c),!1}function iv(r,o){const a=r.fovAboveCenter,c=r.elevation?r.elevation.getMinElevationBelowMSL()*o:0,h=(r._camera.position[2]*r.worldSize-c)/Math.cos(r._pitch),g=Math.sin(a)*h/Math.sin(Math.max(Math.PI/2-r._pitch-a,.01)),y=Math.sin(r._pitch)*g+h;return Math.min(1.01*y,h*(1/r._horizonShift))}function ju(r,o){if(!o.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:o};const a=Math.pow(2,-r.z),c=r.x*a,h=(r.x+1)*a,g=r.y*a,y=(r.y+1)*a,x=Vs(c),C=Vs(h),O=zo(g),E=zo(y),A=o.project(x,O),k=o.project(C,O),F=o.project(C,E),L=o.project(x,E);let V=Math.min(A.x,k.x,F.x,L.x),q=Math.min(A.y,k.y,F.y,L.y),ee=Math.max(A.x,k.x,F.x,L.x),le=Math.max(A.y,k.y,F.y,L.y);const Q=a/16;function ae(ue,we,Pe,je,nt,Fe){const qe=(Pe+nt)/2,Ze=(je+Fe)/2,et=o.project(Vs(qe),zo(Ze)),at=Math.max(0,V-et.x,q-et.y,et.x-ee,et.y-le);V=Math.min(V,et.x),ee=Math.max(ee,et.x),q=Math.min(q,et.y),le=Math.max(le,et.y),at>Q&&(ae(ue,et,Pe,je,qe,Ze),ae(et,we,qe,Ze,nt,Fe))}ae(A,k,c,g,h,g),ae(k,F,h,g,h,y),ae(F,L,h,y,c,y),ae(L,A,c,y,c,g),V-=Q,q-=Q,ee+=Q,le+=Q;const he=1/Math.max(ee-V,le-q);return{scale:he,x:V*he,y:q*he,x2:ee*he,y2:le*he,projection:o}}const ov=fr(new Float32Array(16));class Xc{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,a){return{x:0,y:0,z:0}}unproject(o,a){return new $n(0,0)}projectTilePoint(o,a,c){return{x:o,y:a,z:0}}locationPoint(o,a,c=!0){return o._coordinatePoint(o.locationCoordinate(a),c)}pixelsPerMeter(o,a){return pa(1,o)*a}pixelSpaceConversion(o,a,c){return 1}farthestPixelDistance(o){return iv(o,o.pixelsPerMeter)}pointCoordinate(o,a,c,h){const g=o.horizonLineFromTop(!1),y=new ft(a,Math.max(g,c));return o.rayIntersectionCoordinate(o.pointRayIntersection(y,h))}pointCoordinate3D(o,a,c){const h=new ft(a,c);if(o.elevation)return o.elevation.pointCoordinate(h);{const g=this.pointCoordinate(o,h.x,h.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(o,a){if(o.elevation)return!this.pointCoordinate3D(o,a.x,a.y);const c=o.horizonLineFromTop();return a.y<c}createInversionMatrix(o,a){return ov}createTileMatrix(o,a,c){let h,g,y;const x=c.canonical,C=fr(new Float64Array(16));if(this.isReprojectedInTileSpace){const O=ju(x,this);h=1,g=O.x+c.wrap*O.scale,y=O.y,Du(C,C,[h/O.scale,h/O.scale,o.pixelsPerMeter/a])}else h=a/o.zoomScale(x.z),g=(x.x+Math.pow(2,x.z)*c.wrap)*h,y=x.y*h;return Xl(C,C,[g,y,0]),Du(C,C,[h/Ut,h/Ut,1]),C}upVector(o,a,c){return[0,0,1]}upVectorScale(o,a,c){return{metersToTile:1}}}class rv extends Xc{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[a,c]=this.parallels=o.parallels||[29.5,45.5],h=Math.sin(cn(a));this.n=(h+Math.sin(cn(c)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(o,a){const{n:c,c:h,r0:g}=this,y=cn(o-this.center[0]),x=cn(a),C=Math.sqrt(h-2*c*Math.sin(x))/c;return{x:C*Math.sin(y*c),y:C*Math.cos(y*c)-g,z:0}}unproject(o,a){const{n:c,c:h,r0:g}=this,y=g+a;let x=Math.atan2(o,Math.abs(y))*Math.sign(y);y*c<0&&(x-=Math.PI*Math.sign(o)*Math.sign(y));const C=cn(this.center[0])*c;x=dn(x,-Math.PI-C,Math.PI-C);const O=_n(ao(x/c)+this.center[0],-180,180),E=Math.asin(_n((h-(o*o+y*y)*c*c)/(2*c),-1,1)),A=_n(ao(E),-Vo,Vo);return new $n(O,A)}}const oh=1.340264,$u=-.081106,og=893e-6,Gu=.003796,rg=Math.sqrt(3)/2;class CM extends Xc{project(o,a){a=a/180*Math.PI,o=o/180*Math.PI;const c=Math.asin(rg*Math.sin(a)),h=c*c,g=h*h*h;return{x:.5*(o*Math.cos(c)/(rg*(oh+3*$u*h+g*(7*og+9*Gu*h)))/Math.PI+.5),y:1-.5*(c*(oh+$u*h+g*(og+Gu*h))/Math.PI+1),z:0}}unproject(o,a){o=(2*o-.5)*Math.PI;let c=a=(2*(1-a)-1)*Math.PI,h=c*c,g=h*h*h;for(let E,A,k,F=0;F<12&&(A=c*(oh+$u*h+g*(og+Gu*h))-a,k=oh+3*$u*h+g*(7*og+9*Gu*h),E=A/k,c=_n(c-E,-Math.PI/3,Math.PI/3),h=c*c,g=h*h*h,!(Math.abs(E)<1e-12));++F);const y=rg*o*(oh+3*$u*h+g*(7*og+9*Gu*h))/Math.cos(c),x=Math.asin(Math.sin(c)/rg),C=_n(180*y/Math.PI,-180,180),O=_n(180*x/Math.PI,-Vo,Vo);return new $n(C,O)}}class ye extends Xc{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,a){return{x:.5+o/360,y:.5-a/360,z:0}}unproject(o,a){const c=360*(o-.5),h=_n(360*(.5-a),-Vo,Vo);return new $n(c,h)}}const Hu=Math.PI/2;function sg(r){return Math.tan((Hu+r)/2)}class sv extends Xc{constructor(o){super(o),this.center=o.center||[0,30];const[a,c]=this.parallels=o.parallels||[30,30];let h=cn(a),g=cn(c);this.southernCenter=h+g<0,this.southernCenter&&(h=-h,g=-g);const y=Math.cos(h),x=sg(h);this.n=h===g?Math.sin(h):Math.log(y/Math.cos(g))/Math.log(sg(g)/x),this.f=y*Math.pow(sg(h),this.n)/this.n}project(o,a){a=cn(a),this.southernCenter&&(a=-a),o=cn(o-this.center[0]);const c=1e-6,{n:h,f:g}=this;g>0?a<-Hu+c&&(a=-Hu+c):a>Hu-c&&(a=Hu-c);const y=g/Math.pow(sg(a),h);let x=y*Math.sin(h*o),C=g-y*Math.cos(h*o);return x=.5*(x/Math.PI+.5),C=.5*(C/Math.PI+.5),{x,y:this.southernCenter?C:1-C,z:0}}unproject(o,a){o=(2*o-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:c,f:h}=this,g=h-a,y=Math.sign(g),x=Math.sign(c)*Math.sqrt(o*o+g*g);let C=Math.atan2(o,Math.abs(g))*y;g*c<0&&(C-=Math.PI*Math.sign(o)*y);const O=_n(ao(C/c)+this.center[0],-180,180),E=_n(ao(2*Math.atan(Math.pow(h/x,1/c))-Hu),-Vo,Vo);return new $n(O,this.southernCenter?-E:E)}}class av extends Xc{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,a){return{x:Va(o),y:xl(a),z:0}}unproject(o,a){const c=Vs(o),h=zo(a);return new $n(c,h)}}const lv=cn(Vo);class ag extends Xc{project(o,a){const c=(a=cn(a))*a,h=c*c;return{x:.5*((o=cn(o))*(.8707-.131979*c+h*(h*(.003971*c-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+c*(.015085+h*(.028874*c-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(o,a){o=(2*o-.5)*Math.PI;let c=a=(2*(1-a)-1)*Math.PI,h=25,g=0,y=c*c;do{y=c*c;const O=y*y;g=(c*(1.007226+y*(.015085+O*(.028874*y-.044475-.005916*O)))-a)/(1.007226+y*(.045255+O*(.259866*y-.311325-.005916*11*O))),c=_n(c-g,-lv,lv)}while(Math.abs(g)>1e-6&&--h>0);y=c*c;const x=_n(ao(o/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),C=ao(c);return new $n(x,C)}}const Wu=cn(Vo);class A_ extends Xc{project(o,a){a=cn(a),o=cn(o);const c=Math.cos(a),h=2/Math.PI,g=Math.acos(c*Math.cos(o/2)),y=Math.sin(g)/g,x=.5*(o*h+2*c*Math.sin(o/2)/y)||0,C=.5*(a+Math.sin(a)/y)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(C/Math.PI+1),z:0}}unproject(o,a){let c=o=(2*o-.5)*Math.PI,h=a=(2*(1-a)-1)*Math.PI,g=25;const y=1e-6;let x=0,C=0;do{const O=Math.cos(h),E=Math.sin(h),A=2*E*O,k=E*E,F=O*O,L=Math.cos(c/2),V=Math.sin(c/2),q=2*L*V,ee=V*V,le=1-F*L*L,Q=le?1/le:0,ae=le?Math.acos(O*L)*Math.sqrt(1/le):0,he=.5*(2*ae*O*V+2*c/Math.PI)-o,ue=.5*(ae*E+h)-a,we=.5*Q*(F*ee+ae*O*L*k)+1/Math.PI,Pe=Q*(q*A/4-ae*E*V),je=.125*Q*(A*V-ae*E*F*q),nt=.5*Q*(k*L+ae*ee*O)+.5,Fe=Pe*je-nt*we;x=(ue*Pe-he*nt)/Fe,C=(he*je-ue*we)/Fe,c=_n(c-x,-Math.PI,Math.PI),h=_n(h-C,-Wu,Wu)}while((Math.abs(x)>y||Math.abs(C)>y)&&--g>0);return new $n(ao(c),ao(h))}}class rh extends Xc{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(cn(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,a){const{scale:c,cosPhi:h}=this;return{x:cn(o)*h*c+.5,y:-Math.sin(cn(a))/h*c+.5,z:0}}unproject(o,a){const{scale:c,cosPhi:h}=this,g=-(a-.5)/c,y=_n(ao((o-.5)/c)/h,-180,180),x=Math.asin(_n(g*h,-1,1)),C=_n(ao(x),-Vo,Vo);return new $n(y,C)}}class I_ extends av{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,a,c){const h=tp(o,a,c);return Di(h,h,Au(Ql(c))),{x:h[0],y:h[1],z:h[2]}}locationPoint(o,a){const c=Vd(a.lat,a.lng),h=er([],c),g=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(a),o._centerAltitude):o._centerAltitude;$c(c,c,h,pa(1,0)*Ut*g);const y=fr(new Float64Array(16));return vl(y,o.pixelMatrix,o.globeMatrix),Di(c,c,y),new ft(c[0],c[1])}pixelsPerMeter(o,a){return pa(1,0)*a}pixelSpaceConversion(o,a,c){const h=pa(1,o)*a,g=Sn(pa(1,45)*a,h,c);return this.pixelsPerMeter(o,a)/g}createTileMatrix(o,a,c){const h=ym(Ql(c.canonical));return vl(new Float64Array(16),o.globeMatrix,h)}createInversionMatrix(o,a){const{center:c}=o,h=Au(Ql(a));return Sf(h,h,cn(c.lng)),ny(h,h,cn(c.lat)),Du(h,h,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(o,a,c,h){return vx(o,a,c,!0)||new $d(0,0)}pointCoordinate3D(o,a,c){const h=this.pointCoordinate(o,a,c,0);return[h.x,h.y,h.z]}isPointAboveHorizon(o,a){return!vx(o,a.x,a.y,!1)}farthestPixelDistance(o){const a=function(h,g){const y=h.cameraToCenterDistance,x=h._centerAltitude*g,C=h._camera,O=h._camera.forward(),E=Kl([],Yr([],O,-y),[0,0,x]),A=h.worldSize/(2*Math.PI),k=[0,0,-A],F=h.width/h.height,L=Math.tan(h.fovAboveCenter),V=Yr([],C.up(),L),q=Yr([],C.right(),L*F),ee=er([],Kl([],Kl([],O,V),q)),le=[];let Q;if(new zd(E,ee).closestPointOnSphere(k,A,le)){const ae=Kl([],le,k),he=Qr([],ae,E);Q=Math.cos(h.fovAboveCenter)*Nd(he)}else{const ae=Qr([],E,k),he=Qr([],k,E);er(he,he);const ue=Nd(ae)-A;Q=Math.sqrt(ue*(ue+2*A));const we=Math.acos(Q/(A+ue))-Math.acos(Nr(O,he));Q*=Math.cos(we)}return 1.01*Q}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),c=Ud(o.zoom);if(c>0){const h=iv(o,pa(1,o.center.lat)*o.worldSize),g=o.worldSize/(2*Math.PI),y=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Sn(a,h+g*(1-Math.cos(y)),Math.pow(c,10))}return a}upVector(o,a,c){return tp(a,c,o,1)}upVectorScale(o){return{metersToTile:gm(Ff(Ql(o)))}}}function yp(r){const o=r.parallels,a=!!o&&Math.abs(o[0]+o[1])<.01;switch(r.name){case"mercator":return new av(r);case"equirectangular":return new ye(r);case"naturalEarth":return new ag(r);case"equalEarth":return new CM(r);case"winkelTripel":return new A_(r);case"albers":return a?new rh(r):new rv(r);case"lambertConformalConic":return a?new rh(r):new sv(r);case"globe":return new I_(r)}throw new Error(`Invalid projection name: ${r.name}`)}const cv=Jf.types,k_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sh(r,o,a,c,h,g,y,x,C,O,E,A,k){const F=x?Math.min(Ha,Math.round(x[0])):0,L=x?Math.min(Ha,Math.round(x[1])):0;r.emplaceBack(o,a,Math.round(32*c),Math.round(32*h),g,y,(F<<1)+(C?1:0),L,16*O,16*E,256*A,256*k)}function ah(r,o,a,c,h,g,y){r.emplaceBack(o,a,c,h,g,y)}function vp(r,o,a,c,h){r.emplaceBack(o,a,c,h),r.emplaceBack(o,a,c,h),r.emplaceBack(o,a,c,h),r.emplaceBack(o,a,c,h)}function R_(r){for(const o of r.sections)if(pr(o.text))return!0;return!1}class N_{constructor(o){this.layoutVertexArray=new Qe,this.indexArray=new It,this.programConfigurations=o,this.segments=new ho,this.dynamicLayoutVertexArray=new rt,this.opacityVertexArray=new Rt,this.placedSymbolArray=new qi,this.globeExtVertexArray=new ut}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,a,c,h){this.isEmpty()||(c&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Ux.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,Yf.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,k_,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,l_.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||h)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Oe(N_,"SymbolBuffers");class F_{constructor(o,a,c){this.layoutVertexArray=new o,this.layoutAttributes=a,this.indexArray=new c,this.segments=new ho,this.collisionVertexArray=new Mn,this.collisionVertexArrayExt=new bn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,jx.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,c_.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Oe(F_,"CollisionBuffers");class sc{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(y=>y.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fr([]),this.placementViewportMatrix=fr([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=u_(this.zoom,a["text-size"]),this.iconSizeData=u_(this.zoom,a["icon-size"]);const c=this.layers[0].layout,h=c.get("symbol-sort-key"),g=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==g&&void 0!==h.constantOr(1),this.sortFeaturesByY=("viewport-y"===g||"auto"===g&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(y=>js[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new N_(new Tu(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new N_(new Tu(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new ji,this.lineVertexArray=new Sd,this.symbolInstances=new Mi}calculateGlyphDependencies(o,a,c,h,g){for(let y=0;y<o.length;y++)if(a[o.charCodeAt(y)]=!0,h&&g){const x=hp[o.charAt(y)];x&&(a[x.charCodeAt(0)]=!0)}}populate(o,a,c,h){const g=this.layers[0],y=g.layout,x="globe"===this.projection.name,C=y.get("text-font"),O=y.get("text-field"),E=y.get("icon-image"),A=("constant"!==O.value.kind||O.value.value instanceof Zr&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&("constant"!==C.value.kind||C.value.value.length>0),k="constant"!==E.value.kind||!!E.value.value||Object.keys(E.parameters).length>0,F=y.get("symbol-sort-key");if(this.features=[],!A&&!k)return;const L=a.iconDependencies,V=a.glyphDependencies,q=a.availableImages,ee=new S(this.zoom);for(const{feature:le,id:Q,index:ae,sourceLayerIndex:he}of o){const ue=g._featureFilter.needGeometry,we=Gc(le,ue);if(!g._featureFilter.filter(ee,we,c))continue;if(ue||(we.geometry=Ua(le,c,h)),x&&1!==le.type&&c.z<=5){const Fe=we.geometry,qe=.98078528056,Ze=(et,at)=>Nr(tp(et.x,et.y,c,1),tp(at.x,at.y,c,1))<qe;for(let et=0;et<Fe.length;et++)Fe[et]=ip(Fe[et],Ze)}let Pe,je;if(A){const Fe=g.getValueAndResolveTokens("text-field",we,c,q),qe=Zr.factory(Fe);R_(qe)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===w()||this.hasRTLText&&D.isParsed())&&(Pe=$x(qe,g,we))}if(k){const Fe=g.getValueAndResolveTokens("icon-image",we,c,q);je=Fe instanceof Ds?Fe:Ds.fromString(Fe)}if(!Pe&&!je)continue;const nt=this.sortFeaturesByKey?F.evaluate(we,{},c):void 0;if(this.features.push({id:Q,text:Pe,icon:je,index:ae,sourceLayerIndex:he,geometry:we.geometry,properties:le.properties,type:cv[le.type],sortKey:nt}),je&&(L[je.name]=!0),Pe){const Fe=C.evaluate(we,{},c).join(","),qe="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(js.vertical)>=0;for(const Ze of Pe.sections)if(Ze.image)L[Ze.image.name]=!0;else{const et=Zl(Pe.toString()),at=Ze.fontStack||Fe,Ue=V[at]=V[at]||{};this.calculateGlyphDependencies(Ze.text,Ue,qe,this.allowVerticalPlacement,et)}}}"line"===y.get("symbol-placement")&&(this.features=function(le){const Q={},ae={},he=[];let ue=0;function we(Fe){he.push(le[Fe]),ue++}function Pe(Fe,qe,Ze){const et=ae[Fe];return delete ae[Fe],ae[qe]=et,he[et].geometry[0].pop(),he[et].geometry[0]=he[et].geometry[0].concat(Ze[0]),et}function je(Fe,qe,Ze){const et=Q[qe];return delete Q[qe],Q[Fe]=et,he[et].geometry[0].shift(),he[et].geometry[0]=Ze[0].concat(he[et].geometry[0]),et}function nt(Fe,qe,Ze){const et=Ze?qe[0][qe[0].length-1]:qe[0][0];return`${Fe}:${et.x}:${et.y}`}for(let Fe=0;Fe<le.length;Fe++){const qe=le[Fe],Ze=qe.geometry,et=qe.text?qe.text.toString():null;if(!et){we(Fe);continue}const at=nt(et,Ze),Ue=nt(et,Ze,!0);if(at in ae&&Ue in Q&&ae[at]!==Q[Ue]){const _t=je(at,Ue,Ze),Pt=Pe(at,Ue,he[_t].geometry);delete Q[at],delete ae[Ue],ae[nt(et,he[Pt].geometry,!0)]=Pt,he[_t].geometry=null}else at in ae?Pe(at,Ue,Ze):Ue in Q?je(at,Ue,Ze):(we(Fe),Q[at]=ue-1,ae[Ue]=ue-1)}return he.filter(Fe=>Fe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,Q)=>le.sortKey-Q.sortKey)}update(o,a,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,a,this.layers,c,h),this.icon.programConfigurations.updatePaintArrays(o,a,this.layers,c,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=yp(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,a){const c=this.lineVertexArray.length;if(void 0!==o.segment)for(const{x:h,y:g}of a)this.lineVertexArray.emplaceBack(h,g);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(o,a,c,h,g,y,x,C,O,E,A,k,F,L){const V=o.indexArray,q=o.layoutVertexArray,ee=o.globeExtVertexArray,le=o.segments.prepareSegment(4*a.length,q,V,this.canOverlap?y.sortKey:void 0),Q=this.glyphOffsetArray.length,ae=le.vertexLength,he=this.allowVerticalPlacement&&x===js.vertical?Math.PI/2:0,ue=y.text&&y.text.sections;for(let Pe=0;Pe<a.length;Pe++){const{tl:je,tr:nt,bl:Fe,br:qe,tex:Ze,pixelOffsetTL:et,pixelOffsetBR:at,minFontScaleX:Ue,minFontScaleY:_t,glyphOffset:Pt,isSDF:xt,sectionIndex:Yt}=a[Pe],dt=le.vertexLength,Bt=Pt[1];if(sh(q,O.x,O.y,je.x,Bt+je.y,Ze.x,Ze.y,c,xt,et.x,et.y,Ue,_t),sh(q,O.x,O.y,nt.x,Bt+nt.y,Ze.x+Ze.w,Ze.y,c,xt,at.x,et.y,Ue,_t),sh(q,O.x,O.y,Fe.x,Bt+Fe.y,Ze.x,Ze.y+Ze.h,c,xt,et.x,at.y,Ue,_t),sh(q,O.x,O.y,qe.x,Bt+qe.y,Ze.x+Ze.w,Ze.y+Ze.h,c,xt,at.x,at.y,Ue,_t),C){const{x:Qt,y:In,z:en}=C.anchor,[$t,_i,_e]=C.up;ah(ee,Qt,In,en,$t,_i,_e),ah(ee,Qt,In,en,$t,_i,_e),ah(ee,Qt,In,en,$t,_i,_e),ah(ee,Qt,In,en,$t,_i,_e),vp(o.dynamicLayoutVertexArray,Qt,In,en,he)}else vp(o.dynamicLayoutVertexArray,O.x,O.y,O.z,he);V.emplaceBack(dt,dt+1,dt+2),V.emplaceBack(dt+1,dt+2,dt+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),Pe!==a.length-1&&Yt===a[Pe+1].sectionIndex||o.programConfigurations.populatePaintArrays(q.length,y,y.index,{},F,L,ue&&ue[Yt])}const we=C?C.anchor:O;o.placedSymbolArray.emplaceBack(we.x,we.y,we.z,O.x,O.y,Q,this.glyphOffsetArray.length-Q,ae,E,A,O.segment,c?c[0]:0,c?c[1]:0,h[0],h[1],x,0,!1,0,k,0)}_commitLayoutVertex(o,a,c,h,g,y,x){o.emplaceBack(a,c,h,g,y,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(o,a,c,h,g,y,x){const C=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),O=C.vertexLength,E=x.tileAnchorX,A=x.tileAnchorY;for(let F=0;F<4;F++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(a,-o.padding,-o.padding),c.collisionVertexArrayExt.emplaceBack(a,o.padding,-o.padding),c.collisionVertexArrayExt.emplaceBack(a,o.padding,o.padding),c.collisionVertexArrayExt.emplaceBack(a,-o.padding,o.padding),this._commitLayoutVertex(c.layoutVertexArray,h,g,y,E,A,new ft(o.x1,o.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,g,y,E,A,new ft(o.x2,o.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,g,y,E,A,new ft(o.x2,o.y2)),this._commitLayoutVertex(c.layoutVertexArray,h,g,y,E,A,new ft(o.x1,o.y2)),C.vertexLength+=4;const k=c.indexArray;k.emplaceBack(O,O+1),k.emplaceBack(O+1,O+2),k.emplaceBack(O+2,O+3),k.emplaceBack(O+3,O),C.primitiveLength+=4}_addTextDebugCollisionBoxes(o,a,c,h,g,y){for(let x=h;x<g;x++){const C=c.get(x),O=this.getSymbolInstanceTextSize(o,y,a,x);this._addCollisionDebugVertices(C,O,this.textCollisionBox,C.projectedAnchorX,C.projectedAnchorY,C.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(o,a,c,h,g,y){for(let x=h;x<g;x++){const C=c.get(x),O=this.getSymbolInstanceIconSize(o,a,y.placedIconSymbolIndex);this._addCollisionDebugVertices(C,O,this.iconCollisionBox,C.projectedAnchorX,C.projectedAnchorY,C.projectedAnchorZ,y)}}generateCollisionDebugBuffers(o,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new F_(Et,dp.members,no),this.iconCollisionBox=new F_(Et,dp.members,no);const c=Bu(this.iconSizeData,o),h=Bu(this.textSizeData,o);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(h,o,a,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(h,o,a,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,o,a,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,o,a,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(o,a,c,h){const g=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:h),y=Qf(this.textSizeData,o,g)/Oo;return this.tilePixelRatio*y}getSymbolInstanceIconSize(o,a,c){const h=this.icon.placedSymbolArray.get(c),g=Qf(this.iconSizeData,o,h);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(o,a,c){o.emplaceBack(a,-c,-c),o.emplaceBack(a,c,-c),o.emplaceBack(a,c,c),o.emplaceBack(a,-c,c)}_updateTextDebugCollisionBoxes(o,a,c,h,g,y){for(let x=h;x<g;x++){const C=c.get(x),O=this.getSymbolInstanceTextSize(o,y,a,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,O,C.padding)}}_updateIconDebugCollisionBoxes(o,a,c,h,g,y){for(let x=h;x<g;x++){const C=c.get(x),O=this.getSymbolInstanceIconSize(o,a,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,O,C.padding)}}updateCollisionDebugBuffers(o,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=Bu(this.iconSizeData,o),h=Bu(this.textSizeData,o);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(h,o,a,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(h,o,a,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(c,o,a,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(c,o,a,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,a,c,h,g,y,x,C,O){const E={};if(a<c){const{x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=o.get(a);E.textBox={x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},E.textFeatureIndex=he}if(h<g){const{x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=o.get(h);E.verticalTextBox={x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},E.verticalTextFeatureIndex=he}if(y<x){const{x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=o.get(y);E.iconBox={x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},E.iconFeatureIndex=he}if(C<O){const{x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=o.get(C);E.verticalIconBox={x1:A,y1:k,x2:F,y2:L,padding:V,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},E.verticalIconFeatureIndex=he}return E}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const c=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,a){const c=o.placedSymbolArray.get(a),h=c.vertexStartIndex+4*c.numGlyphs;for(let g=c.vertexStartIndex;g<h;g+=4)o.indexArray.emplaceBack(g,g+1,g+2),o.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const a=Math.sin(o),c=Math.cos(o),h=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const C=this.symbolInstances.get(x);h.push(0|Math.round(a*C.tileAnchorX+c*C.tileAnchorY)),g.push(C.featureIndex)}return y.sort((x,C)=>h[x]-h[C]||g[C]-g[x]),y}addToSortKeyRanges(o,a){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===a?c.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const c=this.symbolInstances.get(a);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:C,verticalPlacedIconSymbolIndex:O}=c;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),g>=0&&g!==h&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&y!==h&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Oe(sc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sc.MAX_GLYPHS=65535,sc.addDynamicAttributes=vp;const ab=new ne({"symbol-placement":new z($e.layout_symbol["symbol-placement"]),"symbol-spacing":new z($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new z($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Z($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new z($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new z($e.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new z($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new z($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new z($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Z($e.layout_symbol["icon-size"]),"icon-text-fit":new z($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new z($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Z($e.layout_symbol["icon-image"]),"icon-rotate":new Z($e.layout_symbol["icon-rotate"]),"icon-padding":new z($e.layout_symbol["icon-padding"]),"icon-keep-upright":new z($e.layout_symbol["icon-keep-upright"]),"icon-offset":new Z($e.layout_symbol["icon-offset"]),"icon-anchor":new Z($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new z($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new z($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new z($e.layout_symbol["text-rotation-alignment"]),"text-field":new Z($e.layout_symbol["text-field"]),"text-font":new Z($e.layout_symbol["text-font"]),"text-size":new Z($e.layout_symbol["text-size"]),"text-max-width":new Z($e.layout_symbol["text-max-width"]),"text-line-height":new Z($e.layout_symbol["text-line-height"]),"text-letter-spacing":new Z($e.layout_symbol["text-letter-spacing"]),"text-justify":new Z($e.layout_symbol["text-justify"]),"text-radial-offset":new Z($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new z($e.layout_symbol["text-variable-anchor"]),"text-anchor":new Z($e.layout_symbol["text-anchor"]),"text-max-angle":new z($e.layout_symbol["text-max-angle"]),"text-writing-mode":new z($e.layout_symbol["text-writing-mode"]),"text-rotate":new Z($e.layout_symbol["text-rotate"]),"text-padding":new z($e.layout_symbol["text-padding"]),"text-keep-upright":new z($e.layout_symbol["text-keep-upright"]),"text-transform":new Z($e.layout_symbol["text-transform"]),"text-offset":new Z($e.layout_symbol["text-offset"]),"text-allow-overlap":new z($e.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new z($e.layout_symbol["text-ignore-placement"]),"text-optional":new z($e.layout_symbol["text-optional"])});var lg={paint:new ne({"icon-opacity":new Z($e.paint_symbol["icon-opacity"]),"icon-color":new Z($e.paint_symbol["icon-color"]),"icon-halo-color":new Z($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Z($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Z($e.paint_symbol["icon-halo-blur"]),"icon-translate":new z($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new z($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Z($e.paint_symbol["text-opacity"]),"text-color":new Z($e.paint_symbol["text-color"],{runtimeType:Hr,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new Z($e.paint_symbol["text-halo-color"]),"text-halo-width":new Z($e.paint_symbol["text-halo-width"]),"text-halo-blur":new Z($e.paint_symbol["text-halo-blur"]),"text-translate":new z($e.paint_symbol["text-translate"]),"text-translate-anchor":new z($e.paint_symbol["text-translate-anchor"])}),layout:ab};class L_{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Kn,this.defaultValue=o}evaluate(o){if(o.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(o.formattedSection))return a.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Oe(L_,"FormatSectionOverride",{omit:["defaultValue"]});class cg extends yl{constructor(o){super(o,lg)}recalculate(o,a){super.recalculate(o,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const h=[];for(const g of c)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,a,c,h){const g=this.layout.get(o).evaluate(a,{},c,h),y=this._unevaluatedLayout._values[o];return y.isDataDriven()||vu(y.value)||!g?g:(x=a.properties,g.replace(/{([^{}]+)}/g,(O,E)=>E in x?String(x[E]):""));var x}createBucket(o){return new sc(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of lg.paint.overridableProperties){if(!cg.hasPaintOverride(this.layout,o))continue;const a=this.paint.get(o),c=new L_(a),h=new md(c,a.property.specification);let g=null;g="constant"===a.value.kind||"source"===a.value.kind?new mf("source",h):new _d("composite",h,a.value.zoomStops,a.value._interpolationType),this.paint._values[o]=new K(a.property,g,a.parameters)}}_handleOverridablePaintPropertyUpdate(o,a,c){return!(!this.layout||a.isDataDriven()||c.isDataDriven())&&cg.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,a){const c=o.get("text-field"),h=lg.paint.properties[a];let g=!1;const y=x=>{for(const C of x)if(h.overrides&&h.overrides.hasOverride(C))return void(g=!0)};if("constant"===c.value.kind&&c.value.value instanceof Zr)y(c.value.value.sections);else if("source"===c.value.kind){const x=O=>{g||(O instanceof Rn&&zi(O.value)===zl?y(O.value.sections):O instanceof Vl?y(O.sections):O.eachChild(x))},C=c.value;C._styleExpression&&x(C._styleExpression.expression)}return g}getProgramConfiguration(o){return new Ou(this,o)}}var lb={paint:new ne({"background-color":new z($e.paint_background["background-color"]),"background-pattern":new z($e.paint_background["background-pattern"]),"background-opacity":new z($e.paint_background["background-opacity"])})},$s={paint:new ne({"raster-opacity":new z($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new z($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new z($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new z($e.paint_raster["raster-brightness-max"]),"raster-saturation":new z($e.paint_raster["raster-saturation"]),"raster-contrast":new z($e.paint_raster["raster-contrast"]),"raster-resampling":new z($e.paint_raster["raster-resampling"]),"raster-fade-duration":new z($e.paint_raster["raster-fade-duration"])})};class cb extends yl{constructor(o){super(o,{}),this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var ub={paint:new ne({"sky-type":new z($e.paint_sky["sky-type"]),"sky-atmosphere-sun":new z($e.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new z($e.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new z($e.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new z($e.paint_sky["sky-gradient-radius"]),"sky-gradient":new ie($e.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new z($e.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new z($e.paint_sky["sky-atmosphere-color"]),"sky-opacity":new z($e.paint_sky["sky-opacity"])})};function uv(r,o,a){const c=[0,0,1],h=ly([]);return dm(h,h,a?-cn(r)+Math.PI:cn(r)),mx(h,h,-cn(o)),oy(c,c,h),er(c,c)}const B_={circle:class extends yl{constructor(r){super(r,wy)}createBucket(r){return new Vf(r)}queryRadius(r){const o=r;return Hd("circle-radius",this,o)+Hd("circle-stroke-width",this,o)+Uf(this.paint.get("circle-translate"))}queryIntersectsFeature(r,o,a,c,h,g,y,x){const C=Im(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,r.pixelToTileUnitsFactor),O=this.paint.get("circle-radius").evaluate(o,a)+this.paint.get("circle-stroke-width").evaluate(o,a);return km(r,c,g,y,x,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),C,O)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new Ou(this,r)}},heatmap:class extends yl{createBucket(r){return new Rm(r)}constructor(r){super(r,$f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"heatmap-color"===r&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return Hd("heatmap-radius",this,r)}queryIntersectsFeature(r,o,a,c,h,g,y,x){const C=this.paint.get("heatmap-radius").evaluate(o,a);return km(r,c,g,y,x,!0,!0,new ft(0,0),C)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new Ou(this,r)}},hillshade:class extends yl{constructor(r){super(r,Lm)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends yl{constructor(r){super(r,Ex)}getProgramIds(){const r=this.paint.get("fill-pattern"),o=r&&r.constantOr(1),a=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(r){return new Ou(this,r)}recalculate(r,o){super.recalculate(r,o);const a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Jm(r)}queryRadius(){return Uf(this.paint.get("fill-translate"))}queryIntersectsFeature(r,o,a,c,h,g){return!r.queryGeometry.isAboveHorizon&&xy(Am(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,r.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends yl{constructor(r){super(r,Lx)}createBucket(r){return new Fu(r)}queryRadius(){return Uf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new Ou(this,r)}queryIntersectsFeature(r,o,a,c,h,g,y,x,C){const O=Im(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,r.pixelToTileUnitsFactor),E=this.paint.get("fill-extrusion-height").evaluate(o,a),A=this.paint.get("fill-extrusion-base").evaluate(o,a),k=[0,0],F=x&&g.elevation,L=g.elevation?g.elevation.exaggeration():1,V=r.tile.getBucket(this);if(F&&V instanceof Fu){const ae=V.centroidVertexArray,he=C+1;he<ae.length&&(k[0]=ae.geta_centroid_pos0(he),k[1]=ae.geta_centroid_pos1(he))}if(0===k[0]&&1===k[1])return!1;"globe"===g.projection.name&&(c=Ny([c],[new ft(0,0),new ft(Ut,Ut)],r.tileID.canonical).map(ae=>ae.polygon).flat());const q=F?x:null,[ee,le]=(he=c,ue=A,we=E,Pe=O,je=y,nt=q,Fe=k,qe=L,Ze=g.center.lat,"globe"===(ae=g).projection.name?function(at,Ue,_t,Pt,xt,Yt,dt,Bt,Qt,In,en){const $t=[],_i=[],_e=at.projection.upVectorScale(en,at.center.lat,at.worldSize).metersToTile,an=[0,0,0,1],rn=[0,0,0,1],de=(ai,G,J,Ie)=>{ai[0]=G,ai[1]=J,ai[2]=Ie,ai[3]=1},ii=Ry();_t>0&&(_t+=ii),Pt+=ii;for(const ai of Ue){const G=[],J=[];for(const Ie of ai){const li=Ie.x+xt.x,$i=Ie.y+xt.y,Fi=at.projection.projectTilePoint(li,$i,en),Si=at.projection.upVector(en,Ie.x,Ie.y);let At=_t,Ai=Pt;if(dt){const ci=zx(li,$i,_t,Pt,dt,Bt,Qt,In);At+=ci.base,Ai+=ci.top}0!==_t?de(an,Fi.x+Si[0]*_e*At,Fi.y+Si[1]*_e*At,Fi.z+Si[2]*_e*At):de(an,Fi.x,Fi.y,Fi.z),de(rn,Fi.x+Si[0]*_e*Ai,Fi.y+Si[1]*_e*Ai,Fi.z+Si[2]*_e*Ai),Di(an,an,Yt),Di(rn,rn,Yt),G.push(new Lu(an[0],an[1],an[2])),J.push(new Lu(rn[0],rn[1],rn[2]))}$t.push(G),_i.push(J)}return[$t,_i]}(ae,he,ue,we,Pe,je,nt,Fe,qe,Ze,r.tileID.canonical):nt?function(at,Ue,_t,Pt,xt,Yt,dt,Bt,Qt){const In=[],en=[],$t=[0,0,0,1];for(const _i of at){const _e=[],an=[];for(const rn of _i){const de=rn.x+Pt.x,ii=rn.y+Pt.y,ai=zx(de,ii,Ue,_t,Yt,dt,Bt,Qt);$t[0]=de,$t[1]=ii,$t[2]=ai.base,$t[3]=1,ha($t,$t,xt),$t[3]=Math.max($t[3],1e-5);const G=new Lu($t[0]/$t[3],$t[1]/$t[3],$t[2]/$t[3]);$t[0]=de,$t[1]=ii,$t[2]=ai.top,$t[3]=1,ha($t,$t,xt),$t[3]=Math.max($t[3],1e-5);const J=new Lu($t[0]/$t[3],$t[1]/$t[3],$t[2]/$t[3]);_e.push(G),an.push(J)}In.push(_e),en.push(an)}return[In,en]}(he,ue,we,Pe,je,nt,Fe,qe,Ze):function(at,Ue,_t,Pt,xt){const Yt=[],dt=[],Bt=xt[8]*Ue,Qt=xt[9]*Ue,In=xt[10]*Ue,en=xt[11]*Ue,$t=xt[8]*_t,_i=xt[9]*_t,_e=xt[10]*_t,an=xt[11]*_t;for(const rn of at){const de=[],ii=[];for(const ai of rn){const G=ai.x+Pt.x,J=ai.y+Pt.y,Ie=xt[0]*G+xt[4]*J+xt[12],li=xt[1]*G+xt[5]*J+xt[13],$i=xt[2]*G+xt[6]*J+xt[14],Fi=xt[3]*G+xt[7]*J+xt[15],Si=Ie+Bt,At=li+Qt,Ai=$i+In,ci=Math.max(Fi+en,1e-5),tr=Ie+$t,Ke=li+_i,Do=$i+_e,Po=Math.max(Fi+an,1e-5);de.push(new Lu(Si/ci,At/ci,Ai/ci)),ii.push(new Lu(tr/Po,Ke/Po,Do/Po))}Yt.push(de),dt.push(ii)}return[Yt,dt]}(he,ue,we,Pe,je)),Q=r.queryGeometry;var ae,he,ue,we,Pe,je,nt,Fe,qe,Ze;return function(ae,he,ue){let we=1/0;xy(ue,he)&&(we=n_(ue,he[0]));for(let Pe=0;Pe<he.length;Pe++){const je=he[Pe],nt=ae[Pe];for(let Fe=0;Fe<je.length-1;Fe++){const qe=je[Fe],Ze=[qe,je[Fe+1],nt[Fe+1],nt[Fe],qe];vy(ue,Ze)&&(we=Math.min(we,n_(ue,Ze)))}}return we!==1/0&&we}(ee,le,Q.isPointQuery()?Q.screenBounds:Q.screenGeometry)}},line:class extends yl{constructor(r){super(r,s_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if("line-gradient"===r){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof kh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=a_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Kf(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new Ou(this,r)}queryRadius(r){const o=r,a=qc(Hd("line-width",this,o),Hd("line-gap-width",this,o)),c=Hd("line-offset",this,o);return a/2+Math.abs(c)+Uf(this.paint.get("line-translate"))}queryIntersectsFeature(r,o,a,c,h,g){if(r.queryGeometry.isAboveHorizon)return!1;const y=Am(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,r.pixelToTileUnitsFactor),x=r.pixelToTileUnitsFactor/2*qc(this.paint.get("line-width").evaluate(o,a),this.paint.get("line-gap-width").evaluate(o,a)),C=this.paint.get("line-offset").evaluate(o,a);return C&&(c=function(O,E){const A=[],k=new ft(0,0);for(let F=0;F<O.length;F++){const L=O[F],V=[];for(let q=0;q<L.length;q++){const ee=L[q],le=L[q+1],Q=0===q?k:ee.sub(L[q-1])._unit()._perp(),ae=q===L.length-1?k:le.sub(ee)._unit()._perp(),he=Q._add(ae)._unit();he._mult(1/(he.x*ae.x+he.y*ae.y)),V.push(he._mult(E)._add(ee))}A.push(V)}return A}(c,C*r.pixelToTileUnitsFactor)),function(O,E,A){for(let k=0;k<E.length;k++){const F=E[k];if(O.length>=3)for(let L=0;L<F.length;L++)if(tc(O,F[L]))return!0;if(xx(O,F,A))return!0}return!1}(y,c,x)}isTileClipped(){return!0}},symbol:cg,background:class extends yl{constructor(r){super(r,lb)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends yl{constructor(r){super(r,$s)}getProgramIds(){return["raster"]}},sky:class extends yl{constructor(r){super(r,ub),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){"sky-gradient"===r?this._updateColorRamp():"sky-atmosphere-sun"!==r&&"sky-atmosphere-halo-color"!==r&&"sky-atmosphere-color"!==r&&"sky-atmosphere-sun-intensity"!==r||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Gf({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(r,o){if("atmosphere"===this.paint.get("sky-type")){const c=this.paint.get("sky-atmosphere-sun"),h=!c,g=r.style.light,y=g.properties.get("position");return h&&"viewport"===g.properties.get("anchor")&&bi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?uv(y.azimuthal,90-y.polar,o):uv(c[0],90-c[1],o)}const a=this.paint.get("sky-gradient-center");return uv(a[0],90-a[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return"atmosphere"===r?["skyboxCapture","skybox"]:"gradient"===r?["skyboxGradient"]:null}}};class lh{constructor(o,a,c,h){this.context=o,this.format=c,this.texture=o.gl.createTexture(),this.update(a,h)}update(o,a,c){const{width:h,height:g}=o,{context:y}=this,{gl:x}=y,{HTMLImageElement:C,HTMLCanvasElement:O,HTMLVideoElement:E,ImageData:A,ImageBitmap:k}=Xe;if(x.bindTexture(x.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!a||!1!==a.premultiply)),c||this.size&&this.size[0]===h&&this.size[1]===g){const{x:F,y:L}=c||{x:0,y:0};o instanceof C||o instanceof O||o instanceof E||o instanceof A||k&&o instanceof k?x.texSubImage2D(x.TEXTURE_2D,0,F,L,x.RGBA,x.UNSIGNED_BYTE,o):x.texSubImage2D(x.TEXTURE_2D,0,F,L,h,g,x.RGBA,x.UNSIGNED_BYTE,o.data)}else this.size=[h,g],o instanceof C||o instanceof O||o instanceof E||o instanceof A||k&&o instanceof k?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,o):x.texImage2D(x.TEXTURE_2D,0,this.format,h,g,0,this.format,x.UNSIGNED_BYTE,o.data);this.useMipmap=Boolean(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(o,a){const{context:c}=this,{gl:h}=c;h.bindTexture(h.TEXTURE_2D,this.texture),o!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?o===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:o),this.filter=o),a!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,a),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class db{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class hb{constructor(){this.tasks={},this.taskQueue=[],Wn(["process"],this),this.invoker=new db(this.process),this.nextId=0}add(o,a){const c=this.nextId++,h=function({type:g,isSymbolTile:y,zoom:x}){return x=x||0,"message"===g?0:"maybePrepare"!==g||y?"parseTile"!==g||y?"parseTile"===g&&y?300-x:"maybePrepare"===g&&y?400-x:500:200-x:100-x}(a);if(0===h){Ms();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:o,metadata:a,priority:h,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){Ms();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const o=this.pick();if(null===o)return;const a=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let o=null,a=1/0;for(let h=0;h<this.taskQueue.length;h++){const g=this.tasks[this.taskQueue[h]];g.priority<a&&(a=g.priority,o=h)}if(null===o)return null;const c=this.taskQueue[o];return this.taskQueue.splice(o,1),c}remove(){this.invoker.remove()}}class dv{constructor(o){this._stringToNumber={},this._numberToString=[];for(let a=0;a<o.length;a++){const c=o[a];this._stringToNumber[c]=a,this._numberToString[a]=c}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const hv=["tile","layer","source","sourceLayer","state"];class pv{constructor(o,a,c,h,g){this.type="Feature",this._vectorTileFeature=o,this._z=a,this._x=c,this._y=h,this.properties=o.properties,this.id=g}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(o.id=this.id);for(const a of hv)void 0!==this[a]&&(o[a]=this[a]);return o}}const _a=32,ya=33,Kc=new Uint16Array(8184);for(let r=0;r<2046;r++){let o=r+2,a=0,c=0,h=0,g=0,y=0,x=0;for(1&o?h=g=y=_a:a=c=x=_a;(o>>=1)>1;){const O=a+h>>1,E=c+g>>1;1&o?(h=a,g=c,a=y,c=x):(a=h,c=g,h=y,g=x),y=O,x=E}const C=4*r;Kc[C+0]=a,Kc[C+1]=c,Kc[C+2]=h,Kc[C+3]=g}const wl=new Uint16Array(2178),Yc=new Uint8Array(1089),ug=new Uint16Array(1089);function fv(r){return 0===r?-.03125:32===r?.03125:0}var Wa=Ce([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const dg={type:2,extent:Ut,loadGeometry:()=>[[new ft(0,0),new ft(Ut+1,0),new ft(Ut+1,Ut+1),new ft(0,Ut+1),new ft(0,0)]]};class z_{constructor(o,a,c,h,g){this.tileID=o,this.uid=Hn(),this.uses=0,this.tileSize=a,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(o){const a=o+this.timeAdded;a<Ea.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=ju(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,a,c){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(h,g){const y={};if(!g)return y;for(const x of h){const C=x.layerIds.map(O=>g.getLayer(O)).filter(Boolean);if(0!==C.length){x.layers=C,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(O=>C.filter(E=>E.id===O)[0]));for(const O of C)y[O.id]=x}}return y}(o.buckets,a.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const g=this.buckets[h];if(g instanceof sc){if(this.hasSymbolBuckets=!0,!c)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const g=this.buckets[h];if(g instanceof sc&&g.hasRTLText){this.hasRTLText=!0,D.isLoading()||D.isLoaded()||"deferred"!==w()||T();break}}this.queryPadding=0;for(const h in this.buckets){const g=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(h).queryRadius(g))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new Xn}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const c in this.buckets){const h=this.buckets[c];h.uploadPending()&&h.upload(o)}const a=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new lh(o,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new lh(o,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new lh(o,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,a,c,h,g,y,x,C){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:x,transform:y,params:g,tileTransform:this.tileTransform},o,a,c):{}}querySourceFeatures(o,a){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const h=c.loadVTLayers(),g=a?a.sourceLayer:"",y=h._geojsonTileLayer||h[g];if(!y)return;const x=Gh(a&&a.filter),{z:C,x:O,y:E}=this.tileID.canonical,A={z:C,x:O,y:E};for(let k=0;k<y.length;k++){const F=y.feature(k);if(x.needGeometry){const q=Gc(F,!0);if(!x.filter(new S(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!x.filter(new S(this.tileID.overscaledZ),F))continue;const L=c.getId(F,g),V=new pv(F,C,O,E,L);V.tile=A,o.push(V)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const a=this.expirationTime;if(o.cacheControl){const c=Ne(o.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const c=Date.now();let h=!1;if(this.expirationTime>c)h=!1;else if(a)if(this.expirationTime<a)h=!0;else{const g=this.expirationTime-a;g?this.expirationTime=c+Math.max(g,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(o,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(o).length||!a)return;const c=this.latestFeatureIndex.loadVTLayers(),h=a.style.listImages();for(const g in this.buckets){if(!a.style.hasLayer(g))continue;const y=this.buckets[g],x=y.layers[0].sourceLayer||"_geojsonTileLayer",C=c[x],O=o[x];if(!C||!O||0===Object.keys(O).length)continue;if(y.update(O,C,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof Kf||y instanceof Jm){const A=a.style._getSourceCache(y.layers[0].source);a._terrain&&a._terrain.enabled&&A&&y.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(A.id,this.tileID)}const E=a&&a.style&&a.style.getLayer(g);E&&(this.queryPadding=Math.max(this.queryPadding,E.queryRadius(y)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ea.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=Ea.now()+o}setTexture(o,a){const c=a.context,h=c.gl;this.texture=this.texture||a.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new lh(c,o,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(o,a){const c={};for(const h of a)c[h]=!0;this.dependencies[o]=c}hasDependency(o,a){for(const c of o){const h=this.dependencies[c];if(h)for(const g of a)if(h[g])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,a){if(!a||"mercator"===a.name||this._tileDebugBuffer)return;const c=Ua(dg,this.tileID.canonical,this.tileTransform)[0],h=new ot,g=new fs;for(let y=0;y<c.length;y++){const{x,y:C}=c[y];h.emplaceBack(x,C),g.emplaceBack(y)}g.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(g),this._tileDebugBuffer=o.createVertexBuffer(h,Qh.members),this._tileDebugSegments=ho.simpleSegment(0,0,h.length,g.length)}_makeTileBoundsBuffers(o,a){if(this._tileBoundsBuffer||!a||"mercator"===a.name)return;const c=Ua(dg,this.tileID.canonical,this.tileTransform)[0];let h,g;if(this.isRaster){const y=function(x,C){const O=ju(x,C),E=Math.pow(2,x.z);for(let q=0;q<ya;q++)for(let ee=0;ee<ya;ee++){const le=Vs((x.x+(ee+fv(ee))/_a)/E),Q=zo((x.y+(q+fv(q))/_a)/E),ae=C.project(le,Q),he=q*ya+ee;wl[2*he+0]=Math.round((ae.x*O.scale-O.x)*Ut),wl[2*he+1]=Math.round((ae.y*O.scale-O.y)*Ut)}Yc.fill(0),ug.fill(0);for(let q=2045;q>=0;q--){const ee=4*q,le=Kc[ee+0],Q=Kc[ee+1],ae=Kc[ee+2],he=Kc[ee+3],ue=le+ae>>1,we=Q+he>>1,Pe=ue+we-Q,je=we+le-ue,nt=Q*ya+le,Fe=he*ya+ae,qe=we*ya+ue,Ze=Math.hypot((wl[2*nt+0]+wl[2*Fe+0])/2-wl[2*qe+0],(wl[2*nt+1]+wl[2*Fe+1])/2-wl[2*qe+1])>=16;Yc[qe]=Yc[qe]||(Ze?1:0),q<1022&&(Yc[qe]=Yc[qe]||Yc[(Q+je>>1)*ya+(le+Pe>>1)]||Yc[(he+je>>1)*ya+(ae+Pe>>1)])}const A=new He,k=new It;let F=0;function L(q,ee){const le=ee*ya+q;return 0===ug[le]&&(A.emplaceBack(wl[2*le+0],wl[2*le+1],q*Ut/_a,ee*Ut/_a),ug[le]=++F),ug[le]-1}function V(q,ee,le,Q,ae,he){const ue=q+le>>1,we=ee+Q>>1;if(Math.abs(q-ae)+Math.abs(ee-he)>1&&Yc[we*ya+ue])V(ae,he,q,ee,ue,we),V(le,Q,ae,he,ue,we);else{const Pe=L(q,ee),je=L(le,Q),nt=L(ae,he);k.emplaceBack(Pe,je,nt)}}return V(0,0,_a,_a,_a,0),V(_a,_a,0,0,0,_a),{vertices:A,indices:k}}(this.tileID.canonical,a);h=y.vertices,g=y.indices}else{h=new He,g=new It;for(const{x,y:C}of c)h.emplaceBack(x,C,0,0);const y=Zm(h.int16,void 0,4);for(let x=0;x<y.length;x+=3)g.emplaceBack(y[x],y[x+1],y[x+2])}this._tileBoundsBuffer=o.createVertexBuffer(h,Wa.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(g),this._tileBoundsSegments=ho.simpleSegment(0,0,h.length,g.length)}_makeGlobeTileDebugBuffers(o,a){const c=a.projection;if(!c||"globe"!==c.name||a.freezeTileCoverage)return;const h=this.tileID.canonical,g=Au(mm(h,a)),y=Ud(a.zoom);let x;y>0&&(x=Ef(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,h,a,g,x,y),this._makeGlobeTileDebugTextBuffer(o,h,a,g,x,y)}_globePoint(o,a,c,h,g,y,x){let C=tp(o,a,c);if(y){const O=1<<c.z,E=Va(h.center.lng),A=xl(h.center.lat),k=(c.x+.5)/O-E;let F=0;k>.5?F=-1:k<-.5&&(F=1);let L=(o/Ut+c.x)/O+F,V=(a/Ut+c.y)/O;L=(L-E)*h._pixelsPerMercatorPixel+E,V=(V-A)*h._pixelsPerMercatorPixel+A;const q=[L*h.worldSize,V*h.worldSize,0];Di(q,q,y),C=Su(C,q,x)}return Di(C,C,g)}_makeGlobeTileDebugBorderBuffer(o,a,c,h,g,y){const x=new ot,C=new fs,O=new Se,E=(k,F,L,V,q)=>{const ee=(L-k)/(q-1),le=(V-F)/(q-1),Q=x.length;for(let ae=0;ae<q;ae++){const he=k+ae*ee,ue=F+ae*le;x.emplaceBack(he,ue);const we=this._globePoint(he,ue,a,c,h,g,y);O.emplaceBack(we[0],we[1],we[2]),C.emplaceBack(Q+ae)}},A=Ut;E(0,0,A,0,16),E(A,0,A,A,16),E(A,A,0,A,16),E(0,A,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(C),this._tileDebugBuffer=o.createVertexBuffer(x,Qh.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(O,uy.members),this._tileDebugSegments=ho.simpleSegment(0,0,x.length,C.length)}_makeGlobeTileDebugTextBuffer(o,a,c,h,g,y){const x=Ut/4,C=new ot,O=new It,E=new Se,A=25;O.reserve(32),C.reserve(A),E.reserve(A);const k=(F,L)=>A*F+L;for(let F=0;F<A;F++){const L=F*x;for(let V=0;V<A;V++){const q=V*x;C.emplaceBack(q,L);const ee=this._globePoint(q,L,a,c,h,g,y);E.emplaceBack(ee[0],ee[1],ee[2])}}for(let F=0;F<4;F++)for(let L=0;L<4;L++){const V=k(F,L),q=k(F,L+1),ee=k(F+1,L),le=k(F+1,L+1);O.emplaceBack(V,q,ee),O.emplaceBack(ee,q,le)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(O),this._tileDebugTextBuffer=o.createVertexBuffer(C,Qh.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(E,uy.members),this._tileDebugTextSegments=ho.simpleSegment(0,0,A,32)}}class pb{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,a,c){const h=String(a);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][h]=this.stateChanges[o][h]||{},Bi(this.stateChanges[o][h],c),null===this.deletedStates[o]){this.deletedStates[o]={};for(const g in this.state[o])g!==h&&(this.deletedStates[o][g]=null)}else if(this.deletedStates[o]&&null===this.deletedStates[o][h]){this.deletedStates[o][h]={};for(const g in this.state[o][h])c[g]||(this.deletedStates[o][h][g]=null)}else for(const g in c)this.deletedStates[o]&&this.deletedStates[o][h]&&null===this.deletedStates[o][h][g]&&delete this.deletedStates[o][h][g]}removeFeatureState(o,a,c){if(null===this.deletedStates[o])return;const h=String(a);if(this.deletedStates[o]=this.deletedStates[o]||{},c&&void 0!==a)null!==this.deletedStates[o][h]&&(this.deletedStates[o][h]=this.deletedStates[o][h]||{},this.deletedStates[o][h][c]=null);else if(void 0!==a)if(this.stateChanges[o]&&this.stateChanges[o][h])for(c in this.deletedStates[o][h]={},this.stateChanges[o][h])this.deletedStates[o][h][c]=null;else this.deletedStates[o][h]=null;else this.deletedStates[o]=null}getState(o,a){const c=String(a),h=Bi({},(this.state[o]||{})[c],(this.stateChanges[o]||{})[c]);if(null===this.deletedStates[o])return{};if(this.deletedStates[o]){const g=this.deletedStates[o][a];if(null===g)return{};for(const y in g)delete h[y]}return h}initializeTileState(o,a){o.setFeatureState(this.state,a)}coalesceChanges(o,a){const c={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const g={};for(const y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),Bi(this.state[h][y],this.stateChanges[h][y]),g[y]=this.state[h][y];c[h]=g}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const g={};if(null===this.deletedStates[h])for(const y in this.state[h])g[y]={},this.state[h][y]={};else for(const y in this.deletedStates[h]){if(null===this.deletedStates[h][y])this.state[h][y]={};else if(this.state[h][y])for(const x of Object.keys(this.deletedStates[h][y]))delete this.state[h][y][x];g[y]=this.state[h][y]}c[h]=c[h]||{},Bi(c[h],g)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(c).length)for(const h in o)o[h].setFeatureState(c,a)}}class V_{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,a){const c=this.toIdx(o,a);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(o,a){return this.leaves[this.toIdx(o,a)]}toIdx(o,a){return a*this.size+o}}function gv(r,o,a,c){let h=0,g=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(c[y])<1e-15){if(a[y]<r[y]||a[y]>o[y])return null}else{const x=1/c[y];let C=(r[y]-a[y])*x,O=(o[y]-a[y])*x;if(C>O){const E=C;C=O,O=E}if(C>h&&(h=C),O<g&&(g=O),h>g)return null}return h}function mv(r,o,a,c,h,g,y,x,C,O,E){const A=c-r,k=h-o,F=g-a,L=y-r,V=x-o,q=C-a,ee=E[1]*q-E[2]*V,le=E[2]*L-E[0]*q,Q=E[0]*V-E[1]*L,ae=A*ee+k*le+F*Q;if(Math.abs(ae)<1e-15)return null;const he=1/ae,ue=O[0]-r,we=O[1]-o,Pe=O[2]-a,je=(ue*ee+we*le+Pe*Q)*he;if(je<0||je>1)return null;const nt=we*F-Pe*k,Fe=Pe*A-ue*F,qe=ue*k-we*A,Ze=(E[0]*nt+E[1]*Fe+E[2]*qe)*he;return Ze<0||je+Ze>1?null:(L*nt+V*Fe+q*qe)*he}function _v(r,o,a){return(r-o)/(a-o)}function hg(r,o,a,c,h,g,y,x,C){const O=1<<a,E=g-c,A=y-h,k=(r+1)/O*E+c,F=(o+0)/O*A+h,L=(o+1)/O*A+h;x[0]=(r+0)/O*E+c,x[1]=F,C[0]=k,C[1]=L}class yv{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(g){const y=Math.ceil(Math.log2(g.dim/8)),x=[];let C=Math.ceil(Math.pow(2,y));const O=1/C,E=(F,L,V,q,ee)=>{const le=q?1:0,Q=(F+1)*V-le,ae=L*V,he=(L+1)*V-le;ee[0]=F*V,ee[1]=ae,ee[2]=Q,ee[3]=he};let A=new V_(C);const k=[];for(let F=0;F<C*C;F++){E(F%C,Math.floor(F/C),O,!1,k);const L=qa(k[0],k[1],g),V=qa(k[2],k[1],g),q=qa(k[2],k[3],g),ee=qa(k[0],k[3],g);A.minimums.push(Math.min(L,V,q,ee)),A.maximums.push(Math.max(L,V,q,ee)),A.leaves.push(1)}for(x.push(A),C/=2;C>=1;C/=2){const F=x[x.length-1];A=new V_(C);for(let L=0;L<C*C;L++){E(L%C,Math.floor(L/C),2,!0,k);const V=F.getElevation(k[0],k[1]),q=F.getElevation(k[2],k[1]),ee=F.getElevation(k[2],k[3]),le=F.getElevation(k[0],k[3]),Q=F.isLeaf(k[0],k[1]),ae=F.isLeaf(k[2],k[1]),he=F.isLeaf(k[2],k[3]),ue=F.isLeaf(k[0],k[3]),we=Math.min(V.min,q.min,ee.min,le.min),Pe=Math.max(V.max,q.max,ee.max,le.max),je=Q&&ae&&he&&ue;A.maximums.push(Pe),A.minimums.push(we),A.leaves.push(Pe-we<=5&&je?1:0)}x.push(A)}return x}(this.dem),c=a.length-1,h=a[c];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(a,0,0,c,0)}raycastRoot(o,a,c,h,g,y,x=1){return gv([o,a,-100],[c,h,this.maximums[0]*x],g,y)}raycast(o,a,c,h,g,y,x=1){if(!this.nodeCount)return null;const C=this.raycastRoot(o,a,c,h,g,y,x);if(null==C)return null;const O=[],E=[],A=[],k=[],F=[{idx:0,t:C,nodex:0,nodey:0,depth:0}];for(;F.length>0;){const{idx:L,t:V,nodex:q,nodey:ee,depth:le}=F.pop();if(this.leaves[L]){hg(q,ee,le,o,a,c,h,A,k);const ae=1<<le,he=(q+0)/ae,ue=(q+1)/ae,we=(ee+0)/ae,Pe=(ee+1)/ae,je=qa(he,we,this.dem)*x,nt=qa(ue,we,this.dem)*x,Fe=qa(ue,Pe,this.dem)*x,qe=qa(he,Pe,this.dem)*x,Ze=mv(A[0],A[1],je,k[0],A[1],nt,k[0],k[1],Fe,g,y),et=mv(k[0],k[1],Fe,A[0],k[1],qe,A[0],A[1],je,g,y),at=Math.min(null!==Ze?Ze:Number.MAX_VALUE,null!==et?et:Number.MAX_VALUE);if(at!==Number.MAX_VALUE)return at;{const Ue=$c([],g,y,V);if(vv(je,nt,qe,Fe,_v(Ue[0],A[0],k[0]),_v(Ue[1],A[1],k[1]))>=Ue[2])return V}continue}let Q=0;for(let ae=0;ae<this._siblingOffset.length;ae++){hg((q<<1)+this._siblingOffset[ae][0],(ee<<1)+this._siblingOffset[ae][1],le+1,o,a,c,h,A,k),A[2]=-100,k[2]=this.maximums[this.childOffsets[L]+ae]*x;const he=gv(A,k,g,y);if(null!=he){const ue=he;O[ae]=ue;let we=!1;for(let Pe=0;Pe<Q&&!we;Pe++)ue>=O[E[Pe]]&&(E.splice(Pe,0,ae),we=!0);we||(E[Q]=ae),Q++}}for(let ae=0;ae<Q;ae++){const he=E[ae];F.push({idx:this.childOffsets[L]+he,t:O[he],nodex:(q<<1)+this._siblingOffset[he][0],nodey:(ee<<1)+this._siblingOffset[he][1],depth:le+1})}}return null}_addNode(o,a,c){return this.minimums.push(o),this.maximums.push(a),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(o,a,c,h,g){if(1===o[h].isLeaf(a,c))return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const y=h-1,x=o[y];let C=0,O=0;for(let E=0;E<this._siblingOffset.length;E++){const A=2*a+this._siblingOffset[E][0],k=2*c+this._siblingOffset[E][1],F=x.getElevation(A,k),L=x.isLeaf(A,k),V=this._addNode(F.min,F.max,L);L&&(C|=1<<E),O||(O=V)}for(let E=0;E<this._siblingOffset.length;E++)C&1<<E||this._construct(o,2*a+this._siblingOffset[E][0],2*c+this._siblingOffset[E][1],y,O+E)}}function vv(r,o,a,c,h,g){return Sn(Sn(r,a,g),Sn(o,c,g),h)}function qa(r,o,a){const c=a.dim,h=_n(r*c-.5,0,c-1),g=_n(o*c-.5,0,c-1),y=Math.floor(h),x=Math.floor(g),C=Math.min(y+1,c-1),O=Math.min(x+1,c-1);return vv(a.get(y,x),a.get(C,x),a.get(y,O),a.get(C,O),h-y,g-x)}const xp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function pg(r,o,a){return(256*r*256+256*o+a)/10-1e4}function MM(r,o,a){return 256*r+o+a/256-32768}class ch{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,a,c,h=!1,g=!1){if(this.uid=o,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(c&&"mapbox"!==c&&"terrarium"!==c)return bi(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const y=this.dim=a.height-2,x=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=c||"mapbox",this.borderReady=h,!h){for(let C=0;C<y;C++)x[this._idx(-1,C)]=x[this._idx(0,C)],x[this._idx(y,C)]=x[this._idx(y-1,C)],x[this._idx(C,-1)]=x[this._idx(C,0)],x[this._idx(C,y)]=x[this._idx(C,y-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(y,-1)]=x[this._idx(y-1,0)],x[this._idx(-1,y)]=x[this._idx(0,y-1)],x[this._idx(y,y)]=x[this._idx(y-1,y-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new yv(this)}get(o,a,c=!1){c&&(o=_n(o,-1,this.dim),a=_n(a,-1,this.dim));const h=4*this._idx(o,a);return("terrarium"===this.encoding?MM:pg)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(o){return xp[o]}get unpackVector(){return xp[this.encoding]}_idx(o,a){if(o<-1||o>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(o+1)}static pack(o,a){const c=[0,0,0,0],h=ch.getUnpackVector(a);let g=Math.floor((o+h[3])/h[2]);return c[2]=g%256,g=Math.floor(g/256),c[1]=g%256,g=Math.floor(g/256),c[0]=g,c}getPixels(){return new mr({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,a,c){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let h=a*this.dim,g=a*this.dim+this.dim,y=c*this.dim,x=c*this.dim+this.dim;switch(a){case-1:h=g-1;break;case 1:g=h+1}switch(c){case-1:y=x-1;break;case 1:x=y+1}const C=-a*this.dim,O=-c*this.dim;for(let E=y;E<x;E++)for(let A=h;A<g;A++){const k=4*this._idx(A,E),F=4*this._idx(A+C,E+O);this.pixels[k+0]=o.pixels[F+0],this.pixels[k+1]=o.pixels[F+1],this.pixels[k+2]=o.pixels[F+2],this.pixels[k+3]=o.pixels[F+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Oe(ch,"DEMData"),Oe(yv,"DemMinMaxQuadTree",{omit:["dem"]});class OM{constructor(o,a){this.max=o,this.onRemove=a,this.reset()}reset(){for(const o in this.data)for(const a of this.data[o])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(o,a,c){const h=o.wrapped().key;void 0===this.data[h]&&(this.data[h]=[]);const g={value:a,timeout:void 0};if(void 0!==c&&(g.timeout=setTimeout(()=>{this.remove(o,g)},c)),this.data[h].push(g),this.order.push(h),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const a=this.data[o].shift();return a.timeout&&clearTimeout(a.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),a.value}getByKey(o){const a=this.data[o];return a?a[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,a){if(!this.has(o))return this;const c=o.wrapped().key,h=void 0===a?0:this.data[c].indexOf(a),g=this.data[c][h];return this.data[c].splice(h,1),g.timeout&&clearTimeout(g.timeout),0===this.data[c].length&&delete this.data[c],this.onRemove(g.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(o){const a=[];for(const c in this.data)for(const h of this.data[c])o(h.value)||a.push(h);for(const c of a)this.remove(c.value.tileID,c)}}class qu{constructor(o,a,c){this.func=o,this.mask=a,this.range=c}}qu.ReadOnly=!1,qu.ReadWrite=!0,qu.disabled=new qu(519,qu.ReadOnly,[0,1]);class gg{constructor(o,a,c,h,g,y){this.test=o,this.ref=a,this.mask=c,this.fail=h,this.depthFail=g,this.pass=y}}gg.disabled=new gg({func:519,mask:0},0,0,7680,7680,7680);class Za{constructor(o,a,c){this.blendFunction=o,this.blendColor=a,this.mask=c}}Za.Replace=[1,0],Za.disabled=new Za(Za.Replace,di.transparent,[!1,!1,!1,!1]),Za.unblended=new Za(Za.Replace,di.transparent,[!0,!0,!0,!0]),Za.alphaBlended=new Za([1,771],di.transparent,[!0,!0,!0,!0]);class ys{constructor(o,a,c){this.enable=o,this.mode=a,this.frontFace=c}}ys.disabled=new ys(!1,1029,2305),ys.backCCW=new ys(!0,1029,2305),ys.backCW=new ys(!0,1029,2304),ys.frontCW=new ys(!0,1028,2304),ys.frontCCW=new ys(!0,1028,2305);class Cl extends lu{constructor(o,a,c){super(),this.id=o,this._onlySymbols=c,a.on("data",h=>{"source"===h.dataType&&"metadata"===h.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===h.dataType&&"content"===h.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new OM(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new pb,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(o){this.map=o,this._minTileCacheSize=void 0===this._minTileCacheSize&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const a=this._tiles[o];if("loaded"!==a.state&&"errored"!==a.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,a){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,a)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,()=>{})}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const c=this._tiles[a];c.upload(o),c.prepare(this.map.style.imageManager)}}getIds(){return ws(this._tiles).map(o=>o.tileID).sort(uh).map(o=>o.key)}getRenderableIds(o){const a=[];for(const c in this._tiles)this._isIdRenderable(+c,o)&&a.push(this._tiles[c]);return o?a.sort((c,h)=>{const g=c.tileID,y=h.tileID,x=new ft(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),C=new ft(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-y.overscaledZ||C.y-x.y||C.x-x.x}).map(c=>c.tileID.key):a.map(c=>c.tileID).sort(uh).map(c=>c.key)}hasRenderableParent(o){const a=this.findLoadedParent(o,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(o,a){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(a||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)"errored"!==this._tiles[o].state&&this._reloadTile(+o,"reloading")}}_reloadTile(o,a){const c=this._tiles[o];c&&("loading"!==c.state&&(c.state=a),this._loadTile(c,this._tileLoaded.bind(this,c,o,a)))}_tileLoaded(o,a,c,h){if(h)if(o.state="errored",404!==h.status)this._source.fire(new Sa(h,{tile:o}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=Ea.now(),"expired"===c&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(a,o),"raster-dem"===this._source.type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new Bl("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const a=this.getRenderableIds();for(let h=0;h<a.length;h++){const g=a[h];if(o.neighboringTiles&&o.neighboringTiles[g]){const y=this.getTileByID(g);c(o,y),c(y,o)}}function c(h,g){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let y=g.tileID.canonical.x-h.tileID.canonical.x;const x=g.tileID.canonical.y-h.tileID.canonical.y,C=Math.pow(2,h.tileID.canonical.z),O=g.tileID.key;0===y&&0===x||Math.abs(x)>1||(Math.abs(y)>1&&(1===Math.abs(y+C)?y+=C:1===Math.abs(y-C)&&(y-=C)),g.dem&&h.dem&&(h.dem.backfillBorder(g.dem,y,x),h.neighboringTiles&&h.neighboringTiles[O]&&(h.neighboringTiles[O].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,a,c,h){for(const g in this._tiles){let y=this._tiles[g];if(h[g]||!y.hasData()||y.tileID.overscaledZ<=a||y.tileID.overscaledZ>c)continue;let x=y.tileID;for(;y&&y.tileID.overscaledZ>a+1;){const O=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[O.key],y&&y.hasData()&&(x=O)}let C=x;for(;C.overscaledZ>a;)if(C=C.scaledTo(C.overscaledZ-1),o[C.key]){h[x.key]=x;break}}}findLoadedParent(o,a){if(o.key in this._loadedParentTiles){const c=this._loadedParentTiles[o.key];return c&&c.tileID.overscaledZ>=a?c:null}for(let c=o.overscaledZ-1;c>=a;c--){const h=o.scaledTo(c),g=this._getLoadedTile(h);if(g)return g}}_getLoadedTile(o){const a=this._tiles[o.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,a){a=a||this._source.tileSize;const c=Math.ceil(o.width/a)+1,h=Math.ceil(o.height/a)+1,g=Math.floor(c*h*5),y="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,g):g,x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(o){const a=Math.round((o-(void 0===this._prevLng?o:this._prevLng))/360);if(this._prevLng=o,a){const c={};for(const h in this._tiles){const g=this._tiles[h];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+a),c[g.tileID.key]=g}this._tiles=c;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(o,a,c){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let h;this.updateCacheSize(o,a),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new Mo(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(h=o.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(x=>this._source.hasTile(x)))):h=[];const g=this._updateRetainedTiles(h);if(xv(this._source.type)&&0!==h.length){const x={},C={},O=Object.keys(g);for(const A of O){const k=g[A],F=this._tiles[A];if(!F||F.fadeEndTime&&F.fadeEndTime<=Ea.now())continue;const L=this.findLoadedParent(k,Math.max(k.overscaledZ-Cl.maxOverzooming,this._source.minzoom));L&&(this._addTile(L.tileID),x[L.tileID.key]=L.tileID),C[A]=k}const E=h[h.length-1].overscaledZ;for(const A in this._tiles){const k=this._tiles[A];if(g[A]||!k.hasData())continue;let F=k.tileID;for(;F.overscaledZ>E;){F=F.scaledTo(F.overscaledZ-1);const L=this._tiles[F.key];if(L&&L.hasData()&&C[F.key]){g[A]=k.tileID;break}}}for(const A in x)g[A]||(this._coveredTiles[A]=!0,g[A]=x[A])}for(const x in g)this._tiles[x].clearFadeHold();const y=function(x,C){const O=[];for(const E in x)E in C||O.push(E);return O}(this._tiles,g);for(const x of y){const C=this._tiles[x];C.hasSymbolBuckets&&!C.holdingForFade()?C.setHoldDuration(this.map._fadeDuration):C.hasSymbolBuckets&&!C.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const a={};if(0===o.length)return a;const c={},h=o.reduce((O,E)=>Math.min(O,E.overscaledZ),1/0),g=o[0].overscaledZ,y=Math.max(g-Cl.maxOverzooming,this._source.minzoom),x=Math.max(g+Cl.maxUnderzooming,this._source.minzoom),C={};for(const O of o){const E=this._addTile(O);a[O.key]=O,E.hasData()||h<this._source.maxzoom&&(C[O.key]=O)}this._retainLoadedChildren(C,h,x,a);for(const O of o){let E=this._tiles[O.key];if(E.hasData())continue;if(O.canonical.z>=this._source.maxzoom){const k=O.children(this._source.maxzoom)[0],F=this.getTile(k);if(F&&F.hasData()){a[k.key]=k;continue}}else{const k=O.children(this._source.maxzoom);if(a[k[0].key]&&a[k[1].key]&&a[k[2].key]&&a[k[3].key])continue}let A=E.wasRequested();for(let k=O.overscaledZ-1;k>=y;--k){const F=O.scaledTo(k);if(c[F.key]||(c[F.key]=!0,E=this.getTile(F),!E&&A&&(E=this._addTile(F)),E&&(a[F.key]=F,A=E.wasRequested(),E.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const a=[];let c,h=this._tiles[o].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){c=this._loadedParentTiles[h.key];break}a.push(h.key);const g=h.scaledTo(h.overscaledZ-1);if(c=this._getLoadedTile(g),c)break;h=g}for(const g of a)this._loadedParentTiles[g]=c}}_addTile(o){let a=this._tiles[o.key];if(a)return a;a=this._cache.getAndRemove(o),a&&(this._setTileReloadTimer(o.key,a),a.tileID=o,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,a)));const c=Boolean(a);if(!c){const h=this.map?this.map.painter:null;a=new z_(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,o.key,a.state))}return a?(a.uses++,this._tiles[o.key]=a,c||this._source.fire(new Bl("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(o,a){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const c=a.getExpiryTimeout();c&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},c))}_removeTile(o){const a=this._tiles[o];a&&(a.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),a.uses>0||(a.hasData()&&"reloading"!==a.state?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,a,c){const h=[],g=this.transform;if(!g)return h;const y="globe"===g.projection.name,x=Va(g.center.lng);for(const C in this._tiles){const O=this._tiles[C];if(c&&O.clearQueryDebugViz(),O.holdingForFade())continue;let E;if(y){const A=O.tileID.canonical;if(0===A.z){const k=[Math.abs(_n(x,...dh(A,-1))-x),Math.abs(_n(x,...dh(A,1))-x)];E=[0,2*k.indexOf(Math.min(...k))-1]}else{const k=[Math.abs(_n(x,...dh(A,-1))-x),Math.abs(_n(x,...dh(A,0))-x),Math.abs(_n(x,...dh(A,1))-x)];E=[k.indexOf(Math.min(...k))-1]}}else E=[0];for(const A of E){const k=o.containsTile(O,g,a,A);k&&h.push(k)}}return h}getVisibleCoordinates(o){const a=this.getRenderableIds(o).map(c=>this._tiles[c].tileID);for(const c of a)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(xv(this._source.type))for(const o in this._tiles){const a=this._tiles[o];if(void 0!==a.fadeEndTime&&a.fadeEndTime>=Ea.now())return!0}return!1}setFeatureState(o,a,c){this._state.updateState(o=o||"_geojsonTileLayer",a,c)}removeFeatureState(o,a,c){this._state.removeFeatureState(o=o||"_geojsonTileLayer",a,c)}getFeatureState(o,a){return this._state.getState(o=o||"_geojsonTileLayer",a)}setDependencies(o,a,c){const h=this._tiles[o];h&&h.setDependencies(a,c)}reloadTilesForDependencies(o,a){for(const c in this._tiles)this._tiles[c].hasDependency(o,a)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(o,a))}_preloadTiles(o,a){if(!this._sourceLoaded){const x=()=>{this._sourceLoaded&&(this._source.off("data",x),this._preloadTiles(o,a))};return void this._source.on("data",x)}const c=new Map,h=Array.isArray(o)?o:[o],g=this.map.painter.terrain,y=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const x of h){const C=x.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const O of C)c.set(O.key,O);this.usedForTerrain&&x.updateElevation(!1)}Yi(Array.from(c.values()),(x,C)=>{const O=new z_(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(O,E=>{"raster-dem"===this._source.type&&O.dem&&this._backfillDEM(O),C(E,O)})},a)}}function uh(r,o){const a=Math.abs(2*r.wrap)-+(r.wrap<0),c=Math.abs(2*o.wrap)-+(o.wrap<0);return r.overscaledZ-o.overscaledZ||c-a||o.canonical.y-r.canonical.y||o.canonical.x-r.canonical.x}function xv(r){return"raster"===r||"image"===r||"video"===r||"custom"===r}function dh(r,o){const a=1<<r.z;return[r.x/a+o,(r.x+1)/a+o]}Cl.maxOverzooming=10,Cl.maxUnderzooming=3;class wp{constructor(o,a,c){this._demTile=o,this._dem=this._demTile.dem,this._scale=a,this._offset=c}static create(o,a,c){const h=c||o.findDEMTileFor(a);if(!h||!h.dem)return;const g=h.dem,y=h.tileID,x=1<<a.canonical.z-y.canonical.z;return new wp(h,h.tileSize/Ut/x,[(a.canonical.x/x-y.canonical.x)*g.dim,(a.canonical.y/x-y.canonical.y)*g.dim])}tileCoordToPixel(o,a){const c=a*this._scale+this._offset[1],h=Math.floor(o*this._scale+this._offset[0]),g=Math.floor(c);return new ft(h,g)}getElevationAt(o,a,c,h){const g=o*this._scale+this._offset[0],y=a*this._scale+this._offset[1],x=Math.floor(g),C=Math.floor(y),O=this._dem;return h=!!h,c?Sn(Sn(O.get(x,C,h),O.get(x,C+1,h),y-C),Sn(O.get(x+1,C,h),O.get(x+1,C+1,h),y-C),g-x):O.get(x,C,h)}getElevationAtPixel(o,a,c){return this._dem.get(o,a,!!c)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*pa(1,o)*this._dem.stride}}class bv{constructor(o,a){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ql(Ut,16,0),this.featureIndexArray=new Jl,this.promoteId=a}insert(o,a,c,h,g,y=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,h,g,y);const C=this.grid;for(let O=0;O<a.length;O++){const E=a[O],A=[1/0,1/0,-1/0,-1/0];for(let k=0;k<E.length;k++){const F=E[k];A[0]=Math.min(A[0],F.x),A[1]=Math.min(A[1],F.y),A[2]=Math.max(A[2],F.x),A[3]=Math.max(A[3],F.y)}A[0]<Ut&&A[1]<Ut&&A[2]>=0&&A[3]>=0&&C.insert(x,A[0],A[1],A[2],A[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Zf(new tg(this.rawTileData)).layers,this.sourceLayerCoder=new dv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,a,c,h){this.loadVTLayers();const g=o.params||{},y=Gh(g.filter),x=o.tileResult,C=o.transform,O=x.bufferedTilespaceBounds,E=this.grid.query(O.min.x,O.min.y,O.max.x,O.max.y,(L,V,q,ee)=>Em(x.bufferedTilespaceGeometry,L,V,q,ee));E.sort(Cp);let A=null;C.elevation&&E.length>0&&(A=wp.create(C.elevation,this.tileID));const k={};let F;for(let L=0;L<E.length;L++){const V=E[L];if(V===F)continue;F=V;const q=this.featureIndexArray.get(V);let ee=null;this.loadMatchingFeature(k,q,y,g.layers,g.availableImages,a,c,h,(le,Q,ae,he=0)=>(ee||(ee=Ua(le,this.tileID.canonical,o.tileTransform)),Q.queryIntersectsFeature(x,le,ae,ee,this.z,o.transform,o.pixelPosMatrix,A,he)))}return k}loadMatchingFeature(o,a,c,h,g,y,x,C,O){const{featureIndex:E,bucketIndex:A,sourceLayerIndex:k,layoutVertexArrayOffset:F}=a,L=this.bucketLayerIDs[A];if(h&&!function(le,Q){for(let ae=0;ae<le.length;ae++)if(Q.indexOf(le[ae])>=0)return!0;return!1}(h,L))return;const V=this.sourceLayerCoder.decode(k),q=this.vtLayers[V].feature(E);if(c.needGeometry){const le=Gc(q,!0);if(!c.filter(new S(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!c.filter(new S(this.tileID.overscaledZ),q))return;const ee=this.getId(q,V);for(let le=0;le<L.length;le++){const Q=L[le];if(h&&h.indexOf(Q)<0)continue;const ae=y[Q];if(!ae)continue;let he={};void 0!==ee&&C&&(he=C.getState(ae.sourceLayer||"_geojsonTileLayer",ee));const ue=Bi({},x[Q]);ue.paint=wv(ue.paint,ae.paint,q,he,g),ue.layout=wv(ue.layout,ae.layout,q,he,g);const we=!O||O(q,ae,he,F);if(!we)continue;const Pe=new pv(q,this.z,this.x,this.y,ee);Pe.layer=ue;let je=o[Q];void 0===je&&(je=o[Q]=[]),je.push({featureIndex:E,feature:Pe,intersectionZ:we})}}lookupSymbolFeatures(o,a,c,h,g,y,x,C){const O={};this.loadVTLayers();const E=Gh(g);for(const A of o)this.loadMatchingFeature(O,{bucketIndex:c,sourceLayerIndex:h,featureIndex:A,layoutVertexArrayOffset:0},E,y,x,C,a);return O}loadFeature(o){const{featureIndex:a,sourceLayerIndex:c}=o;this.loadVTLayers();const h=this.sourceLayerCoder.decode(c),g=this.vtFeatures[h];if(g[a])return g[a];const y=this.vtLayers[h].feature(a);return g[a]=y,y}hasLayer(o){for(const a of this.bucketLayerIDs)for(const c of a)if(o===c)return!0;return!1}getId(o,a){let c=o.id;if(this.promoteId){const h="string"==typeof this.promoteId?this.promoteId:this.promoteId[a];null!=h&&(c=o.properties[h]),"boolean"==typeof c&&(c=Number(c))}return c}}function wv(r,o,a,c,h){return Ct(r,(g,y)=>{const x=o instanceof te?o.get(y):null;return x&&x.evaluate?x.evaluate(a,c,h):x})}function Cp(r,o){return o-r}Oe(bv,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Cv{constructor(o,a){this.width=o,this.height=a,this.nextRow=0,this.image=new bl({width:o,height:a}),this.positions={},this.uploaded=!1}getDash(o,a){const c=this.getKey(o,a);return this.positions[c]}trim(){const o=this.width,a=this.height=cs(this.nextRow);this.image.resize({width:o,height:a})}getKey(o,a){return o.join(",")+a}getDashRanges(o,a,c){const h=[];let g=o.length%2==1?-o[o.length-1]*c:0,y=o[0]*c,x=!0;h.push({left:g,right:y,isDash:x,zeroLength:0===o[0]});let C=o[0];for(let O=1;O<o.length;O++){x=!x;const E=o[O];g=C*c,C+=E,y=C*c,h.push({left:g,right:y,isDash:x,zeroLength:0===E})}return h}addRoundDash(o,a,c){const h=a/2;for(let g=-c;g<=c;g++){const y=this.width*(this.nextRow+c+g);let x=0,C=o[x];for(let O=0;O<this.width;O++){O/C.right>1&&(C=o[++x]);const E=Math.abs(O-C.left),A=Math.abs(O-C.right),k=Math.min(E,A);let F;const L=g/c*(h+1);if(C.isDash){const V=h-Math.abs(L);F=Math.sqrt(k*k+V*V)}else F=h-Math.sqrt(k*k+L*L);this.image.data[y+O]=Math.max(0,Math.min(255,F+128))}}}addRegularDash(o,a){for(let C=o.length-1;C>=0;--C){const O=o[C],E=o[C+1];O.zeroLength?o.splice(C,1):E&&E.isDash===O.isDash&&(E.left=O.left,o.splice(C,1))}const c=o[0],h=o[o.length-1];c.isDash===h.isDash&&(c.left=h.left-this.width,h.right=c.right+this.width);const g=this.width*this.nextRow;let y=0,x=o[y];for(let C=0;C<this.width;C++){C/x.right>1&&(x=o[++y]);const O=Math.abs(C-x.left),E=Math.abs(C-x.right),A=Math.min(O,E);this.image.data[g+C]=Math.max(0,Math.min(255,(x.isDash?A:-A)+a+128))}}addDash(o,a){const c=this.getKey(o,a);if(this.positions[c])return this.positions[c];const h="round"===a,g=h?7:0,y=2*g+1;if(this.nextRow+y>this.height)return bi("LineAtlas out of space"),null;0===o.length&&o.push(1);let x=0;for(let E=0;E<o.length;E++)o[E]<0&&(bi("Negative value is found in line dasharray, replacing values with 0"),o[E]=0),x+=o[E];if(0!==x){const E=this.width/x,A=this.getDashRanges(o,this.width,E);h?this.addRoundDash(A,E,g):this.addRegularDash(A,"square"===a?.5*E:0)}const C=this.nextRow+g;this.nextRow+=y;const O={tl:[C,g],br:[x,0]};return this.positions[c]=O,O}}Oe(Cv,"LineAtlas");const fb=1*ma;class Mv{constructor(o){const a={},c=[];for(const x in o){const C=o[x],O=a[x]={};for(const E in C.glyphs){const A=C.glyphs[+E];if(!A||0===A.bitmap.width||0===A.bitmap.height)continue;const k=A.metrics.localGlyph?fb:1,F={x:0,y:0,w:A.bitmap.width+2*k,h:A.bitmap.height+2*k};c.push(F),O[E]=F}}const{w:h,h:g}=__(c),y=new bl({width:h||1,height:g||1});for(const x in o){const C=o[x];for(const O in C.glyphs){const E=C.glyphs[+O];if(!E||0===E.bitmap.width||0===E.bitmap.height)continue;const A=a[x][O],k=E.metrics.localGlyph?fb:1;bl.copy(E.bitmap,y,{x:0,y:0},{x:A.x+k,y:A.y+k},E.bitmap)}}this.image=y,this.positions=a}}Oe(Mv,"GlyphAtlas");class gb{constructor(o){this.tileID=new Mo(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=ju(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,a,c,h,g){this.status="parsing",this.data=o,this.collisionBoxArray=new Xn;const y=new dv(Object.keys(o.layers).sort()),x=new bv(this.tileID,this.promoteId);x.bucketLayerIDs=[];const C={},O=new Cv(256,256),E={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:O,availableImages:c},A=a.familiesBySource[this.source];for(const he in A){const ue=o.layers[he];if(!ue)continue;let we=!1,Pe=!1;for(const Fe of A[he])"symbol"===Fe[0].type?we=!0:Pe=!0;if(!0===this.isSymbolTile&&!we||!1===this.isSymbolTile&&!Pe)continue;1===ue.version&&bi(`Vector tile source "${this.source}" layer "${he}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const je=y.encode(he),nt=[];for(let Fe=0;Fe<ue.length;Fe++){const qe=ue.feature(Fe),Ze=x.getId(qe,he);nt.push({feature:qe,id:Ze,index:Fe,sourceLayerIndex:je})}for(const Fe of A[he]){const qe=Fe[0];void 0!==this.isSymbolTile&&"symbol"===qe.type!==this.isSymbolTile||qe.minzoom&&this.zoom<Math.floor(qe.minzoom)||qe.maxzoom&&this.zoom>=qe.maxzoom||"none"!==qe.visibility&&(U_(Fe,this.zoom,c),(C[qe.id]=qe.createBucket({index:x.bucketLayerIDs.length,layers:Fe,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:je,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(nt,E,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(Fe.map(Ze=>Ze.id)))}}let k,F,L,V;O.trim();const q={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ee=()=>{if(k)return g(k);if(F&&L&&V){const he=new Mv(F),ue=new $y(L,V);for(const we in C){const Pe=C[we];Pe instanceof sc?(U_(Pe.layers,this.zoom,c),ob(Pe,F,he.positions,L,ue.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):Pe.hasPattern&&(Pe instanceof Kf||Pe instanceof Jm||Pe instanceof Fu)&&(U_(Pe.layers,this.zoom,c),Pe.addFeatures(E,this.tileID.canonical,ue.patternPositions,c,this.tileTransform))}this.status="done",g(null,{buckets:ws(C).filter(we=>!we.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:he.image,lineAtlas:O,imageAtlas:ue,glyphMap:this.returnDependencies?F:null,iconMap:this.returnDependencies?L:null,glyphPositions:this.returnDependencies?he.positions:null})}},le=Ct(E.glyphDependencies,he=>Object.keys(he).map(Number));Object.keys(le).length?h.send("getGlyphs",{uid:this.uid,stacks:le},(he,ue)=>{k||(k=he,F=ue,ee())},void 0,!1,q):F={};const Q=Object.keys(E.iconDependencies);Q.length?h.send("getImages",{icons:Q,source:this.source,tileID:this.tileID,type:"icons"},(he,ue)=>{k||(k=he,L=ue,ee())},void 0,!1,q):L={};const ae=Object.keys(E.patternDependencies);ae.length?h.send("getImages",{icons:ae,source:this.source,tileID:this.tileID,type:"patterns"},(he,ue)=>{k||(k=he,V=ue,ee())},void 0,!1,q):V={},ee()}}function U_(r,o,a){const c=new S(o);for(const h of r)h.recalculate(c,a)}class Ov{constructor(o){this.entries={},this.scheduler=o}request(o,a,c,h){const g=this.entries[o]=this.entries[o]||{callbacks:[]};if(g.result){const[y,x]=g.result;return this.scheduler?this.scheduler.add(()=>{h(y,x)},a):h(y,x),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=c((y,x)=>{g.result=[y,x];for(const C of g.callbacks)this.scheduler?this.scheduler.add(()=>{C(y,x)},a):C(y,x);setTimeout(()=>delete this.entries[o],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(y=>y!==h),g.callbacks.length||(g.cancel(),delete this.entries[o]))}}}function Tv(r,o,a){const c=JSON.stringify(r.request);return r.data&&(this.deduped.entries[c]={result:[null,r.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},h=>{const g=al(r.request,(y,x,C,O)=>{y?h(y):x&&h(null,{vectorTile:a?void 0:new Zf(new tg(x)),rawData:x,cacheControl:C,expires:O})});return()=>{g.cancel(),h()}},o)}const Dv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class j_{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,c]=new Uint8Array(o,0,2);if(219!==a)throw new Error("Data does not appear to be in a KDBush format.");const h=c>>4;if(1!==h)throw new Error(`Got v${h} data when expected v1.`);const g=Dv[15&c];if(!g)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(o,2,1),[x]=new Uint32Array(o,4,1);return new j_(x,y,g,o)}constructor(o,a=64,c=Float64Array,h){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=c,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const g=Dv.indexOf(this.ArrayType),y=2*o*this.ArrayType.BYTES_PER_ELEMENT,x=o*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${c}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+x+C,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+C),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+x+C,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=o)}add(o,a){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=o,this.coords[this._pos++]=a,c}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return mg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,a,c,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:x}=this,C=[0,g.length-1,0],O=[];for(;C.length;){const E=C.pop()||0,A=C.pop()||0,k=C.pop()||0;if(A-k<=x){for(let q=k;q<=A;q++){const ee=y[2*q],le=y[2*q+1];ee>=o&&ee<=c&&le>=a&&le<=h&&O.push(g[q])}continue}const F=k+A>>1,L=y[2*F],V=y[2*F+1];L>=o&&L<=c&&V>=a&&V<=h&&O.push(g[F]),(0===E?o<=L:a<=V)&&(C.push(k),C.push(F-1),C.push(1-E)),(0===E?c>=L:h>=V)&&(C.push(F+1),C.push(A),C.push(1-E))}return O}within(o,a,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:g,nodeSize:y}=this,x=[0,h.length-1,0],C=[],O=c*c;for(;x.length;){const E=x.pop()||0,A=x.pop()||0,k=x.pop()||0;if(A-k<=y){for(let q=k;q<=A;q++)Pv(g[2*q],g[2*q+1],o,a)<=O&&C.push(h[q]);continue}const F=k+A>>1,L=g[2*F],V=g[2*F+1];Pv(L,V,o,a)<=O&&C.push(h[F]),(0===E?o-c<=L:a-c<=V)&&(x.push(k),x.push(F-1),x.push(1-E)),(0===E?o+c>=L:a+c>=V)&&(x.push(F+1),x.push(A),x.push(1-E))}return C}}function mg(r,o,a,c,h,g){if(h-c<=a)return;const y=c+h>>1;pi(r,o,y,c,h,g),mg(r,o,a,c,y-1,1-g),mg(r,o,a,y+1,h,1-g)}function pi(r,o,a,c,h,g){for(;h>c;){if(h-c>600){const O=h-c+1,E=a-c+1,A=Math.log(O),k=.5*Math.exp(2*A/3),F=.5*Math.sqrt(A*k*(O-k)/O)*(E-O/2<0?-1:1);pi(r,o,a,Math.max(c,Math.floor(a-E*k/O+F)),Math.min(h,Math.floor(a+(O-E)*k/O+F)),g)}const y=o[2*a+g];let x=c,C=h;for(Mp(r,o,c,a),o[2*h+g]>y&&Mp(r,o,c,h);x<C;){for(Mp(r,o,x,C),x++,C--;o[2*x+g]<y;)x++;for(;o[2*C+g]>y;)C--}o[2*c+g]===y?Mp(r,o,c,C):(C++,Mp(r,o,C,h)),C<=a&&(c=C+1),a<=C&&(h=C-1)}}function Mp(r,o,a,c){Op(r,a,c),Op(o,2*a,2*c),Op(o,2*a+1,2*c+1)}function Op(r,o,a){const c=r[o];r[o]=r[a],r[a]=c}function Pv(r,o,a,c){const h=r-a,g=o-c;return h*h+g*g}p.ARRAY_TYPE=Qo,p.AUTH_ERR_MSG=pe,p.Aabb=gr,p.Actor=class{constructor(r,o,a){this.target=r,this.parent=o,this.mapId=a,this.callbacks={},this.cancelCallbacks={},Wn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ms()?r:Xe,this.scheduler=new hb}send(r,o,a,c,h=!1,g){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=g,this.callbacks[y]=a);const x=Je(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:r,hasCallback:!!a,targetMapId:c,mustQueue:h,sourceMapId:this.mapId,data:Gt(o,x)},x),{cancel:()=>{a&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(r){const o=r.data,a=o.id;if(a&&(!o.targetMapId||this.mapId===o.targetMapId))if("<cancel>"===o.type){const c=this.cancelCallbacks[a];delete this.cancelCallbacks[a],c&&c.cancel()}else if(o.mustQueue||Ms()){const c=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,o),c&&c.metadata||{type:"message"})}else this.processTask(a,o)}processTask(r,o){if("<response>"===o.type){const a=this.callbacks[r];delete this.callbacks[r],a&&(o.error?a(Ui(o.error)):a(null,Ui(o.data)))}else{const a=Je(this.globalScope)?void 0:[],c=o.hasCallback?(g,y)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:g?Gt(g):null,data:Gt(y,a)},a)}:g=>{},h=Ui(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,h,c);else if(this.parent.getWorkerSource){const g=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,g[0],h.source)[g[1]](h,c)}else c(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},p.CanonicalTileID=t_,p.Color=di,p.ColorMode=Za,p.CullFaceMode=ys,p.DEMData=ch,p.DataConstantProperty=z,p.DedupedRequest=Ov,p.DepthMode=qu,p.EXTENT=Ut,p.Elevation=class{isDataAvailableAtPoint(r){const o=this._source();if(this.isUsingMockSource()||!o||r.y<0||r.y>1)return!1;const a=o.getSource().maxzoom,c=1<<a,h=Math.floor(r.x),g=Math.floor((r.x-h)*c),y=Math.floor(r.y*c),x=this.findDEMTileFor(new Mo(a,h,a,g,y));return!(!x||!x.dem)}getAtPointOrZero(r,o=0){return this.getAtPoint(r,o)||0}getAtPoint(r,o,a=!0){if(this.isUsingMockSource())return null;null==o&&(o=null);const c=this._source();if(!c||r.y<0||r.y>1)return o;const h=c.getSource().maxzoom,g=1<<h,y=Math.floor(r.x),x=r.x-y,C=new Mo(h,y,h,Math.floor(x*g),Math.floor(r.y*g)),O=this.findDEMTileFor(C);if(!O||!O.dem)return o;const E=O.dem,A=1<<O.tileID.canonical.z,k=(x*A-O.tileID.canonical.x)*E.dim,F=(r.y*A-O.tileID.canonical.y)*E.dim,L=Math.floor(k),V=Math.floor(F);return(a?this.exaggeration():1)*Sn(Sn(E.get(L,V),E.get(L,V+1),F-V),Sn(E.get(L+1,V),E.get(L+1,V+1),F-V),k-L)}getAtTileOffset(r,o,a){const c=1<<r.canonical.z;return this.getAtPointOrZero(new $d(r.wrap+(r.canonical.x+o/Ut)/c,(r.canonical.y+a/Ut)/c))}getAtTileOffsetFunc(r,o,a,c){return h=>{const g=this.getAtTileOffset(r,h.x,h.y),y=c.upVector(r.canonical,h.x,h.y);return Yr(y,y,g*c.upVectorScale(r.canonical,o,a).metersToTile),y}}getForTilePoints(r,o,a,c){if(this.isUsingMockSource())return!1;const h=wp.create(this,r,c);return!!h&&(o.forEach(g=>{g[2]=this.exaggeration()*h.getElevationAt(g[0],g[1],a)}),!0)}getMinMaxForTile(r){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(r);if(!o||!o.dem)return null;const a=o.dem.tree,c=o.tileID,h=1<<r.canonical.z-c.canonical.z;let g=r.canonical.x/h-c.canonical.x,y=r.canonical.y/h-c.canonical.y,x=0;for(let C=0;C<r.canonical.z-c.canonical.z&&!a.leaves[x];C++){g*=2,y*=2;const O=2*Math.floor(y)+Math.floor(g);x=a.childOffsets[x]+O,g%=1,y%=1}return{min:this.exaggeration()*a.minimums[x],max:this.exaggeration()*a.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,o,a){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},p.ErrorEvent=Sa,p.EvaluationParameters=S,p.Event=Bl,p.Evented=lu,p.FillExtrusionBucket=Fu,p.Frustum=hm,p.FrustumCorners=kf,p.GLOBE_RADIUS=Yl,p.GLOBE_SCALE_MATCH_LATITUDE=45,p.GLOBE_ZOOM_THRESHOLD_MAX=pm,p.GLOBE_ZOOM_THRESHOLD_MIN=dy,p.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();for(const r of this._gridSegments)r.withSkirts.destroy(),r.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const r of this._wireframeSegments)r.destroy()}}_fillGridMeshWithLods(r,o){const a=new ot,c=new It,h=[],g=r+1+2,y=o[0]+1,x=o[0]+1+(1+o.length),C=(O,E,A)=>{let k=O===g-1?O-2:0===O?O:O-1;return k+=A?24575:0,[k,E]};for(let O=0;O<g;++O)a.emplaceBack(...C(O,0,!0));for(let O=0;O<y;++O)for(let E=0;E<g;++E)a.emplaceBack(...C(E,O,(0===E||E===g-1)&&!0));for(let O=0;O<o.length;++O){const E=o[O];for(let A=0;A<g;++A)a.emplaceBack(...C(A,E,!0))}for(let O=0;O<o.length;++O){const E=c.length,A=o[O]+1+2,k=new It;for(let V=0;V<A-1;V++){const q=V===A-2,ee=q?g*(x-o.length+O-V):g;for(let le=0;le<g-1;le++){const Q=V*g+le;0===V||q||0===le||le===g-2?(k.emplaceBack(Q+1,Q,Q+ee),k.emplaceBack(Q+ee,Q+ee+1,Q+1)):(c.emplaceBack(Q+1,Q,Q+ee),c.emplaceBack(Q+ee,Q+ee+1,Q+1))}}const F=ho.simpleSegment(0,E,a.length,c.length-E);for(let V=0;V<k.uint16.length;V+=3)c.emplaceBack(k.uint16[V],k.uint16[V+1],k.uint16[V+2]);const L=ho.simpleSegment(0,E,a.length,c.length-E);h.push({withoutSkirts:F,withSkirts:L})}return{vertices:a,indices:c,segments:h}}_createGrid(r){const o=this._fillGridMeshWithLods(64,Eu);this._gridSegments=o.segments,this._gridBuffer=r.createVertexBuffer(o.vertices,Qh.members),this._gridIndexBuffer=r.createIndexBuffer(o.indices,!0)}_createPoles(r){const o=new It;for(let h=0;h<=64;h++)o.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=r.createIndexBuffer(o,!0);const a=new ni,c=new ni;this._poleSegments=[];for(let h=0,g=0;h<dy;h++){const y=360/(1<<h);a.emplaceBack(0,-Yl,0,.5,0),c.emplaceBack(0,-Yl,0,.5,1);for(let x=0;x<=64;x++){const C=x/64,O=Sn(0,y,C),[E,A,k]=Bo(_s,bm,O,Yl);a.emplaceBack(E,A,k,C,0),c.emplaceBack(E,A,k,C,1)}this._poleSegments.push(ho.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(a,cy,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(c,cy,!1)}getGridBuffers(r,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[r].withSkirts:this._gridSegments[r].withoutSkirts]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r,o){if(!this._wireframeSegments){const a=new no,c=64,h=c+1+2,g=1;this._wireframeSegments=[];for(let y=0,x=0;y<Eu.length;y++){const C=Eu[y];for(let E=g;E<C+g;E++)for(let A=g;A<c+g;A++){const k=E*h+A;a.emplaceBack(k,k+1),a.emplaceBack(k,k+h),a.emplaceBack(k,k+h+1)}const O=C*c*3;this._wireframeSegments.push(ho.simpleSegment(0,x,(C+1)*h,O)),x+=O}this._wireframeIndexBuffer=r.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},p.GlyphManager=Uu,p.ImagePosition=Ga,p.KDBush=j_,p.LivePerformanceUtils=bc,p.LngLat=$n,p.LngLatBounds=Ni,p.LocalGlyphMode=C_,p.MAX_MERCATOR_LATITUDE=Vo,p.MercatorCoordinate=$d,p.ONE_EM=Oo,p.OverscaledTileID=Mo,p.PerformanceMarkers=ki,p.Point=ft,p.Properties=ne,p.RGBAImage=mr,p.Ray=zd,p.RequestManager=class{constructor(r,o,a){this._transformRequestFn=r,this._customAccessToken=o,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const r=function(){let o="";for(let a=0;a<10;a++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",as,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,o){return this._transformRequestFn&&this._transformRequestFn(r,o)||{url:r}}normalizeStyleURL(r,o){if(!ve(r))return r;const a=gt(r);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||o)}normalizeGlyphsURL(r,o){if(!ve(r))return r;const a=gt(r);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||o)}normalizeSourceURL(r,o,a,c){if(!ve(r))return r;const h=gt(r);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),a&&h.params.push(`language=${a}`),c&&h.params.push(`worldview=${c}`),this._makeAPIURL(h,this._customAccessToken||o)}normalizeSpriteURL(r,o,a,c){const h=gt(r);return ve(r)?(h.path=`/styles/v1${h.path}/sprite${o}${a}`,this._makeAPIURL(h,this._customAccessToken||c)):(h.path+=`${o}${a}`,ct(h))}normalizeTileURL(r,o,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!ve(r))return r;const c=gt(r);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||a&&"raster"!==c.authority&&512===a?"@2x":""}${nn.supported?".webp":"$1"}`),"raster"===c.authority?c.path=`/${ln.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${ln.TILE_URL_VERSION}${c.path}`);const h=this._customAccessToken||function(g){for(const y of g){const x=y.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(c.params)||ln.ACCESS_TOKEN;return ln.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,h)}canonicalizeTileURL(r,o){const a=gt(r);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return r;let c="mapbox://";a.path.match(/^\/raster\/v1\//)?c+=`raster/${a.path.replace(`/${ln.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${a.path.replace(`/${ln.TILE_URL_VERSION}/`,"")}`;let h=a.params;return o&&(h=h.filter(g=>!g.match(/^access_token=/))),h.length&&(c+=`?${h.join("&")}`),c}canonicalizeTileset(r,o){const a=!!o&&ve(o),c=[];for(const h of r.tiles||[])Ee(h)?c.push(this.canonicalizeTileURL(h,a)):c.push(h);return c}_makeAPIURL(r,o){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",c=gt(ln.API_URL);if(r.protocol=c.protocol,r.authority=c.authority,"http"===r.protocol){const h=r.params.indexOf("secure");h>=0&&r.params.splice(h,1)}if("/"!==c.path&&(r.path=`${c.path}${r.path}`),!ln.REQUIRE_ACCESS_TOKEN)return ct(r);if(o=o||ln.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if("s"===o[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return r.params=r.params.filter(h=>-1===h.indexOf("access_token")),r.params.push(`access_token=${o||""}`),ct(r)}},p.ResourceType=lo,p.SegmentVector=ho,p.SourceCache=Cl,p.StencilMode=gg,p.StructArrayLayout1ui2=fs,p.StructArrayLayout2f1f2i16=jt,p.StructArrayLayout2i4=ot,p.StructArrayLayout2ui4=no,p.StructArrayLayout3f12=bn,p.StructArrayLayout3ui6=It,p.StructArrayLayout4i8=He,p.StructArrayLayout5f20=ni,p.Texture=lh,p.Tile=z_,p.Transitionable=B,p.Uniform1f=Df,p.Uniform1i=class extends gs{constructor(r){super(r),this.current=0}set(r,o,a){this.fetchUniformLocation(r,o)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},p.Uniform2f=class extends gs{constructor(r){super(r),this.current=[0,0]}set(r,o,a){this.fetchUniformLocation(r,o)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},p.Uniform3f=class extends gs{constructor(r){super(r),this.current=[0,0,0]}set(r,o,a){this.fetchUniformLocation(r,o)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},p.Uniform4f=io,p.UniformColor=Pf,p.UniformMatrix2f=class extends gs{constructor(r){super(r),this.current=Vc}set(r,o,a){if(this.fetchUniformLocation(r,o))for(let c=0;c<4;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}},p.UniformMatrix3f=class extends gs{constructor(r){super(r),this.current=ey}set(r,o,a){if(this.fetchUniformLocation(r,o))for(let c=0;c<9;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}},p.UniformMatrix4f=class extends gs{constructor(r){super(r),this.current=dx}set(r,o,a){if(this.fetchUniformLocation(r,o)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let c=1;c<16;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},p.UnwrappedTileID=Bx,p.ValidationError=Tt,p.VectorTileFeature=Jf,p.VectorTileWorkerSource=class extends lu{constructor(r,o,a,c,h){super(),this.actor=r,this.layerIndex=o,this.availableImages=a,this.loadVectorData=h||Tv,this.loading={},this.loaded={},this.deduped=new Ov(r.scheduler),this.isSpriteLoaded=c,this.scheduler=r.scheduler}loadTile(r,o){const a=r.uid,c=r&&r.request,h=c&&c.collectResourceTiming,g=this.loading[a]=new gb(r);g.abort=this.loadVectorData(r,(y,x)=>{const C=!this.loading[a];if(delete this.loading[a],C||y||!x)return g.status="done",C||(this.loaded[a]=g),o(y);const O=x.rawData,E={};x.expires&&(E.expires=x.expires),x.cacheControl&&(E.cacheControl=x.cacheControl),g.vectorTile=x.vectorTile||new Zf(new tg(O));const A=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(k,F)=>{if(k||!F)return o(k);const L={};if(h){const V=Dh(c);V.length>0&&(L.resourceTiming=JSON.parse(JSON.stringify(V)))}o(null,Bi({rawTileData:O.slice(0)},F,E,L))})};this.isSpriteLoaded?A():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(A,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):A()}),this.loaded=this.loaded||{},this.loaded[a]=g})}reloadTile(r,o){const a=this.loaded,c=r.uid,h=this;if(a&&a[c]){const g=a[c];g.showCollisionBoxes=r.showCollisionBoxes,g.enableTerrain=!!r.enableTerrain,g.projection=r.projection,g.tileTransform=ju(r.tileID.canonical,r.projection);const y=(x,C)=>{const O=g.reloadCallback;O&&(delete g.reloadCallback,g.parse(g.vectorTile,h.layerIndex,this.availableImages,h.actor,O)),o(x,C)};"parsing"===g.status?g.reloadCallback=y:"done"===g.status&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(r,o){const a=r.uid,c=this.loading[a];c&&(c.abort&&c.abort(),delete this.loading[a]),o()}removeTile(r,o){const a=this.loaded,c=r.uid;a&&a[c]&&delete a[c],o()}},p.WritingMode=js,p.ZoomDependentExpression=_d,p.add=Kl,p.addDynamicAttributes=vp,p.adjoint=function(r,o){var a=o[0],c=o[1],h=o[2],g=o[3],y=o[4],x=o[5],C=o[6],O=o[7],E=o[8];return r[0]=y*E-x*O,r[1]=h*O-c*E,r[2]=c*x-h*y,r[3]=x*C-g*E,r[4]=a*E-h*C,r[5]=h*g-a*x,r[6]=g*O-y*C,r[7]=c*C-a*O,r[8]=a*y-c*g,r},p.asyncAll=Yi,p.bezier=Ma,p.bindAll=Wn,p.boundsAttributes=Wa,p.bufferConvexPolygon=function(r,o){const a=[];for(let c=0;c<r.length;c++){const h=dn(c-1,-1,r.length-1),g=dn(c+1,-1,r.length-1),y=r[c],x=r[g],C=r[h].sub(y).unit(),O=x.sub(y).unit(),E=O.angleWithSep(C.x,C.y),A=C.add(O).unit().mult(-1*o/Math.sin(E/2));a.push(y.add(A))}return a},p.cacheEntryPossiblyAdded=function(r){Wo++,Wo>Yn&&(r.getActor().send("enforceCacheSizeLimit",Ii),Wo=0)},p.calculateGlobeLabelMatrix=function(r,o){const{x:a,y:c}=r.point,h=fy(a,c,r.worldSize/r._pixelsPerMercatorPixel,0,0);return vl(h,h,ym(Ql(o)))},p.calculateGlobeMatrix=function(r){const{x:o,y:a}=r.point,{lng:c,lat:h}=r._center;return fy(o,a,r.worldSize,c,h)},p.calculateGlobeMercatorMatrix=function(r){const o=r.pixelsPerMeter,a=o/pa(1,r.center.lat),c=fr(new Float64Array(16));return Xl(c,c,[r.point.x,r.point.y,0]),Du(c,c,[a,a,o]),Float32Array.from(c)},p.circumferenceAtLatitude=Bf,p.clamp=_n,p.clearTileCache=function(r){if(!us())return;const o=Xe.caches.delete(kt);r&&o.catch(r).then(()=>r())},p.clipLine=w_,p.clone=function(r){var o=new Qo(16);return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},p.clone$1=Pr,p.collisionCircleLayout=ja,p.config=ln,p.conjugate=function(r,o){return r[0]=-o[0],r[1]=-o[1],r[2]=-o[2],r[3]=o[3],r},p.create=function(){var r=new Qo(16);return Qo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},p.create$1=ty,p.createExpression=xu,p.createLayout=Ce,p.createStyleLayer=function(r){return"custom"===r.type?new cb(r):new B_[r.type](r)},p.cross=Af,p.degToRad=cn,p.distance=function(r,o){return Math.hypot(o[0]-r[0],o[1]-r[1],o[2]-r[2])},p.div=function(r,o,a){return r[0]=o[0]/a[0],r[1]=o[1]/a[1],r[2]=o[2]/a[2],r},p.dot=Nr,p.earthRadius=jd,p.ease=ar,p.easeCubicInOut=Fl,p.ecefToLatLng=function([r,o,a]){const c=Math.hypot(r,o,a),h=Math.atan2(r,a),g=.5*Math.PI-Math.acos(-o/c);return new $n(ao(h),ao(g))},p.emitValidationErrors=Cf,p.endsWith=Ta,p.enforceCacheSizeLimit=function(r){Ur(),wn&&wn.then(o=>{o.keys().then(a=>{for(let c=0;c<a.length-r;c++)o.delete(a[c])})})},p.evaluateSizeForFeature=Qf,p.evaluateSizeForZoom=Bu,p.evaluateVariableOffset=ib,p.evented=v,p.exactEquals=function(r,o){return r[0]===o[0]&&r[1]===o[1]&&r[2]===o[2]&&r[3]===o[3]},p.exactEquals$1=function(r,o){return r[0]===o[0]&&r[1]===o[1]&&r[2]===o[2]},p.exported=Ea,p.exported$1=nn,p.extend=Bi,p.extend$1=ea,p.fillExtrusionHeightLift=Ry,p.filterObject=Da,p.fromMat4=function(r,o){return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[4],r[4]=o[5],r[5]=o[6],r[6]=o[8],r[7]=o[9],r[8]=o[10],r},p.fromQuat=function(r,o){var a=o[0],c=o[1],h=o[2],g=o[3],y=a+a,x=c+c,C=h+h,O=a*y,E=c*y,A=c*x,k=h*y,F=h*x,L=h*C,V=g*y,q=g*x,ee=g*C;return r[0]=1-A-L,r[1]=E+ee,r[2]=k-q,r[3]=0,r[4]=E-ee,r[5]=1-O-L,r[6]=F+V,r[7]=0,r[8]=k+q,r[9]=F-V,r[10]=1-O-A,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},p.fromRotation=function(r,o){var a=Math.sin(o),c=Math.cos(o);return r[0]=c,r[1]=a,r[2]=0,r[3]=-a,r[4]=c,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},p.fromScaling=fx,p.furthestTileCorner=function(r){const o=Math.round((r+45+360)%360/90)%4;return Nl[o]},p.getAABBPointSquareDist=function(r,o,a){let c=0;for(let h=0;h<2;++h){const g=a?a[h]:0;r[h]>g&&(c+=(r[h]-g)*(r[h]-g)),o[h]<g&&(c+=(g-o[h])*(g-o[h]))}return c},p.getAnchorAlignment=v_,p.getAnchorJustification=Jc,p.getBounds=function(r){let o=1/0,a=1/0,c=-1/0,h=-1/0;for(const g of r)o=Math.min(o,g.x),a=Math.min(a,g.y),c=Math.max(c,g.x),h=Math.max(h,g.y);return{min:new ft(o,a),max:new ft(c,h)}},p.getColumn=Mt,p.getDefaultExportFromCjs=rr,p.getGridMatrix=function(r,o,a,c){const h=o.getNorth(),g=o.getSouth(),y=o.getWest(),x=o.getEast(),C=1<<r.z,O=x-y,E=h-g,A=O/64,k=-E/Eu[a],F=[0,A,0,k,0,0,h,y,0];if(r.z>0){const L=180/c;zs(F,F,[L/O+1,0,0,0,L/E+1,0,-.5*L/A,.5*L/k,1])}return F[2]=C,F[5]=r.x,F[8]=r.y,F},p.getImage=se,p.getJSON=function(r,o){return $r(Bi(r,{type:"json"}),o)},p.getLatitudinalLod=function(r){const o=Vo-5;r=_n(r,-o,o)/o*90;const a=Math.pow(Math.abs(Math.sin(cn(r))),3);return Math.round(a*(Eu.length-1))},p.getMapSessionAPI=Ti,p.getPerformanceMeasurement=Dh,p.getProjection=yp,p.getRTLTextPluginStatus=w,p.getReferrer=wi,p.getTilePoint=function(r,{x:o,y:a},c=0){return new ft(((o-c)*r.scale-r.x)*Ut,(a*r.scale-r.y)*Ut)},p.getTileVec3=function(r,o,a=0){return Fd(((o.x-a)*r.scale-r.x)*Ut,(o.y*r.scale-r.y)*Ut,my(o.z,o.y))},p.getVideo=function(r,o){const a=Xe.document.createElement("video");a.muted=!0,a.onloadstart=function(){o(null,a)};for(let c=0;c<r.length;c++){const h=Xe.document.createElement("source");xc(r[c])||(a.crossOrigin="Anonymous"),h.src=r[c],a.appendChild(h)}return{cancel:()=>{}}},p.globeCenterToScreenPoint=function(r){const o=[0,0,0],a=fr(new Float64Array(16));return vl(a,r.pixelMatrix,r.globeMatrix),Di(o,o,a),new ft(o[0],o[1])},p.globeDenormalizeECEF=ym,p.globeECEFOrigin=function(r,o){const a=[0,0,0];return Di(a,a,Au(Ql(o.canonical))),Di(a,a,r),a},p.globeMetersToEcef=gm,p.globeNormalizeECEF=Au,p.globePixelsToTileUnits=function(r,o){return Ut/(512*Math.pow(2,r))*Ff(Ql(o))},p.globePoleMatrixForTile=function(r,o,a){const c=fr(new Float64Array(16)),h=(o/(1<<r)-.5)*Math.PI*2;return Sf(c,a.globeMatrix,h),Float32Array.from(c)},p.globeTileBounds=Ql,p.globeTiltAtLngLat=vm,p.globeToMercatorTransition=Ud,p.globeUseCustomAntiAliasing=function(r,o,a){const c=Ud(a.zoom),h=r.style.map._antialias,g=!!o.extStandardDerivatives,y=o.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return 0===c&&!h&&!y&&g},p.identity=fr,p.identity$1=ly,p.invert=Ef,p.isFullscreen=function(){return!!Xe.document.fullscreenElement||!!Xe.document.webkitFullscreenElement},p.isLngLatBehindGlobe=xm,p.isMapAuthenticated=function(r){return lr.has(r)},p.isMapboxURL=ve,p.isSafariWithAntialiasingBug=function(r){const o=r.navigator?r.navigator.userAgent:null;return!!Je(r)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},p.latFromMercatorY=zo,p.latLngToECEF=Vd,p.len=ry,p.length=Nd,p.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},p.lngFromMercatorX=Vs,p.loadVectorTile=Tv,p.makeRequest=$r,p.mapValue=function(r,o,a,c,h){return _n((r-o)/(a-o)*(h-c)+c,c,h)},p.mercatorScale=_y,p.mercatorXfromLng=Va,p.mercatorYfromLat=xl,p.mercatorZfromAltitude=pa,p.mul=cm,p.mul$1=If,p.multiply=vl,p.multiply$1=zs,p.multiply$2=iy,p.nextPowerOfTwo=cs,p.normalize=er,p.normalize$1=_x,p.normalize$2=ay,p.number=Sn,p.ortho=function(r,o,a,c,h,g,y){var x=1/(o-a),C=1/(c-h),O=1/(g-y);return r[0]=-2*x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*C,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*O,r[11]=0,r[12]=(o+a)*x,r[13]=(h+c)*C,r[14]=(y+g)*O,r[15]=1,r},p.pbf=By,p.perspective=function(r,o,a,c,h){var g,y=1/Math.tan(o/2);return r[0]=y/a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=y,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=h&&h!==1/0?(r[10]=(h+c)*(g=1/(c-h)),r[14]=2*h*c*g):(r[10]=-1,r[14]=-2*c),r},p.pick=function(r,o){const a={};for(let c=0;c<o.length;c++){const h=o[c];h in r&&(a[h]=r[h])}return a},p.plugin=D,p.pointGeometry=ls,p.polesInViewport=function(r){const o=fr(new Float64Array(16));vl(o,r.pixelMatrix,r.globeMatrix);const a=[0,Ba,0],c=[0,za,0];return Di(a,a,o),Di(c,c,o),[a[0]>0&&a[0]<=r.width&&a[1]>0&&a[1]<=r.height&&!xm(r,new $n(r.center.lat,90)),c[0]>0&&c[0]<=r.width&&c[1]>0&&c[1]<=r.height&&!xm(r,new $n(r.center.lat,-90))]},p.polygonContainsPoint=tc,p.polygonIntersectsBox=Em,p.polygonIntersectsPolygon=vy,p.polygonizeBounds=function(r,o,a=0,c=!0){const h=new ft(a,a),g=r.sub(h),y=o.add(h),x=[g,new ft(y.x,g.y),y,new ft(g.x,y.y)];return c&&x.push(g.clone()),x},p.posAttributes=Qh,p.postMapLoadEvent=Qi,p.postPerformanceEvent=co,p.postTurnstileEvent=Tn,p.potpack=__,p.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},p.radToDeg=ao,p.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],p.registerForPluginStateChange=function(r){return r({pluginStatus:f,pluginURL:l}),v.on("pluginStateChange",r),r},p.removeAuthState=function(r){lr.delete(r)},p.renderColorRamp=Gf,p.resample=zf,p.rotateX=ny,p.rotateX$1=mx,p.rotateY=Sf,p.rotateY$1=dm,p.rotateZ=function(r,o,a){var c=Math.sin(a),h=Math.cos(a),g=o[0],y=o[1],x=o[2],C=o[3],O=o[4],E=o[5],A=o[6],k=o[7];return o!==r&&(r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15]),r[0]=g*h+O*c,r[1]=y*h+E*c,r[2]=x*h+A*c,r[3]=C*h+k*c,r[4]=O*h-g*c,r[5]=E*h-y*c,r[6]=A*h-x*c,r[7]=k*h-C*c,r},p.rotateZ$1=function(r,o,a){a*=.5;var c=o[0],h=o[1],g=o[2],y=o[3],x=Math.sin(a),C=Math.cos(a);return r[0]=c*C+h*x,r[1]=h*C-c*x,r[2]=g*C+y*x,r[3]=y*C-g*x,r},p.scale=Du,p.scale$1=sy,p.scale$2=Yr,p.scaleAndAdd=$c,p.set=function(r,o,a,c){return r[0]=o,r[1]=a,r[2]=c,r},p.setCacheLimits=function(r,o){Ii=r,Yn=o},p.setColumn=function(r,o,a){r[4*o+0]=a[0],r[4*o+1]=a[1],r[4*o+2]=a[2],r[4*o+3]=a[3]},p.setRTLTextPlugin=function(r,o,a=!1){if(f===Fs||f===Ed||f===fl)throw new Error("setRTLTextPlugin cannot be called multiple times.");l=Ea.resolveURL(r),f=Fs,Rr=o,_(),a||T()},p.smoothstep=Oa,p.spec=$e,p.squaredLength=function(r){var o=r[0],a=r[1],c=r[2];return o*o+a*a+c*c},p.storeAuthState=function(r,o){o?lr.add(r):lr.delete(r)},p.sub=Qr,p.subtract=um,p.symbolSize=Yd,p.tileAABB=function(r,o,a,c,h,g,y,x,C){if("globe"===C.name)return function py(r,o,a){const c=o/r.worldSize,h=r.globeMatrix;if(a.z<=1){const Pe=Ql(a).getCorners();return Rf(Pe,h,c),gr.fromPoints(Pe)}const g=ep(a),y=Nf(g);Rf(y,h,c);const x=Number.MAX_VALUE,C=[-x,-x,-x],O=[x,x,x];if(g.contains(r.center)){for(const nt of y)Kh(O,O,nt),Yh(C,C,nt);C[2]=0;const Pe=r.point,je=[Pe.x*c,Pe.y*c,0];return Kh(O,O,je),Yh(C,C,je),new gr(O,C)}const E=[h[12]*c,h[13]*c,h[14]*c],A=g.getCenter(),k=_n(r.center.lat,-Vo,Vo),F=_n(A.lat,-Vo,Vo),L=Va(r.center.lng),V=xl(k);let q=L-Va(A.lng);const ee=V-xl(F);q>.5?q-=1:q<-.5&&(q+=1);let le=0;Math.abs(q)>Math.abs(ee)?le=q>=0?1:3:(le=ee>=0?0:2,$c(E,E,[h[4]*c,h[5]*c,h[6]*c],-Math.sin(cn(ee>=0?g.getSouth():g.getNorth()))*Yl));const Q=y[le],ae=y[(le+1)%4],he=new fM(Q,ae,E),ue=[hy(he,0)||Q[0],hy(he,1)||Q[1],hy(he,2)||Q[2]],we=Ud(r.zoom);if(we>0){const Pe=function({x:nt,y:Fe,z:qe},Ze,et,at,Ue){const _t=1/(1<<qe);let Pt=nt*_t,xt=Pt+_t,Yt=Fe*_t,dt=Yt+_t,Bt=0;const Qt=(Pt+xt)/2-at;return Qt>.5?Bt=-1:Qt<-.5&&(Bt=1),Pt=((Pt+Bt)*Ze-(at*=Ze))*et+at,xt=((xt+Bt)*Ze-at)*et+at,Yt=(Yt*Ze-(Ue*=Ze))*et+Ue,dt=(dt*Ze-Ue)*et+Ue,[[Pt,dt,0],[xt,dt,0],[xt,Yt,0],[Pt,Yt,0]]}(a,o,r._pixelsPerMercatorPixel,L,V);for(let nt=0;nt<y.length;nt++)Su(y[nt],Pe[nt],we);const je=Kl([],Pe[le],Pe[(le+1)%4]);Yr(je,je,.5),Su(ue,je,we)}for(const Pe of y)Kh(O,O,Pe),Yh(C,C,Pe);return O[2]=Math.min(Q[2],ae[2]),Kh(O,O,ue),Yh(C,C,ue),new gr(O,C)}(r,o,new t_(a,c,h));const O=ju({z:a,x:c,y:h},C);return new gr([(g+O.x/O.scale)*o,o*(O.y/O.scale),y],[(g+O.x2/O.scale)*o,o*(O.y2/O.scale),x])},p.tileCornersToBounds=ep,p.tileTransform=ju,p.transformMat3=function(r,o,a){var c=o[0],h=o[1],g=o[2];return r[0]=c*a[0]+h*a[3]+g*a[6],r[1]=c*a[1]+h*a[4]+g*a[7],r[2]=c*a[2]+h*a[5]+g*a[8],r},p.transformMat4=Di,p.transformMat4$1=ha,p.transformQuat=oy,p.transitionTileAABBinECEF=mm,p.translate=Xl,p.transpose=function(r,o){if(r===o){var a=o[1],c=o[2],h=o[5];r[1]=o[3],r[2]=o[6],r[3]=a,r[5]=o[7],r[6]=c,r[7]=h}else r[0]=o[0],r[1]=o[3],r[2]=o[6],r[3]=o[1],r[4]=o[4],r[5]=o[7],r[6]=o[2],r[7]=o[5],r[8]=o[8];return r},p.triggerPluginCompletionEvent=d,p.uniqueId=Hn,p.updateGlobeVertexNormal=function(r,o,a,c,h){const g=5*o+2;r.float32[g+0]=a,r.float32[g+1]=c,r.float32[g+2]=h},p.validateCustomStyleLayer=function(r){const o=[],a=r.id;return void 0===a&&o.push({message:`layers.${a}: missing required property "id"`}),void 0===r.render&&o.push({message:`layers.${a}: missing required method "render"`}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&o.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),o},p.validateFilter=r=>ks(Ko(r)),p.validateFog=r=>ks(Cu(r)),p.validateLayer=r=>ks(wu(r)),p.validateLight=r=>ks(hr(r)),p.validateSource=r=>ks(qh(r)),p.validateStyle=Td,p.validateTerrain=r=>ks(Zh(r)),p.values=ws,p.vectorTile=fa,p.version=xs,p.warnOnce=bi,p.window=Xe,p.wrap=dn}),Xs(0,function(p){function Xe(ce){if("number"==typeof ce||"boolean"==typeof ce||"string"==typeof ce||null==ce)return JSON.stringify(ce);if(Array.isArray(ce)){let $="[";for(const se of ce)$+=`${Xe(se)},`;return`${$}]`}let j="{";for(const $ of Object.keys(ce).sort())j+=`${$}:${Xe(ce[$])},`;return`${j}}`}function xs(ce){let j="";for(const $ of p.refProperties)j+=`/${Xe(ce[$])}`;return j}class Tr{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,$){for(const pe of j)this._layerConfigs[pe.id]=pe,(this._layers[pe.id]=p.createStyleLayer(pe)).compileFilter(),this.keyCache[pe.id]&&delete this.keyCache[pe.id];for(const pe of $)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const se=function(pe,ve){const Ee={};for(let xe=0;xe<pe.length;xe++){const Be=ve&&ve[pe[xe].id]||xs(pe[xe]);ve&&(ve[pe[xe].id]=Be);let pt=Ee[Be];pt||(pt=Ee[Be]=[]),pt.push(pe[xe])}const De=[];for(const xe in Ee)De.push(Ee[xe]);return De}(p.values(this._layerConfigs),this.keyCache);for(const pe of se){const ve=pe.map(gt=>this._layers[gt.id]),Ee=ve[0];if("none"===Ee.visibility)continue;const De=Ee.source||"";let xe=this.familiesBySource[De];xe||(xe=this.familiesBySource[De]={});const Be=Ee.sourceLayer||"_geojsonTileLayer";let pt=xe[Be];pt||(pt=xe[Be]=[]),pt.push(ve)}}}class ln{loadTile(j,$){const{uid:se,encoding:pe,rawImageData:ve,padding:Ee,buildQuadTree:De}=j,xe=p.window.ImageBitmap&&ve instanceof p.window.ImageBitmap?this.getImageData(ve,Ee):ve;$(null,new p.DEMData(se,xe,pe,Ee<1,De))}getImageData(j,$){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const se=this.offscreenCanvasContext.getImageData(-$,-$,j.width+2*$,j.height+2*$);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),se}}function nn(ce,j){if(0!==ce.length){Ki(ce[0],j);for(var $=1;$<ce.length;$++)Ki(ce[$],!j)}}function Ki(ce,j){for(var $=0,se=0,pe=0,ve=ce.length,Ee=ve-1;pe<ve;Ee=pe++){var De=(ce[pe][0]-ce[Ee][0])*(ce[Ee][1]+ce[pe][1]),xe=$+De;se+=Math.abs($)>=Math.abs(De)?$-xe+De:De-xe+$,$=xe}$+se>=0!=!!j&&ce.reverse()}var Io=p.getDefaultExportFromCjs(function ce(j,$){var se,pe=j&&j.type;if("FeatureCollection"===pe)for(se=0;se<j.features.length;se++)ce(j.features[se],$);else if("GeometryCollection"===pe)for(se=0;se<j.geometries.length;se++)ce(j.geometries[se],$);else if("Feature"===pe)ce(j.geometry,$);else if("Polygon"===pe)nn(j.coordinates,$);else if("MultiPolygon"===pe)for(se=0;se<j.coordinates.length;se++)nn(j.coordinates[se],$);return j});const Go=p.VectorTileFeature.prototype.toGeoJSON;var bs={exports:{}},Rl=p.pointGeometry,as=p.vectorTile.VectorTileFeature,rr=sr;function sr(ce,j){this.options=j||{},this.features=ce,this.length=ce.length}function ko(ce,j){this.id="number"==typeof ce.id?ce.id:void 0,this.type=ce.type,this.rawGeometry=1===ce.type?[ce.geometry]:ce.geometry,this.properties=ce.tags,this.extent=j||4096}sr.prototype.feature=function(ce){return new ko(this.features[ce],this.options.extent)},ko.prototype.loadGeometry=function(){var ce=this.rawGeometry;this.geometry=[];for(var j=0;j<ce.length;j++){for(var $=ce[j],se=[],pe=0;pe<$.length;pe++)se.push(new Rl($[pe][0],$[pe][1]));this.geometry.push(se)}return this.geometry},ko.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ce=this.geometry,j=1/0,$=-1/0,se=1/0,pe=-1/0,ve=0;ve<ce.length;ve++)for(var Ee=ce[ve],De=0;De<Ee.length;De++){var xe=Ee[De];j=Math.min(j,xe.x),$=Math.max($,xe.x),se=Math.min(se,xe.y),pe=Math.max(pe,xe.y)}return[j,se,$,pe]},ko.prototype.toGeoJSON=as.prototype.toGeoJSON;var Ks=p.pbf,ls=rr;function Dr(ce){var j=new Ks;return function($,se){for(var pe in $.layers)se.writeMessage(3,ft,$.layers[pe])}(ce,j),j.finish()}function ft(ce,j){var $;j.writeVarintField(15,ce.version||1),j.writeStringField(1,ce.name||""),j.writeVarintField(5,ce.extent||4096);var se={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<ce.length;$++)se.feature=ce.feature($),j.writeMessage(2,yc,se);var pe=se.keys;for($=0;$<pe.length;$++)j.writeStringField(3,pe[$]);var ve=se.values;for($=0;$<ve.length;$++)j.writeMessage(4,Fl,ve[$])}function yc(ce,j){var $=ce.feature;void 0!==$.id&&j.writeVarintField(1,$.id),j.writeMessage(2,Ca,ce),j.writeVarintField(3,$.type),j.writeMessage(4,Nl,$)}function Ca(ce,j){var $=ce.feature,se=ce.keys,pe=ce.values,ve=ce.keycache,Ee=ce.valuecache;for(var De in $.properties){var xe=$.properties[De],Be=ve[De];if(null!==xe){void 0===Be&&(se.push(De),ve[De]=Be=se.length-1),j.writeVarint(Be);var pt=typeof xe;"string"!==pt&&"boolean"!==pt&&"number"!==pt&&(xe=JSON.stringify(xe));var gt=pt+":"+xe,ct=Ee[gt];void 0===ct&&(pe.push(xe),Ee[gt]=ct=pe.length-1),j.writeVarint(ct)}}}function cn(ce,j){return(j<<3)+(7&ce)}function ao(ce){return ce<<1^ce>>31}function Nl(ce,j){for(var $=ce.loadGeometry(),se=ce.type,pe=0,ve=0,Ee=$.length,De=0;De<Ee;De++){var xe=$[De],Be=1;1===se&&(Be=xe.length),j.writeVarint(cn(1,Be));for(var pt=3===se?xe.length-1:xe.length,gt=0;gt<pt;gt++){1===gt&&1!==se&&j.writeVarint(cn(2,pt-1));var ct=xe[gt].x-pe,on=xe[gt].y-ve;j.writeVarint(ao(ct)),j.writeVarint(ao(on)),pe+=ct,ve+=on}3===se&&j.writeVarint(cn(7,1))}}function Fl(ce,j){var $=typeof ce;"string"===$?j.writeStringField(1,ce):"boolean"===$?j.writeBooleanField(7,ce):"number"===$&&(ce%1!=0?j.writeDoubleField(3,ce):ce<0?j.writeSVarintField(6,ce):j.writeVarintField(5,ce))}bs.exports=Dr,bs.exports.fromVectorTileJs=Dr,bs.exports.fromGeojsonVt=function(ce,j){j=j||{};var $={};for(var se in ce)$[se]=new ls(ce[se].features,j),$[se].name=se,$[se].version=j.version,$[se].extent=j.extent;return Dr({layers:$})},bs.exports.GeoJSONWrapper=ls;var Ma=p.getDefaultExportFromCjs(bs.exports);const ar={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ce=>ce},_n=Math.fround||(Oa=new Float32Array(1),ce=>(Oa[0]=+ce,Oa[0]));var Oa;const dn=3,Yi=5,ws=6;class Bi{constructor(j){this.options=Object.assign(Object.create(ar),j),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(j){const{log:$,minZoom:se,maxZoom:pe}=this.options;$&&console.time("total time");const ve=`prepare ${j.length} points`;$&&console.time(ve),this.points=j;const Ee=[];for(let xe=0;xe<j.length;xe++){const Be=j[xe];if(!Be.geometry)continue;const[pt,gt]=Be.geometry.coordinates,ct=_n(Ys(pt)),on=_n(cs(gt));Ee.push(ct,on,1/0,xe,-1,1),this.options.reduce&&Ee.push(0)}let De=this.trees[pe+1]=this._createTree(Ee);$&&console.timeEnd(ve);for(let xe=pe;xe>=se;xe--){const Be=+Date.now();De=this.trees[xe]=this._createTree(this._cluster(De,xe)),$&&console.log("z%d: %d clusters in %dms",xe,De.numItems,+Date.now()-Be)}return $&&console.timeEnd("total time"),this}getClusters(j,$){let se=((j[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,j[1]));let ve=180===j[2]?180:((j[2]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)se=-180,ve=180;else if(se>ve){const gt=this.getClusters([se,pe,180,Ee],$),ct=this.getClusters([-180,pe,ve,Ee],$);return gt.concat(ct)}const De=this.trees[this._limitZoom($)],xe=De.range(Ys(se),cs(Ee),Ys(ve),cs(pe)),Be=De.data,pt=[];for(const gt of xe){const ct=this.stride*gt;pt.push(Be[ct+Yi]>1?Cs(Be,ct,this.clusterProps):this.points[Be[ct+dn]])}return pt}getChildren(j){const $=this._getOriginId(j),se=this._getOriginZoom(j),pe="No cluster with the specified id.",ve=this.trees[se];if(!ve)throw new Error(pe);const Ee=ve.data;if($*this.stride>=Ee.length)throw new Error(pe);const De=this.options.radius/(this.options.extent*Math.pow(2,se-1)),xe=ve.within(Ee[$*this.stride],Ee[$*this.stride+1],De),Be=[];for(const pt of xe){const gt=pt*this.stride;Ee[gt+4]===j&&Be.push(Ee[gt+Yi]>1?Cs(Ee,gt,this.clusterProps):this.points[Ee[gt+dn]])}if(0===Be.length)throw new Error(pe);return Be}getLeaves(j,$,se){const pe=[];return this._appendLeaves(pe,j,$=$||10,se=se||0,0),pe}getTile(j,$,se){const pe=this.trees[this._limitZoom(j)],ve=Math.pow(2,j),{extent:Ee,radius:De}=this.options,xe=De/Ee,Be=(se-xe)/ve,pt=(se+1+xe)/ve,gt={features:[]};return this._addTileFeatures(pe.range(($-xe)/ve,Be,($+1+xe)/ve,pt),pe.data,$,se,ve,gt),0===$&&this._addTileFeatures(pe.range(1-xe/ve,Be,1,pt),pe.data,ve,se,ve,gt),$===ve-1&&this._addTileFeatures(pe.range(0,Be,xe/ve,pt),pe.data,-1,se,ve,gt),gt.features.length?gt:null}getClusterExpansionZoom(j){let $=this._getOriginZoom(j)-1;for(;$<=this.options.maxZoom;){const se=this.getChildren(j);if($++,1!==se.length)break;j=se[0].properties.cluster_id}return $}_appendLeaves(j,$,se,pe,ve){const Ee=this.getChildren($);for(const De of Ee){const xe=De.properties;if(xe&&xe.cluster?ve+xe.point_count<=pe?ve+=xe.point_count:ve=this._appendLeaves(j,xe.cluster_id,se,pe,ve):ve<pe?ve++:j.push(De),j.length===se)break}return ve}_createTree(j){const $=new p.KDBush(j.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<j.length;se+=this.stride)$.add(j[se],j[se+1]);return $.finish(),$.data=j,$}_addTileFeatures(j,$,se,pe,ve,Ee){for(const De of j){const xe=De*this.stride,Be=$[xe+Yi]>1;let pt,gt,ct;if(Be)pt=Hn($,xe,this.clusterProps),gt=$[xe],ct=$[xe+1];else{const Ft=this.points[$[xe+dn]];pt=Ft.properties;const[yn,Tn]=Ft.geometry.coordinates;gt=Ys(yn),ct=cs(Tn)}const on={type:1,geometry:[[Math.round(this.options.extent*(gt*ve-se)),Math.round(this.options.extent*(ct*ve-pe))]],tags:pt};let hn;hn=Be||this.options.generateId?$[xe+dn]:this.points[$[xe+dn]].id,void 0!==hn&&(on.id=hn),Ee.features.push(on)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,$){const{radius:se,extent:pe,reduce:ve,minPoints:Ee}=this.options,De=se/(pe*Math.pow(2,$)),xe=j.data,Be=[],pt=this.stride;for(let gt=0;gt<xe.length;gt+=pt){if(xe[gt+2]<=$)continue;xe[gt+2]=$;const ct=xe[gt],on=xe[gt+1],hn=j.within(xe[gt],xe[gt+1],De),Ft=xe[gt+Yi];let yn=Ft;for(const Tn of hn){const Ei=Tn*pt;xe[Ei+2]>$&&(yn+=xe[Ei+Yi])}if(yn>Ft&&yn>=Ee){let Tn,Ei=ct*Ft,Qi=on*Ft,Ro=-1;const co=((gt/pt|0)<<5)+($+1)+this.points.length;for(const Qs of hn){const Ti=Qs*pt;if(xe[Ti+2]<=$)continue;xe[Ti+2]=$;const lr=xe[Ti+Yi];Ei+=xe[Ti]*lr,Qi+=xe[Ti+1]*lr,xe[Ti+4]=co,ve&&(Tn||(Tn=this._map(xe,gt,!0),Ro=this.clusterProps.length,this.clusterProps.push(Tn)),ve(Tn,this._map(xe,Ti)))}xe[gt+4]=co,Be.push(Ei/yn,Qi/yn,1/0,co,-1,yn),ve&&Be.push(Ro)}else{for(let Tn=0;Tn<pt;Tn++)Be.push(xe[gt+Tn]);if(yn>1)for(const Tn of hn){const Ei=Tn*pt;if(!(xe[Ei+2]<=$)){xe[Ei+2]=$;for(let Qi=0;Qi<pt;Qi++)Be.push(xe[Ei+Qi])}}}}return Be}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,$,se){if(j[$+Yi]>1){const Ee=this.clusterProps[j[$+ws]];return se?Object.assign({},Ee):Ee}const pe=this.points[j[$+dn]].properties,ve=this.options.map(pe);return se&&ve===pe?Object.assign({},ve):ve}}function Cs(ce,j,$){return{type:"Feature",id:ce[j+dn],properties:Hn(ce,j,$),geometry:{type:"Point",coordinates:[(se=ce[j],360*(se-.5)),xi(ce[j+1])]}};var se}function Hn(ce,j,$){const se=ce[j+Yi],pe=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,ve=ce[j+ws],Ee=-1===ve?{}:Object.assign({},$[ve]);return Object.assign(Ee,{cluster:!0,cluster_id:ce[j+dn],point_count:se,point_count_abbreviated:pe})}function Ys(ce){return ce/360+.5}function cs(ce){const j=Math.sin(ce*Math.PI/180),$=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return $<0?0:$>1?1:$}function xi(ce){const j=(180-360*ce)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function Wn(ce,j,$,se){for(var pe,ve=se,Ee=$-j>>1,De=$-j,xe=ce[j],Be=ce[j+1],pt=ce[$],gt=ce[$+1],ct=j+3;ct<$;ct+=3){var on=Ta(ce[ct],ce[ct+1],xe,Be,pt,gt);if(on>ve)pe=ct,ve=on;else if(on===ve){var hn=Math.abs(ct-Ee);hn<De&&(pe=ct,De=hn)}}ve>se&&(pe-j>3&&Wn(ce,j,pe,se),ce[pe+2]=ve,$-pe>3&&Wn(ce,pe,$,se))}function Ta(ce,j,$,se,pe,ve){var Ee=pe-$,De=ve-se;if(0!==Ee||0!==De){var xe=((ce-$)*Ee+(j-se)*De)/(Ee*Ee+De*De);xe>1?($=pe,se=ve):xe>0&&($+=Ee*xe,se+=De*xe)}return(Ee=ce-$)*Ee+(De=j-se)*De}function Ct(ce,j,$,se){var pe={id:void 0===ce?null:ce,type:j,geometry:$,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ve){var Ee=ve.geometry,De=ve.type;if("Point"===De||"MultiPoint"===De||"LineString"===De)Da(ve,Ee);else if("Polygon"===De||"MultiLineString"===De)for(var xe=0;xe<Ee.length;xe++)Da(ve,Ee[xe]);else if("MultiPolygon"===De)for(xe=0;xe<Ee.length;xe++)for(var Be=0;Be<Ee[xe].length;Be++)Da(ve,Ee[xe][Be])}(pe),pe}function Da(ce,j){for(var $=0;$<j.length;$+=3)ce.minX=Math.min(ce.minX,j[$]),ce.minY=Math.min(ce.minY,j[$+1]),ce.maxX=Math.max(ce.maxX,j[$]),ce.maxY=Math.max(ce.maxY,j[$+1])}function Pr(ce,j,$,se){if(j.geometry){var pe=j.geometry.coordinates,ve=j.geometry.type,Ee=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2),De=[],xe=j.id;if($.promoteId?xe=j.properties[$.promoteId]:$.generateId&&(xe=se||0),"Point"===ve)Pa(pe,De);else if("MultiPoint"===ve)for(var Be=0;Be<pe.length;Be++)Pa(pe[Be],De);else if("LineString"===ve)bi(pe,De,Ee,!1);else if("MultiLineString"===ve){if($.lineMetrics){for(Be=0;Be<pe.length;Be++)bi(pe[Be],De=[],Ee,!1),ce.push(Ct(xe,"LineString",De,j.properties));return}Ho(pe,De,Ee,!1)}else if("Polygon"===ve)Ho(pe,De,Ee,!0);else{if("MultiPolygon"!==ve){if("GeometryCollection"===ve){for(Be=0;Be<j.geometry.geometries.length;Be++)Pr(ce,{id:xe,geometry:j.geometry.geometries[Be],properties:j.properties},$,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Be=0;Be<pe.length;Be++){var pt=[];Ho(pe[Be],pt,Ee,!0),De.push(pt)}}ce.push(Ct(xe,ve,De,j.properties))}}function Pa(ce,j){j.push(vc(ce[0])),j.push(Ms(ce[1])),j.push(0)}function bi(ce,j,$,se){for(var pe,ve,Ee=0,De=0;De<ce.length;De++){var xe=vc(ce[De][0]),Be=Ms(ce[De][1]);j.push(xe),j.push(Be),j.push(0),De>0&&(Ee+=se?(pe*Be-xe*ve)/2:Math.sqrt(Math.pow(xe-pe,2)+Math.pow(Be-ve,2))),pe=xe,ve=Be}var pt=j.length-3;j[2]=1,Wn(j,0,pt,$),j[pt+2]=1,j.size=Math.abs(Ee),j.start=0,j.end=j.size}function Ho(ce,j,$,se){for(var pe=0;pe<ce.length;pe++){var ve=[];bi(ce[pe],ve,$,se),j.push(ve)}}function vc(ce){return ce/360+.5}function Ms(ce){var j=Math.sin(ce*Math.PI/180),$=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return $<0?0:$>1?1:$}function Ne(ce,j,$,se,pe,ve,Ee,De){if(se/=j,ve>=($/=j)&&Ee<se)return ce;if(Ee<$||ve>=se)return null;for(var xe=[],Be=0;Be<ce.length;Be++){var pt=ce[Be],gt=pt.geometry,ct=pt.type,on=0===pe?pt.minX:pt.minY,hn=0===pe?pt.maxX:pt.maxY;if(on>=$&&hn<se)xe.push(pt);else if(!(hn<$||on>=se)){var Ft=[];if("Point"===ct||"MultiPoint"===ct)Ae(gt,Ft,$,se,pe);else if("LineString"===ct)Je(gt,Ft,$,se,pe,!1,De.lineMetrics);else if("MultiLineString"===ct)Mt(gt,Ft,$,se,pe,!1);else if("Polygon"===ct)Mt(gt,Ft,$,se,pe,!0);else if("MultiPolygon"===ct)for(var yn=0;yn<gt.length;yn++){var Tn=[];Mt(gt[yn],Tn,$,se,pe,!0),Tn.length&&Ft.push(Tn)}if(Ft.length){if(De.lineMetrics&&"LineString"===ct){for(yn=0;yn<Ft.length;yn++)xe.push(Ct(pt.id,ct,Ft[yn],pt.tags));continue}"LineString"!==ct&&"MultiLineString"!==ct||(1===Ft.length?(ct="LineString",Ft=Ft[0]):ct="MultiLineString"),"Point"!==ct&&"MultiPoint"!==ct||(ct=3===Ft.length?"Point":"MultiPoint"),xe.push(Ct(pt.id,ct,Ft,pt.tags))}}}return xe.length?xe:null}function Ae(ce,j,$,se,pe){for(var ve=0;ve<ce.length;ve+=3){var Ee=ce[ve+pe];Ee>=$&&Ee<=se&&(j.push(ce[ve]),j.push(ce[ve+1]),j.push(ce[ve+2]))}}function Je(ce,j,$,se,pe,ve,Ee){for(var De,xe,Be=lt(ce),pt=0===pe?Ii:Yn,gt=ce.start,ct=0;ct<ce.length-3;ct+=3){var on=ce[ct],hn=ce[ct+1],Ft=ce[ct+2],yn=ce[ct+3],Tn=ce[ct+4],Ei=0===pe?on:hn,Qi=0===pe?yn:Tn,Ro=!1;Ee&&(De=Math.sqrt(Math.pow(on-yn,2)+Math.pow(hn-Tn,2))),Ei<$?Qi>$&&(xe=pt(Be,on,hn,yn,Tn,$),Ee&&(Be.start=gt+De*xe)):Ei>se?Qi<se&&(xe=pt(Be,on,hn,yn,Tn,se),Ee&&(Be.start=gt+De*xe)):kt(Be,on,hn,Ft),Qi<$&&Ei>=$&&(xe=pt(Be,on,hn,yn,Tn,$),Ro=!0),Qi>se&&Ei<=se&&(xe=pt(Be,on,hn,yn,Tn,se),Ro=!0),!ve&&Ro&&(Ee&&(Be.end=gt+De*xe),j.push(Be),Be=lt(ce)),Ee&&(gt+=De)}var co=ce.length-3;on=ce[co],hn=ce[co+1],Ft=ce[co+2],(Ei=0===pe?on:hn)>=$&&Ei<=se&&kt(Be,on,hn,Ft),co=Be.length-3,ve&&co>=3&&(Be[co]!==Be[0]||Be[co+1]!==Be[1])&&kt(Be,Be[0],Be[1],Be[2]),Be.length&&j.push(Be)}function lt(ce){var j=[];return j.size=ce.size,j.start=ce.start,j.end=ce.end,j}function Mt(ce,j,$,se,pe,ve){for(var Ee=0;Ee<ce.length;Ee++)Je(ce[Ee],j,$,se,pe,ve,!1)}function kt(ce,j,$,se){ce.push(j),ce.push($),ce.push(se)}function Ii(ce,j,$,se,pe,ve){var Ee=(ve-j)/(se-j);return ce.push(ve),ce.push($+(pe-$)*Ee),ce.push(1),Ee}function Yn(ce,j,$,se,pe,ve){var Ee=(ve-$)/(pe-$);return ce.push(j+(se-j)*Ee),ce.push(ve),ce.push(1),Ee}function wn(ce,j){for(var $=[],se=0;se<ce.length;se++){var pe,ve=ce[se],Ee=ve.type;if("Point"===Ee||"MultiPoint"===Ee||"LineString"===Ee)pe=Oi(ve.geometry,j);else if("MultiLineString"===Ee||"Polygon"===Ee){pe=[];for(var De=0;De<ve.geometry.length;De++)pe.push(Oi(ve.geometry[De],j))}else if("MultiPolygon"===Ee)for(pe=[],De=0;De<ve.geometry.length;De++){for(var xe=[],Be=0;Be<ve.geometry[De].length;Be++)xe.push(Oi(ve.geometry[De][Be],j));pe.push(xe)}$.push(Ct(ve.id,Ee,pe,ve.tags))}return $}function Oi(ce,j){var $=[];$.size=ce.size,void 0!==ce.start&&($.start=ce.start,$.end=ce.end);for(var se=0;se<ce.length;se+=3)$.push(ce[se]+j,ce[se+1],ce[se+2]);return $}function us(ce,j){if(ce.transformed)return ce;var $,se,pe,ve=1<<ce.z,Ee=ce.x,De=ce.y;for($=0;$<ce.features.length;$++){var xe=ce.features[$],Be=xe.geometry,pt=xe.type;if(xe.geometry=[],1===pt)for(se=0;se<Be.length;se+=2)xe.geometry.push(Ur(Be[se],Be[se+1],j,ve,Ee,De));else for(se=0;se<Be.length;se++){var gt=[];for(pe=0;pe<Be[se].length;pe+=2)gt.push(Ur(Be[se][pe],Be[se][pe+1],j,ve,Ee,De));xe.geometry.push(gt)}}return ce.transformed=!0,ce}function Ur(ce,j,$,se,pe,ve){return[Math.round($*(ce*se-pe)),Math.round($*(j*se-ve))]}function Os(ce,j,$,se,pe){for(var ve=j===pe.maxZoom?0:pe.tolerance/((1<<j)*pe.extent),Ee={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:$,y:se,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<ce.length;De++){Ee.numFeatures++,Wo(Ee,ce[De],ve,pe);var xe=ce[De].minX,Be=ce[De].minY,pt=ce[De].maxX,gt=ce[De].maxY;xe<Ee.minX&&(Ee.minX=xe),Be<Ee.minY&&(Ee.minY=Be),pt>Ee.maxX&&(Ee.maxX=pt),gt>Ee.maxY&&(Ee.maxY=gt)}return Ee}function Wo(ce,j,$,se){var pe=j.geometry,ve=j.type,Ee=[];if("Point"===ve||"MultiPoint"===ve)for(var De=0;De<pe.length;De+=3)Ee.push(pe[De]),Ee.push(pe[De+1]),ce.numPoints++,ce.numSimplified++;else if("LineString"===ve)lo(Ee,pe,ce,$,!1,!1);else if("MultiLineString"===ve||"Polygon"===ve)for(De=0;De<pe.length;De++)lo(Ee,pe[De],ce,$,"Polygon"===ve,0===De);else if("MultiPolygon"===ve)for(var xe=0;xe<pe.length;xe++){var Be=pe[xe];for(De=0;De<Be.length;De++)lo(Ee,Be[De],ce,$,!0,0===De)}if(Ee.length){var pt=j.tags||null;if("LineString"===ve&&se.lineMetrics){for(var gt in pt={},j.tags)pt[gt]=j.tags[gt];pt.mapbox_clip_start=pe.start/pe.size,pt.mapbox_clip_end=pe.end/pe.size}var ct={geometry:Ee,type:"Polygon"===ve||"MultiPolygon"===ve?3:"LineString"===ve||"MultiLineString"===ve?2:1,tags:pt};null!==j.id&&(ct.id=j.id),ce.features.push(ct)}}function lo(ce,j,$,se,pe,ve){var Ee=se*se;if(se>0&&j.size<(pe?Ee:se))$.numPoints+=j.length/3;else{for(var De=[],xe=0;xe<j.length;xe+=3)(0===se||j[xe+2]>Ee)&&($.numSimplified++,De.push(j[xe]),De.push(j[xe+1])),$.numPoints++;pe&&function(Be,pt){for(var gt=0,ct=0,on=Be.length,hn=on-2;ct<on;hn=ct,ct+=2)gt+=(Be[ct]-Be[hn])*(Be[ct+1]+Be[hn+1]);if(gt>0===pt)for(ct=0,on=Be.length;ct<on/2;ct+=2){var Ft=Be[ct],yn=Be[ct+1];Be[ct]=Be[on-2-ct],Be[ct+1]=Be[on-1-ct],Be[on-2-ct]=Ft,Be[on-1-ct]=yn}}(De,ve),ce.push(De)}}function jr(ce,j){var $=(j=this.options=function(pe,ve){for(var Ee in ve)pe[Ee]=ve[Ee];return pe}(Object.create(this.options),j)).debug;if($&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe,ve,Ee,De,xe,Be,se=function(pe,ve){var Ee=[];if("FeatureCollection"===pe.type)for(var De=0;De<pe.features.length;De++)Pr(Ee,pe.features[De],ve,De);else Pr(Ee,"Feature"===pe.type?pe:{geometry:pe},ve);return Ee}(ce,j);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=pe=se,xe=Ne(pe,1,-1-(Ee=(ve=j).buffer/ve.extent),Ee,0,-1,2,ve),Be=Ne(pe,1,1-Ee,2+Ee,0,-1,2,ve),(xe||Be)&&(De=Ne(pe,1,-Ee,1+Ee,0,-1,2,ve)||[],xe&&(De=wn(xe,1).concat(De)),Be&&(De=De.concat(wn(Be,-1)))),(se=De).length&&this.splitTile(se,0,0,0),$&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wi(ce,j,$){return 32*((1<<ce)*$+j)+ce}function $r(ce,j){const $=ce.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const se=this._geoJSONIndex.getTile($.z,$.x,$.y);if(!se)return j(null,null);const pe=new class{constructor(Ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.EXTENT,this.length=Ee.length,this._features=Ee}feature(Ee){return new class{constructor(De){this._feature=De,this.extent=p.EXTENT,this.type=De.type,this.properties=De.tags,"id"in De&&!isNaN(De.id)&&(this.id=parseInt(De.id,10))}loadGeometry(){if(1===this._feature.type){const De=[];for(const xe of this._feature.geometry)De.push([new p.Point(xe[0],xe[1])]);return De}{const De=[];for(const xe of this._feature.geometry){const Be=[];for(const pt of xe)Be.push(new p.Point(pt[0],pt[1]));De.push(Be)}return De}}toGeoJSON(De,xe,Be){return Go.call(this,De,xe,Be)}}(this._features[Ee])}}(se.features);let ve=Ma(pe);0===ve.byteOffset&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),j(null,{vectorTile:pe,rawData:ve.buffer})}jr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},jr.prototype.splitTile=function(ce,j,$,se,pe,ve,Ee){for(var De=[ce,j,$,se],xe=this.options,Be=xe.debug;De.length;){se=De.pop(),$=De.pop(),j=De.pop(),ce=De.pop();var pt=1<<j,gt=wi(j,$,se),ct=this.tiles[gt];if(!ct&&(Be>1&&console.time("creation"),ct=this.tiles[gt]=Os(ce,j,$,se,xe),this.tileCoords.push({z:j,x:$,y:se}),Be)){Be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,$,se,ct.numFeatures,ct.numPoints,ct.numSimplified),console.timeEnd("creation"));var on="z"+j;this.stats[on]=(this.stats[on]||0)+1,this.total++}if(ct.source=ce,pe){if(j===xe.maxZoom||j===pe)continue;var hn=1<<pe-j;if($!==Math.floor(ve/hn)||se!==Math.floor(Ee/hn))continue}else if(j===xe.indexMaxZoom||ct.numPoints<=xe.indexMaxPoints)continue;if(ct.source=null,0!==ce.length){Be>1&&console.time("clipping");var Ft,yn,Tn,Ei,Qi,Ro,co=.5*xe.buffer/xe.extent,Qs=.5-co,Ti=.5+co,lr=1+co;Ft=yn=Tn=Ei=null,Qi=Ne(ce,pt,$-co,$+Ti,0,ct.minX,ct.maxX,xe),Ro=Ne(ce,pt,$+Qs,$+lr,0,ct.minX,ct.maxX,xe),ce=null,Qi&&(Ft=Ne(Qi,pt,se-co,se+Ti,1,ct.minY,ct.maxY,xe),yn=Ne(Qi,pt,se+Qs,se+lr,1,ct.minY,ct.maxY,xe),Qi=null),Ro&&(Tn=Ne(Ro,pt,se-co,se+Ti,1,ct.minY,ct.maxY,xe),Ei=Ne(Ro,pt,se+Qs,se+lr,1,ct.minY,ct.maxY,xe),Ro=null),Be>1&&console.timeEnd("clipping"),De.push(Ft||[],j+1,2*$,2*se),De.push(yn||[],j+1,2*$,2*se+1),De.push(Tn||[],j+1,2*$+1,2*se),De.push(Ei||[],j+1,2*$+1,2*se+1)}}},jr.prototype.getTile=function(ce,j,$){var se=this.options,pe=se.extent,ve=se.debug;if(ce<0||ce>24)return null;var Ee=1<<ce,De=wi(ce,j=(j%Ee+Ee)%Ee,$);if(this.tiles[De])return us(this.tiles[De],pe);ve>1&&console.log("drilling down to z%d-%d-%d",ce,j,$);for(var xe,Be=ce,pt=j,gt=$;!xe&&Be>0;)Be--,pt=Math.floor(pt/2),gt=Math.floor(gt/2),xe=this.tiles[wi(Be,pt,gt)];return xe&&xe.source?(ve>1&&console.log("found parent tile z%d-%d-%d",Be,pt,gt),ve>1&&console.time("drilling down"),this.splitTile(xe.source,Be,pt,gt,ce,j,$),ve>1&&console.timeEnd("drilling down"),this.tiles[De]?us(this.tiles[De],pe):null):null};class al extends p.VectorTileWorkerSource{constructor(j,$,se,pe,ve){super(j,$,se,pe,$r),ve&&(this.loadGeoJSON=ve)}loadData(j,$){const se=j&&j.request,pe=se&&se.collectResourceTiming;this.loadGeoJSON(j,(ve,Ee)=>{if(ve||!Ee)return $(ve);if("object"!=typeof Ee)return $(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{Io(Ee,!0);try{if(j.filter){const xe=p.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===xe.result)throw new Error(xe.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));Ee={type:"FeatureCollection",features:Ee.features.filter(pt=>xe.value.evaluate({zoom:0},pt))}}this._geoJSONIndex=j.cluster?new Bi(function({superclusterOptions:xe,clusterProperties:Be}){if(!Be||!xe)return xe;const pt={},gt={},ct={accumulated:null,zoom:0},on={properties:null},hn=Object.keys(Be);for(const Ft of hn){const[yn,Tn]=Be[Ft],Ei=p.createExpression(Tn),Qi=p.createExpression("string"==typeof yn?[yn,["accumulated"],["get",Ft]]:yn);pt[Ft]=Ei.value,gt[Ft]=Qi.value}return xe.map=Ft=>{on.properties=Ft;const yn={};for(const Tn of hn)yn[Tn]=pt[Tn].evaluate(ct,on);return yn},xe.reduce=(Ft,yn)=>{on.properties=yn;for(const Tn of hn)ct.accumulated=Ft[Tn],Ft[Tn]=gt[Tn].evaluate(ct,on)},xe}(j)).load(Ee.features):new jr(xe=Ee,j.geojsonVtOptions)}catch(xe){return $(xe)}this.loaded={};const De={};if(pe){const xe=p.getPerformanceMeasurement(se);xe&&(De.resourceTiming={},De.resourceTiming[j.source]=JSON.parse(JSON.stringify(xe)))}$(null,De)}var xe})}reloadTile(j,$){const se=this.loaded;return se&&se[j.uid]?super.reloadTile(j,$):this.loadTile(j,$)}loadGeoJSON(j,$){if(j.request)p.getJSON(j.request,$);else{if("string"!=typeof j.data)return $(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));try{return $(null,JSON.parse(j.data))}catch{return $(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(j,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(se){$(se)}}getClusterChildren(j,$){try{$(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(se){$(se)}}getClusterLeaves(j,$){try{$(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(se){$(se)}}}class xc{constructor(j){this.self=j,this.actor=new p.Actor(j,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=p.getProjection({name:"mercator"}),this.workerSourceTypes={vector:p.VectorTileWorkerSource,geojson:al},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=($,se)=>{if(this.workerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.workerSourceTypes[$]=se},this.self.registerRTLTextPlugin=$=>{if(p.plugin.isParsed())throw new Error("RTL text plugin already registered.");p.plugin.applyArabicShaping=$.applyArabicShaping,p.plugin.processBidirectionalText=$.processBidirectionalText,p.plugin.processStyledBidirectionalText=$.processStyledBidirectionalText}}clearCaches(j,$,se){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],se()}checkIfReady(j,$,se){se()}setReferrer(j,$){this.referrer=$}spriteLoaded(j,$){this.isSpriteLoaded[j]=$;for(const se in this.workerSources[j]){const pe=this.workerSources[j][se];for(const ve in pe)pe[ve]instanceof p.VectorTileWorkerSource&&(pe[ve].isSpriteLoaded=$,pe[ve].fire(new p.Event("isSpriteLoaded")))}}setImages(j,$,se){this.availableImages[j]=$;for(const pe in this.workerSources[j]){const ve=this.workerSources[j][pe];for(const Ee in ve)ve[Ee].availableImages=$}se()}enableTerrain(j,$,se){this.terrain=$,se()}setProjection(j,$){this.projections[j]=p.getProjection($)}setLayers(j,$,se){this.getLayerIndex(j).replace($),se()}updateLayers(j,$,se){this.getLayerIndex(j).update($.layers,$.removedIds),se()}loadTile(j,$,se){const pe=this.enableTerrain?p.extend({enableTerrain:this.terrain},$):$;pe.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,$.type,$.source).loadTile(pe,se)}loadDEMTile(j,$,se){const pe=this.enableTerrain?p.extend({buildQuadTree:this.terrain},$):$;this.getDEMWorkerSource(j,$.source).loadTile(pe,se)}reloadTile(j,$,se){const pe=this.enableTerrain?p.extend({enableTerrain:this.terrain},$):$;pe.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,$.type,$.source).reloadTile(pe,se)}abortTile(j,$,se){this.getWorkerSource(j,$.type,$.source).abortTile($,se)}removeTile(j,$,se){this.getWorkerSource(j,$.type,$.source).removeTile($,se)}removeSource(j,$,se){if(!this.workerSources[j]||!this.workerSources[j][$.type]||!this.workerSources[j][$.type][$.source])return;const pe=this.workerSources[j][$.type][$.source];delete this.workerSources[j][$.type][$.source],void 0!==pe.removeSource?pe.removeSource($,se):se()}loadWorkerSource(j,$,se){try{this.self.importScripts($.url),se()}catch(pe){se(pe.toString())}}syncRTLPluginState(j,$,se){try{p.plugin.setState($);const pe=p.plugin.getPluginURL();if(p.plugin.isLoaded()&&!p.plugin.isParsed()&&null!=pe){this.self.importScripts(pe);const ve=p.plugin.isParsed();se(ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${pe}`),ve)}}catch(pe){se(pe.toString())}}getAvailableImages(j){let $=this.availableImages[j];return $||($=[]),$}getLayerIndex(j){let $=this.layerIndexes[j];return $||($=this.layerIndexes[j]=new Tr),$}getWorkerSource(j,$,se){return this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][$]||(this.workerSources[j][$]={}),this.workerSources[j][$][se]||(this.workerSources[j][$][se]=new this.workerSourceTypes[$]({send:(ve,Ee,De,xe,Be,pt)=>{this.actor.send(ve,Ee,De,j,Be,pt)},scheduler:this.actor.scheduler},this.getLayerIndex(j),this.getAvailableImages(j),this.isSpriteLoaded[j])),this.workerSources[j][$][se]}getDEMWorkerSource(j,$){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][$]||(this.demWorkerSources[j][$]=new ln),this.demWorkerSources[j][$]}enforceCacheSizeLimit(j,$){p.enforceCacheSizeLimit($)}getWorkerPerformanceMetrics(j,$,se){se(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new xc(self)),xc}),Xs(0,function(p){function Xe(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let d=0;d<f.length;d++)if(!Xe(f[d],l[d]))return!1;return!0}if("object"==typeof f&&null!==f&&null!==l){if("object"!=typeof l||Object.keys(f).length!==Object.keys(l).length)return!1;for(const d in f)if(!Xe(f[d],l[d]))return!1;return!0}return f===l}var xs=Tr;function Tr(f){return l=f,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,v,w=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(w);try{v=new Worker(T),_=!0}catch{_=!1}return v&&v.terminate(),URL.revokeObjectURL(T),_}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var _=document.createElement("canvas");_.width=_.height=1;var v=_.getContext("2d");if(!v)return!1;var w=v.getImageData(0,0,1,1);return w&&w.width===_.width}()||(void 0===ln[d=l&&l.failIfMajorPerformanceCaveat]&&(ln[d]=function(_){var v,T,D,S,w=(T=_,D=document.createElement("canvas"),(S=Object.create(Tr.webGLContextAttributes)).failIfMajorPerformanceCaveat=T,D.getContext("webgl",S)||D.getContext("experimental-webgl",S));if(!w)return!1;try{v=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!v||w.isContextLost())&&(w.shaderSource(v,"void main() {}"),w.compileShader(v),!0===w.getShaderParameter(v,w.COMPILE_STATUS))}(d)),!ln[d]||document.documentMode));var l,d}var ln={};function nn(f,l,d){const _=p.window.document.createElement(f);return void 0!==l&&(_.className=l),d&&d.appendChild(_),_}function Ki(f,l,d){const _=p.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(l))_.setAttributeNS(null,v,l[v]);return d&&d.appendChild(_),_}Tr.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Io=p.window.document&&p.window.document.documentElement.style,Go=Io&&void 0!==Io.userSelect?"userSelect":"WebkitUserSelect";let bs;function Rl(){Io&&Go&&(bs=Io[Go],Io[Go]="none")}function as(){Io&&Go&&(Io[Go]=bs)}function rr(f){f.preventDefault(),f.stopPropagation(),p.window.removeEventListener("click",rr,!0)}function sr(){p.window.addEventListener("click",rr,!0),p.window.setTimeout(()=>{p.window.removeEventListener("click",rr,!0)},0)}function ko(f,l){const d=f.getBoundingClientRect();return Dr(f,d,l)}function Ks(f,l){const d=f.getBoundingClientRect(),_=[];for(let v=0;v<l.length;v++)_.push(Dr(f,d,l[v]));return _}function ls(f){return void 0!==p.window.InstallTrigger&&2===f.button&&f.ctrlKey&&p.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function Dr(f,l,d){const _=f.offsetWidth===l.width?1:f.offsetWidth/l.width;return new p.Point((d.clientX-l.left)*_,(d.clientY-l.top)*_)}function ft(f,l){var d=l[0],_=l[1],v=l[2],w=l[3],T=d*w-v*_;return T?(f[0]=w*(T=1/T),f[1]=-_*T,f[2]=-v*T,f[3]=d*T,f):null}function yc(f){const{userImage:l}=f;return!!(l&&l.render&&l.render())&&(f.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ca extends p.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new p.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:d,callback:_}of this.requestors)this._notify(d,_);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,d){this._validate(l,d)&&(this.images[l]=d)}_validate(l,d){let _=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(d.content,d)||(this.fire(new p.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,d){if(!l)return!0;let _=0;for(const v of l){if(v[0]<_||v[1]<v[0]||d<v[1])return!1;_=v[1]}return!0}_validateContent(l,d){return!(l&&(4!==l.length||l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,d){d.version=this.images[l].version+1,this.images[l]=d,this.updatedImages[l]=!0}removeImage(l){const d=this.images[l];delete this.images[l],delete this.patterns[l],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,d){let _=!0;if(!this.isLoaded())for(const v of l)this.images[v]||(_=!1);this.isLoaded()||_?this._notify(l,d):this.requestors.push({ids:l,callback:d})}_notify(l,d){const _={};for(const v of l){this.images[v]||this.fire(new p.Event("styleimagemissing",{id:v}));const w=this.images[v];w?_[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:p.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,_)}getPixelSize(){const{width:l,height:d}=this.atlasImage;return{width:l,height:d}}getPattern(l){const d=this.patterns[l],_=this.getImage(l);if(!_)return null;if(d&&d.position.version===_.version)return d.position;if(d)d.position.version=_.version;else{const v={w:_.data.width+2,h:_.data.height+2,x:0,y:0},w=new p.ImagePosition(v,_);this.patterns[l]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const d=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p.Texture(l,this.atlasImage,d.RGBA),this.atlasTexture&&this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:d,h:_}=p.potpack(l),v=this.atlasImage;v.resize({width:d||1,height:_||1});for(const w in this.patterns){const{bin:T}=this.patterns[w],D=T.x+1,S=T.y+1,N=this.images[w].data,R=N.width,B=N.height;p.RGBAImage.copy(N,v,{x:0,y:0},{x:D,y:S},{width:R,height:B}),p.RGBAImage.copy(N,v,{x:0,y:B-1},{x:D,y:S-1},{width:R,height:1}),p.RGBAImage.copy(N,v,{x:0,y:0},{x:D,y:S+B},{width:R,height:1}),p.RGBAImage.copy(N,v,{x:R-1,y:0},{x:D-1,y:S},{width:1,height:B}),p.RGBAImage.copy(N,v,{x:0,y:0},{x:D+R,y:S},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const d of l){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const _=this.images[d];yc(_)&&this.updateImage(d,_)}}}const cn=new p.Properties({anchor:new p.DataConstantProperty(p.spec.light.anchor),position:new class{constructor(){this.specification=p.spec.light.position}possiblyEvaluate(f,l){return function([d,_,v]){const w=p.degToRad(_+90),T=p.degToRad(v);return{x:d*Math.cos(w)*Math.sin(T),y:d*Math.sin(w)*Math.sin(T),z:d*Math.cos(T),azimuthal:_,polar:v}}(f.expression.evaluate(l))}interpolate(f,l,d){return{x:p.number(f.x,l.x,d),y:p.number(f.y,l.y,d),z:p.number(f.z,l.z,d),azimuthal:p.number(f.azimuthal,l.azimuthal,d),polar:p.number(f.polar,l.polar,d)}}},color:new p.DataConstantProperty(p.spec.light.color),intensity:new p.DataConstantProperty(p.spec.light.intensity)});class ao extends p.Evented{constructor(l){super(),this._transitionable=new p.Transitionable(cn),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d={}){if(!this._validate(p.validateLight,l,d))for(const _ in l){const v=l[_];p.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),v):this._transitionable.setValue(_,v)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,_){return(!_||!1!==_.validate)&&p.emitValidationErrors(this,l.call(p.validateStyle,p.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}const Nl=new p.Properties({source:new p.DataConstantProperty(p.spec.terrain.source),exaggeration:new p.DataConstantProperty(p.spec.terrain.exaggeration)});let Fl=class extends p.Evented{constructor(f,l){super(),this._transitionable=new p.Transitionable(Nl),this.set(f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(f){for(const l in f){const d=f[l];p.endsWith(l,"-transition")?this._transitionable.setTransition(l.slice(0,-11),d):this._transitionable.setValue(l,d)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}};function Ma(f,l,d,_){const v=p.smoothstep(45,65,d),[w,T]=ar(f,_),D=p.length(l);let S=1-Math.min(1,Math.exp((D-w)/(T-w)*-6));return S*=S*S,S=Math.min(1,1.00747*S),S*v*f.alpha}function ar(f,l){const d=.5/Math.tan(.5*l);return[f.range[0]+d,f.range[1]+d]}const _n=new p.Properties({range:new p.DataConstantProperty(p.spec.fog.range),color:new p.DataConstantProperty(p.spec.fog.color),"high-color":new p.DataConstantProperty(p.spec.fog["high-color"]),"space-color":new p.DataConstantProperty(p.spec.fog["space-color"]),"horizon-blend":new p.DataConstantProperty(p.spec.fog["horizon-blend"]),"star-intensity":new p.DataConstantProperty(p.spec.fog["star-intensity"])});class Oa extends p.Evented{constructor(l,d){super(),this._transitionable=new p.Transitionable(_n),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const l=this._transform,d="globe"===l.projection.name,_=p.globeToMercatorTransition(l.zoom),v=this.properties.get("range"),w=[.5,3];return{range:d?[p.number(w[0],v[0],_),p.number(w[1],v[1],_)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,d={}){if(!this._validate(p.validateFog,l,d)){for(const _ of Object.keys(p.spec.fog))l&&void 0===l[_]&&(l[_]=p.spec.fog[_].default);for(const _ in l){const v=l[_];p.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),v):this._transitionable.setValue(_,v)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:p.smoothstep(45,65,l))*d.a}getOpacityAtLatLng(l,d){return this._transform.projection.supportsFog?function(_,v,w){const T=p.MercatorCoordinate.fromLngLat(v),D=w.elevation?w.elevation.getAtPointOrZero(T):0,S=[T.x,T.y,D];return p.transformMat4(S,S,w.mercatorFogMatrix),Ma(_,S,w.pitch,w._fov)}(this.state,l,d):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?ar(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,_){return(!_||!1!==_.validate)&&p.emitValidationErrors(this,l.call(p.validateStyle,p.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}class dn{constructor(l,d){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p.uniqueId();const _=this.workerPool.acquire(this.id);for(let v=0;v<_.length;v++){const w=new dn.Actor(_[v],d,this.id);w.name=`Worker ${v}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,d,_){p.asyncAll(this.actors,(v,w)=>{v.send(l,d,w)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Yi(f,l,d){return l*(p.EXTENT/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}dn.Actor=p.Actor;class ws{constructor(l,d,_,v){this.screenBounds=l,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(l,d){let _,v;if(l instanceof p.Point||"number"==typeof l[0]){const w=p.Point.convert(l);_=[w],v=d.isPointAboveHorizon(w)}else{const w=p.Point.convert(l[0]),T=p.Point.convert(l[1]);_=[w,T],v=p.polygonizeBounds(w,T).every(D=>d.isPointAboveHorizon(D))}return new ws(_,d.getCameraPoint(),v,d)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(l){return p.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const d=this.screenBounds[0],_=1===this.screenBounds.length?this.screenBounds[0].add(new p.Point(1,1)):this.screenBounds[1],v=p.polygonizeBounds(d,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<_.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?v[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(v[3]=this.cameraPoint)),p.bufferConvexPolygon(v,l)}bufferedCameraGeometryGlobe(l){const d=this.screenBounds[0],_=1===this.screenBounds.length?this.screenBounds[0].add(new p.Point(1,1)):this.screenBounds[1],v=p.polygonizeBounds(d,_,l),w=this.cameraPoint.clone();switch(3*((w.y>d.y)+(w.y>_.y))+((w.x>d.x)+(w.x>_.x))){case 0:v[0]=w,v[4]=w.clone();break;case 1:v.splice(1,0,w);break;case 2:v[1]=w;break;case 3:v.splice(4,0,w);break;case 5:v.splice(2,0,w);break;case 6:v[3]=w;break;case 7:v.splice(3,0,w);break;case 8:v[2]=w}return v}containsTile(l,d,_,v=0){const w=l.queryPadding/d._pixelsPerMercatorPixel+1,T=_?this._bufferedCameraMercator(w,d):this._bufferedScreenMercator(w,d);let D=l.tileID.wrap+(T.unwrapped?v:0);const S=T.polygon.map(te=>p.getTilePoint(l.tileTransform,te,D));if(!p.polygonIntersectsBox(S,0,0,p.EXTENT,p.EXTENT))return;D=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const N=this.screenGeometryMercator.polygon.map(te=>p.getTileVec3(l.tileTransform,te,D)),R=N.map(te=>new p.Point(te[0],te[1])),B=d.getFreeCameraOptions().position||new p.MercatorCoordinate(0,0,0),H=p.getTileVec3(l.tileTransform,B,D),X=N.map(te=>{const z=p.sub(te,te,H);return p.normalize(z,z),new p.Ray(H,z)}),Y=Yi(l,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:R,tilespaceRays:X,bufferedTilespaceGeometry:S,bufferedTilespaceBounds:(K=p.getBounds(S),K.min.x=p.clamp(K.min.x,0,p.EXTENT),K.min.y=p.clamp(K.min.y,0,p.EXTENT),K.max.x=p.clamp(K.max.x,0,p.EXTENT),K.max.y=p.clamp(K.max.y,0,p.EXTENT),K),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:Y};var K}_bufferedScreenMercator(l,d){const _=Hn(l);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let v;return v="globe"===d.projection.name?this._projectAndResample(this.bufferedScreenGeometry(l),d):{polygon:this.bufferedScreenGeometry(l).map(w=>d.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[_]=v,v}}_bufferedCameraMercator(l,d){const _=Hn(l);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let v;return v="globe"===d.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),d):{polygon:this.bufferedCameraGeometry(l).map(w=>d.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[_]=v,v}}_projectAndResample(l,d){const _=function(w,T){const D=p.multiply([],T.pixelMatrix,T.globeMatrix),S=[0,-p.GLOBE_RADIUS,0,1],N=[0,p.GLOBE_RADIUS,0,1],R=[0,0,0,1];p.transformMat4$1(S,S,D),p.transformMat4$1(N,N,D),p.transformMat4$1(R,R,D);const B=new p.Point(S[0]/S[3],S[1]/S[3]),H=new p.Point(N[0]/N[3],N[1]/N[3]),X=p.polygonContainsPoint(w,B)&&S[3]<R[3],Y=p.polygonContainsPoint(w,H)&&N[3]<R[3];if(!X&&!Y)return null;const K=function(ge,Me,Ce){for(let Re=1;Re<ge.length;Re++){const ot=Cs(Me.pointCoordinate3D(ge[Re-1]).x),Se=Cs(Me.pointCoordinate3D(ge[Re]).x);if(Ce<0){if(ot<Se)return{idx:Re,t:-ot/(Se-1-ot)}}else if(Se<ot)return{idx:Re,t:(1-ot)/(Se+1-ot)}}return null}(w,T,X?-1:1);if(!K)return null;const{idx:te,t:z}=K;let Z=te>1?Bi(w.slice(0,te),T):[],ie=te<w.length?Bi(w.slice(te),T):[];Z=Z.map(ge=>new p.Point(Cs(ge.x),ge.y)),ie=ie.map(ge=>new p.Point(Cs(ge.x),ge.y));const ne=[...Z];0===ne.length&&ne.push(ie[ie.length-1]);const fe=p.number(ne[ne.length-1].y,(0===ie.length?Z[0]:ie[0]).y,z);let me;return me=X?[new p.Point(0,fe),new p.Point(0,0),new p.Point(1,0),new p.Point(1,fe)]:[new p.Point(1,fe),new p.Point(1,1),new p.Point(0,1),new p.Point(0,fe)],ne.push(...me),0===ie.length?ne.push(Z[0]):ne.push(...ie),{polygon:ne.map(ge=>new p.MercatorCoordinate(ge.x,ge.y)),unwrapped:!1}}(l,d);if(_)return _;const v=function(w,T){let D=!1,S=-1/0,N=0;for(let B=0;B<w.length-1;B++)w[B].x>S&&(S=w[B].x,N=B);for(let B=0;B<w.length-1;B++){const H=(N+B)%(w.length-1),X=w[H],Y=w[H+1];Math.abs(X.x-Y.x)>.5&&(X.x<Y.x?(X.x+=1,0===H&&(w[w.length-1].x+=1)):(Y.x+=1,H+1===w.length-1&&(w[0].x+=1)),D=!0)}const R=p.mercatorXfromLng(T.center.lng);return D&&R<Math.abs(R-1)&&w.forEach(B=>{B.x-=1}),{polygon:w,unwrapped:D}}(Bi(l,d).map(w=>new p.Point(Cs(w.x),w.y)),d);return{polygon:v.polygon.map(w=>new p.MercatorCoordinate(w.x,w.y)),unwrapped:v.unwrapped}}}function Bi(f,l){return p.resample(f,d=>{const _=l.pointCoordinate3D(d);d.x=_.x,d.y=_.y},1/256)}function Cs(f){return f<0?1+f%1:f%1}function Hn(f){return 100*f|0}function Ys(f,l,d,_,v){const w=function(T,D){if(T)return v(T);if(D){f.url&&D.tiles&&f.tiles&&delete f.tiles;const S=p.pick(p.extend(D,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(S.vectorLayers=D.vector_layers,S.vectorLayerIds=S.vectorLayers.map(N=>N.id)),S.tiles=l.canonicalizeTileset(S,f.url),v(null,S)}};return f.url?p.getJSON(l.transformRequest(l.normalizeSourceURL(f.url,null,d,_),p.ResourceType.Source),w):p.exported.frame(()=>w(null,f))}class cs{constructor(l,d,_){this.bounds=p.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&4===l.length?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),_=Math.floor(p.mercatorXfromLng(this.bounds.getWest())*d),v=Math.floor(p.mercatorYfromLat(this.bounds.getNorth())*d),w=Math.ceil(p.mercatorXfromLng(this.bounds.getEast())*d),T=Math.ceil(p.mercatorYfromLat(this.bounds.getSouth())*d);return l.x>=_&&l.x<w&&l.y>=v&&l.y<T}}class xi{constructor(l,d,_){this.context=l;const v=l.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ta{constructor(l,d,_,v){this.length=d.length,this.attributes=_,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let _=0;_<this.attributes.length;_++){const v=d.attributes[this.attributes[_].name];void 0!==v&&l.enableVertexAttribArray(v)}}setVertexAttribPointers(l,d,_){for(let v=0;v<this.attributes.length;v++){const w=this.attributes[v],T=d.attributes[w.name];void 0!==T&&l.vertexAttribPointer(T,w.components,l[Wn[w.type]],!1,this.itemSize,w.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ct{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Da extends Ct{getDefault(){return p.Color.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Pr extends Ct{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Pa extends Ct{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class bi extends Ct{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ho extends Ct{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class vc extends Ct{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Ms extends Ct{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Ne extends Ct{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ae extends Ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class Je extends Ct{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class lt extends Ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class Mt extends Ct{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class kt extends Ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class Ii extends Ct{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Yn extends Ct{getDefault(){return p.Color.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class wn extends Ct{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Oi extends Ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class us extends Ct{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ur extends Ct{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Os,Wo=class extends Ct{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class lo extends Ct{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class jr extends Ct{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class wi extends Ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class $r extends Ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class al extends Ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class xc extends Ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ce extends Ct{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class j extends Ct{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class $ extends Ct{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class se extends Ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class pe extends Ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class ve extends Ct{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class Ee extends ve{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class De extends ve{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class xe extends De{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Be{constructor(l,d,_,v){this.context=l,this.width=d,this.height=_;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Ee(l,w),v&&(this.depthAttachment=new De(l,w))}destroy(){const l=this.context.gl,d=this.colorAttachment.get();if(d&&l.deleteTexture(d),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class pt{constructor(l,d=!1){if(this.gl=l,this.isWebGL2=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),d){const _=l;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(l),deleteVertexArrayOES:_.deleteVertexArray.bind(l),bindVertexArrayOES:_.bindVertexArray.bind(l)}}this.clearColor=new Da(this),this.clearDepth=new Pr(this),this.clearStencil=new Pa(this),this.colorMask=new bi(this),this.depthMask=new Ho(this),this.stencilMask=new vc(this),this.stencilFunc=new Ms(this),this.stencilOp=new Ne(this),this.stencilTest=new Ae(this),this.depthRange=new Je(this),this.depthTest=new lt(this),this.depthFunc=new Mt(this),this.blend=new kt(this),this.blendFunc=new Ii(this),this.blendColor=new Yn(this),this.blendEquation=new wn(this),this.cullFace=new Oi(this),this.cullFaceSide=new us(this),this.frontFace=new Ur(this),this.program=new Wo(this),this.activeTexture=new lo(this),this.viewport=new jr(this),this.bindFramebuffer=new wi(this),this.bindRenderbuffer=new $r(this),this.bindTexture=new al(this),this.bindVertexBuffer=new xc(this),this.bindElementBuffer=new ce(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new j(this),this.pixelStoreUnpack=new $(this),this.pixelStoreUnpackPremultiplyAlpha=new se(this),this.pixelStoreUnpackFlipY=new pe(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),d||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(d||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=d||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d){return new xi(this,l,d)}createVertexBuffer(l,d,_){return new Ta(this,l,d,_)}createRenderbuffer(l,d,_){const v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,l,d,_),this.bindRenderbuffer.set(null),w}createFramebuffer(l,d,_){return new Be(this,l,d,_)}clear({color:l,depth:d,stencil:_}){const v=this.gl;let w=0;l&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),void 0!==d&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),void 0!==_&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),v.clear(w)}setCullFace(l){!1===l.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){Xe(l.blendFunction,p.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class gt extends p.Evented{constructor(l,d,_,v){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,p.extend(this,p.pick(d,["url","scheme","tileSize","promoteId"])),this._options=p.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new p.DedupedRequest}load(l){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=Ys(this._options,this.map._requestManager,d,_,(v,w)=>{this._tileJSONRequest=null,this._loaded=!0,v?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),_&&2!==_.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new p.ErrorEvent(v))):w&&(p.extend(this,w),w.bounds&&(this.tileBounds=new cs(w.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(v)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}loadTile(l,d){const _=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(_,p.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,l.actor&&"expired"!==l.state)"loading"===l.state?l.reloadCallback=d:l.request=l.actor.send("reloadTile",v,w.bind(this));else if(l.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",v,w.bind(this),void 0,!0);else{const T=p.loadVectorTile.call({deduped:this._deduped},v,(D,S)=>{D||!S?w.call(this,D):(v.data={cacheControl:S.cacheControl,expires:S.expires,rawData:S.rawData.slice(0)},l.actor&&l.actor.send("loadTile",v,w.bind(this),void 0,!0))},!0);l.request={cancel:T}}function w(T,D){return delete l.request,l.aborted?d(null):T&&404!==T.status?d(T):(D&&D.resourceTiming&&(l.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&l.setExpiryData(D),l.loadVectorData(D,this.map.painter),p.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ct extends p.Evented{constructor(l,d,_,v){super(),this.id=l,this.dispatcher=_,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=p.extend({type:"raster"},d),p.extend(this,p.pick(d,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ys(this._options,this.map._requestManager,null,null,(d,_)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new p.ErrorEvent(d)):_&&(p.extend(this,_),_.bounds&&(this.tileBounds=new cs(_.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(_.tiles),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(d)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return p.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const _=p.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);l.request=p.getImage(this.map._requestManager.transformRequest(v,p.ResourceType.Tile),(w,T,D,S)=>(delete l.request,l.aborted?(l.state="unloaded",d(null)):w?(l.state="errored",d(w)):T?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:D,expires:S}),l.setTexture(T,this.map.painter),l.state="loaded",p.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null)))}static loadTileData(l,d,_){l.setTexture(d,_)}static unloadTileData(l,d){l.texture&&d.saveTileTexture(l.texture)}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d()}unloadTile(l,d){l.texture&&this.map.painter.saveTileTexture(l.texture),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function on(f,l,d,_,v,w,T,D){const S=[f,d,v,l,_,w,1,1,1],N=[T,D,1],R=p.adjoint([],S),[B,H,X]=p.transformMat3(N,N,p.transpose(R,R));return p.multiply$1(S,[B,0,0,0,H,0,0,0,X],S)}class hn extends p.Evented{constructor(l,d,_,v){super(),this.id=l,this.dispatcher=_,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=d,this._dirty=!1}load(l,d){this._loaded=d||!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=p.getImage(this.map._requestManager.transformRequest(this.url,p.ResourceType.Image),(_,v)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new p.ErrorEvent(_));else if(v){const{HTMLImageElement:w}=p.window;this.image=v instanceof w?p.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const d=l.map(p.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let v=1/0,w=1/0,T=-1/0,D=-1/0;for(const B of _)v=Math.min(v,B.x),w=Math.min(w,B.y),T=Math.max(T,B.x),D=Math.max(D,B.y);const S=Math.max(T-v,D-w),N=Math.max(0,Math.floor(-Math.log(S)/Math.LN2)),R=Math.pow(2,N);return new p.CanonicalTileID(N,Math.floor((v+T)/2*R),Math.floor((w+D)/2*R))}(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const S in this.tiles){const N=this.tiles[S];"loaded"!==N.state&&(N.state="loaded",N.texture=this.texture)}if(this._boundsArray)return;const d=p.tileTransform(this.tileID,this.map.transform.projection),[_,v,w,T]=this.coordinates.map(S=>{const N=d.projection.project(S[0],S[1]);return p.getTilePoint(d,N)._round()});this.perspectiveTransform=function(S,N,R,B,H,X,Y,K,te,z){const Z=on(0,0,S,0,0,N,S,N),ie=on(R,B,H,X,Y,K,te,z);return p.multiply$1(ie,p.adjoint(Z,Z),ie),[ie[6]/ie[8]*S/p.EXTENT,ie[7]/ie[8]*N/p.EXTENT]}(this.width,this.height,_.x,_.y,v.x,v.y,T.x,T.y,w.x,w.y);const D=this._boundsArray=new p.StructArrayLayout4i8;D.emplaceBack(_.x,_.y,0,0),D.emplaceBack(v.x,v.y,p.EXTENT,0),D.emplaceBack(T.x,T.y,0,p.EXTENT),D.emplaceBack(w.x,w.y,p.EXTENT,p.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(D,p.boundsAttributes.members),this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const l=this.map.painter.context,d=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new p.Texture(l,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,d){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},d(null)):(l.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ft={vector:gt,raster:ct,"raster-dem":class extends ct{constructor(f,l,d,_){super(f,l,d,_),this.type="raster-dem",this.maxzoom=22,this._options=p.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(f,l){const d=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(v,w){v&&(f.state="errored",l(v)),w&&(f.dem=w,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",l(null))}f.request=p.getImage(this.map._requestManager.transformRequest(d,p.ResourceType.Tile),function(v,w,T,D){if(delete f.request,f.aborted)f.state="unloaded",l(null);else if(v)f.state="errored",l(v);else if(w){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:T,expires:D});const S=p.window.ImageBitmap&&w instanceof p.window.ImageBitmap&&(null==Os&&(Os=p.window.OffscreenCanvas&&new p.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof p.window.createImageBitmap),Os),N=1-(w.width-p.prevPowerOfTwo(w.width))/2;N<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const R=S?w:p.exported.getImageData(w,N),B={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:R,encoding:this.encoding,padding:N};f.actor&&"expired"!==f.state||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",B,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const l=f.canonical,d=Math.pow(2,l.z),_=(l.x-1+d)%d,v=0===l.x?f.wrap-1:f.wrap,w=(l.x+1+d)%d,T=l.x+1===d?f.wrap+1:f.wrap,D={};return D[new p.OverscaledTileID(f.overscaledZ,v,l.z,_,l.y).key]={backfilled:!1},D[new p.OverscaledTileID(f.overscaledZ,T,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(D[new p.OverscaledTileID(f.overscaledZ,v,l.z,_,l.y-1).key]={backfilled:!1},D[new p.OverscaledTileID(f.overscaledZ,f.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},D[new p.OverscaledTileID(f.overscaledZ,T,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<d&&(D[new p.OverscaledTileID(f.overscaledZ,v,l.z,_,l.y+1).key]={backfilled:!1},D[new p.OverscaledTileID(f.overscaledZ,f.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},D[new p.OverscaledTileID(f.overscaledZ,T,l.z,w,l.y+1).key]={backfilled:!1}),D}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends p.Evented{constructor(f,l,d,_){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(_),this._data=l.data,this._options=p.extend({},l),this._collectResourceTiming=l.collectResourceTiming,void 0!==l.maxzoom&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const v=p.EXTENT/this.tileSize;this.workerOptions=p.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(void 0!==l.buffer?l.buffer:128)*v,tolerance:(void 0!==l.tolerance?l.tolerance:.375)*v,extent:p.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:void 0!==l.clusterMaxZoom?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:p.EXTENT,radius:(void 0!==l.clusterRadius?l.clusterRadius:50)*v,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},l),this}getClusterChildren(f,l){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},l),this}getClusterLeaves(f,l,d,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:l,offset:d},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new p.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=p.extend({},this.workerOptions),l=this._data;"string"==typeof l?(f.request=this.map._requestManager.transformRequest(p.exported.resolveURL(l),p.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(d,_)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new p.ErrorEvent(d));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(v.resourceTiming=_.resourceTiming[this.id]),this.fire(new p.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,l){const d=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(d,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,v)=>(delete f.request,f.unloadVectorData(),f.aborted?l(null):_?l(_):(f.loadVectorData(v,this.map.painter,"reloadTile"===d),l(null))),void 0,"loadTile"===d)}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return p.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends hn{constructor(f,l,d,_){super(f,l,d,_),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const l of f.urls)this.urls.push(this.map._requestManager.transformRequest(l,p.ResourceType.Source).url);p.getVideo(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new p.ErrorEvent(l)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const l=this.video.seekable;f<l.start(0)||f>l.end(0)?this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const f=this.map.painter.context,l=f.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new p.Texture(f,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:hn,canvas:class extends hn{constructor(f,l,d,_){super(f,l,d,_),l.coordinates?Array.isArray(l.coordinates)&&4===l.coordinates.length&&!l.coordinates.some(v=>!Array.isArray(v)||2!==v.length||v.some(w=>"number"!=typeof w))||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),l.animate&&"boolean"!=typeof l.animate&&this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),l.canvas?"string"==typeof l.canvas||l.canvas instanceof p.window.HTMLCanvasElement||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=l,this.animate=void 0===l.animate||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof p.window.HTMLCanvasElement?this.options.canvas:p.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new p.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const l=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends p.Evented{constructor(f,l,d,_){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=l,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new p.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new p.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new cs(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),p.extend(this,p.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return p.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:l,y:d,z:_}=f.canonical;return this._implementation.hasTile({x:l,y:d,z:_})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,l){const{x:d,y:_,z:v}=f.tileID.canonical,w=new p.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:d,y:_,z:v},{signal:w.signal})).then(function(T){return delete f.request,f.aborted?(f.state="unloaded",l(null)):void 0===T?(f.state="errored",l(null)):null===T?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",l(null)):(D=T)instanceof p.window.ImageData||D instanceof p.window.HTMLCanvasElement||D instanceof p.window.ImageBitmap||D instanceof p.window.HTMLImageElement?(this.loadTileData(f,T),f.state="loaded",void l(null)):(f.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var D}.bind(this)).catch(T=>{20!==T.code&&(f.state="errored",l(T))}),f.request.cancel=()=>w.abort()}loadTileData(f,l){ct.loadTileData(f,l,this._map.painter)}unloadTileData(f){ct.unloadTileData(f,this._map.painter)}unloadTile(f,l){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:d,y:_,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:d,y:_,z:v})}l()}abortTile(f,l){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}}},yn=function(f,l,d,_){const v=new Ft[l.type](f,l,d,_);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return p.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Tn(f,l){const d=p.identity([]);return p.scale(d,d,[.5*f.width,.5*-f.height,1]),p.translate(d,d,[1,-1,0]),p.multiply(d,d,f.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(d)}function Ei(f,l,d,_,v,w,T,D=!1){const S=f.tilesIn(_,T,D);S.sort(Ro);const N=[];for(const B of S)N.push({wrappedTileID:B.tile.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(l,d,f._state,B,v,w,Tn(f.transform,B.tile.tileID),D)});const R=function(B){const H={},X={};for(const Y of B){const K=Y.queryResults,te=Y.wrappedTileID,z=X[te]=X[te]||{};for(const Z in K){const ie=K[Z],ne=z[Z]=z[Z]||{},fe=H[Z]=H[Z]||[];for(const me of ie)ne[me.featureIndex]||(ne[me.featureIndex]=!0,fe.push(me))}}return H}(N);for(const B in R)R[B].forEach(H=>{const X=H.feature,Y=X.layer;Y&&"background"!==Y.type&&"sky"!==Y.type&&(X.source=Y.source,Y["source-layer"]&&(X.sourceLayer=Y["source-layer"]),X.state=void 0!==X.id?f.getFeatureState(Y["source-layer"],X.id):{})});return R}function Qi(f,l){const d=f.getRenderableIds().map(w=>f.getTileByID(w)),_=[],v={};for(let w=0;w<d.length;w++){const T=d[w],D=T.tileID.canonical.key;v[D]||(v[D]=!0,T.querySourceFeatures(_,l))}return _}function Ro(f,l){const d=f.tileID,_=l.tileID;return d.overscaledZ-_.overscaledZ||d.canonical.y-_.canonical.y||d.wrap-_.wrap||d.canonical.x-_.canonical.x}function co(){return null!=Rr.workerClass?new Rr.workerClass:new p.window.Worker(Rr.workerUrl)}const Qs="mapboxgl_preloaded_worker_pool";class Ti{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Ti.workerCount;)this.workers.push(new co);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],0===this.numActive()&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Qs]}numActive(){return Object.keys(this.active).length}}let lr;function ki(){return lr||(lr=new Ti),lr}function bc(f,l){const d={};for(const _ in f)"ref"!==_&&(d[_]=f[_]);return p.refProperties.forEach(_=>{_ in l&&(d[_]=l[_])}),d}function Gr(f){f=f.slice();const l=Object.create(null);for(let d=0;d<f.length;d++)l[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=bc(f[d],l[f[d].ref]));return f}Ti.workerCount=2;const qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Dh(f,l,d){d.push({command:qn.addSource,args:[f,l[f]]})}function wc(f,l,d){l.push({command:qn.removeSource,args:[f]}),d[f]=!0}function au(f,l,d,_){wc(f,d,_),Dh(f,l,d)}function Ll(f,l,d){let _;for(_ in f[d])if(f[d].hasOwnProperty(_)&&"data"!==_&&!Xe(f[d][_],l[d][_]))return!1;for(_ in l[d])if(l[d].hasOwnProperty(_)&&"data"!==_&&!Xe(f[d][_],l[d][_]))return!1;return!0}function Er(f,l,d,_,v,w){let T;for(T in l=l||{},f=f||{})f.hasOwnProperty(T)&&(Xe(f[T],l[T])||d.push({command:w,args:[_,T,l[T],v]}));for(T in l)l.hasOwnProperty(T)&&!f.hasOwnProperty(T)&&(Xe(f[T],l[T])||d.push({command:w,args:[_,T,l[T],v]}))}function Ea(f){return f.id}function id(f,l){return f[l.id]=l,f}class od{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(1===this.points.length)return this.points[0];l=p.clamp(l,0,1);let d=1,_=this._distances[d];const v=l*this.paddedLength+this.padding;for(;_<v&&d<this._distances.length;)_=this._distances[++d];const w=d-1,T=this._distances[w],D=_-T,S=D>0?(v-T)/D:0;return this.points[w].mult(1-S).add(this.points[d].mult(S))}}class Bl{constructor(l,d,_){const v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(d/_);for(let T=0;T<this.xCellCount*this.yCellCount;T++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,_,v,w){this._forEachCell(d,_,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(l,d,_,v){this._forEachCell(d-v,_-v,d+v,_+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(_),this.circles.push(v)}_insertBoxCell(l,d,_,v,w,T){this.boxCells[w].push(T)}_insertCircleCell(l,d,_,v,w,T){this.circleCells[w].push(T)}_query(l,d,_,v,w,T){if(_<0||l>this.width||v<0||d>this.height)return!w&&[];const D=[];if(l<=0&&d<=0&&this.width<=_&&this.height<=v){if(w)return!0;for(let S=0;S<this.boxKeys.length;S++)D.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(let S=0;S<this.circleKeys.length;S++){const N=this.circles[3*S],R=this.circles[3*S+1],B=this.circles[3*S+2];D.push({key:this.circleKeys[S],x1:N-B,y1:R-B,x2:N+B,y2:R+B})}return T?D.filter(T):D}return this._forEachCell(l,d,_,v,this._queryCell,D,{hitTest:w,seenUids:{box:{},circle:{}}},T),w?D.length>0:D}_queryCircle(l,d,_,v,w){const T=l-_,D=l+_,S=d-_,N=d+_;if(D<0||T>this.width||N<0||S>this.height)return!v&&[];const R=[];return this._forEachCell(T,S,D,N,this._queryCellCircle,R,{hitTest:v,circle:{x:l,y:d,radius:_},seenUids:{box:{},circle:{}}},w),v?R.length>0:R}query(l,d,_,v,w){return this._query(l,d,_,v,!1,w)}hitTest(l,d,_,v,w){return this._query(l,d,_,v,!0,w)}hitTestCircle(l,d,_,v){return this._queryCircle(l,d,_,!0,v)}_queryCell(l,d,_,v,w,T,D,S){const N=D.seenUids,R=this.boxCells[w];if(null!==R){const H=this.bboxes;for(const X of R)if(!N.box[X]){N.box[X]=!0;const Y=4*X;if(l<=H[Y+2]&&d<=H[Y+3]&&_>=H[Y+0]&&v>=H[Y+1]&&(!S||S(this.boxKeys[X]))){if(D.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[X],x1:H[Y],y1:H[Y+1],x2:H[Y+2],y2:H[Y+3]})}}}const B=this.circleCells[w];if(null!==B){const H=this.circles;for(const X of B)if(!N.circle[X]){N.circle[X]=!0;const Y=3*X;if(this._circleAndRectCollide(H[Y],H[Y+1],H[Y+2],l,d,_,v)&&(!S||S(this.circleKeys[X]))){if(D.hitTest)return T.push(!0),!0;{const K=H[Y],te=H[Y+1],z=H[Y+2];T.push({key:this.circleKeys[X],x1:K-z,y1:te-z,x2:K+z,y2:te+z})}}}}}_queryCellCircle(l,d,_,v,w,T,D,S){const N=D.circle,R=D.seenUids,B=this.boxCells[w];if(null!==B){const X=this.bboxes;for(const Y of B)if(!R.box[Y]){R.box[Y]=!0;const K=4*Y;if(this._circleAndRectCollide(N.x,N.y,N.radius,X[K+0],X[K+1],X[K+2],X[K+3])&&(!S||S(this.boxKeys[Y])))return T.push(!0),!0}}const H=this.circleCells[w];if(null!==H){const X=this.circles;for(const Y of H)if(!R.circle[Y]){R.circle[Y]=!0;const K=3*Y;if(this._circlesCollide(X[K],X[K+1],X[K+2],N.x,N.y,N.radius)&&(!S||S(this.circleKeys[Y])))return T.push(!0),!0}}}_forEachCell(l,d,_,v,w,T,D,S){const N=this._convertToXCellCoord(l),R=this._convertToYCellCoord(d),B=this._convertToXCellCoord(_),H=this._convertToYCellCoord(v);for(let X=N;X<=B;X++)for(let Y=R;Y<=H;Y++)if(w.call(this,l,d,_,v,this.xCellCount*Y+X,T,D,S))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,_,v,w,T){const D=v-l,S=w-d,N=_+T;return N*N>D*D+S*S}_circleAndRectCollide(l,d,_,v,w,T,D){const S=(T-v)/2,N=Math.abs(l-(v+S));if(N>S+_)return!1;const R=(D-w)/2,B=Math.abs(d-(w+R));if(B>R+_)return!1;if(N<=S||B<=R)return!0;const H=N-S,X=B-R;return H*H+X*X<=_*_}}const Sa={unknown:0,flipRequired:1,flipNotRequired:2},lu=Math.tan(85*Math.PI/180);function $e(f,l,d,_,v,w,T){const D=p.create();if(d)if("globe"===w.name){const S=p.calculateGlobeLabelMatrix(v,l);p.multiply(D,D,S)}else{const S=ft([],T);D[0]=S[0],D[1]=S[1],D[4]=S[2],D[5]=S[3],_||p.rotateZ(D,D,v.angle)}else p.multiply(D,v.labelPlaneMatrix,f);return D}function ea(f,l,d,_,v,w,T){const D=$e(f,l,d,_,v,w,T);return"globe"===w.name&&d||(D[2]=D[6]=D[10]=D[14]=0),D}function eo(f,l,d,_,v,w,T){if(d){if("globe"===w.name){const D=$e(f,l,d,_,v,w,T);return p.invert(D,D),p.multiply(D,f,D),D}{const D=p.clone(f),S=p.identity([]);return S[0]=T[0],S[1]=T[1],S[4]=T[2],S[5]=T[3],p.multiply(D,D,S),_||p.rotateZ(D,D,-v.angle),D}}return v.glCoordMatrix}function xo(f,l,d,_){const v=[f,l,d,1];d?p.transformMat4$1(v,v,_):mt(v,v,_);const w=v[3];return v[0]/=w,v[1]/=w,v[2]/=w,v}function to(f,l){return Math.min(.5+f/l*.5,1.5)}function Ts(f,l){const d=f[0]/f[3],_=f[1]/f[3];return d>=-l[0]&&d<=l[0]&&_>=-l[1]&&_<=l[1]}function Ph(f,l,d,_,v,w,T,D,S,N){const R=d.transform,B=_?f.textSizeData:f.iconSizeData,H=p.evaluateSizeForZoom(B,d.transform.zoom),X="globe"===R.projection.name,Y=[256/d.width*2+1,256/d.height*2+1],K=_?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;K.clear();let te=null;X&&(te=_?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const z=f.lineVertexArray,Z=_?f.text.placedSymbolArray:f.icon.placedSymbolArray,ie=d.transform.width/d.transform.height;let ne,fe=!1;for(let me=0;me<Z.length;me++){const ge=Z.get(me),{numGlyphs:Me,writingMode:Ce}=ge;if(Ce!==p.WritingMode.vertical||fe||ne===p.WritingMode.horizontal||(fe=!0),ne=Ce,(ge.hidden||Ce===p.WritingMode.vertical)&&!fe){Ht(Me,K);continue}fe=!1;const Re=new p.Point(ge.tileAnchorX,ge.tileAnchorY);let{x:ot,y:Se,z:He}=R.projection.projectTilePoint(Re.x,Re.y,N.canonical);if(S){const[Xt,Et,jt]=S(Re);ot+=Xt,Se+=Et,He+=jt}const Le=[ot,Se,He,1];if(p.transformMat4$1(Le,Le,l),!Ts(Le,Y)){Ht(Me,K);continue}const rt=to(d.transform.cameraToCenterDistance,Le[3]),ke=p.evaluateSizeForFeature(B,H,ge),Ge=T?ke/rt:ke*rt,st=xo(ot,Se,He,v);if(st[3]<=0){Ht(Me,K);continue}let Qe={};const ut=T?null:S,Rt=bt(ge,Ge,!1,D,l,v,w,f.glyphOffsetArray,z,K,te,st,Re,Qe,ie,ut,R.projection,N,T);fe=Rt.useVertical,ut&&Rt.needsFlipping&&(Qe={}),(Rt.notEnoughRoom||fe||Rt.needsFlipping&&bt(ge,Ge,!0,D,l,v,w,f.glyphOffsetArray,z,K,te,st,Re,Qe,ie,ut,R.projection,N,T).notEnoughRoom)&&Ht(Me,K)}_?(f.text.dynamicLayoutVertexBuffer.updateData(K),te&&f.text.globeExtVertexBuffer.updateData(te)):(f.icon.dynamicLayoutVertexBuffer.updateData(K),te&&f.icon.globeExtVertexBuffer.updateData(te))}function rd(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K){const{lineStartIndex:te,glyphStartIndex:z,segment:Z}=D,ie=z+D.numGlyphs,ne=te+D.lineLength,fe=l.getoffsetX(z),me=l.getoffsetX(ie-1),ge=Hr(f*fe,d,_,v,w,T,Z,te,ne,S,N,R,B,H,!0,X,Y,K);if(!ge)return null;const Me=Hr(f*me,d,_,v,w,T,Z,te,ne,S,N,R,B,H,!0,X,Y,K);return Me?{first:ge,last:Me}:null}function Kn(f,l,d,_){return f===p.WritingMode.horizontal&&Math.abs(_)>Math.abs(d)?{useVertical:!0}:f===p.WritingMode.vertical?_>0?{needsFlipping:!0}:null:l!==Sa.unknown&&(0===(v=d)||Math.abs(_/v)>lu)?l===Sa.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null;var v}function bt(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K,te,z,Z){const ie=l/24,ne=f.lineOffsetX*ie,fe=f.lineOffsetY*ie,{lineStartIndex:me,glyphStartIndex:ge,numGlyphs:Me,segment:Ce,writingMode:Re,flipState:ot}=f,Se=me+f.lineLength,He=Le=>{if(R){const[st,Qe,ut]=Le.up,Rt=N.length;p.updateGlobeVertexNormal(R,Rt+0,st,Qe,ut),p.updateGlobeVertexNormal(R,Rt+1,st,Qe,ut),p.updateGlobeVertexNormal(R,Rt+2,st,Qe,ut),p.updateGlobeVertexNormal(R,Rt+3,st,Qe,ut)}const[rt,ke,Ge]=Le.point;p.addDynamicAttributes(N,rt,ke,Ge,Le.angle)};if(Me>1){const Le=rd(ie,D,ne,fe,d,B,H,f,S,w,X,K,!1,te,z,Z);if(!Le)return{notEnoughRoom:!0};if(_&&!d){let[rt,ke,Ge]=Le.first.point,[st,Qe,ut]=Le.last.point;[rt,ke]=xo(rt,ke,Ge,T),[st,Qe]=xo(st,Qe,ut,T);const Rt=Kn(Re,ot,(st-rt)*Y,Qe-ke);if(f.flipState=Rt&&Rt.needsFlipping?Sa.flipRequired:Sa.flipNotRequired,Rt)return Rt}He(Le.first);for(let rt=ge+1;rt<ge+Me-1;rt++){const ke=Hr(ie*D.getoffsetX(rt),ne,fe,d,B,H,Ce,me,Se,S,w,X,K,!1,!1,te,z,Z);if(!ke)return N.length-=4*(rt-ge),{notEnoughRoom:!0};He(ke)}He(Le.last)}else{if(_&&!d){const rt=xo(H.x,H.y,0,v),ke=me+Ce+1,Ge=new p.Point(S.getx(ke),S.gety(ke)),st=xo(Ge.x,Ge.y,0,v),Qe=st[3]>0?st:pn(H,Ge,rt,1,v,void 0,te,z.canonical),ut=Kn(Re,ot,(Qe[0]-rt[0])*Y,Qe[1]-rt[1]);if(f.flipState=ut&&ut.needsFlipping?Sa.flipRequired:Sa.flipNotRequired,ut)return ut}const Le=Hr(ie*D.getoffsetX(ge),ne,fe,d,B,H,Ce,me,Se,S,w,X,K,!1,!1,te,z,Z);if(!Le)return{notEnoughRoom:!0};He(Le)}return{}}function Lt(f,l,d,_,v){const{x:w,y:T,z:D}=_.projectTilePoint(f.x,f.y,l);if(!v)return xo(w,T,D,d);const[S,N,R]=v(f);return xo(w+S,T+N,D+R,d)}function pn(f,l,d,_,v,w,T,D){const S=Lt(f.sub(l)._unit()._add(f),D,v,T,w);return p.sub(S,d,S),p.normalize(S,S),p.scaleAndAdd(S,d,S,_)}function Hr(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K,te,z){const Z=_?f-l:f+l;let ie=Z>0?1:-1,ne=0;_&&(ie*=-1,ne=Math.PI),ie<0&&(ne+=Math.PI);let fe=D+T+(ie>0?0:1)|0,me=v,ge=v,Me=0,Ce=0;const Re=Math.abs(Z),ot=[],Se=[];let He=w,Le=He;const rt=()=>pn(Le,He,ge,Re-Me+1,R,H,K,te.canonical);for(;Me+Ce<=Re;){if(fe+=ie,fe<D||fe>=S)return null;if(ge=me,Le=He,ot.push(ge),X&&Se.push(Le),He=new p.Point(N.getx(fe),N.gety(fe)),me=B[fe],!me){const jt=Lt(He,te.canonical,R,K,H);me=jt[3]>0?B[fe]=jt:rt()}Me+=Ce,Ce=p.distance(ge,me)}Y&&H&&(B[fe]&&(me=rt(),Ce=p.distance(ge,me)),B[fe]=me);const ke=(Re-Me)/Ce,Ge=He.sub(Le)._mult(ke)._add(Le),st=p.sub([],me,ge),Qe=p.scaleAndAdd([],ge,st,ke);let ut=[0,0,1],Rt=st[0],Xt=st[1];if(z&&(ut=K.upVector(te.canonical,Ge.x,Ge.y),0!==ut[0]||0!==ut[1]||1!==ut[2])){const jt=[ut[2],0,-ut[0]],Mn=p.cross([],ut,jt);p.normalize(jt,jt),p.normalize(Mn,Mn),Rt=p.dot(st,jt),Xt=p.dot(st,Mn)}if(d){const jt=p.cross([],ut,st);p.normalize(jt,jt),p.scaleAndAdd(Qe,Qe,jt,d*ie)}const Et=ne+Math.atan2(Xt,Rt);return ot.push(Qe),X&&Se.push(Ge),{point:Qe,angle:Et,path:ot,tilePath:Se,up:ut}}function Ht(f,l){const d=l.length,_=d+4*f;l.resize(_),l.float32.fill(-1/0,4*d,4*_)}function mt(f,l,d){const _=l[0],v=l[1];return f[0]=d[0]*_+d[4]*v+d[12],f[1]=d[1]*_+d[5]*v+d[13],f[3]=d[3]*_+d[7]*v+d[15],f}const cr=100;class zl{constructor(l,d,_=new Bl(l.width+200,l.height+200,25),v=new Bl(l.width+200,l.height+200,25)){this.transform=l,this.grid=_,this.ignoredGrid=v,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+cr,this.screenBottomBoundary=l.height+cr,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=d}placeCollisionBox(l,d,_,v,w,T,D,S){let N=_.projectedAnchorX,R=_.projectedAnchorY,B=_.projectedAnchorZ;const H=_.elevation,X=_.tileID,Y=l.getProjection();if(H&&X){const[me,ge,Me]=Y.upVector(X.canonical,_.tileAnchorX,_.tileAnchorY),Ce=Y.upVectorScale(X.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;N+=me*H*Ce,R+=ge*H*Ce,B+=Me*H*Ce}const K=this.projectAndGetPerspectiveRatio(D,N,R,B,_.tileID,"globe"===Y.name||!!H||this.transform.pitch>0,Y),te=T*K.perspectiveRatio,z=(_.x1*d+v.x-_.padding)*te+K.point.x,Z=(_.y1*d+v.y-_.padding)*te+K.point.y,ie=(_.x2*d+v.x+_.padding)*te+K.point.x,ne=(_.y2*d+v.y+_.padding)*te+K.point.y,fe=K.perspectiveRatio<=.55||K.occluded;return!this.isInsideGrid(z,Z,ie,ne)||!w&&this.grid.hitTest(z,Z,ie,ne,S)||fe?{box:[],offscreen:!1,occluded:K.occluded}:{box:[z,Z,ie,ne],offscreen:this.isOffscreen(z,Z,ie,ne),occluded:!1}}placeCollisionCircles(l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K){const te=[],z=this.transform.elevation,Z=l.getProjection(),ie=z?z.getAtTileOffsetFunc(K,this.transform.center.lat,this.transform.worldSize,Z):null,ne=new p.Point(_.tileAnchorX,_.tileAnchorY);let{x:fe,y:me,z:ge}=Z.projectTilePoint(ne.x,ne.y,K.canonical);if(ie){const[Ge,st,Qe]=ie(ne);fe+=Ge,me+=st,ge+=Qe}const Me="globe"===Z.name,Ce=this.projectAndGetPerspectiveRatio(D,fe,me,ge,K,Me||!!z||this.transform.pitch>0,Z),{perspectiveRatio:Re}=Ce,ot=(B?T/Re:T*Re)/p.ONE_EM,Se=xo(fe,me,ge,S),He=Ce.signedDistanceFromCamera>0?rd(ot,w,_.lineOffsetX*ot,_.lineOffsetY*ot,!1,Se,ne,_,v,S,{},z&&!B?ie:null,B&&!!z,Z,K,B):null;let Le=!1,rt=!1,ke=!0;if(He&&!Ce.occluded){const Ge=.5*X*Re+Y,st=new p.Point(-100,-100),Qe=new p.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new od,{first:Rt,last:Xt}=He,Et=Rt.path.length;let jt=[];for(let It=Et-1;It>=1;It--)jt.push(Rt.path[It]);for(let It=1;It<Xt.path.length;It++)jt.push(Xt.path[It]);const Mn=2.5*Ge;N&&(jt=jt.map(([It,Vn,ti],Un)=>(ie&&!Me&&(ti=ie(Un<Et-1?Rt.tilePath[Et-1-Un]:Xt.tilePath[Un-Et+2])[2]),xo(It,Vn,ti,N))),jt.some(It=>It[3]<=0)&&(jt=[]));let bn=[];if(jt.length>0){let It=1/0,Vn=-1/0,ti=1/0,Un=-1/0;for(const ni of jt)It=Math.min(It,ni[0]),ti=Math.min(ti,ni[1]),Vn=Math.max(Vn,ni[0]),Un=Math.max(Un,ni[1]);Vn>=st.x&&It<=Qe.x&&Un>=st.y&&ti<=Qe.y&&(bn=[jt.map(ni=>new p.Point(ni[0],ni[1]))],(It<st.x||Vn>Qe.x||ti<st.y||Un>Qe.y)&&(bn=p.clipLine(bn,st.x,st.y,Qe.x,Qe.y)))}for(const It of bn){ut.reset(It,.25*Ge);let Vn=0;Vn=ut.length<=.5*Ge?1:Math.ceil(ut.paddedLength/Mn)+1;for(let ti=0;ti<Vn;ti++){const Un=ti/Math.max(Vn-1,1),ni=ut.lerp(Un),Lo=ni.x+cr,no=ni.y+cr;te.push(Lo,no,Ge,0);const fs=Lo-Ge,Kr=no-Ge,mi=Lo+Ge,Xn=no+Ge;if(ke=ke&&this.isOffscreen(fs,Kr,mi,Xn),rt=rt||this.isInsideGrid(fs,Kr,mi,Xn),!d&&this.grid.hitTestCircle(Lo,no,Ge,H)&&(Le=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Le,occluded:!1}}}}return{circles:!R&&Le||!rt?[]:te,offscreen:ke,collisionDetected:Le,occluded:Ce.occluded}}queryRenderedSymbols(l){if(0===l.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const d=[];let _=1/0,v=1/0,w=-1/0,T=-1/0;for(const R of l){const B=new p.Point(R.x+cr,R.y+cr);_=Math.min(_,B.x),v=Math.min(v,B.y),w=Math.max(w,B.x),T=Math.max(T,B.y),d.push(B)}const D=this.grid.query(_,v,w,T).concat(this.ignoredGrid.query(_,v,w,T)),S={},N={};for(const R of D){const B=R.key;if(void 0===S[B.bucketInstanceId]&&(S[B.bucketInstanceId]={}),S[B.bucketInstanceId][B.featureIndex])continue;const H=[new p.Point(R.x1,R.y1),new p.Point(R.x2,R.y1),new p.Point(R.x2,R.y2),new p.Point(R.x1,R.y2)];p.polygonIntersectsPolygon(d,H)&&(S[B.bucketInstanceId][B.featureIndex]=!0,void 0===N[B.bucketInstanceId]&&(N[B.bucketInstanceId]=[]),N[B.bucketInstanceId].push(B.featureIndex))}return N}insertCollisionBox(l,d,_,v,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:v,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,_,v,w){const T=d?this.ignoredGrid:this.grid,D={bucketInstanceId:_,featureIndex:v,collisionGroupID:w};for(let S=0;S<l.length;S+=4)T.insertCircle(D,l[S],l[S+1],l[S+2])}projectAndGetPerspectiveRatio(l,d,_,v,w,T,D){const S=[d,_,v,1];let N=!1;v||this.transform.pitch>0?(p.transformMat4$1(S,S,l),this.fogState&&w&&"globe"!==D.name&&(N=function(H,X,Y,K,te,z){const Z=z.calculateFogTileMatrix(te),ie=[X,Y,K];return p.transformMat4(ie,ie,Z),Ma(H,ie,z.pitch,z._fov)}(this.fogState,d,_,v,w.toUnwrapped(),this.transform)>.9)):mt(S,S,l);const R=S[3];return{point:new p.Point((S[0]/R+1)/2*this.transform.width+cr,(-S[1]/R+1)/2*this.transform.height+cr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/R*.5,1.5),signedDistanceFromCamera:R,occluded:T&&S[2]>R||N}}isOffscreen(l,d,_,v){return _<cr||l>=this.screenRightBoundary||v<cr||d>this.screenBottomBoundary}isInsideGrid(l,d,_,v){return _>=0&&l<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=p.identity([]);return p.translate(l,l,[-100,-100,0]),l}}function Cc(f,l,d){const _=l.createTileMatrix(f,f.worldSize,d.toUnwrapped());return p.multiply(new Float32Array(16),f.projMatrix,_)}function Wr(f,l,d){if(l.projection.name===d.projection.name)return f.projMatrix;const _=d.clone();return _.setProjection(l.projection),Cc(_,l.getProjection(),f)}function tt(f,l,d){return l.name===d.projection.name?f.projMatrix:Cc(d,l,f)}class cu{constructor(l,d,_,v){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):v&&_?1:0,this.placed=_}isHidden(){return 0===this.opacity&&!this.placed}}class Jt{constructor(l,d,_,v,w,T=!1){this.text=new cu(l?l.text:null,d,_,w),this.icon=new cu(l?l.icon:null,d,v,w),this.clipped=T}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bn{constructor(l,d,_,v=!1){this.text=l,this.icon=d,this.skipFade=_,this.clipped=v}}class uu{constructor(){this.invProjMatrix=p.create(),this.viewportMatrix=p.create(),this.circles=[]}}class Qp{constructor(l,d,_,v,w){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=_,this.bucketIndex=v,this.tileID=w}}class ef{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:_=>_.collisionGroupID===d}}return this.collisionGroups[l]}}function ll(f,l,d,_,v){const{horizontalAlign:w,verticalAlign:T}=p.getAnchorAlignment(f),D=-(w-.5)*l,S=-(T-.5)*d,N=p.evaluateVariableOffset(f,_);return new p.Point(D+N[0]*v,S+N[1]*v)}function No(f,l,d,_,v){const w=new p.Point(f,l);return d&&w._rotate(_?v:-v),w}class Eh{constructor(l,d,_,v,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new zl(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ef(_),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,_,v){const w=_.getBucket(d),T=_.latestFeatureIndex;if(!w||!T||d.id!==w.layerIds[0])return;const D=w.layers[0].layout,S=_.collisionBoxArray,N=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),R=_.tileSize/p.EXTENT,B=_.tileID.toUnwrapped();this.transform.setProjection(w.projection);const H=(X=_.tileID,Y=w.getProjection(),K=this.transform,Y.name===this.projection?K.calculateProjMatrix(X.toUnwrapped()):Cc(K,Y,X));var X,Y,K;const te="map"===D.get("text-pitch-alignment"),z="map"===D.get("text-rotation-alignment");d.compileFilter();const Z=d.dynamicFilter(),ie=d.dynamicFilterNeedsFeature(),ne=this.transform.calculatePixelsToTileUnitsMatrix(_),fe=ea(H,_.tileID.canonical,te,z,this.transform,w.getProjection(),ne);let me=null;if(te){const Ce=eo(H,_.tileID.canonical,te,z,this.transform,w.getProjection(),ne);me=p.multiply([],this.transform.labelPlaneMatrix,Ce)}let ge=null;Z&&_.latestFeatureIndex&&(ge={unwrappedTileID:B,dynamicFilter:Z,dynamicFilterNeedsFeature:ie,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Qp(w.bucketInstanceId,T,w.sourceLayerIndex,w.index,_.tileID);const Me={bucket:w,layout:D,posMatrix:H,textLabelPlaneMatrix:fe,labelToScreenMatrix:me,clippingData:ge,scale:N,textPixelRatio:R,holdingForFade:_.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:p.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:p.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(const Ce of w.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:ot,symbolInstanceEnd:Se}=Ce;l.push({sortKey:Re,symbolInstanceStart:ot,symbolInstanceEnd:Se,parameters:Me})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K,te,z,Z){const{textOffset0:ie,textOffset1:ne,crossTileID:fe}=H,me=[ie,ne],ge=ll(l,_,v,me,w),Me=this.collisionIndex.placeCollisionBox(Y,w,d,No(ge.x,ge.y,T,D,this.transform.angle),B,S,N,R.predicate);if(te){const Ce=Y.getSymbolInstanceIconSize(Z,this.transform.zoom,H.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(Y,Ce,te,No(ge.x,ge.y,T,D,this.transform.angle),B,S,N,R.predicate).box.length)return}if(Me.box.length>0){let Ce;return this.prevPlacement&&this.prevPlacement.variableOffsets[fe]&&this.prevPlacement.placements[fe]&&this.prevPlacement.placements[fe].text&&(Ce=this.prevPlacement.variableOffsets[fe].anchor),this.variableOffsets[fe]={textOffset:me,width:_,height:v,anchor:l,textScale:w,prevAnchor:Ce},this.markUsedJustification(Y,l,H,K),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,K,H),this.placedOrientations[fe]=K),{shift:ge,placedGlyphBoxes:Me}}}placeLayerBucketPart(l,d,_,v){const{bucket:w,layout:T,posMatrix:D,textLabelPlaneMatrix:S,labelToScreenMatrix:N,clippingData:R,textPixelRatio:B,holdingForFade:H,collisionBoxArray:X,partiallyEvaluatedTextSize:Y,partiallyEvaluatedIconSize:K,collisionGroup:te}=l.parameters,z=T.get("text-optional"),Z=T.get("icon-optional"),ie=T.get("text-allow-overlap"),ne=T.get("icon-allow-overlap"),fe="map"===T.get("text-rotation-alignment"),me="map"===T.get("text-pitch-alignment"),ge="none"!==T.get("icon-text-fit"),Me="viewport-y"===T.get("symbol-z-order");this.transform.setProjection(w.projection);let Ce=ie&&(ne||!w.hasIconData()||Z),Re=ne&&(ie||!w.hasTextData()||z);!w.collisionArrays&&X&&w.deserializeCollisionBoxes(X),_&&v&&w.updateCollisionDebugBuffers(this.transform.zoom,X);const ot=(Se,He,Le)=>{const{crossTileID:rt,numVerticalGlyphVertices:ke}=Se;if(R){const mi={zoom:this.transform.zoom,pitch:this.transform.pitch};let Xn=null;if(R.dynamicFilterNeedsFeature){const jn=this.retainedQueryData[w.bucketInstanceId];Xn=R.featureIndex.loadFeature({featureIndex:Se.featureIndex,bucketIndex:jn.bucketIndex,sourceLayerIndex:jn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,R.dynamicFilter)(mi,Xn,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new p.Point(Se.tileAnchorX,Se.tileAnchorY),this.transform.calculateDistanceTileData(R.unwrappedTileID)))return this.placements[rt]=new Bn(!1,!1,!1,!0),void d.add(rt)}if(d.has(rt))return;if(H)return void(this.placements[rt]=new Bn(!1,!1,!1));let Ge=!1,st=!1,Qe=!0,ut=!1,Rt=!1,Xt=null,Et={box:null,offscreen:null,occluded:null},jt={box:null,offscreen:null,occluded:null},Mn=null,bn=null,It=null,Vn=0,ti=0,Un=0;Le.textFeatureIndex?Vn=Le.textFeatureIndex:Se.useRuntimeCollisionCircles&&(Vn=Se.featureIndex),Le.verticalTextFeatureIndex&&(ti=Le.verticalTextFeatureIndex);const ni=mi=>{mi.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const Xn=this.transform.elevation;(Xn||mi.elevation)&&(mi.elevation=Xn?Xn.getAtTileOffset(mi.tileID,mi.tileAnchorX,mi.tileAnchorY):0)},Lo=Le.textBox;if(Lo){ni(Lo);const mi=jn=>{let qi=p.WritingMode.horizontal;if(w.allowVerticalPlacement&&!jn&&this.prevPlacement){const Yo=this.prevPlacement.placedOrientations[rt];Yo&&(this.placedOrientations[rt]=Yo,qi=Yo,this.markUsedOrientation(w,qi,Se))}return qi},Xn=(jn,qi)=>{if(w.allowVerticalPlacement&&ke>0&&Le.verticalTextBox){for(const Yo of w.writingModes)if(Yo===p.WritingMode.vertical?(Et=qi(),jt=Et):Et=jn(),Et&&Et.box&&Et.box.length)break}else Et=jn()};if(T.get("text-variable-anchor")){let jn=T.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[rt]){const Mi=this.prevPlacement.variableOffsets[rt];jn.indexOf(Mi.anchor)>0&&(jn=jn.filter(ji=>ji!==Mi.anchor),jn.unshift(Mi.anchor))}const qi=(Mi,ji,Sd)=>{const ca=w.getSymbolInstanceTextSize(Y,Se,this.transform.zoom,He),Jl=(Mi.x2-Mi.x1)*ca+2*Mi.padding,ua=(Mi.y2-Mi.y1)*ca+2*Mi.padding,da=ge&&!ne?ji:null;da&&ni(da);let Fa={box:[],offscreen:!1,occluded:!1};const Ad=ie?2*jn.length:jn.length;for(let zc=0;zc<Ad;++zc){const Id=this.attemptAnchorPlacement(jn[zc%jn.length],Mi,Jl,ua,ca,fe,me,B,D,te,zc>=jn.length,Se,He,w,Sd,da,Y,K);if(Id&&(Fa=Id.placedGlyphBoxes,Fa&&Fa.box&&Fa.box.length)){Ge=!0,Xt=Id.shift;break}}return Fa};Xn(()=>qi(Lo,Le.iconBox,p.WritingMode.horizontal),()=>{const Mi=Le.verticalTextBox;return Mi&&ni(Mi),w.allowVerticalPlacement&&!(Et&&Et.box&&Et.box.length)&&ke>0&&Mi?qi(Mi,Le.verticalIconBox,p.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Et&&(Ge=Et.box,Qe=Et.offscreen,ut=Et.occluded);const Yo=mi(!(!Et||!Et.box));if(!Ge&&this.prevPlacement){const Mi=this.prevPlacement.variableOffsets[rt];Mi&&(this.variableOffsets[rt]=Mi,this.markUsedJustification(w,Mi.anchor,Se,Yo))}}else{const jn=(qi,Yo)=>{const Mi=w.getSymbolInstanceTextSize(Y,Se,this.transform.zoom,He),ji=this.collisionIndex.placeCollisionBox(w,Mi,qi,new p.Point(0,0),ie,B,D,te.predicate);return ji&&ji.box&&ji.box.length&&(this.markUsedOrientation(w,Yo,Se),this.placedOrientations[rt]=Yo),ji};Xn(()=>jn(Lo,p.WritingMode.horizontal),()=>{const qi=Le.verticalTextBox;return w.allowVerticalPlacement&&ke>0&&qi?(ni(qi),jn(qi,p.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),mi(!!(Et&&Et.box&&Et.box.length))}}if(Mn=Et,Ge=Mn&&Mn.box&&Mn.box.length>0,Qe=Mn&&Mn.offscreen,ut=Mn&&Mn.occluded,Se.useRuntimeCollisionCircles){const mi=w.text.placedSymbolArray.get(Se.centerJustifiedTextSymbolIndex>=0?Se.centerJustifiedTextSymbolIndex:Se.verticalPlacedTextSymbolIndex),Xn=p.evaluateSizeForFeature(w.textSizeData,Y,mi),jn=T.get("text-padding");bn=this.collisionIndex.placeCollisionCircles(w,ie,mi,w.lineVertexArray,w.glyphOffsetArray,Xn,D,S,N,_,me,te.predicate,Se.collisionCircleDiameter*Xn/p.ONE_EM,jn,this.retainedQueryData[w.bucketInstanceId].tileID),Ge=ie||bn.circles.length>0&&!bn.collisionDetected,Qe=Qe&&bn.offscreen,ut=bn.occluded}if(Le.iconFeatureIndex&&(Un=Le.iconFeatureIndex),Le.iconBox){const mi=Xn=>{ni(Xn);const jn=ge&&Xt?No(Xt.x,Xt.y,fe,me,this.transform.angle):new p.Point(0,0),qi=w.getSymbolInstanceIconSize(K,this.transform.zoom,Se.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,qi,Xn,jn,ne,B,D,te.predicate)};jt&&jt.box&&jt.box.length&&Le.verticalIconBox?(It=mi(Le.verticalIconBox),st=It.box.length>0):(It=mi(Le.iconBox),st=It.box.length>0),Qe=Qe&&It.offscreen,Rt=It.occluded}const no=z||0===Se.numHorizontalGlyphVertices&&0===ke,fs=Z||0===Se.numIconVertices;if(no||fs?fs?no||(st=st&&Ge):Ge=st&&Ge:st=Ge=st&&Ge,Ge&&Mn&&Mn.box&&this.collisionIndex.insertCollisionBox(Mn.box,T.get("text-ignore-placement"),w.bucketInstanceId,jt&&jt.box&&ti?ti:Vn,te.ID),st&&It&&this.collisionIndex.insertCollisionBox(It.box,T.get("icon-ignore-placement"),w.bucketInstanceId,Un,te.ID),bn&&(Ge&&this.collisionIndex.insertCollisionCircles(bn.circles,T.get("text-ignore-placement"),w.bucketInstanceId,Vn,te.ID),_)){const mi=w.bucketInstanceId;let Xn=this.collisionCircleArrays[mi];void 0===Xn&&(Xn=this.collisionCircleArrays[mi]=new uu);for(let jn=0;jn<bn.circles.length;jn+=4)Xn.circles.push(bn.circles[jn+0]),Xn.circles.push(bn.circles[jn+1]),Xn.circles.push(bn.circles[jn+2]),Xn.circles.push(bn.collisionDetected?1:0)}const Kr="globe"!==w.projection.name;Ce=Ce&&(Kr||!ut),Re=Re&&(Kr||!Rt),this.placements[rt]=new Bn(Ge||Ce,st||Re,Qe||w.justReloaded),d.add(rt)};if(Me){const Se=w.getSortedSymbolIndexes(this.transform.angle);for(let He=Se.length-1;He>=0;--He){const Le=Se[He];ot(w.symbolInstances.get(Le),Le,w.collisionArrays[Le])}}else for(let Se=l.symbolInstanceStart;Se<l.symbolInstanceEnd;Se++)ot(w.symbolInstances.get(Se),Se,w.collisionArrays[Se]);if(_&&w.bucketInstanceId in this.collisionCircleArrays){const Se=this.collisionCircleArrays[w.bucketInstanceId];p.invert(Se.invProjMatrix,D),Se.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,d,_,v){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:T,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:S,crossTileID:N}=_,R=p.getAnchorJustification(d),B=v===p.WritingMode.vertical?S:"left"===R?w:"center"===R?T:"right"===R?D:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=B>=0&&w!==B?0:N),T>=0&&(l.text.placedSymbolArray.get(T).crossTileID=B>=0&&T!==B?0:N),D>=0&&(l.text.placedSymbolArray.get(D).crossTileID=B>=0&&D!==B?0:N),S>=0&&(l.text.placedSymbolArray.get(S).crossTileID=B>=0&&S!==B?0:N)}markUsedOrientation(l,d,_){const v=d===p.WritingMode.horizontal||d===p.WritingMode.horizontalOnly?d:0,w=d===p.WritingMode.vertical?d:0,{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:S,verticalPlacedTextSymbolIndex:N}=_,R=l.text.placedSymbolArray;T>=0&&(R.get(T).placedOrientation=v),D>=0&&(R.get(D).placedOrientation=v),S>=0&&(R.get(S).placedOrientation=v),N>=0&&(R.get(N).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let _=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const v=d?d.symbolFadeChange(l):1,w=d?d.opacities:{},T=d?d.variableOffsets:{},D=d?d.placedOrientations:{};for(const S in this.placements){const N=this.placements[S],R=w[S];R?(this.opacities[S]=new Jt(R,v,N.text,N.icon,null,N.clipped),_=_||N.text!==R.text.placed||N.icon!==R.icon.placed):(this.opacities[S]=new Jt(null,v,N.text,N.icon,N.skipFade,N.clipped),_=_||N.text||N.icon)}for(const S in w){const N=w[S];if(!this.opacities[S]){const R=new Jt(N,v,!1,!1);R.isHidden()||(this.opacities[S]=R,_=_||N.text.placed||N.icon.placed)}}for(const S in T)this.variableOffsets[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.variableOffsets[S]=T[S]);for(const S in D)this.placedOrientations[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.placedOrientations[S]=D[S]);_?this.lastPlacementChangeTime=l:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d){const _=new Set;for(const v of d){const w=v.getBucket(l);w&&v.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,_,v.collisionBoxArray)}}updateBucketOpacities(l,d,_){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const v=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),T=new Jt(null,0,!1,!1,!0),D=v.get("text-allow-overlap"),S=v.get("icon-allow-overlap"),N=v.get("text-variable-anchor"),R="map"===v.get("text-rotation-alignment"),B="map"===v.get("text-pitch-alignment"),H="none"!==v.get("icon-text-fit"),X=new Jt(null,0,D&&(S||!l.hasIconData()||v.get("icon-optional")),S&&(D||!l.hasTextData()||v.get("text-optional")),!0);!l.collisionArrays&&_&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(_);const Y=(te,z,Z)=>{for(let ie=0;ie<z/4;ie++)te.opacityVertexArray.emplaceBack(Z)};let K=0;for(let te=0;te<l.symbolInstances.length;te++){const z=l.symbolInstances.get(te),{numHorizontalGlyphVertices:Z,numVerticalGlyphVertices:ie,crossTileID:ne,numIconVertices:fe}=z,me=d.has(ne);let ge=this.opacities[ne];me?ge=T:ge||(ge=X,this.opacities[ne]=ge),d.add(ne);const Me=Z>0||ie>0,Ce=fe>0,Re=this.placedOrientations[ne],ot=Re===p.WritingMode.vertical,Se=Re===p.WritingMode.horizontal||Re===p.WritingMode.horizontalOnly;if(!Me&&!Ce||ge.isHidden()||K++,Me){const He=sd(ge.text);Y(l.text,Z,ot?zi:He),Y(l.text,ie,Se?zi:He);const Le=ge.text.isHidden(),{leftJustifiedTextSymbolIndex:rt,centerJustifiedTextSymbolIndex:ke,rightJustifiedTextSymbolIndex:Ge,verticalPlacedTextSymbolIndex:st}=z,Qe=l.text.placedSymbolArray,ut=Le||ot?1:0;rt>=0&&(Qe.get(rt).hidden=ut),ke>=0&&(Qe.get(ke).hidden=ut),Ge>=0&&(Qe.get(Ge).hidden=ut),st>=0&&(Qe.get(st).hidden=Le||Se?1:0);const Rt=this.variableOffsets[ne];Rt&&this.markUsedJustification(l,Rt.anchor,z,Re);const Xt=this.placedOrientations[ne];Xt&&(this.markUsedJustification(l,"left",z,Xt),this.markUsedOrientation(l,Xt,z))}if(Ce){const He=sd(ge.icon),{placedIconSymbolIndex:Le,verticalPlacedIconSymbolIndex:rt}=z,ke=l.icon.placedSymbolArray,Ge=ge.icon.isHidden()?1:0;Le>=0&&(Y(l.icon,fe,ot?zi:He),ke.get(Le).hidden=Ge),rt>=0&&(Y(l.icon,z.numVerticalIconVertices,Se?zi:He),ke.get(rt).hidden=Ge)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const He=l.collisionArrays[te];if(He){let Le=new p.Point(0,0),rt=!0;if(He.textBox||He.verticalTextBox){if(N){const Ge=this.variableOffsets[ne];Ge?(Le=ll(Ge.anchor,Ge.width,Ge.height,Ge.textOffset,Ge.textScale),R&&Le._rotate(B?this.transform.angle:-this.transform.angle)):rt=!1}w&&(rt=!ge.clipped),He.textBox&&Mc(l.textCollisionBox.collisionVertexArray,ge.text.placed,!rt||ot,Le.x,Le.y),He.verticalTextBox&&Mc(l.textCollisionBox.collisionVertexArray,ge.text.placed,!rt||Se,Le.x,Le.y)}const ke=rt&&Boolean(!Se&&He.verticalIconBox);He.iconBox&&Mc(l.iconCollisionBox.collisionVertexArray,ge.icon.placed,ke,H?Le.x:0,H?Le.y:0),He.verticalIconBox&&Mc(l.iconCollisionBox.collisionVertexArray,ge.icon.placed,!ke,H?Le.x:0,H?Le.y:0)}}}if(l.fullyClipped=0===K,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const te=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=te.invProjMatrix,l.placementViewportMatrix=te.viewportMatrix,l.collisionCircleArray=te.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return 0===this.fadeDuration?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const _=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function Mc(f,l,d,_,v){f.emplaceBack(l?1:0,d?1:0,_||0,v||0),f.emplaceBack(l?1:0,d?1:0,_||0,v||0),f.emplaceBack(l?1:0,d?1:0,_||0,v||0),f.emplaceBack(l?1:0,d?1:0,_||0,v||0)}const qr=Math.pow(2,25),di=Math.pow(2,24),tf=Math.pow(2,17),nf=Math.pow(2,16),Zr=Math.pow(2,9),Ds=Math.pow(2,8),rf=Math.pow(2,1);function sd(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;const l=f.placed?1:0,d=Math.floor(127*f.opacity);return d*qr+l*di+d*tf+l*nf+d*Zr+l*Ds+d*rf+l}const zi=0;class ad{constructor(l){this._sortAcrossTiles="viewport-y"!==l.layout.get("symbol-z-order")&&void 0!==l.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,d,_,v,w){const T=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(T,v,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((D,S)=>D.sortKey-S.sortKey));this._currentPartIndex<T.length;){const D=T[this._currentPartIndex];if(d.placeLayerBucketPart(D,this._seenCrossTileIDs,_,0===D.symbolInstanceStart),this._currentPartIndex++,w())return!0}return!1}}class Sr{constructor(l,d,_,v,w,T,D,S){this.placement=new Eh(l,w,T,D,S),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(l,d,_){const v=p.exported.now(),w=()=>{const T=p.exported.now()-v;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=d[l[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if("symbol"===T.type&&(!T.minzoom||T.minzoom<=D)&&(!T.maxzoom||T.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new ad(T)),this._inProgressLayer.continuePlacement(_[T.source],this.placement,this._showCollisionBoxes,T,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Rn=512/p.EXTENT/2;class qo{constructor(l,d,_){this.tileID=l,this.bucketInstanceId=_,this.index=new p.KDBush(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=l.canonical.x*p.EXTENT,w=l.canonical.y*p.EXTENT;for(let T=0;T<d.length;T++){const{key:D,crossTileID:S,tileAnchorX:N,tileAnchorY:R}=d.get(T),B=Math.floor((v+N)*Rn),H=Math.floor((w+R)*Rn);this.index.add(B,H),this.keys.push(D),this.crossTileIDs.push(S)}this.index.finish()}findMatches(l,d,_){const v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),w=Rn/Math.pow(2,d.canonical.z-this.tileID.canonical.z),T=d.canonical.x*p.EXTENT,D=d.canonical.y*p.EXTENT;for(let S=0;S<l.length;S++){const N=l.get(S);if(N.crossTileID)continue;const{key:R,tileAnchorX:B,tileAnchorY:H}=N,X=Math.floor((T+B)*w),Y=Math.floor((D+H)*w),K=this.index.range(X-v,Y-v,X+v,Y+v);for(const te of K){const z=this.crossTileIDs[te];if(this.keys[te]===R&&!_.has(z)){_.add(z),N.crossTileID=z;break}}}}}class sf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class af{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(0!==d)for(const _ in this.indexes){const v=this.indexes[_],w={};for(const T in v){const D=v[T];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+d),w[D.tileID.key]=D}this.indexes[_]=w}this.lng=l}addBucket(l,d,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<d.symbolInstances.length;w++)d.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const v=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const T=this.indexes[w];if(Number(w)>l.overscaledZ)for(const D in T){const S=T[D];S.tileID.isChildOf(l)&&S.findMatches(d.symbolInstances,l,v)}else{const D=T[l.scaledTo(Number(w)).key];D&&D.findMatches(d.symbolInstances,l,v)}}for(let w=0;w<d.symbolInstances.length;w++){const T=d.symbolInstances.get(w);T.crossTileID||(T.crossTileID=_.generate(),v.add(T.crossTileID))}return void 0===this.indexes[l.overscaledZ]&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new qo(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const _ of d.crossTileIDs)this.usedCrossTileIDs[l].delete(_)}removeStaleBuckets(l){let d=!1;for(const _ in this.indexes){const v=this.indexes[_];for(const w in v)l[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,v[w]),delete v[w],d=!0)}return d}}class yt{constructor(){this.layerIndexes={},this.crossTileIDs=new sf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,_,v){let w=this.layerIndexes[l.id];void 0===w&&(w=this.layerIndexes[l.id]=new af);let T=!1;const D={};"globe"!==v.name&&w.handleWrapJump(_);for(const S of d){const N=S.getBucket(l);N&&l.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(S.tileID,N,this.crossTileIDs)&&(T=!0),D[N.bucketInstanceId]=!0)}return w.removeStaleBuckets(D)&&(T=!0),T}pruneUnusedLayers(l){const d={};l.forEach(_=>{d[_]=!0});for(const _ in this.layerIndexes)d[_]||delete this.layerIndexes[_]}}const Vl=(f,l)=>p.emitValidationErrors(f,l&&l.filter(d=>"source.canvas"!==d.identifier)),Qn=p.pick(qn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),ld=p.pick(qn,["setCenter","setZoom","setBearing","setPitch"]),Sh={version:8,layers:[],sources:{}},Ul={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ta extends p.Evented{constructor(l,d={}){super(),this.map=l,this.dispatcher=new dn(ki(),this),this.imageManager=new Ca,this.imageManager.setEventedParent(this),this.glyphManager=new p.GlyphManager(l._requestManager,d.localFontFamily?p.LocalGlyphMode.all:d.localIdeographFontFamily?p.LocalGlyphMode.ideographs:p.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.crossTileSymbolIndex=new yt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",p.getReferrer());const _=this;this._rtlTextPluginCallback=ta.registerForPluginStateChange(v=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(w,T)=>{if(p.triggerPluginCompletionEvent(w),T&&T.every(D=>D))for(const D in _._sourceCaches){const S=_._sourceCaches[D],N=S.getSource().type;"vector"!==N&&"geojson"!==N||S.reload()}})}),this.on("data",v=>{if("source"!==v.dataType||"metadata"!==v.sourceDataType)return;const w=this.getSource(v.sourceId);if(w&&w.vectorLayerIds)for(const T in this._layers){const D=this._layers[T];D.source===w.id&&this._validateLayer(D)}})}loadURL(l,d={}){this.fire(new p.Event("dataloading",{dataType:"style"}));const _="boolean"==typeof d.validate?d.validate:!p.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,d.accessToken);const v=this.map._requestManager.transformRequest(l,p.ResourceType.Style);this._request=p.getJSON(v,(w,T)=>{this._request=null,w?this.fire(new p.ErrorEvent(w)):T&&this._load(T,_)})}loadJSON(l,d={}){this.fire(new p.Event("dataloading",{dataType:"style"})),this._request=p.exported.frame(()=>{this._request=null,this._load(l,!1!==d.validate)})}loadEmpty(){this.fire(new p.Event("dataloading",{dataType:"style"})),this._load(Sh,!1)}_updateLayerCount(l,d){const _=d?1:-1;l.is3D()&&(this._num3DLayers+=_),"circle"===l.type&&(this._numCircleLayers+=_),"symbol"===l.type&&(this._numSymbolLayers+=_)}_load(l,d){if(d&&Vl(this,p.validateStyle(l)))return;this._loaded=!0,this.stylesheet=p.clone$1(l),this._updateMapProjection();for(const v in l.sources)this.addSource(v,l.sources[v],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const _=Gr(this.stylesheet.layers);this._order=_.map(v=>v.id),this._layers={},this._serializedLayers={};for(const v of _){const w=p.createStyleLayer(v);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ao(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new p.Event("data",{dataType:"style"})),this.fire(new p.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(d,_,v){let w,T,D;const S=p.exported.devicePixelRatio>1?"@2x":"";let N=p.getJSON(_.transformRequest(_.normalizeSpriteURL(d,S,".json"),p.ResourceType.SpriteJSON),(H,X)=>{N=null,D||(D=H,w=X,B())}),R=p.getImage(_.transformRequest(_.normalizeSpriteURL(d,S,".png"),p.ResourceType.SpriteImage),(H,X)=>{R=null,D||(D=H,T=X,B())});function B(){if(D)v(D);else if(w&&T){const H=p.exported.getImageData(T),X={};for(const Y in w){const{width:K,height:te,x:z,y:Z,sdf:ie,pixelRatio:ne,stretchX:fe,stretchY:me,content:ge}=w[Y],Me=new p.RGBAImage({width:K,height:te});p.RGBAImage.copy(H,Me,{x:z,y:Z},{x:0,y:0},{width:K,height:te}),X[Y]={data:Me,pixelRatio:ne,sdf:ie,stretchX:fe,stretchY:me,content:ge}}v(null,X)}}return{cancel(){N&&(N.cancel(),N=null),R&&(R.cancel(),R=null)}}}(l,this.map._requestManager,(d,_)=>{if(this._spriteRequest=null,d)this.fire(new p.ErrorEvent(d));else if(_)for(const v in _)this.imageManager.addImage(v,_[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new p.Event("data",{dataType:"style"}))})}_validateLayer(l){const d=this.getSource(l.source);if(!d)return;const _=l.sourceLayer;_&&("geojson"===d.type||d.vectorLayerIds&&-1===d.vectorLayerIds.indexOf(_))&&this.fire(new p.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${d.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const d=[];for(const _ of l){const v=this._layers[_];"custom"!==v.type&&d.push(v.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&("function"==typeof l.isLayerDraped?l.isLayerDraped():Ul[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const d=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(const T in this._updatedSources){const D=this._updatedSources[T];"reload"===D?this._reloadSource(T):"clear"===D&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const _={};for(const v in this._sourceCaches){const w=this._sourceCaches[v];_[v]=w.used,w.used=!1}for(const v of this._order){const w=this._layers[v];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const D=this._getLayerSourceCache(w);D&&(D.used=!0)}const T=this.map.painter;if(T){const D=w.getProgramIds();if(!D)continue;const S=w.getProgramConfiguration(l.zoom);for(const N of D)T.useProgram(N,S)}}for(const v in _){const w=this._sourceCaches[v];_[v]!==w.used&&w.getSource().fire(new p.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new p.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),Vl(this,p.validateStyle(l)))return!1;(l=p.clone$1(l)).layers=Gr(l.layers);const d=function(v,w){if(!v)return[{command:qn.setStyle,args:[w]}];let T=[];try{if(!Xe(v.version,w.version))return[{command:qn.setStyle,args:[w]}];Xe(v.center,w.center)||T.push({command:qn.setCenter,args:[w.center]}),Xe(v.zoom,w.zoom)||T.push({command:qn.setZoom,args:[w.zoom]}),Xe(v.bearing,w.bearing)||T.push({command:qn.setBearing,args:[w.bearing]}),Xe(v.pitch,w.pitch)||T.push({command:qn.setPitch,args:[w.pitch]}),Xe(v.sprite,w.sprite)||T.push({command:qn.setSprite,args:[w.sprite]}),Xe(v.glyphs,w.glyphs)||T.push({command:qn.setGlyphs,args:[w.glyphs]}),Xe(v.transition,w.transition)||T.push({command:qn.setTransition,args:[w.transition]}),Xe(v.light,w.light)||T.push({command:qn.setLight,args:[w.light]}),Xe(v.fog,w.fog)||T.push({command:qn.setFog,args:[w.fog]}),Xe(v.projection,w.projection)||T.push({command:qn.setProjection,args:[w.projection]});const D={},S=[];!function(B,H,X,Y){let K;for(K in H=H||{},B=B||{})B.hasOwnProperty(K)&&(H.hasOwnProperty(K)||wc(K,X,Y));for(K in H){if(!H.hasOwnProperty(K))continue;const te=H[K];B.hasOwnProperty(K)?Xe(B[K],te)||("geojson"===B[K].type&&"geojson"===te.type&&Ll(B,H,K)?X.push({command:qn.setGeoJSONSourceData,args:[K,te.data]}):au(K,H,X,Y)):Dh(K,H,X)}}(v.sources,w.sources,S,D);const N=[];v.layers&&v.layers.forEach(B=>{B.source&&D[B.source]?T.push({command:qn.removeLayer,args:[B.id]}):N.push(B)});let R=v.terrain;R&&D[R.source]&&(T.push({command:qn.setTerrain,args:[void 0]}),R=void 0),T=T.concat(S),Xe(R,w.terrain)||T.push({command:qn.setTerrain,args:[w.terrain]}),function(B,H,X){H=H||[];const Y=(B=B||[]).map(Ea),K=H.map(Ea),te=B.reduce(id,{}),z=H.reduce(id,{}),Z=Y.slice(),ie=Object.create(null);let ne,fe,me,ge,Me,Ce,Re;for(ne=0,fe=0;ne<Y.length;ne++)me=Y[ne],z.hasOwnProperty(me)?fe++:(X.push({command:qn.removeLayer,args:[me]}),Z.splice(Z.indexOf(me,fe),1));for(ne=0,fe=0;ne<K.length;ne++)me=K[K.length-1-ne],Z[Z.length-1-ne]!==me&&(te.hasOwnProperty(me)?(X.push({command:qn.removeLayer,args:[me]}),Z.splice(Z.lastIndexOf(me,Z.length-fe),1)):fe++,Ce=Z[Z.length-ne],X.push({command:qn.addLayer,args:[z[me],Ce]}),Z.splice(Z.length-ne,0,me),ie[me]=!0);for(ne=0;ne<K.length;ne++)if(me=K[ne],ge=te[me],Me=z[me],!ie[me]&&!Xe(ge,Me))if(Xe(ge.source,Me.source)&&Xe(ge["source-layer"],Me["source-layer"])&&Xe(ge.type,Me.type)){for(Re in Er(ge.layout,Me.layout,X,me,null,qn.setLayoutProperty),Er(ge.paint,Me.paint,X,me,null,qn.setPaintProperty),Xe(ge.filter,Me.filter)||X.push({command:qn.setFilter,args:[me,Me.filter]}),Xe(ge.minzoom,Me.minzoom)&&Xe(ge.maxzoom,Me.maxzoom)||X.push({command:qn.setLayerZoomRange,args:[me,Me.minzoom,Me.maxzoom]}),ge)ge.hasOwnProperty(Re)&&"layout"!==Re&&"paint"!==Re&&"filter"!==Re&&"metadata"!==Re&&"minzoom"!==Re&&"maxzoom"!==Re&&(0===Re.indexOf("paint.")?Er(ge[Re],Me[Re],X,me,Re.slice(6),qn.setPaintProperty):Xe(ge[Re],Me[Re])||X.push({command:qn.setLayerProperty,args:[me,Re,Me[Re]]}));for(Re in Me)Me.hasOwnProperty(Re)&&!ge.hasOwnProperty(Re)&&"layout"!==Re&&"paint"!==Re&&"filter"!==Re&&"metadata"!==Re&&"minzoom"!==Re&&"maxzoom"!==Re&&(0===Re.indexOf("paint.")?Er(ge[Re],Me[Re],X,me,Re.slice(6),qn.setPaintProperty):Xe(ge[Re],Me[Re])||X.push({command:qn.setLayerProperty,args:[me,Re,Me[Re]]}))}else X.push({command:qn.removeLayer,args:[me]}),Ce=Z[Z.lastIndexOf(me)+1],X.push({command:qn.addLayer,args:[Me,Ce]})}(N,w.layers,T)}catch(D){console.warn("Unable to compute style diff:",D),T=[{command:qn.setStyle,args:[w]}]}return T}(this.serialize(),l).filter(v=>!(v.command in ld));if(0===d.length)return!1;const _=d.filter(v=>!(v.command in Qn));if(_.length>0)throw new Error(`Unimplemented: ${_.map(v=>v.command).join(", ")}.`);return d.forEach(v=>{"setTransition"!==v.command&&"setProjection"!==v.command&&this[v.command].apply(this,v.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,d){return this.getImage(l)?this.fire(new p.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,d),this._afterImageUpdated(l),this)}updateImage(l,d){this.imageManager.updateImage(l,d)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new p.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new p.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,d,_={}){if(this._checkLoaded(),void 0!==this.getSource(l))throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(p.validateSource,`sources.${l}`,d,null,_))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const v=yn(l,d,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:v.serialize(),sourceId:l}));const w=T=>{const D=(T?"symbol:":"other:")+l,S=this._sourceCaches[D]=new p.SourceCache(D,v,T);(T?this._symbolSourceCaches:this._otherSourceCaches)[l]=S,S.style=this,S.onAdd(this.map)};w(!1),"vector"!==d.type&&"geojson"!==d.type||w(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const d=this.getSource(l);if(!d)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===l)return this.fire(new p.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new p.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(l);for(const v of _)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new p.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,d){this._checkLoaded(),this.getSource(l).setData(d),this._changed=!0}getSource(l){const d=this._getSourceCache(l);return d&&d.getSource()}_getSources(){const l=[];for(const d in this._otherSourceCaches){const _=this._getSourceCache(d);_&&l.push(_.getSource())}return l}addLayer(l,d,_={}){this._checkLoaded();const v=l.id;if(this.getLayer(v))return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let w;if("custom"===l.type){if(Vl(this,p.validateCustomStyleLayer(l)))return;w=p.createStyleLayer(l)}else{if("object"==typeof l.source&&(this.addSource(v,l.source),l=p.clone$1(l),l=p.extend(l,{source:v})),this._validate(p.validateLayer,`layers.${v}`,l,{arrayIndex:-1},_))return;w=p.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const T=d?this._order.indexOf(d):this._order.length;if(d&&-1===T)return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(T,0,v),this._layerOrderChanged=!0,this._layers[v]=w;const D=this._getLayerSourceCache(w);if(this._removedLayers[v]&&w.source&&D&&"custom"!==w.type){const S=this._removedLayers[v];delete this._removedLayers[v],S.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",D.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,d){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===d)return;const _=this._order.indexOf(l);this._order.splice(_,1);const v=d?this._order.indexOf(d):this._order.length;d&&-1===v?this.fire(new p.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(v,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const d=this._layers[l];if(!d)return void this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=d,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const d in this._layers)if(this._layers[d].type===l)return!0;return!1}setLayerZoomRange(l,d,_){this._checkLoaded();const v=this.getLayer(l);v?v.minzoom===d&&v.maxzoom===_||(null!=d&&(v.minzoom=d),null!=_&&(v.maxzoom=_),this._updateLayer(v)):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,d,_={}){this._checkLoaded();const v=this.getLayer(l);if(v){if(!Xe(v.filter,d))return null==d?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(p.validateFilter,`layers.${v.id}.filter`,d,{layerType:v.type},_)||(v.filter=p.clone$1(d),this._updateLayer(v)))}else this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const d=this.getLayer(l);return d&&p.clone$1(d.filter)}setLayoutProperty(l,d,_,v={}){this._checkLoaded();const w=this.getLayer(l);w?Xe(w.getLayoutProperty(d),_)||(w.setLayoutProperty(d,_,v),this._updateLayer(w)):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,d){const _=this.getLayer(l);if(_)return _.getLayoutProperty(d);this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,d,_,v={}){this._checkLoaded();const w=this.getLayer(l);w?Xe(w.getPaintProperty(d),_)||(w.setPaintProperty(d,_,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new p.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,d){const _=this.getLayer(l);return _&&_.getPaintProperty(d)}setFeatureState(l,d){this._checkLoaded();const _=l.source,v=l.sourceLayer,w=this.getSource(_);if(!w)return void this.fire(new p.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const T=w.type;if("geojson"===T&&v)return void this.fire(new p.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===T&&!v)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===l.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided.")));const D=this._getSourceCaches(_);for(const S of D)S.setFeatureState(v,l.id,d)}removeFeatureState(l,d){this._checkLoaded();const _=l.source,v=this.getSource(_);if(!v)return void this.fire(new p.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const w=v.type,T="vector"===w?l.sourceLayer:void 0;if("vector"===w&&!T)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&"string"!=typeof l.id&&"number"!=typeof l.id)return void this.fire(new p.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const D=this._getSourceCaches(_);for(const S of D)S.removeFeatureState(T,l.id,d)}getFeatureState(l){this._checkLoaded();const d=l.source,_=l.sourceLayer,v=this.getSource(d);if(v){if("vector"!==v.type||_)return void 0===l.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(_,l.id);this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return p.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const d in this._sourceCaches){const _=this._sourceCaches[d].getSource();l[_.id]||(l[_.id]=_.serialize())}return p.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},d=>void 0!==d)}_updateLayer(l){this._updatedLayers[l.id]=!0;const d=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&d&&"raster"!==d.getSource().type&&(this._updatedSources[l.source]="reload",d.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const d=T=>"fill-extrusion"===this._layers[T].type,_={},v=[];for(let T=this._order.length-1;T>=0;T--){const D=this._order[T];if(d(D)){_[D]=T;for(const S of l){const N=S[D];if(N)for(const R of N)v.push(R)}}}v.sort((T,D)=>D.intersectionZ-T.intersectionZ);const w=[];for(let T=this._order.length-1;T>=0;T--){const D=this._order[T];if(d(D))for(let S=v.length-1;S>=0;S--){const N=v[S].feature;if(_[N.layer.id]<T)break;w.push(N),v.pop()}else for(const S of l){const N=S[D];if(N)for(const R of N)w.push(R.feature)}}return w}queryRenderedFeatures(l,d,_){d&&d.filter&&this._validate(p.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const v={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new p.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const S of d.layers){const N=this._layers[S];if(!N)return this.fire(new p.ErrorEvent(new Error(`The layer '${S}' does not exist in the map's style and cannot be queried for features.`))),[];v[N.source]=!0}}const w=[];d.availableImages=this._availableImages;const T=d&&d.layers?d.layers.some(S=>{const N=this.getLayer(S);return N&&N.is3D()}):this.has3DLayers(),D=ws.createFromScreenPoints(l,_);for(const S in this._sourceCaches){const N=this._sourceCaches[S].getSource().id;d.layers&&!v[N]||w.push(Ei(this._sourceCaches[S],this._layers,this._serializedLayers,D,d,_,T,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(S,N,R,B,H,X,Y){const K={},te=X.queryRenderedSymbols(B),z=[];for(const Z of Object.keys(te).map(Number))z.push(Y[Z]);z.sort(Ro);for(const Z of z){const ie=Z.featureIndex.lookupSymbolFeatures(te[Z.bucketInstanceId],N,Z.bucketIndex,Z.sourceLayerIndex,H.filter,H.layers,H.availableImages,S);for(const ne in ie){const fe=K[ne]=K[ne]||[],me=ie[ne];me.sort((ge,Me)=>{const Ce=Z.featureSortOrder;if(Ce){const Re=Ce.indexOf(ge.featureIndex);return Ce.indexOf(Me.featureIndex)-Re}return Me.featureIndex-ge.featureIndex});for(const ge of me)fe.push(ge)}}for(const Z in K)K[Z].forEach(ie=>{const ne=ie.feature,fe=R(S[Z]);if(!fe)return;const me=fe.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=me});return K}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),D.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,d){d&&d.filter&&this._validate(p.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const _=this._getSourceCaches(l);let v=[];for(const w of _)v=v.concat(Qi(w,d));return v}addSourceType(l,d,_){return ta.getSourceType(l)?_(new Error(`A source type called "${l}" already exists.`)):(ta.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(l,d={}){this._checkLoaded();const _=this.light.getLight();let v=!1;for(const T in l)if(!Xe(l[T],_[T])){v=!0;break}if(!v)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,d),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,d=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=l;if(1===d){if("object"==typeof _.source){const v="terrain-dem-src";this.addSource(v,_.source),_=p.clone$1(_),_=p.extend(_,{source:v})}if(this._validate(p.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,d)}else{const v=this.terrain,w=v.get();for(const T of Object.keys(p.spec.terrain))!_.hasOwnProperty(T)&&p.spec.terrain[T].default&&(_[T]=p.spec.terrain[T].default);for(const T in _)if(!Xe(_[T],w[T])){v.set(_),this.stylesheet.terrain=_;const D=this._setTransitionParameters({duration:0});v.updateTransitions(D);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const d=this.fog=new Oa(l,this.map.transform);this.stylesheet.fog=l;const _=this._setTransitionParameters({duration:0});d.updateTransitions(_)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,_=d.get();0===Object.keys(l).length&&d.set(l);for(const v in l)if(!Xe(l[v],_[v])){d.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});d.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:p.exported.now(),transition:p.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(_=>this.isLayerDraped(this._layers[_])),d=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...d)}_createTerrain(l,d){const _=this.terrain=new Fl(l,d);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});_.updateTransitions(v)}_force3DLayerUpdate(){for(const l in this._layers){const d=this._layers[l];"fill-extrusion"===d.type&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const d=this._layers[l];"symbol"===d.type&&this._updateLayer(d)}}_validate(l,d,_,v,w={}){return(!w||!1!==w.validate)&&Vl(this,l.call(p.validateStyle,p.extend({key:d,style:this.serialize(),value:_,styleSpec:p.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),p.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const d=this._getSourceCaches(l);for(const _ of d)_.clearTiles()}_reloadSource(l){const d=this._getSourceCaches(l);for(const _ of d)_.resume(),_.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const d in this._sourceCaches)this._sourceCaches[d].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const d=this._sourceCaches[l];d.resume(),d.reload()}}_updatePlacement(l,d,_,v,w=!1){let T=!1,D=!1;const S={};for(const N of this._order){const R=this._layers[N];if("symbol"!==R.type)continue;if(!S[R.source]){const H=this._getLayerSourceCache(R);if(!H)continue;S[R.source]=H.getRenderableIds(!0).map(X=>H.getTileByID(X)).sort((X,Y)=>Y.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(Y.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(R,S[R.source],l.center.lng,l.projection);T=T||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||0===_,this._layerOrderChanged&&this.fire(new p.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.exported.now(),l.zoom))&&(this.pauseablePlacement=new Sr(l,this._order,w,d,_,v,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,S),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.exported.now()),D=!0),T&&this.pauseablePlacement.placement.setStale()),D||T)for(const N of this._order){const R=this._layers[N];"symbol"===R.type&&this.placement.updateLayerOpacities(R,S[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,d,_){this.imageManager.getImages(d.icons,_),this._updateTilesForChangedImages();const v=w=>{w&&w.setDependencies(d.tileID.key,d.type,d.icons)};v(this._otherSourceCaches[d.source]),v(this._symbolSourceCaches[d.source])}getGlyphs(l,d,_){this.glyphManager.getGlyphs(d.stacks,_)}getResource(l,d,_){return p.makeRequest(d,_)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return"symbol"===l.type?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const d=[];return this._otherSourceCaches[l]&&d.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&d.push(this._symbolSourceCaches[l]),d}_isSourceCacheLoaded(l){const d=this._getSourceCaches(l);return 0===d.length?(this.fire(new p.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):d.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ta.getSourceType=function(f){return Ft[f]},ta.setSourceType=function(f,l){Ft[f]=l},ta.registerForPluginStateChange=p.registerForPluginStateChange;var cd="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",na="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ps="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Oc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Aa="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let Zt={},cl={};const du=[];pu(cd,du),pu(Ps,du),pu(Oc,du),pu(Aa,du),Zt=Zn("",Ps),cl=Zn(Aa,Oc);const Jr=Zn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),hu=cd,lf="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Ci={background:Zn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Zn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Zn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Zn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Zn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Zn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Zn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Zn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Zn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Zn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Zn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Zn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Zn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Zn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Zn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Zn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Zn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Zn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Zn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Zn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Zn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Zn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",na),skyboxGradient:Zn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",na),skyboxCapture:Zn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Zn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Zn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function pu(f,l){const d=f.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let _ of d)if(_=_.trim(),"#"===_[0]&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=_.split(" ");for(const w of v)l.includes(w)||l.push(w)}}function Zn(f,l){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},w=[...du];return pu(f,w),pu(l,w),{fragmentSource:f=f.replace(d,(T,D,S,N,R)=>(v[R]=!0,"define"===D?`\n#ifndef HAS_UNIFORM_u_${R}\nvarying ${S} ${N} ${R};\n#else\nuniform ${S} ${N} u_${R};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${R}\n    ${S} ${N} ${R} = u_${R};\n#endif\n`)),vertexSource:l=l.replace(d,(T,D,S,N,R)=>{const B="float"===N?"vec2":"vec4",H=R.match(/color/)?"color":B;return v[R]?"define"===D?`\n#ifndef HAS_UNIFORM_u_${R}\nuniform lowp float u_${R}_t;\nattribute ${S} ${B} a_${R};\nvarying ${S} ${N} ${R};\n#else\nuniform ${S} ${N} u_${R};\n#endif\n`:"vec4"===H?`\n#ifndef HAS_UNIFORM_u_${R}\n    ${R} = a_${R};\n#else\n    ${S} ${N} ${R} = u_${R};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${R}\n    ${R} = unpack_mix_${H}(a_${R}, u_${R}_t);\n#else\n    ${S} ${N} ${R} = u_${R};\n#endif\n`:"define"===D?`\n#ifndef HAS_UNIFORM_u_${R}\nuniform lowp float u_${R}_t;\nattribute ${S} ${B} a_${R};\n#else\nuniform ${S} ${N} u_${R};\n#endif\n`:"vec4"===H?`\n#ifndef HAS_UNIFORM_u_${R}\n    ${S} ${N} ${R} = a_${R};\n#else\n    ${S} ${N} ${R} = u_${R};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${R}\n    ${S} ${N} ${R} = unpack_mix_${H}(a_${R}, u_${R}_t);\n#else\n    ${S} ${N} ${R} = u_${R};\n#endif\n`}),staticAttributes:_,usedDefines:w}}class Y0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,d,_,v,w,T,D){this.context=l;let S=this.boundPaintVertexBuffers.length!==v.length;for(let R=0;!S&&R<v.length;R++)this.boundPaintVertexBuffers[R]!==v[R]&&(S=!0);let N=this.boundDynamicVertexBuffers.length!==D.length;for(let R=0;!N&&R<D.length;R++)this.boundDynamicVertexBuffers[R]!==D[R]&&(N=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==_||S||N||this.boundIndexBuffer!==w||this.boundVertexOffset!==T)this.freshBind(d,_,v,w,T,D);else{l.bindVertexArrayOES.set(this.vao);for(const R of D)R&&R.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,d,_,v,w,T){let D;const S=l.numAttributes,N=this.context,R=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=T;else{D=N.currentNumAttributes||0;for(let B=S;B<D;B++)R.disableVertexAttribArray(B)}d.enableAttributes(R,l),d.bind(),d.setVertexAttribPointers(R,l,w);for(const B of _)B.enableAttributes(R,l),B.bind(),B.setVertexAttribPointers(R,l,w);for(const B of T)B&&(B.enableAttributes(R,l),B.bind(),B.setVertexAttribPointers(R,l,w));v&&v.bind(),N.currentNumAttributes=S}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function jl(f,l){const d=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new p.MercatorCoordinate(0,_/d).toLngLat().lat,new p.MercatorCoordinate(0,(_+1)/d).toLngLat().lat]}function ud(f,l,d,_,v,w,T){const D=f.context,S=D.gl,N=d.fbo;if(!N)return;f.prepareDrawTile();const R=f.useProgram("hillshade");D.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,N.colorAttachment.get());const B=((K,te,z,Z)=>{const ie=z.paint.get("hillshade-shadow-color"),ne=z.paint.get("hillshade-highlight-color"),fe=z.paint.get("hillshade-accent-color");let me=z.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===z.paint.get("hillshade-illumination-anchor")&&(me-=K.transform.angle);const ge=!K.options.moving;return{u_matrix:Z||K.transform.calculateProjMatrix(te.tileID.toUnwrapped(),ge),u_image:0,u_latrange:jl(0,te.tileID),u_light:[z.paint.get("hillshade-exaggeration"),me],u_shadow:ie,u_highlight:ne,u_accent:fe}})(f,d,_,f.terrain?l.projMatrix:null);f.prepareDrawProgram(D,R,l.toUnwrapped());const{tileBoundsBuffer:H,tileBoundsIndexBuffer:X,tileBoundsSegments:Y}=f.getTileBoundsBuffers(d);R.draw(D,S.TRIANGLES,v,w,T,p.CullFaceMode.disabled,B,_.id,H,X,Y)}function Tc(f,l,d){if(!l.needsDEMTextureUpload)return;const _=f.context,v=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||f.getTileTexture(d.stride);const w=d.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new p.Texture(_,w,v.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function cf(f,l,d,_,v,w){const T=f.context,D=T.gl;if(!l.dem)return;const S=l.dem;if(T.activeTexture.set(D.TEXTURE1),Tc(f,l,S),!l.demTexture)return;l.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);const N=S.dim;T.activeTexture.set(D.TEXTURE0);let R=l.fbo;if(!R){const Y=new p.Texture(T,{width:N,height:N,data:null},D.RGBA);Y.bind(D.LINEAR,D.CLAMP_TO_EDGE),R=l.fbo=T.createFramebuffer(N,N,!0),R.colorAttachment.set(Y.texture)}T.bindFramebuffer.set(R.framebuffer),T.viewport.set([0,0,N,N]);const{tileBoundsBuffer:B,tileBoundsIndexBuffer:H,tileBoundsSegments:X}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(T,D.TRIANGLES,_,v,w,p.CullFaceMode.disabled,((Y,K)=>{const te=K.stride,z=p.create();return p.ortho(z,0,p.EXTENT,-p.EXTENT,0,0,1),p.translate(z,z,[0,-p.EXTENT,0]),{u_matrix:z,u_image:1,u_dimension:[te,te],u_zoom:Y.overscaledZ,u_unpack:K.unpackVector}})(l.tileID,S),d.id,B,H,X),l.needsHillshadePrepare=!1}const Ah=f=>({u_matrix:new p.UniformMatrix4f(f),u_image0:new p.Uniform1i(f),u_skirt_height:new p.Uniform1f(f)}),Dc=(f,l)=>({u_matrix:f,u_image0:0,u_skirt_height:l}),fu=(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:d,u_zoom_transition:v,u_merc_center:w,u_image0:0,u_frustum_tl:T,u_frustum_tr:D,u_frustum_br:S,u_frustum_bl:N,u_globe_pos:R,u_globe_radius:B,u_viewport:H,u_grid_matrix:Y?Float32Array.from(Y):new Float32Array(9),u_skirt_height:X});function ia(f,l){return null!=f&&null!=l&&!(!f.hasData()||!l.hasData())&&null!=f.demTexture&&null!=l.demTexture&&f.tileID.key!==l.tileID.key}const Ar=new class{constructor(){this.operations={}}newMorphing(f,l,d,_,v){if(f in this.operations){const w=this.operations[f];w.to.tileID.key!==d.tileID.key&&(w.queued=d)}else this.operations[f]={startTime:_,phase:0,duration:v,from:l,to:d,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const l=this.operations[f];return{from:l.from,to:l.to,phase:l.phase}}update(f){for(const l in this.operations){const d=this.operations[l];for(d.phase=(f-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,f)){delete this.operations[l];break}}}_nextOp(f,l){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=l,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},$l={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Dt(f){return 6*Math.pow(1.5,22-f)}function Ih(f,l){const d=1<<f.z;return!l&&(0===f.x||f.x===d-1)||0===f.y||f.y===d-1}const fn=f=>({u_matrix:f});function Pc(f,l,d,_,v){if(v>0){const w=p.exported.now(),T=(w-f.timeAdded)/v,D=l?(w-l.timeAdded)/v:-1,S=d.getSource(),N=_.coveringZoomLevel({tileSize:S.tileSize,roundZoom:S.roundZoom}),R=!l||Math.abs(l.tileID.overscaledZ-N)>Math.abs(f.tileID.overscaledZ-N),B=R&&f.refreshedUponExpiration?1:p.clamp(R?T:1-D,0,1);return f.refreshedUponExpiration&&T>=1&&(f.refreshedUponExpiration=!1),l?{opacity:1,mix:1-B}:{opacity:B,mix:0}}return{opacity:1,mix:0}}class gu extends p.SourceCache{constructor(l){const d={type:"raster-dem",maxzoom:l.transform.maxZoom},_=new dn(ki(),null),v=yn("mock-dem",d,_,l.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,d){l.state="loaded",d(null)}}class ul extends p.SourceCache{constructor(l){const d=yn("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new dn(ki(),null),l.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,d,_){if(l.freezeTileCoverage)return;this.transform=l;const v=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,T)=>{if(w[T.key]="",!this._tiles[T.key]){const D=new p.Tile(T,this._source.tileSize*T.overscaleFactor(),l.tileZoom);D.state="loaded",this._tiles[T.key]=D}return w},{});for(const w in this._tiles)w in v||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const d=this.proxyCachedFBO[l];if(void 0!==d){const _=Object.values(d);this.renderCachePool.push(..._),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class dd extends p.OverscaledTileID{constructor(l,d,_){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=d,this.projMatrix=_}}class kh extends p.Elevation{constructor(l,d){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,v,w]=function(S){const N=new p.StructArrayLayout2i4,R=new p.StructArrayLayout3ui6,B=131;N.reserve(17161),R.reserve(33800);const H=p.EXTENT/128,X=p.EXTENT+H/2,Y=X+H;for(let te=-H;te<Y;te+=H)for(let z=-H;z<Y;z+=H){const Z=z<0||z>X||te<0||te>X?24575:0,ie=p.clamp(Math.round(z),0,p.EXTENT),ne=p.clamp(Math.round(te),0,p.EXTENT);N.emplaceBack(ie+Z,ne)}const K=(te,z)=>{const Z=z*B+te;R.emplaceBack(Z+1,Z,Z+B),R.emplaceBack(Z+B,Z+B+1,Z+1)};for(let te=1;te<129;te++)for(let z=1;z<129;z++)K(z,te);return[0,129].forEach(te=>{for(let z=0;z<130;z++)K(z,te),K(te,z)}),[N,R,32768]}(),T=l.context;this.gridBuffer=T.createVertexBuffer(_,p.posAttributes.members),this.gridIndexBuffer=T.createIndexBuffer(v),this.gridSegments=p.SegmentVector.simpleSegment(0,0,_.length,v.length),this.gridNoSkirtSegments=p.SegmentVector.simpleSegment(0,0,_.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ul(d.map),this.orthoMatrix=p.create(),p.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,p.EXTENT,0,p.EXTENT,0,1);const D=T.gl;this._overlapStencilMode=new p.StencilMode({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new gu(d.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,d,_){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const v=l.terrain.properties;this.sourceCache=0===l.terrain.drapeRenderMode?this._mockSourceCache:l._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const w=()=>{this.sourceCache.used&&p.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const T=this.getScaledDemTileSize();this.sourceCache.update(d,T,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),d.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==l.efficiency&&p.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&"source"===l.dataType?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):"style"===l.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=0===_._centerAltitude&&-1===this.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(_.center),-1),this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=d.getIds().map(S=>{const N=d.getTileByID(S).tileID;return N.projMatrix=_.calculateProjMatrix(N.toUnwrapped()),N});(function(S,N){const R=N.transform.pointCoordinate(N.transform.getCameraPoint()),B=new p.Point(R.x,R.y);S.sort((H,X)=>{if(X.overscaledZ-H.overscaledZ)return X.overscaledZ-H.overscaledZ;const Y=new p.Point(H.canonical.x+(1<<H.canonical.z)*H.wrap,H.canonical.y),K=new p.Point(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),te=B.mult(1<<H.canonical.z);return te.x-=.5,te.y-=.5,te.distSqr(Y)-te.distSqr(K)})})(v,this.painter),this._previousZoom=_.zoom;const w=this.proxyToSource||{};this.proxyToSource={},v.forEach(S=>{this.proxyToSource[S.key]={}}),this.terrainTileForTile={};const T=this._style._sourceCaches;for(const S in T){const N=T[S];if(!N.used||(N!==this.sourceCache&&this.resetTileLookupCache(N.id),this._setupProxiedCoordsForOrtho(N,l[S],w),N.usedForTerrain))continue;const R=l[S];N.getSource().reparseOverscaled&&this._assignTerrainTiles(R)}this.proxiedCoords[d.id]=v.map(S=>new dd(S,S.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=p.exported.now();const D={};this._visibleDemTiles=[];for(const S of this.proxyCoords){const N=this.terrainTileForTile[S.key];if(!N)continue;const R=N.tileID.key;R in D||(this._visibleDemTiles.push(N),D[R]=R)}}_assignTerrainTiles(l){this._initializing||l.forEach(d=>{if(this.terrainTileForTile[d.key])return;const _=this._findTileCoveringTileID(d,this.sourceCache);_&&(this.terrainTileForTile[d.key]=_)})}_prepareDEMTextures(){const l=this.painter.context,d=l.gl;for(const _ in this.terrainTileForTile){const v=this.terrainTileForTile[_],w=v.dem;!w||v.demTexture&&!v.needsDEMTextureUpload||(l.activeTexture.set(d.TEXTURE1),Tc(this.painter,v,w))}}_prepareDemTileUniforms(l,d,_,v){if(!d||null==d.demTexture)return!1;const w=l.tileID.canonical,T=Math.pow(2,d.tileID.canonical.z-w.z),D=v||"";return _[`u_dem_tl${D}`]=[w.x*T%1,w.y*T%1],_[`u_dem_scale${D}`]=T,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,d=l.gl;if(!this._emptyDepthBufferTexture){const _=new p.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new p.Texture(l,_,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const d=this._visibleDemTiles.reduce((_,v)=>{if(!v.dem)return _;const w=v.dem.tree.minimums[0];return w>0&&l++,_+w},0);return l?d/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,d=l.gl;l.activeTexture.set(d.TEXTURE2);const _=this._getLoadedAreaMinimum(),v=new p.RGBAImage({width:1,height:1},new Uint8Array(p.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(v,{premultiply:!1}):w=this._emptyDEMTexture=new p.Texture(l,v,d.RGBA,{premultiply:!1}),w}setupElevationDraw(l,d,_){const v=this.painter.context,w=v.gl,T=(D=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:p.DEMData.getUnpackVector(D),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var D;T.u_dem_size=this.sourceCache.getSource().tileSize,T.u_exaggeration=this.exaggeration();let S=null,N=null,R=1;if(_&&_.morphing&&this._useVertexMorphing){const B=_.morphing.srcDemTile,H=_.morphing.dstDemTile;R=_.morphing.phase,B&&H&&(this._prepareDemTileUniforms(l,B,T,"_prev")&&(N=B),this._prepareDemTileUniforms(l,H,T)&&(S=H))}if(N&&S?(v.activeTexture.set(w.TEXTURE2),S.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),v.activeTexture.set(w.TEXTURE4),N.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),T.u_dem_lerp=R):(S=this.terrainTileForTile[l.tileID.key],v.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,S,T)?S.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),v.activeTexture.set(w.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(T.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),T.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&S){const B=(1<<S.tileID.canonical.z)*p.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;T.u_meter_to_dem=B}if(_&&_.labelPlaneMatrixInv&&(T.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),d.setTerrainUniformValues(v,T),"globe"===this.painter.transform.projection.name){const B=this.globeUniformValues(this.painter.transform,l.tileID.canonical,_&&_.useDenormalizedUpVectorScale);d.setGlobeUniformValues(v,B)}}globeUniformValues(l,d,_){const v=l.projection;return{u_tile_tl_up:v.upVector(d,0,0),u_tile_tr_up:v.upVector(d,p.EXTENT,0),u_tile_br_up:v.upVector(d,p.EXTENT,p.EXTENT),u_tile_bl_up:v.upVector(d,0,p.EXTENT),u_tile_up_scale:_?p.globeMetersToEcef(1):v.upVectorScale(d,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const d=this.painter,_=this.painter.context;0!==l.length&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,w,T,D,S){if("globe"===v.transform.projection.name)!function(N,R,B,H,X){const Y=N.context,K=Y.gl;let te,z;const Z=N.options.showTerrainWireframe?2:0,ie=N.transform,ne=p.globeUseCustomAntiAliasing(N,Y,ie),fe=(rt,ke)=>{if(z===rt)return;const Ge=[$l[rt],"PROJECTION_GLOBE_VIEW"];ne&&Ge.push("CUSTOM_ANTIALIASING"),ke&&Ge.push($l[Z]),te=N.useProgram("globeRaster",null,Ge),z=rt},me=N.colorModeForRenderPass(),ge=new p.DepthMode(K.LEQUAL,p.DepthMode.ReadWrite,N.depthRangeFor3D);Ar.update(X);const Me=p.calculateGlobeMercatorMatrix(ie),Ce=[p.mercatorXfromLng(ie.center.lng),p.mercatorYfromLat(ie.center.lat)],Re=Z?[!1,!0]:[!1],ot=N.globeSharedBuffers,Se=[ie.width*p.exported.devicePixelRatio,ie.height*p.exported.devicePixelRatio],He=Float32Array.from(ie.globeMatrix),Le={useDenormalizedUpVectorScale:!0};if(Re.forEach(rt=>{const ke=N.transform,Ge=Dt(ke.zoom)*R.exaggeration();z=-1;const st=rt?K.LINES:K.TRIANGLES;for(const Qe of H){const ut=B.getTile(Qe),Rt=p.StencilMode.disabled,Xt=R.prevTerrainTileForTile[Qe.key],Et=R.terrainTileForTile[Qe.key];ia(Xt,Et)&&Ar.newMorphing(Qe.key,Xt,Et,X,250),Y.activeTexture.set(K.TEXTURE0),ut.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const jt=Ar.getMorphValuesForProxy(Qe.key),Mn=jt?1:0;jt&&p.extend$1(Le,{morphing:{srcDemTile:jt.from,dstDemTile:jt.to,phase:p.easeCubicInOut(jt.phase)}});const bn=p.tileCornersToBounds(Qe.canonical),It=p.getLatitudinalLod(bn.getCenter().lat),Vn=p.getGridMatrix(Qe.canonical,bn,It,ke.worldSize/ke._pixelsPerMercatorPixel),ti=p.globeNormalizeECEF(p.globeTileBounds(Qe.canonical)),Un=fu(ke.projMatrix,He,Me,ti,p.globeToMercatorTransition(ke.zoom),Ce,ke.frustumCorners.TL,ke.frustumCorners.TR,ke.frustumCorners.BR,ke.frustumCorners.BL,ke.globeCenterInViewSpace,ke.globeRadius,Se,Ge,Vn);if(fe(Mn,rt),R.setupElevationDraw(ut,te,Le),N.prepareDrawProgram(Y,te,Qe.toUnwrapped()),ot){const[ni,Lo,no]=rt?ot.getWirefameBuffers(N.context,It):ot.getGridBuffers(It,0!==Ge);te.draw(Y,st,ge,Rt,me,p.CullFaceMode.backCCW,Un,"globe_raster",ni,Lo,no)}}}),ot){const rt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ne&&rt.push("CUSTOM_ANTIALIASING"),te=N.useProgram("globeRaster",null,rt);for(const ke of H){const{x:Ge,y:st,z:Qe}=ke.canonical,ut=0===st,Rt=st===(1<<Qe)-1,[Xt,Et,jt,Mn]=ot.getPoleBuffers(Qe);if(Mn&&(ut||Rt)){const bn=B.getTile(ke);Y.activeTexture.set(K.TEXTURE0),bn.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);let It=p.globePoleMatrixForTile(Qe,Ge,ie);const Vn=p.globeNormalizeECEF(p.globeTileBounds(ke.canonical)),ti=(Un,ni)=>Un.draw(Y,K.TRIANGLES,ge,p.StencilMode.disabled,me,p.CullFaceMode.disabled,fu(ie.projMatrix,It,It,Vn,0,Ce,ie.frustumCorners.TL,ie.frustumCorners.TR,ie.frustumCorners.BR,ie.frustumCorners.BL,ie.globeCenterInViewSpace,ie.globeRadius,Se,0),"globe_pole_raster",ni,jt,Mn);R.setupElevationDraw(bn,te,Le),N.prepareDrawProgram(Y,te,ke.toUnwrapped()),ut&&ti(te,Xt),Rt&&(It=p.scale(p.create(),It,[1,-1,1]),ti(te,Et))}}}}(v,w,T,D,S);else{const N=v.context,R=N.gl;let B,H;const X=v.options.showTerrainWireframe?2:0,Y=(ie,ne)=>{if(H===ie)return;const fe=[$l[ie]];ne&&fe.push($l[X]),B=v.useProgram("terrainRaster",null,fe),H=ie},K=v.colorModeForRenderPass(),te=new p.DepthMode(R.LEQUAL,p.DepthMode.ReadWrite,v.depthRangeFor3D);Ar.update(S);const z=v.transform,Z=Dt(z.zoom)*w.exaggeration();(X?[!1,!0]:[!1]).forEach(ie=>{H=-1;const ne=ie?R.LINES:R.TRIANGLES,[fe,me]=ie?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const ge of D){const Me=T.getTile(ge),Ce=p.StencilMode.disabled,Re=w.prevTerrainTileForTile[ge.key],ot=w.terrainTileForTile[ge.key];ia(Re,ot)&&Ar.newMorphing(ge.key,Re,ot,S,250),N.activeTexture.set(R.TEXTURE0),Me.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Se=Ar.getMorphValuesForProxy(ge.key),He=Se?1:0;let Le;Se&&(Le={morphing:{srcDemTile:Se.from,dstDemTile:Se.to,phase:p.easeCubicInOut(Se.phase)}});const rt=Dc(ge.projMatrix,Ih(ge.canonical,z.renderWorldCopies)?Z/10:Z);Y(He,ie),w.setupElevationDraw(Me,B,Le),v.prepareDrawProgram(N,B,ge.toUnwrapped()),B.draw(N,ne,te,Ce,K,p.CullFaceMode.backCCW,rt,"terrain_raster",w.gridBuffer,fe,me)}})}}(d,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(0===this._drapedRenderBatches.length)return l+1;this.renderingToTexture=!0;const d=this.painter,_=this.painter.context,v=this.proxySourceCache,w=this.proxiedCoords[v.id],T=this._drapedRenderBatches.shift(),D=[],S=d.style.order;let N=0;for(const R of w){const B=v.getTileByID(R.proxyTileKey),H=v.proxyCachedFBO[R.key]?v.proxyCachedFBO[R.key][l]:void 0,X=void 0!==H?v.renderCache[H]:this.pool[N++],Y=void 0!==H;if(B.texture=X.tex,Y&&!X.dirty){D.push(B.tileID);continue}let K;_.bindFramebuffer.set(X.fb.framebuffer),this.renderedToTile=!1,X.dirty&&(_.clear({color:p.Color.transparent,stencil:0}),X.dirty=!1);for(let te=T.start;te<=T.end;++te){const z=d.style._layers[S[te]];if(z.isHidden(d.transform.zoom))continue;const Z=d.style._getLayerSourceCache(z),ie=Z?this.proxyToSource[R.key][Z.id]:[R];if(!ie)continue;const ne=ie;_.viewport.set([0,0,X.fb.width,X.fb.height]),K!==(Z?Z.id:null)&&(this._setupStencil(X,ie,z,Z),K=Z?Z.id:null),d.renderLayer(d,Z,z,ne)}this.renderedToTile?(X.dirty=!0,D.push(B.tileID)):Y||--N,5===N&&(N=0,this.renderToBackBuffer(D))}return this.renderToBackBuffer(D),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,d.width,d.height]),T.end+1}postRender(){}renderCacheEfficiency(l){const d=l.order.length;if(0===d)return{efficiency:100};let _,v=0,w=0,T=!1;for(let D=0;D<d;++D){const S=l._layers[l.order[D]];this._style.isLayerDraped(S)?(T&&++v,++w):T||(T=!0,_=S.id)}return 0===w?{efficiency:100}:{efficiency:100*(1-v/w),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{l=Math.min(l,d.dem.tree.minimums[0])}),0===l?l:(l-30)*this._exaggeration}raycast(l,d,_){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const T=w.tileID,D=1<<T.overscaledZ,{x:S,y:N}=T.canonical,R=S/D,B=(S+1)/D,H=N/D,X=(N+1)/D;return{minx:R,miny:H,maxx:B,maxy:X,t:w.dem.tree.raycastRoot(R,H,B,X,l,d,_),tile:w}});v.sort((w,T)=>(null!==w.t?w.t:Number.MAX_VALUE)-(null!==T.t?T.t:Number.MAX_VALUE));for(const w of v){if(null==w.t)return null;const T=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,d,_);if(null!=T)return T}return null}_createFBO(){const l=this.painter.context,d=l.gl,_=this.drapeBufferSize;l.activeTexture.set(d.TEXTURE0);const v=new p.Texture(l,{width:_[0],height:_[1],data:null},d.RGBA);v.bind(d.LINEAR,d.CLAMP_TO_EDGE);const w=l.createFramebuffer(_[0],_[1],!1);return w.colorAttachment.set(v.texture),w.depthAttachment=new xe(l,w.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const d=this._style._layers[l],_=d.isHidden(this.painter.transform.zoom);return"custom"===d.type?!_&&d.shouldRedrape():!_&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const _ of this._style._getSources())if(_ instanceof gt){l=!0;break}if(!l)return;const d={};for(let _=0;_<this._style.order.length;++_){const v=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(v);if(w&&!d[w.id]&&!v.isHidden(this.painter.transform.zoom)&&"line"===v.type&&v.widthExpression()instanceof p.ZoomDependentExpression){d[w.id]=!0;for(const T of this.proxyCoords){const D=this.proxyToSource[T.key][w.id];if(D)for(const S of D)this._clearRenderCacheForTile(w.id,S)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof ct){l=!0;break}if(!l)return;const d={};for(let _=0;_<this._style.order.length;++_){const v=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(v);if(!w||d[w.id]||v.isHidden(this.painter.transform.zoom)||"raster"!==v.type)continue;const T=v.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const S=this.proxyToSource[D.key][w.id];if(S)for(const N of S){const R=Pc(w.getTile(N),w.findLoadedParent(N,0),w,this.painter.transform,T);(1!==R.opacity||0!==R.mix)&&this._clearRenderCacheForTile(w.id,N)}}}}_setupDrapedRenderBatches(){const l=this._style.order,d=l.length;if(0===d)return;const _=[];let v,w=0,T=this._style._layers[l[w]];for(;!this._style.isLayerDraped(T)&&T.isHidden(this.painter.transform.zoom)&&++w<d;)T=this._style._layers[l[w]];for(;w<d;++w){const D=this._style._layers[l[w]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?void 0===v&&(v=w):void 0!==v&&(_.push({start:v,end:w-1}),v=void 0))}void 0!==v&&_.push({start:v,end:w-1}),this._drapedRenderBatches=_}_setupRenderCache(l){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const T=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let D=0;D<T.length;++D){const S=Object.values(T[D]);d.renderCachePool.push(...S)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,v=this._tilesDirty;for(let T=_.length-1;T>=0;T--){const D=_[T];if(d.getTileByID(D.key),void 0!==d.proxyCachedFBO[D.key]){const S=l[D.key],N=this.proxyToSource[D.key];let R=0;for(const B in N){const H=N[B],X=S[B];if(!X||X.length!==H.length||H.some((Y,K)=>Y!==X[K]||v[B]&&v[B].hasOwnProperty(Y.key))){R=-1;break}++R}for(const B in d.proxyCachedFBO[D.key])d.renderCache[d.proxyCachedFBO[D.key][B]].dirty=R<0||R!==Object.values(S).length}}const w=[...this._drapedRenderBatches];w.sort((T,D)=>D.end-D.start-(T.end-T.start));for(const T of w)for(const D of _){if(d.proxyCachedFBO[D.key])continue;let S=d.renderCachePool.pop();void 0===S&&d.renderCache.length<50&&(S=d.renderCache.length,d.renderCache.push(this._createFBO())),void 0!==S&&(d.proxyCachedFBO[D.key]={},d.proxyCachedFBO[D.key][T.start]=S,d.renderCache[S].dirty=!0)}this._tilesDirty={}}_setupStencil(l,d,_,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,T=w.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let D;if(_.isTileClipped())D=d.length,this._overlapStencilMode.test={func:T.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:T.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):p.StencilMode.disabled}_renderTileClippingMasks(l,d){const _=this.painter,v=this.painter.context,w=v.gl;_._tileClippingMaskIDs={},v.setColorMode(p.ColorMode.disabled),v.setDepthMode(p.DepthMode.disabled);const T=_.useProgram("clippingMask");for(const D of l){const S=_._tileClippingMaskIDs[D.key]=--d;T.draw(v,w.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:w.ALWAYS,mask:0},S,255,w.KEEP,w.KEEP,w.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,fn(D.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(l){const d=this.painter.transform;if(l.x<0||l.x>d.width||l.y<0||l.y>d.height)return null;const _=[l.x,l.y,1,1];p.transformMat4$1(_,_,d.pixelMatrixInverse),p.scale$1(_,_,1/_[3]),_[0]/=d.worldSize,_[1]/=d.worldSize;const v=d._camera.position,w=p.mercatorZfromAltitude(1,d.center.lat),T=[v[0],v[1],v[2]/w,0],D=p.subtract([],_.slice(0,3),T);p.normalize(D,D);const S=this.raycast(T,D,this._exaggeration);return null!==S&&S?(p.scaleAndAdd(T,T,D,S),T[3]=T[2],T[2]*=w,T):null}drawDepth(){const l=this.painter,d=l.context,_=this.proxySourceCache,v=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const T=d.gl,D=d.createFramebuffer(v,w,!0);d.activeTexture.set(T.TEXTURE0);const S=new p.Texture(d,{width:v,height:w,data:null},T.RGBA);S.bind(T.NEAREST,T.CLAMP_TO_EDGE),D.colorAttachment.set(S.texture);const N=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,v,w);D.depthAttachment.set(N),this._depthFBO=D,this._depthTexture=S}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,v,w]),function(T,D,S,N){if("globe"===T.transform.projection.name)return;const R=T.context,B=R.gl;R.clear({depth:1});const H=T.useProgram("terrainDepth"),X=new p.DepthMode(B.LESS,p.DepthMode.ReadWrite,T.depthRangeFor3D);for(const Y of N){const K=S.getTile(Y),te=Dc(Y.projMatrix,0);D.setupElevationDraw(K,H),H.draw(R,B.TRIANGLES,X,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.backCCW,te,"terrain_depth",D.gridBuffer,D.gridIndexBuffer,D.gridNoSkirtSegments)}}(l,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,d,_){if(l.getSource()instanceof hn)return this._setupProxiedCoordsForImageSource(l,d,_);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const v=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let D=0;D<w.length;D++){const S=w[D],N=this._findTileCoveringTileID(S,l);if(N){const R=this._createProxiedId(S,N,_[S.key]&&_[S.key][l.id]);v.push(R),this.proxyToSource[S.key][l.id]=[R]}}let T=!1;for(let D=0;D<d.length;D++){const S=l.getTile(d[D]);if(!S||!S.hasData())continue;const N=this._findTileCoveringTileID(S.tileID,this.proxySourceCache);if(N&&N.tileID.canonical.z!==S.tileID.canonical.z){const R=this.proxyToSource[N.tileID.key][l.id],B=this._createProxiedId(N.tileID,S,_[N.tileID.key]&&_[N.tileID.key][l.id]);R?R.splice(R.length-1,0,B):this.proxyToSource[N.tileID.key][l.id]=[B],v.push(B),T=!0}}this._sourceTilesOverlap[l.id]=T}_setupProxiedCoordsForImageSource(l,d,_){if(!l.getSource().loaded())return;const v=this.proxiedCoords[l.id]=[],w=this.proxyCoords,T=l.getSource(),D=new p.Point(T.tileID.x,T.tileID.y)._div(1<<T.tileID.z),S=T.coordinates.map(p.MercatorCoordinate.fromLngLat).reduce((R,B)=>(R.min.x=Math.min(R.min.x,B.x-D.x),R.min.y=Math.min(R.min.y,B.y-D.y),R.max.x=Math.max(R.max.x,B.x-D.x),R.max.y=Math.max(R.max.y,B.y-D.y),R),{min:new p.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new p.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),N=(R,B)=>{const H=R.wrap+R.canonical.x/(1<<R.canonical.z),X=R.canonical.y/(1<<R.canonical.z),Y=p.EXTENT/(1<<R.canonical.z),K=B.wrap+B.canonical.x/(1<<B.canonical.z),te=B.canonical.y/(1<<B.canonical.z);return H+Y<K+S.min.x||H>K+S.max.x||X+Y<te+S.min.y||X>te+S.max.y};for(let R=0;R<w.length;R++){const B=w[R];for(let H=0;H<d.length;H++){const X=l.getTile(d[H]);if(!X||!X.hasData()||N(B,X.tileID))continue;const Y=this._createProxiedId(B,X,_[B.key]&&_[B.key][l.id]),K=this.proxyToSource[B.key][l.id];K?K.push(Y):this.proxyToSource[B.key][l.id]=[Y],v.push(Y)}}}_createProxiedId(l,d,_){let v=this.orthoMatrix;if(_){const w=_.find(T=>T.key===d.tileID.key);if(w)return w}if(d.tileID.key!==l.key){const w=l.canonical.z-d.tileID.canonical.z;let T,D,S;v=p.create();const N=d.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(T=p.EXTENT>>w,D=T*((d.tileID.canonical.x<<w)-l.canonical.x+N),S=T*((d.tileID.canonical.y<<w)-l.canonical.y)):(T=p.EXTENT<<-w,D=p.EXTENT*(d.tileID.canonical.x-(l.canonical.x+N<<-w)),S=p.EXTENT*(d.tileID.canonical.y-(l.canonical.y<<-w))),p.ortho(v,0,T,0,T,0,1),p.translate(v,v,[D,S,0])}return new dd(d.tileID,l.key,v)}_findTileCoveringTileID(l,d){let _=d.getTile(l);if(_&&_.hasData())return _;const v=this._findCoveringTileCache[d.id],w=v[l.key];if(_=w?d.getTileByID(w):null,_&&_.hasData()||null===w)return _;let T=_?_.tileID:l,D=T.overscaledZ;const S=d.getSource().minzoom,N=[];if(!w){const B=d.getSource().maxzoom;if(l.canonical.z>=B){const H=l.canonical.z-B;d.getSource().reparseOverscaled?(D=Math.max(l.canonical.z+2,d.transform.tileZoom),T=new p.OverscaledTileID(D,l.wrap,B,l.canonical.x>>H,l.canonical.y>>H)):0!==H&&(D=B,T=new p.OverscaledTileID(D,l.wrap,B,l.canonical.x>>H,l.canonical.y>>H))}T.key!==l.key&&(N.push(T.key),_=d.getTile(T))}const R=B=>{N.forEach(H=>{v[H]=B}),N.length=0};for(D-=1;D>=S&&(!_||!_.hasData());D--){_&&R(_.tileID.key);const B=T.calculateScaledKey(D);if(_=d.getTileByID(B),_&&_.hasData())break;const H=v[B];if(null===H)break;void 0===H?N.push(B):_=d.getTileByID(H)}return R(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,d){let _=this._tilesDirty[l];_||(_=this._tilesDirty[l]={}),_[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(d){let _=0;const v=new p.StructArrayLayout2ui4,w=131;for(let T=1;T<129;T++){for(let D=1;D<129;D++)_=T*w+D,v.emplaceBack(_,_+1),v.emplaceBack(_,_+w),v.emplaceBack(_+1,_+w),128===T&&v.emplaceBack(_+w,_+w+1);v.emplaceBack(_+1,_+1+w)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=p.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Sn{static cacheKey(l,d,_,v){let w=`${d}${v?v.cacheKey:""}`;for(const T of _)l.usedDefines.includes(T)&&(w+=`/${T}`);return w}constructor(l,d,_,v,w,T){const D=l.gl;this.program=D.createProgram();const S=function(z){const Z=[];for(let ie=0;ie<z.length;ie++){if(null===z[ie])continue;const ne=z[ie].split(" ");Z.push(ne.pop())}return Z}(_.staticAttributes),N=v?v.getBinderAttributes():[],R=S.concat(N);let B=v?v.defines():[];B=B.concat(T.map(z=>`#define ${z}`));const H=l.isWebGL2?"#version 300 es\n":"",X=H+B.concat(l.extStandardDerivatives&&0===H.length?"#extension GL_OES_standard_derivatives : enable\n".concat(lf):lf,lf,hu,Jr.fragmentSource,cl.fragmentSource,_.fragmentSource).join("\n"),Y=H+B.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",hu,Jr.vertexSource,cl.vertexSource,Zt.vertexSource,_.vertexSource).join("\n"),K=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);D.shaderSource(K,X),D.compileShader(K),D.attachShader(this.program,K);const te=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())this.failedToCreate=!0;else{D.shaderSource(te,Y),D.compileShader(te),D.attachShader(this.program,te),this.attributes={},this.numAttributes=R.length;for(let z=0;z<this.numAttributes;z++)R[z]&&(D.bindAttribLocation(this.program,z,R[z]),this.attributes[R[z]]=z);D.linkProgram(this.program),D.deleteShader(te),D.deleteShader(K),this.fixedUniforms=w(l),this.binderUniforms=v?v.getUniforms(l):[],T.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new p.Uniform1i(z=l),u_dem_prev:new p.Uniform1i(z),u_dem_unpack:new p.Uniform4f(z),u_dem_tl:new p.Uniform2f(z),u_dem_scale:new p.Uniform1f(z),u_dem_tl_prev:new p.Uniform2f(z),u_dem_scale_prev:new p.Uniform1f(z),u_dem_size:new p.Uniform1f(z),u_dem_lerp:new p.Uniform1f(z),u_exaggeration:new p.Uniform1f(z),u_depth:new p.Uniform1i(z),u_depth_size_inv:new p.Uniform2f(z),u_meter_to_dem:new p.Uniform1f(z),u_label_plane_matrix_inv:new p.UniformMatrix4f(z)}),T.includes("GLOBE")&&(this.globeUniforms=(z=>({u_tile_tl_up:new p.Uniform3f(z),u_tile_tr_up:new p.Uniform3f(z),u_tile_br_up:new p.Uniform3f(z),u_tile_bl_up:new p.Uniform3f(z),u_tile_up_scale:new p.Uniform1f(z)}))(l)),T.includes("FOG")&&(this.fogUniforms=(z=>({u_fog_matrix:new p.UniformMatrix4f(z),u_fog_range:new p.Uniform2f(z),u_fog_color:new p.Uniform4f(z),u_fog_horizon_blend:new p.Uniform1f(z),u_fog_temporal_offset:new p.Uniform1f(z),u_frustum_tl:new p.Uniform3f(z),u_frustum_tr:new p.Uniform3f(z),u_frustum_br:new p.Uniform3f(z),u_frustum_bl:new p.Uniform3f(z),u_globe_pos:new p.Uniform3f(z),u_globe_radius:new p.Uniform1f(z),u_globe_transition:new p.Uniform1f(z),u_is_globe:new p.Uniform1i(z),u_viewport:new p.Uniform2f(z)}))(l))}var z}setTerrainUniformValues(l,d){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const v in d)_[v]&&_[v].set(this.program,v,d[v])}}setGlobeUniformValues(l,d){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const v in d)_[v]&&_[v].set(this.program,v,d[v])}}setFogUniformValues(l,d){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const v in d)_[v].set(this.program,v,d[v])}}draw(l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K){const te=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(v),l.setColorMode(w),l.setCullFace(T);for(const Z of Object.keys(this.fixedUniforms))this.fixedUniforms[Z].set(this.program,Z,D[Z]);Y&&Y.setUniforms(this.program,l,this.binderUniforms,H,{zoom:X});const z={[te.LINES]:2,[te.TRIANGLES]:3,[te.LINE_STRIP]:1}[d];for(const Z of B.get()){const ie=Z.vaos||(Z.vaos={});(ie[S]||(ie[S]=new Y0)).bind(l,this,N,Y?Y.getPaintVertexBuffers():[],R,Z.vertexOffset,K||[]),te.drawElements(d,Z.primitiveLength*z,te.UNSIGNED_SHORT,Z.primitiveOffset*z*2)}}}function Xr(f,l){const d=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,f.transform.tileZoom)/d,v=_*(l.tileID.canonical.x+l.tileID.wrap*d),w=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/Yi(l,1,f.transform.tileZoom),u_pixel_coord_upper:[v>>16,w>>16],u_pixel_coord_lower:[65535&v,65535&w]}}const Es=p.create(),ds=(f,l,d,_,v,w,T,D,S,N,R)=>{const B=l.style.light,H=B.properties.get("position"),X=[H.x,H.y,H.z],Y=p.create$1();"viewport"===B.properties.get("anchor")&&(p.fromRotation(Y,-l.transform.angle),p.transformMat3(X,X,Y));const K=B.properties.get("color"),te=l.transform,z={u_matrix:f,u_lightpos:X,u_lightintensity:B.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+d,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Es,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:w};return"globe"===te.projection.name&&(z.u_tile_id=[T.canonical.x,T.canonical.y,1<<T.canonical.z],z.u_zoom_transition=S,z.u_inv_rot_matrix=R,z.u_merc_center=N,z.u_up_dir=te.projection.upVector(new p.CanonicalTileID(0,0,0),N[0]*p.EXTENT,N[1]*p.EXTENT),z.u_height_lift=D),z},oa=(f,l,d,_,v,w,T,D,S,N,R,B)=>{const H=ds(f,l,d,_,v,w,T,S,N,R,B),X={u_height_factor:-Math.pow(2,T.overscaledZ)/D.tileSize/8};return p.extend(H,Xr(l,D),X)},An=f=>({u_matrix:f}),Ec=(f,l,d)=>p.extend(An(f),Xr(l,d)),Rh=(f,l)=>({u_matrix:f,u_world:l}),Nh=(f,l,d,_)=>p.extend(Ec(f,l,d),{u_world:_}),uf=p.create(),Ss=(f,l,d,_,v,w)=>{const T=f.transform,D="globe"===T.projection.name;let S;if("map"===w.paint.get("circle-pitch-alignment"))if(D){const R=p.globePixelsToTileUnits(T.zoom,l.canonical)*T._pixelsPerMercatorPixel;S=Float32Array.from([R,0,0,R])}else S=T.calculatePixelsToTileUnitsMatrix(d);else S=new Float32Array([T.pixelsToGLUnits[0],0,0,T.pixelsToGLUnits[1]]);const N={u_camera_to_center_distance:T.cameraToCenterDistance,u_matrix:f.translatePosMatrix(l.projMatrix,d,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:p.exported.devicePixelRatio,u_extrude_scale:S,u_inv_rot_matrix:uf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(D){N.u_inv_rot_matrix=_,N.u_merc_center=v,N.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],N.u_zoom_transition=p.globeToMercatorTransition(T.zoom);const R=v[0]*p.EXTENT,B=v[1]*p.EXTENT;N.u_up_dir=T.projection.upVector(new p.CanonicalTileID(0,0,0),R,B)}return N},Gl=f=>{const l=[];return"map"===f.paint.get("circle-pitch-alignment")&&l.push("PITCH_WITH_MAP"),"map"===f.paint.get("circle-pitch-scale")&&l.push("SCALE_WITH_MAP"),l},Fh=(f,l,d,_)=>{const v=p.EXTENT/d.tileSize;return{u_matrix:f,u_camera_to_center_distance:l.getCameraToCenterDistance(_),u_extrude_scale:[l.pixelsToGLUnits[0]/v,l.pixelsToGLUnits[1]/v]}},zn=(f,l,d=1)=>({u_matrix:f,u_color:l,u_overlay:0,u_overlay_scale:d}),df=p.create(),hf=(f,l,d,_,v,w,T)=>{const D=f.transform,S="globe"===D.projection.name,N=S?p.globePixelsToTileUnits(D.zoom,l.canonical)*D._pixelsPerMercatorPixel:Yi(d,1,w),R={u_matrix:l.projMatrix,u_extrude_scale:N,u_intensity:T,u_inv_rot_matrix:df,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(S){R.u_inv_rot_matrix=_,R.u_merc_center=v,R.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],R.u_zoom_transition=p.globeToMercatorTransition(D.zoom);const B=v[0]*p.EXTENT,H=v[1]*p.EXTENT;R.u_up_dir=D.projection.upVector(new p.CanonicalTileID(0,0,0),B,H)}return R},nm=(f,l,d,_,v,w,T)=>{const D=f.transform,S=D.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:hd(f,l,d,_),u_pixels_to_tile_units:S,u_device_pixel_ratio:w,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:vt(d)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Sc(l,f.transform),u_alpha_discard_threshold:0,u_trim_offset:T}},ei=(f,l,d,_,v)=>{const w=f.transform;return{u_matrix:hd(f,l,d,_),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:Sc(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Sc(f,l){return 1/Yi(f,1,l.tileZoom)}function hd(f,l,d,_){return f.translatePosMatrix(_||l.tileID.projMatrix,l,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function vt(f){const l=f.paint.get("line-dasharray").value;return l.value||"constant"!==l.kind}const Zo=(f,l,d,_,v,w)=>{return{u_matrix:f,u_tl_parent:l,u_scale_parent:d,u_fade_t:_.mix,u_opacity:_.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(D=v.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(T=v.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Pn(v.paint.get("raster-hue-rotate")),u_perspective_transform:w};var T,D};function Pn(f){f*=Math.PI/180;const l=Math.sin(f),d=Math.cos(f);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const go=p.create(),Jo=(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K)=>{const te=v.transform,z={u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:te.width/te.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:T,u_coord_matrix:D,u_is_text:+S,u_pitch_with_map:+_,u_texsize:N,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:go,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:go,u_up_vector:[0,-1,0]};return"globe"===K.name&&(z.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],z.u_zoom_transition=B,z.u_inv_rot_matrix=X,z.u_merc_center=H,z.u_camera_forward=te._camera.forward(),z.u_ecef_origin=p.globeECEFOrigin(te.globeMatrix,R.toUnwrapped()),z.u_tile_matrix=Float32Array.from(te.globeMatrix),z.u_up_vector=Y),z},Ia=(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K,te)=>p.extend(Jo(f,l,d,_,v,w,T,D,S,N,B,H,X,Y,K,te),{u_gamma_scale:_?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:p.exported.devicePixelRatio,u_is_halo:+R}),Ir=(f,l,d,_,v,w,T,D,S,N,R,B,H,X,Y,K)=>p.extend(Ia(f,l,d,_,v,w,T,D,!0,S,!0,R,B,H,X,Y,K),{u_texsize_icon:N,u_texture_icon:1}),pd=(f,l,d)=>({u_matrix:f,u_opacity:l,u_color:d}),pf=(f,l,d,_,v)=>p.extend(function(w,T,D){const S=T.imageManager.getPattern(w.toString()),{width:N,height:R}=T.imageManager.getPixelSize(),B=Math.pow(2,D.tileID.overscaledZ),H=D.tileSize*Math.pow(2,T.transform.tileZoom)/B,X=H*(D.tileID.canonical.x+D.tileID.wrap*B),Y=H*D.tileID.canonical.y;return{u_image:0,u_pattern_tl:S.tl,u_pattern_br:S.br,u_texsize:[N,R],u_pattern_size:S.displaySize,u_tile_units_to_pixels:1/Yi(D,1,T.transform.tileZoom),u_pixel_coord_upper:[X>>16,Y>>16],u_pixel_coord_lower:[65535&X,65535&Y]}}(_,d,v),{u_matrix:f,u_opacity:l}),Ac={fillExtrusion:f=>({u_matrix:new p.UniformMatrix4f(f),u_lightpos:new p.Uniform3f(f),u_lightintensity:new p.Uniform1f(f),u_lightcolor:new p.Uniform3f(f),u_vertical_gradient:new p.Uniform1f(f),u_opacity:new p.Uniform1f(f),u_edge_radius:new p.Uniform1f(f),u_ao:new p.Uniform2f(f),u_tile_id:new p.Uniform3f(f),u_zoom_transition:new p.Uniform1f(f),u_inv_rot_matrix:new p.UniformMatrix4f(f),u_merc_center:new p.Uniform2f(f),u_up_dir:new p.Uniform3f(f),u_height_lift:new p.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new p.UniformMatrix4f(f),u_lightpos:new p.Uniform3f(f),u_lightintensity:new p.Uniform1f(f),u_lightcolor:new p.Uniform3f(f),u_vertical_gradient:new p.Uniform1f(f),u_height_factor:new p.Uniform1f(f),u_edge_radius:new p.Uniform1f(f),u_ao:new p.Uniform2f(f),u_tile_id:new p.Uniform3f(f),u_zoom_transition:new p.Uniform1f(f),u_inv_rot_matrix:new p.UniformMatrix4f(f),u_merc_center:new p.Uniform2f(f),u_up_dir:new p.Uniform3f(f),u_height_lift:new p.Uniform1f(f),u_image:new p.Uniform1i(f),u_texsize:new p.Uniform2f(f),u_pixel_coord_upper:new p.Uniform2f(f),u_pixel_coord_lower:new p.Uniform2f(f),u_tile_units_to_pixels:new p.Uniform1f(f),u_opacity:new p.Uniform1f(f)}),fill:f=>({u_matrix:new p.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new p.UniformMatrix4f(f),u_image:new p.Uniform1i(f),u_texsize:new p.Uniform2f(f),u_pixel_coord_upper:new p.Uniform2f(f),u_pixel_coord_lower:new p.Uniform2f(f),u_tile_units_to_pixels:new p.Uniform1f(f)}),fillOutline:f=>({u_matrix:new p.UniformMatrix4f(f),u_world:new p.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new p.UniformMatrix4f(f),u_world:new p.Uniform2f(f),u_image:new p.Uniform1i(f),u_texsize:new p.Uniform2f(f),u_pixel_coord_upper:new p.Uniform2f(f),u_pixel_coord_lower:new p.Uniform2f(f),u_tile_units_to_pixels:new p.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new p.Uniform1f(f),u_extrude_scale:new p.UniformMatrix2f(f),u_device_pixel_ratio:new p.Uniform1f(f),u_matrix:new p.UniformMatrix4f(f),u_inv_rot_matrix:new p.UniformMatrix4f(f),u_merc_center:new p.Uniform2f(f),u_tile_id:new p.Uniform3f(f),u_zoom_transition:new p.Uniform1f(f),u_up_dir:new p.Uniform3f(f)}),collisionBox:f=>({u_matrix:new p.UniformMatrix4f(f),u_camera_to_center_distance:new p.Uniform1f(f),u_extrude_scale:new p.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new p.UniformMatrix4f(f),u_inv_matrix:new p.UniformMatrix4f(f),u_camera_to_center_distance:new p.Uniform1f(f),u_viewport_size:new p.Uniform2f(f)}),debug:f=>({u_color:new p.UniformColor(f),u_matrix:new p.UniformMatrix4f(f),u_overlay:new p.Uniform1i(f),u_overlay_scale:new p.Uniform1f(f)}),clippingMask:f=>({u_matrix:new p.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new p.Uniform1f(f),u_intensity:new p.Uniform1f(f),u_matrix:new p.UniformMatrix4f(f),u_inv_rot_matrix:new p.UniformMatrix4f(f),u_merc_center:new p.Uniform2f(f),u_tile_id:new p.Uniform3f(f),u_zoom_transition:new p.Uniform1f(f),u_up_dir:new p.Uniform3f(f)}),heatmapTexture:f=>({u_image:new p.Uniform1i(f),u_color_ramp:new p.Uniform1i(f),u_opacity:new p.Uniform1f(f)}),hillshade:f=>({u_matrix:new p.UniformMatrix4f(f),u_image:new p.Uniform1i(f),u_latrange:new p.Uniform2f(f),u_light:new p.Uniform2f(f),u_shadow:new p.UniformColor(f),u_highlight:new p.UniformColor(f),u_accent:new p.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new p.UniformMatrix4f(f),u_image:new p.Uniform1i(f),u_dimension:new p.Uniform2f(f),u_zoom:new p.Uniform1f(f),u_unpack:new p.Uniform4f(f)}),line:f=>({u_matrix:new p.UniformMatrix4f(f),u_pixels_to_tile_units:new p.UniformMatrix2f(f),u_device_pixel_ratio:new p.Uniform1f(f),u_units_to_pixels:new p.Uniform2f(f),u_dash_image:new p.Uniform1i(f),u_gradient_image:new p.Uniform1i(f),u_image_height:new p.Uniform1f(f),u_texsize:new p.Uniform2f(f),u_tile_units_to_pixels:new p.Uniform1f(f),u_alpha_discard_threshold:new p.Uniform1f(f),u_trim_offset:new p.Uniform2f(f)}),linePattern:f=>({u_matrix:new p.UniformMatrix4f(f),u_texsize:new p.Uniform2f(f),u_pixels_to_tile_units:new p.UniformMatrix2f(f),u_device_pixel_ratio:new p.Uniform1f(f),u_image:new p.Uniform1i(f),u_units_to_pixels:new p.Uniform2f(f),u_tile_units_to_pixels:new p.Uniform1f(f),u_alpha_discard_threshold:new p.Uniform1f(f)}),raster:f=>({u_matrix:new p.UniformMatrix4f(f),u_tl_parent:new p.Uniform2f(f),u_scale_parent:new p.Uniform1f(f),u_fade_t:new p.Uniform1f(f),u_opacity:new p.Uniform1f(f),u_image0:new p.Uniform1i(f),u_image1:new p.Uniform1i(f),u_brightness_low:new p.Uniform1f(f),u_brightness_high:new p.Uniform1f(f),u_saturation_factor:new p.Uniform1f(f),u_contrast_factor:new p.Uniform1f(f),u_spin_weights:new p.Uniform3f(f),u_perspective_transform:new p.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new p.Uniform1i(f),u_is_size_feature_constant:new p.Uniform1i(f),u_size_t:new p.Uniform1f(f),u_size:new p.Uniform1f(f),u_camera_to_center_distance:new p.Uniform1f(f),u_rotate_symbol:new p.Uniform1i(f),u_aspect_ratio:new p.Uniform1f(f),u_fade_change:new p.Uniform1f(f),u_matrix:new p.UniformMatrix4f(f),u_label_plane_matrix:new p.UniformMatrix4f(f),u_coord_matrix:new p.UniformMatrix4f(f),u_is_text:new p.Uniform1i(f),u_pitch_with_map:new p.Uniform1i(f),u_texsize:new p.Uniform2f(f),u_tile_id:new p.Uniform3f(f),u_zoom_transition:new p.Uniform1f(f),u_inv_rot_matrix:new p.UniformMatrix4f(f),u_merc_center:new p.Uniform2f(f),u_camera_forward:new p.Uniform3f(f),u_tile_matrix:new p.UniformMatrix4f(f),u_up_vector:new p.Uniform3f(f),u_ecef_origin:new p.Uniform3f(f),u_texture:new p.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new p.Uniform1i(f),u_is_size_feature_constant:new p.Uniform1i(f),u_size_t:new p.Uniform1f(f),u_size:new p.Uniform1f(f),u_camera_to_center_distance:new p.Uniform1f(f),u_rotate_symbol:new p.Uniform1i(f),u_aspect_ratio:new p.Uniform1f(f),u_fade_change:new p.Uniform1f(f),u_matrix:new p.UniformMatrix4f(f),u_label_plane_matrix:new p.UniformMatrix4f(f),u_coord_matrix:new p.UniformMatrix4f(f),u_is_text:new p.Uniform1i(f),u_pitch_with_map:new p.Uniform1i(f),u_texsize:new p.Uniform2f(f),u_texture:new p.Uniform1i(f),u_gamma_scale:new p.Uniform1f(f),u_device_pixel_ratio:new p.Uniform1f(f),u_tile_id:new p.Uniform3f(f),u_zoom_transition:new p.Uniform1f(f),u_inv_rot_matrix:new p.UniformMatrix4f(f),u_merc_center:new p.Uniform2f(f),u_camera_forward:new p.Uniform3f(f),u_tile_matrix:new p.UniformMatrix4f(f),u_up_vector:new p.Uniform3f(f),u_ecef_origin:new p.Uniform3f(f),u_is_halo:new p.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new p.Uniform1i(f),u_is_size_feature_constant:new p.Uniform1i(f),u_size_t:new p.Uniform1f(f),u_size:new p.Uniform1f(f),u_camera_to_center_distance:new p.Uniform1f(f),u_rotate_symbol:new p.Uniform1i(f),u_aspect_ratio:new p.Uniform1f(f),u_fade_change:new p.Uniform1f(f),u_matrix:new p.UniformMatrix4f(f),u_label_plane_matrix:new p.UniformMatrix4f(f),u_coord_matrix:new p.UniformMatrix4f(f),u_is_text:new p.Uniform1i(f),u_pitch_with_map:new p.Uniform1i(f),u_texsize:new p.Uniform2f(f),u_texsize_icon:new p.Uniform2f(f),u_texture:new p.Uniform1i(f),u_texture_icon:new p.Uniform1i(f),u_gamma_scale:new p.Uniform1f(f),u_device_pixel_ratio:new p.Uniform1f(f),u_is_halo:new p.Uniform1i(f)}),background:f=>({u_matrix:new p.UniformMatrix4f(f),u_opacity:new p.Uniform1f(f),u_color:new p.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new p.UniformMatrix4f(f),u_opacity:new p.Uniform1f(f),u_image:new p.Uniform1i(f),u_pattern_tl:new p.Uniform2f(f),u_pattern_br:new p.Uniform2f(f),u_texsize:new p.Uniform2f(f),u_pattern_size:new p.Uniform2f(f),u_pixel_coord_upper:new p.Uniform2f(f),u_pixel_coord_lower:new p.Uniform2f(f),u_tile_units_to_pixels:new p.Uniform1f(f)}),terrainRaster:Ah,terrainDepth:Ah,skybox:f=>({u_matrix:new p.UniformMatrix4f(f),u_sun_direction:new p.Uniform3f(f),u_cubemap:new p.Uniform1i(f),u_opacity:new p.Uniform1f(f),u_temporal_offset:new p.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new p.UniformMatrix4f(f),u_color_ramp:new p.Uniform1i(f),u_center_direction:new p.Uniform3f(f),u_radius:new p.Uniform1f(f),u_opacity:new p.Uniform1f(f),u_temporal_offset:new p.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new p.UniformMatrix3f(f),u_sun_direction:new p.Uniform3f(f),u_sun_intensity:new p.Uniform1f(f),u_color_tint_r:new p.Uniform4f(f),u_color_tint_m:new p.Uniform4f(f),u_luminance:new p.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new p.UniformMatrix4f(f),u_globe_matrix:new p.UniformMatrix4f(f),u_normalize_matrix:new p.UniformMatrix4f(f),u_merc_matrix:new p.UniformMatrix4f(f),u_zoom_transition:new p.Uniform1f(f),u_merc_center:new p.Uniform2f(f),u_image0:new p.Uniform1i(f),u_grid_matrix:new p.UniformMatrix3f(f),u_skirt_height:new p.Uniform1f(f),u_frustum_tl:new p.Uniform3f(f),u_frustum_tr:new p.Uniform3f(f),u_frustum_br:new p.Uniform3f(f),u_frustum_bl:new p.Uniform3f(f),u_globe_pos:new p.Uniform3f(f),u_globe_radius:new p.Uniform1f(f),u_viewport:new p.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new p.Uniform3f(f),u_frustum_tr:new p.Uniform3f(f),u_frustum_br:new p.Uniform3f(f),u_frustum_bl:new p.Uniform3f(f),u_horizon:new p.Uniform1f(f),u_transition:new p.Uniform1f(f),u_fadeout_range:new p.Uniform1f(f),u_color:new p.Uniform4f(f),u_high_color:new p.Uniform4f(f),u_space_color:new p.Uniform4f(f),u_star_intensity:new p.Uniform1f(f),u_star_density:new p.Uniform1f(f),u_star_size:new p.Uniform1f(f),u_temporal_offset:new p.Uniform1f(f),u_horizon_angle:new p.Uniform1f(f),u_rotation_matrix:new p.UniformMatrix4f(f)})};let hs;function St(f,l,d,_,v,w,T){const D=f.context,S=D.gl,N=f.transform,R=f.useProgram("collisionBox"),B=[];let H=0,X=0;for(let ne=0;ne<_.length;ne++){const fe=_[ne],me=l.getTile(fe),ge=me.getBucket(d);if(!ge)continue;const Me=Wr(fe,ge,N);let Ce=Me;0===v[0]&&0===v[1]||(Ce=f.translatePosMatrix(Me,me,v,w));const Re=T?ge.textCollisionBox:ge.iconCollisionBox,ot=ge.collisionCircleArray;if(ot.length>0){const Se=p.create(),He=Ce;p.mul(Se,ge.placementInvProjMatrix,N.glCoordMatrix),p.mul(Se,Se,ge.placementViewportMatrix),B.push({circleArray:ot,circleOffset:X,transform:He,invTransform:Se,projection:ge.getProjection()}),H+=ot.length/4,X=H}Re&&(f.terrain&&f.terrain.setupElevationDraw(me,R),R.draw(D,S.LINES,p.DepthMode.disabled,p.StencilMode.disabled,f.colorModeForRenderPass(),p.CullFaceMode.disabled,Fh(Ce,N,me,ge.getProjection()),d.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,N.zoom,null,[Re.collisionVertexBuffer,Re.collisionVertexBufferExt]))}if(!T||!B.length)return;const Y=f.useProgram("collisionCircle"),K=new p.StructArrayLayout2f1f2i16;K.resize(4*H),K._trim();let te=0;for(const ne of B)for(let fe=0;fe<ne.circleArray.length/4;fe++){const me=4*fe,ge=ne.circleArray[me+0],Me=ne.circleArray[me+1],Ce=ne.circleArray[me+2],Re=ne.circleArray[me+3];K.emplace(te++,ge,Me,Ce,Re,0),K.emplace(te++,ge,Me,Ce,Re,1),K.emplace(te++,ge,Me,Ce,Re,2),K.emplace(te++,ge,Me,Ce,Re,3)}(!hs||hs.length<2*H)&&(hs=function(ne){const fe=2*ne,me=new p.StructArrayLayout3ui6;me.resize(fe),me._trim();for(let ge=0;ge<fe;ge++){const Me=6*ge;me.uint16[Me+0]=4*ge+0,me.uint16[Me+1]=4*ge+1,me.uint16[Me+2]=4*ge+2,me.uint16[Me+3]=4*ge+2,me.uint16[Me+4]=4*ge+3,me.uint16[Me+5]=4*ge+0}return me}(H));const z=D.createIndexBuffer(hs,!0),Z=D.createVertexBuffer(K,p.collisionCircleLayout.members,!0);for(const ne of B){const fe={u_matrix:ne.transform,u_inv_matrix:ne.invTransform,u_camera_to_center_distance:(ie=N).getCameraToCenterDistance(ne.projection),u_viewport_size:[ie.width,ie.height]};Y.draw(D,S.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,f.colorModeForRenderPass(),p.CullFaceMode.disabled,fe,d.id,Z,z,p.SegmentVector.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,N.zoom)}var ie;Z.destroy(),z.destroy()}const Cn=p.create();function Ri({width:f,height:l,anchor:d,textOffset:_,textScale:v},w){const{horizontalAlign:T,verticalAlign:D}=p.getAnchorAlignment(d),S=-(T-.5)*f,N=-(D-.5)*l,R=p.evaluateVariableOffset(d,_);return new p.Point((S/v+R[0])*w,(N/v+R[1])*w)}function As(f,l,d,_,v,w,T,D,S,N,R){const B=f.text.placedSymbolArray,H=f.text.dynamicLayoutVertexArray,X=f.icon.dynamicLayoutVertexArray,Y={},K=f.getProjection(),te=tt(D,K,w),z=w.elevation,Z=K.upVectorScale(D.canonical,w.center.lat,w.worldSize).metersToTile;H.clear();for(let ie=0;ie<B.length;ie++){const ne=B.get(ie),{tileAnchorX:fe,tileAnchorY:me,numGlyphs:ge}=ne,Me=ne.hidden||!ne.crossTileID||f.allowVerticalPlacement&&!ne.placedOrientation?null:_[ne.crossTileID];if(Me){let Ce=0,Re=0,ot=0;if(z){const ut=z?z.getAtTileOffset(D,fe,me):0,[Rt,Xt,Et]=K.upVector(D.canonical,fe,me);Ce=ut*Rt*Z,Re=ut*Xt*Z,ot=ut*Et*Z}let[Se,He,Le,rt]=xo(ne.projectedAnchorX+Ce,ne.projectedAnchorY+Re,ne.projectedAnchorZ+ot,d?te:T);const ke=to(w.getCameraToCenterDistance(K),rt);let Ge=v.evaluateSizeForFeature(f.textSizeData,N,ne)*ke/p.ONE_EM;d&&(Ge*=f.tilePixelRatio/S);const st=Ri(Me,Ge);d?(({x:Se,y:He,z:Le}=K.projectTilePoint(fe+st.x,me+st.y,D.canonical)),[Se,He,Le]=xo(Se+Ce,He+Re,Le+ot,T)):(l&&st._rotate(-w.angle),Se+=st.x,He+=st.y,Le=0);const Qe=f.allowVerticalPlacement&&ne.placedOrientation===p.WritingMode.vertical?Math.PI/2:0;for(let ut=0;ut<ge;ut++)p.addDynamicAttributes(H,Se,He,Le,Qe);R&&ne.associatedIconIndex>=0&&(Y[ne.associatedIconIndex]={x:Se,y:He,z:Le,angle:Qe})}else Ht(ge,H)}if(R){X.clear();const ie=f.icon.placedSymbolArray;for(let ne=0;ne<ie.length;ne++){const fe=ie.get(ne),{numGlyphs:me}=fe,ge=Y[ne];if(fe.hidden||!ge)Ht(me,X);else{const{x:Me,y:Ce,z:Re,angle:ot}=ge;for(let Se=0;Se<me;Se++)p.addDynamicAttributes(X,Me,Ce,Re,ot)}}f.icon.dynamicLayoutVertexBuffer.updateData(X)}f.text.dynamicLayoutVertexBuffer.updateData(H)}function ka(f,l,d){return d.iconsInText&&l?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Fo(f,l,d,_,v,w,T,D,S,N,R,B){const H=f.context,X=H.gl,Y=f.transform,K="map"===D,te="map"===S,z=K&&"point"!==d.layout.get("symbol-placement"),Z=K&&!te&&!z,ie=void 0!==d.layout.get("symbol-sort-key").constantOr(1);let ne=!1;const fe=f.depthModeForSublayer(0,p.DepthMode.ReadOnly),me=[p.mercatorXfromLng(Y.center.lng),p.mercatorYfromLat(Y.center.lat)],ge=d.layout.get("text-variable-anchor"),Me="globe"===Y.projection.name,Ce=[],Re=[0,-1,0];let ot=Re;!Me&&!Y.mercatorFromTransition||K||(ot=function(Se){const He=Se._camera.getWorldToCamera(Se.worldSize,1),Le=p.multiply([],He,Se.globeMatrix);p.invert(Le,Le);const rt=[0,0,0],ke=[0,1,0,0];return p.transformMat4$1(ke,ke,Le),rt[0]=ke[0],rt[1]=ke[1],rt[2]=ke[2],p.normalize(rt,rt),rt}(Y));for(const Se of _){const He=l.getTile(Se),Le=He.getBucket(d);if(!Le||"mercator"===Le.projection.name&&Me)continue;const rt=v?Le.text:Le.icon;if(!rt||Le.fullyClipped||!rt.segments.get().length)continue;const ke=rt.programConfigurations.get(d.id),Ge=v||Le.sdfIcons,st=v?Le.textSizeData:Le.iconSizeData,Qe=te||0!==Y.pitch,ut=p.evaluateSizeForZoom(st,Y.zoom);let Rt,Xt,Et,jt,Mn=[0,0],bn=null;if(v)Xt=He.glyphAtlasTexture,Et=X.LINEAR,Rt=He.glyphAtlasTexture.size,Le.iconsInText&&(Mn=He.imageAtlasTexture.size,bn=He.imageAtlasTexture,jt=Qe||f.options.rotating||f.options.zooming||"composite"===st.kind||"camera"===st.kind?X.LINEAR:X.NEAREST);else{const ua=1!==d.layout.get("icon-size").constantOr(0)||Le.iconsNeedLinear;Xt=He.imageAtlasTexture,Et=Ge||f.options.rotating||f.options.zooming||ua||Qe?X.LINEAR:X.NEAREST,Rt=He.imageAtlasTexture.size}const It="globe"===Le.projection.name,Vn=It?ot:Re,ti=It?p.globeToMercatorTransition(Y.zoom):0,Un=tt(Se,Le.getProjection(),Y),ni=Y.calculatePixelsToTileUnitsMatrix(He),Lo=$e(Un,He.tileID.canonical,te,K,Y,Le.getProjection(),ni),no=f.terrain&&te&&z?p.invert(p.create(),Lo):Cn,fs=eo(Un,He.tileID.canonical,te,K,Y,Le.getProjection(),ni),Kr=ge&&Le.hasTextData(),mi="none"!==d.layout.get("icon-text-fit")&&Kr&&Le.hasIconData();if(z){const ua=Y.elevation,da=ua?ua.getAtTileOffsetFunc(Se,Y.center.lat,Y.worldSize,Le.getProjection()):null,Fa=ea(Un,He.tileID.canonical,te,K,Y,Le.getProjection(),ni);Ph(Le,Un,f,v,Fa,fs,te,N,da,Se)}const Xn=z||v&&ge||mi,jn=f.translatePosMatrix(Un,He,w,T),qi=Xn?Cn:Lo,Yo=f.translatePosMatrix(fs,He,w,T,!0),Mi=Le.getProjection().createInversionMatrix(Y,Se.canonical),ji=[];f.terrainRenderModeElevated()&&te&&ji.push("PITCH_WITH_MAP_TERRAIN"),It&&ji.push("PROJECTION_GLOBE_VIEW"),Xn&&ji.push("PROJECTED_POS_ON_VIEWPORT");const Sd=Ge&&0!==d.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1);let ca;ca=Ge?Le.iconsInText?Ir(st.kind,ut,Z,te,f,jn,qi,Yo,Rt,Mn,Se,ti,me,Mi,Vn,Le.getProjection()):Ia(st.kind,ut,Z,te,f,jn,qi,Yo,v,Rt,!0,Se,ti,me,Mi,Vn,Le.getProjection()):Jo(st.kind,ut,Z,te,f,jn,qi,Yo,v,Rt,Se,ti,me,Mi,Vn,Le.getProjection());const Jl={program:f.useProgram(ka(Ge,v,Le),ke,ji),buffers:rt,uniformValues:ca,atlasTexture:Xt,atlasTextureIcon:bn,atlasInterpolation:Et,atlasInterpolationIcon:jt,isSDF:Ge,hasHalo:Sd,tile:He,labelPlaneMatrixInv:no};if(ie&&Le.canOverlap){ne=!0;const ua=rt.segments.get();for(const da of ua)Ce.push({segments:new p.SegmentVector([da]),sortKey:da.sortKey,state:Jl})}else Ce.push({segments:rt.segments,sortKey:0,state:Jl})}ne&&Ce.sort((Se,He)=>Se.sortKey-He.sortKey);for(const Se of Ce){const He=Se.state;if(f.terrain&&f.terrain.setupElevationDraw(He.tile,He.program,{useDepthForOcclusion:!Me,labelPlaneMatrixInv:He.labelPlaneMatrixInv}),H.activeTexture.set(X.TEXTURE0),He.atlasTexture.bind(He.atlasInterpolation,X.CLAMP_TO_EDGE),He.atlasTextureIcon&&(H.activeTexture.set(X.TEXTURE1),He.atlasTextureIcon&&He.atlasTextureIcon.bind(He.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),He.isSDF){const Le=He.uniformValues;He.hasHalo&&(Le.u_is_halo=1,ra(He.buffers,Se.segments,d,f,He.program,fe,R,B,Le)),Le.u_is_halo=0}ra(He.buffers,Se.segments,d,f,He.program,fe,R,B,He.uniformValues)}}function ra(f,l,d,_,v,w,T,D,S){const N=_.context,R=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];v.draw(N,N.gl.TRIANGLES,w,T,D,p.CullFaceMode.disabled,S,d.id,f.layoutVertexBuffer,f.indexBuffer,l,d.paint,_.transform.zoom,f.programConfigurations.get(d.id),R)}function Wi(f,l,d,_,v,w,T){const D=f.context.gl,S=d.paint.get("fill-pattern"),N=S&&S.constantOr(1);let R,B,H,X,Y;T?(B=N&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",R=D.LINES):(B=N?"fillPattern":"fill",R=D.TRIANGLES);for(const K of _){const te=l.getTile(K);if(N&&!te.patternsLoaded())continue;const z=te.getBucket(d);if(!z)continue;f.prepareDrawTile();const Z=z.programConfigurations.get(d.id),ie=f.useProgram(B,Z);N&&(f.context.activeTexture.set(D.TEXTURE0),te.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Z.updatePaintBuffers());const ne=S.constantOr(null);if(ne&&te.imageAtlas){const me=te.imageAtlas.patternPositions[ne.toString()];me&&Z.setConstantPatternPositions(me)}const fe=f.translatePosMatrix(K.projMatrix,te,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(T){X=z.indexBuffer2,Y=z.segments2;const me=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];H="fillOutlinePattern"===B&&N?Nh(fe,f,te,me):Rh(fe,me)}else X=z.indexBuffer,Y=z.segments,H=N?Ec(fe,f,te):An(fe);f.prepareDrawProgram(f.context,ie,K.toUnwrapped()),ie.draw(f.context,R,v,f.stencilModeForClipping(K),w,p.CullFaceMode.disabled,H,d.id,z.layoutVertexBuffer,X,Y,d.paint,f.transform.zoom,Z)}}function Hl(f,l,d,_,v,w,T){const D=f.context,S=D.gl,N=f.transform,R=d.paint.get("fill-extrusion-pattern"),B=R.constantOr(1),H=d.paint.get("fill-extrusion-opacity"),X=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),d.paint.get("fill-extrusion-ambient-occlusion-radius")],Y=d.layout.get("fill-extrusion-edge-radius"),K=Y>0&&!d.paint.get("fill-extrusion-rounded-roof"),te=K?0:Y,z="globe"===N.projection.name?p.fillExtrusionHeightLift():0,Z="globe"===N.projection.name,ie=Z?p.globeToMercatorTransition(N.zoom):0,ne=[p.mercatorXfromLng(N.center.lng),p.mercatorYfromLat(N.center.lat)],fe=[];Z&&fe.push("PROJECTION_GLOBE_VIEW"),X[0]>0&&fe.push("FAUX_AO"),K&&fe.push("ZERO_ROOF_RADIUS");for(const me of _){const ge=l.getTile(me),Me=ge.getBucket(d);if(!Me||Me.projection.name!==N.projection.name)continue;const Ce=Me.programConfigurations.get(d.id),Re=f.useProgram(B?"fillExtrusionPattern":"fillExtrusion",Ce,fe);if(f.terrain){const Ge=f.terrain;if(f.style.terrainSetForDrapingOnly())Ge.setupElevationDraw(ge,Re,{useMeterToDem:!0});else{if(!Me.enableTerrain)continue;if(Ge.setupElevationDraw(ge,Re,{useMeterToDem:!0}),mu(D,l,me,Me,d,Ge),!Me.centroidVertexBuffer){const st=Re.attributes.a_centroid_pos;void 0!==st&&S.vertexAttrib2f(st,0,0)}}}B&&(f.context.activeTexture.set(S.TEXTURE0),ge.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),Ce.updatePaintBuffers());const ot=R.constantOr(null);if(ot&&ge.imageAtlas){const Ge=ge.imageAtlas.patternPositions[ot.toString()];Ge&&Ce.setConstantPatternPositions(Ge)}const Se=f.translatePosMatrix(me.projMatrix,ge,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),He=N.projection.createInversionMatrix(N,me.canonical),Le=d.paint.get("fill-extrusion-vertical-gradient"),rt=B?oa(Se,f,Le,H,X,te,me,ge,z,ie,ne,He):ds(Se,f,Le,H,X,te,me,z,ie,ne,He);f.prepareDrawProgram(D,Re,me.toUnwrapped());const ke=[];f.terrain&&ke.push(Me.centroidVertexBuffer),Z&&ke.push(Me.layoutVertexExtBuffer),Re.draw(D,D.gl.TRIANGLES,v,w,T,p.CullFaceMode.backCCW,rt,d.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,d.paint,f.transform.zoom,Ce,ke)}}function mu(f,l,d,_,v,w){const T=[z=>{let Z=z.canonical.x-1,ie=z.wrap;return Z<0&&(Z=(1<<z.canonical.z)-1,ie--),new p.OverscaledTileID(z.overscaledZ,ie,z.canonical.z,Z,z.canonical.y)},z=>{let Z=z.canonical.x+1,ie=z.wrap;return Z===1<<z.canonical.z&&(Z=0,ie++),new p.OverscaledTileID(z.overscaledZ,ie,z.canonical.z,Z,z.canonical.y)},z=>new p.OverscaledTileID(z.overscaledZ,z.wrap,z.canonical.z,z.canonical.x,(0===z.canonical.y?1<<z.canonical.z:z.canonical.y)-1),z=>new p.OverscaledTileID(z.overscaledZ,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y===(1<<z.canonical.z)-1?0:z.canonical.y+1)],D=z=>{const Z=l.getSource().minzoom,ie=fe=>{const me=l.getTileByID(fe);if(me&&me.hasData())return me.getBucket(v)},ne=[0,-1,1];for(const fe of ne){if(z.overscaledZ+fe<Z)continue;const me=ie(z.calculateScaledKey(z.overscaledZ+fe));if(me)return me}},S=[0,0,0],N=(z,Z)=>(S[0]=Math.min(z.min.y,Z.min.y),S[1]=Math.max(z.max.y,Z.max.y),S[2]=p.EXTENT-Z.min.x>z.max.x?Z.min.x-p.EXTENT:z.max.x,S),R=(z,Z)=>(S[0]=Math.min(z.min.x,Z.min.x),S[1]=Math.max(z.max.x,Z.max.x),S[2]=p.EXTENT-Z.min.y>z.max.y?Z.min.y-p.EXTENT:z.max.y,S),B=[(z,Z)=>N(z,Z),(z,Z)=>N(Z,z),(z,Z)=>R(z,Z),(z,Z)=>R(Z,z)],H=new p.Point(0,0);let X,Y,K;const te=(z,Z,ie,ne,fe)=>{const me=[[ne?ie:z,ne?z:ie,0],[ne?ie:Z,ne?Z:ie,0]],ge=fe<0?p.EXTENT+fe:fe,Me=[ne?ge:(z+Z)/2,ne?(z+Z)/2:ge,0];return 0===ie&&fe<0||0!==ie&&fe>0?w.getForTilePoints(K,[Me],!0,Y):me.push(Me),w.getForTilePoints(d,me,!0,X),Math.max(me[0][2],me[1][2],Me[2])/w.exaggeration()};for(let z=0;z<4;z++){const Z=(z<2?1:5)-z,ie=_.borders[z];if(0===ie.length)continue;const ne=K=T[z](d),fe=D(ne);if(!(fe&&fe instanceof p.FillExtrusionBucket&&fe.enableTerrain)||_.borderDoneWithNeighborZ[z]===fe.canonical.z&&fe.borderDoneWithNeighborZ[Z]===_.canonical.z||(Y=w.findDEMTileFor(ne),!Y||!Y.dem))continue;if(!X){const Ce=w.findDEMTileFor(d);if(!Ce||!Ce.dem)return;X=Ce}const me=fe.borders[Z];let ge=0;const Me=fe.borderDoneWithNeighborZ[Z]!==_.canonical.z;if(_.canonical.z===fe.canonical.z){for(let Ce=0;Ce<ie.length;Ce++){const Re=_.featuresOnBorder[ie[Ce]],ot=Re.borders[z];let Se;for(;ge<me.length&&(Se=fe.featuresOnBorder[me[ge]],!(Se.borders[Z][1]>ot[0]+3));)Me&&fe.encodeCentroid(void 0,Se,!1),ge++;if(Se&&ge<me.length){const He=ge;let Le=0;for(;!(Se.borders[Z][0]>ot[1]-3)&&(Le++,++ge!==me.length);)Se=fe.featuresOnBorder[me[ge]];if(Se=fe.featuresOnBorder[me[He]],Re.intersectsCount()>1||Se.intersectsCount()>1||1!==Le){1!==Le&&(ge=He),_.encodeCentroid(void 0,Re,!1),Me&&fe.encodeCentroid(void 0,Se,!1);continue}const rt=B[z](Re,Se),ke=z%2?p.EXTENT-1:0;H.x=te(rt[0],Math.min(p.EXTENT-1,rt[1]),ke,z<2,rt[2]),H.y=0,_.encodeCentroid(H,Re,!1),Me&&fe.encodeCentroid(H,Se,!1)}else _.encodeCentroid(void 0,Re,!1)}_.borderDoneWithNeighborZ[z]=fe.canonical.z,_.needsCentroidUpdate=!0,Me&&(fe.borderDoneWithNeighborZ[Z]=_.canonical.z,fe.needsCentroidUpdate=!0)}else{for(const Ce of ie)_.encodeCentroid(void 0,_.featuresOnBorder[Ce],!1);if(Me){for(const Ce of me)fe.encodeCentroid(void 0,fe.featuresOnBorder[Ce],!1);fe.borderDoneWithNeighborZ[Z]=_.canonical.z,fe.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[z]=fe.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&0!==_.centroidVertexArray.length)&&_.uploadCentroid(f)}const gn=new p.Color(1,0,0,1),Lh=new p.Color(0,1,0,1),_u=new p.Color(0,0,1,1),ff=new p.Color(1,0,1,1),Ic=new p.Color(0,1,1,1);function Xo(f,l,d){const _=f.context,v=f.transform,w=_.gl,T="globe"===v.projection.name,D=T?["PROJECTION_GLOBE_VIEW"]:null;let S=d.projMatrix;if(T&&p.globeToMercatorTransition(v.zoom)>0){const Re=p.transitionTileAABBinECEF(d.canonical,v),ot=p.globeDenormalizeECEF(Re);S=p.multiply(new Float32Array(16),v.globeMatrix,ot),p.multiply(S,v.projMatrix,S)}const N=f.useProgram("debug",null,D),R=l.getTileByID(d.key);f.terrain&&f.terrain.setupElevationDraw(R,N);const B=p.DepthMode.disabled,H=p.StencilMode.disabled,X=f.colorModeForRenderPass(),Y="$debug";_.activeTexture.set(w.TEXTURE0),f.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),T?R._makeGlobeTileDebugBuffers(f.context,v):R._makeDebugTileBoundsBuffers(f.context,v.projection);const K=R._tileDebugBuffer||f.debugBuffer,te=R._tileDebugIndexBuffer||f.debugIndexBuffer,z=R._tileDebugSegments||f.debugSegments;N.draw(_,w.LINE_STRIP,B,H,X,p.CullFaceMode.disabled,zn(S,p.Color.red),Y,K,te,z,null,null,null,[R._globeTileDebugBorderBuffer]);const Z=R.latestRawTileData,ie=Math.floor((Z&&Z.byteLength||0)/1024),ne=l.getTile(d).tileSize,fe=512/Math.min(ne,512)*(d.overscaledZ/v.zoom)*.5;let me=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(me+=` => ${d.overscaledZ}`),me+=` ${ie}kb`,function(Re,ot){Re.initDebugOverlayCanvas();const Se=Re.debugOverlayCanvas,He=Re.context.gl,Le=Re.debugOverlayCanvas.getContext("2d");Le.clearRect(0,0,Se.width,Se.height),Le.shadowColor="white",Le.shadowBlur=2,Le.lineWidth=1.5,Le.strokeStyle="white",Le.textBaseline="top",Le.font="bold 36px Open Sans, sans-serif",Le.fillText(ot,5,5),Le.strokeText(ot,5,5),Re.debugOverlayTexture.update(Se),Re.debugOverlayTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE)}(f,me);const ge=R._tileDebugTextBuffer||f.debugBuffer,Me=R._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,Ce=R._tileDebugTextSegments||f.debugSegments;N.draw(_,w.TRIANGLES,B,H,p.ColorMode.alphaBlended,p.CullFaceMode.disabled,zn(S,p.Color.transparent,fe),Y,ge,Me,Ce,null,null,null,[R._globeTileDebugTextBuffer])}function kc(f,l,d,_){ur(f,0,l+d/2,f.transform.width,d,_)}function Ra(f,l,d,_){ur(f,l-d/2,0,d,f.transform.height,_)}function ur(f,l,d,_,v,w){const T=f.context,D=T.gl;D.enable(D.SCISSOR_TEST),D.scissor(l*p.exported.devicePixelRatio,d*p.exported.devicePixelRatio,_*p.exported.devicePixelRatio,v*p.exported.devicePixelRatio),T.clear({color:w}),D.disable(D.SCISSOR_TEST)}const Rc=p.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Bh}=Rc;function Jn(f,l,d,_){f.emplaceBack(l,d,_)}class zh{constructor(l){this.vertexArray=new p.StructArrayLayout3f12,this.indices=new p.StructArrayLayout3ui6,Jn(this.vertexArray,-1,-1,1),Jn(this.vertexArray,1,-1,1),Jn(this.vertexArray,-1,1,1),Jn(this.vertexArray,1,1,1),Jn(this.vertexArray,-1,-1,-1),Jn(this.vertexArray,1,-1,-1),Jn(this.vertexArray,-1,1,-1),Jn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Bh),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=p.SegmentVector.simpleSegment(0,0,36,12)}}function kr(f,l,d,_,v,w){const T=f.gl,D=l.paint.get("sky-atmosphere-color"),S=l.paint.get("sky-atmosphere-halo-color"),N=l.paint.get("sky-atmosphere-sun-intensity"),R={u_matrix_3f:p.fromMat4(p.create$1(),_),u_sun_direction:v,u_sun_intensity:N,u_color_tint_r:[(Y=D).r,Y.g,Y.b,Y.a],u_color_tint_m:[(K=S).r,K.g,K.b,K.a],u_luminance:5e-5};var Y,K;T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),d.draw(f,T.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.frontCW,R,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Nc=p.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class yu{constructor(l){const d=new p.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const _=new p.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(d,Nc.members),this.indexBuffer=l.createIndexBuffer(_),this.segments=p.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const sa={symbol:function(f,l,d,_,v){if("translucent"!==f.renderPass)return;const w=p.StencilMode.disabled,T=f.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(D,S,N,R,B,H,X){const Y=S.transform,K="map"===B,te="map"===H;for(const z of D){const Z=R.getTile(z),ie=Z.getBucket(N);if(!ie||!ie.text||!ie.text.segments.get().length)continue;const ne=p.evaluateSizeForZoom(ie.textSizeData,Y.zoom),fe=tt(z,ie.getProjection(),Y),me=Y.calculatePixelsToTileUnitsMatrix(Z),ge=$e(fe,Z.tileID.canonical,te,K,Y,ie.getProjection(),me),Me="none"!==N.layout.get("icon-text-fit")&&ie.hasIconData();if(ne){const Ce=Math.pow(2,Y.zoom-Z.tileID.overscaledZ);As(ie,K,te,X,p.symbolSize,Y,ge,z,Ce,ne,Me)}}}(_,f,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),v),0!==d.paint.get("icon-opacity").constantOr(1)&&Fo(f,l,d,_,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),w,T),0!==d.paint.get("text-opacity").constantOr(1)&&Fo(f,l,d,_,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),w,T),l.map.showCollisionBoxes&&(St(f,l,d,_,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),St(f,l,d,_,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(f,l,d,_){if("translucent"!==f.renderPass)return;const v=d.paint.get("circle-opacity"),w=d.paint.get("circle-stroke-width"),T=d.paint.get("circle-stroke-opacity"),D=void 0!==d.layout.get("circle-sort-key").constantOr(1);if(0===v.constantOr(1)&&(0===w.constantOr(1)||0===T.constantOr(1)))return;const S=f.context,N=S.gl,R=f.transform,B=f.depthModeForSublayer(0,p.DepthMode.ReadOnly),H=p.StencilMode.disabled,X=f.colorModeForRenderPass(),Y="globe"===R.projection.name,K=[p.mercatorXfromLng(R.center.lng),p.mercatorYfromLat(R.center.lat)],te=[];for(let Z=0;Z<_.length;Z++){const ie=_[Z],ne=l.getTile(ie),fe=ne.getBucket(d);if(!fe||fe.projection.name!==R.projection.name)continue;const me=fe.programConfigurations.get(d.id),ge=Gl(d);Y&&ge.push("PROJECTION_GLOBE_VIEW");const Me=f.useProgram("circle",me,ge),Ce=fe.layoutVertexBuffer,Re=fe.globeExtVertexBuffer,ot=fe.indexBuffer,Se=R.projection.createInversionMatrix(R,ie.canonical),He={programConfiguration:me,program:Me,layoutVertexBuffer:Ce,globeExtVertexBuffer:Re,indexBuffer:ot,uniformValues:Ss(f,ie,ne,Se,K,d),tile:ne};if(D){const Le=fe.segments.get();for(const rt of Le)te.push({segments:new p.SegmentVector([rt]),sortKey:rt.sortKey,state:He})}else te.push({segments:fe.segments,sortKey:0,state:He})}D&&te.sort((Z,ie)=>Z.sortKey-ie.sortKey);const z={useDepthForOcclusion:!Y};for(const Z of te){const{programConfiguration:ie,program:ne,layoutVertexBuffer:fe,globeExtVertexBuffer:me,indexBuffer:ge,uniformValues:Me,tile:Ce}=Z.state,Re=Z.segments;f.terrain&&f.terrain.setupElevationDraw(Ce,ne,z),f.prepareDrawProgram(S,ne,Ce.tileID.toUnwrapped()),ne.draw(S,N.TRIANGLES,B,H,X,p.CullFaceMode.disabled,Me,d.id,fe,ge,Re,d.paint,R.zoom,ie,[me])}},heatmap:function(f,l,d,_){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){const v=f.context,w=v.gl,T=p.StencilMode.disabled,D=new p.ColorMode([w.ONE,w.ONE],p.Color.transparent,[!0,!0,!0,!0]);(function(X,Y,K,te){const z=X.gl,Z=Y.width*te,ie=Y.height*te;X.activeTexture.set(z.TEXTURE1),X.viewport.set([0,0,Z,ie]);let ne=K.heatmapFbo;if(!ne||ne&&(ne.width!==Z||ne.height!==ie)){ne&&ne.destroy();const fe=z.createTexture();z.bindTexture(z.TEXTURE_2D,fe),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),ne=K.heatmapFbo=X.createFramebuffer(Z,ie,!1),function(me,ge,Me,Ce,Re,ot){const Se=me.gl;Se.texImage2D(Se.TEXTURE_2D,0,me.isWebGL2&&me.extRenderToTextureHalfFloat?Se.RGBA16F:Se.RGBA,Re,ot,0,Se.RGBA,me.extRenderToTextureHalfFloat?me.isWebGL2?Se.HALF_FLOAT:me.extTextureHalfFloat.HALF_FLOAT_OES:Se.UNSIGNED_BYTE,null),Ce.colorAttachment.set(Me)}(X,0,fe,ne,Z,ie)}else z.bindTexture(z.TEXTURE_2D,ne.colorAttachment.get()),X.bindFramebuffer.set(ne.framebuffer)})(v,f,d,"globe"===f.transform.projection.name?.5:.25),v.clear({color:p.Color.transparent});const S=f.transform,N="globe"===S.projection.name,R=N?["PROJECTION_GLOBE_VIEW"]:null,B=N?p.CullFaceMode.frontCCW:p.CullFaceMode.disabled,H=[p.mercatorXfromLng(S.center.lng),p.mercatorYfromLat(S.center.lat)];for(let X=0;X<_.length;X++){const Y=_[X];if(l.hasRenderableParent(Y))continue;const K=l.getTile(Y),te=K.getBucket(d);if(!te||te.projection.name!==S.projection.name)continue;const z=te.programConfigurations.get(d.id),Z=f.useProgram("heatmap",z,R),{zoom:ie}=f.transform;f.terrain&&f.terrain.setupElevationDraw(K,Z),f.prepareDrawProgram(v,Z,Y.toUnwrapped());const ne=S.projection.createInversionMatrix(S,Y.canonical);Z.draw(v,w.TRIANGLES,p.DepthMode.disabled,T,D,B,hf(f,Y,K,ne,H,ie,d.paint.get("heatmap-intensity")),d.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,d.paint,f.transform.zoom,z,N?[te.globeExtVertexBuffer]:null)}v.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,w){const T=v.context,D=T.gl,S=w.heatmapFbo;if(!S)return;T.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,S.colorAttachment.get()),T.activeTexture.set(D.TEXTURE1);let N=w.colorRampTexture;N||(N=w.colorRampTexture=new p.Texture(T,w.colorRamp,D.RGBA)),N.bind(D.LINEAR,D.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(T,D.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,v.colorModeForRenderPass(),p.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:w.paint.get("heatmap-opacity")},w.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,w.paint,v.transform.zoom)}(f,d))},line:function(f,l,d,_){if("translucent"!==f.renderPass)return;const v=d.paint.get("line-opacity"),w=d.paint.get("line-width");if(0===v.constantOr(1)||0===w.constantOr(1))return;const T=f.depthModeForSublayer(0,p.DepthMode.ReadOnly),D=f.colorModeForRenderPass(),S=f.terrain&&f.terrain.renderingToTexture?1:p.exported.devicePixelRatio,N=d.paint.get("line-dasharray"),R=N.constantOr(1),B=d.layout.get("line-cap"),H=d.paint.get("line-pattern"),X=H.constantOr(1),Y=d.paint.get("line-gradient"),K=X?"linePattern":"line",te=f.context,z=te.gl,Z=(ne=>{const fe=[];vt(ne)&&fe.push("RENDER_LINE_DASH"),ne.paint.get("line-gradient")&&fe.push("RENDER_LINE_GRADIENT");const me=ne.paint.get("line-trim-offset");0===me[0]&&0===me[1]||fe.push("RENDER_LINE_TRIM_OFFSET");const ge=ne.paint.get("line-pattern").constantOr(1),Me=1!==ne.paint.get("line-opacity").constantOr(1);return!ge&&Me&&fe.push("RENDER_LINE_ALPHA_DISCARD"),fe})(d);let ie=Z.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(ie=!1);for(const ne of _){const fe=l.getTile(ne);if(X&&!fe.patternsLoaded())continue;const me=fe.getBucket(d);if(!me)continue;f.prepareDrawTile();const ge=me.programConfigurations.get(d.id),Me=f.useProgram(K,ge,Z),Ce=H.constantOr(null);if(Ce&&fe.imageAtlas){const Ge=fe.imageAtlas.patternPositions[Ce.toString()];Ge&&ge.setConstantPatternPositions(Ge)}const Re=N.constantOr(null),ot=B.constantOr(null);if(!X&&Re&&ot&&fe.lineAtlas){const Ge=fe.lineAtlas.getDash(Re,ot);Ge&&ge.setConstantPatternPositions(Ge)}let[Se,He]=d.paint.get("line-trim-offset");("round"===ot||"square"===ot)&&Se!==He&&(0===Se&&(Se-=1),1===He&&(He+=1));const Le=f.terrain?ne.projMatrix:null,rt=X?ei(f,fe,d,Le,S):nm(f,fe,d,Le,me.lineClipsArray.length,S,[Se,He]);if(Y){const Ge=me.gradients[d.id];let st=Ge.texture;if(d.gradientVersion!==Ge.version){let Qe=256;if(d.stepInterpolant){const ut=l.getSource().maxzoom,Rt=ne.canonical.z===ut?Math.ceil(1<<f.transform.maxZoom-ne.canonical.z):1;Qe=p.clamp(p.nextPowerOfTwo(me.maxLineLength/p.EXTENT*1024*Rt),256,te.maxTextureSize)}Ge.gradient=p.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Qe,image:Ge.gradient||void 0,clips:me.lineClipsArray}),Ge.texture?Ge.texture.update(Ge.gradient):Ge.texture=new p.Texture(te,Ge.gradient,z.RGBA),Ge.version=d.gradientVersion,st=Ge.texture}te.activeTexture.set(z.TEXTURE1),st.bind(d.stepInterpolant?z.NEAREST:z.LINEAR,z.CLAMP_TO_EDGE)}R&&(te.activeTexture.set(z.TEXTURE0),fe.lineAtlasTexture.bind(z.LINEAR,z.REPEAT),ge.updatePaintBuffers()),X&&(te.activeTexture.set(z.TEXTURE0),fe.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ge.updatePaintBuffers()),f.prepareDrawProgram(te,Me,ne.toUnwrapped());const ke=Ge=>{Me.draw(te,z.TRIANGLES,T,Ge,D,p.CullFaceMode.disabled,rt,d.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,d.paint,f.transform.zoom,ge,[me.layoutVertexBuffer2])};if(ie){const Ge=f.stencilModeForClipping(ne).ref;0===Ge&&f.terrain&&te.clear({stencil:0});const st={func:z.EQUAL,mask:255};rt.u_alpha_discard_threshold=.8,ke(new p.StencilMode(st,Ge,255,z.KEEP,z.KEEP,z.INVERT)),rt.u_alpha_discard_threshold=0,ke(new p.StencilMode(st,Ge,255,z.KEEP,z.KEEP,z.KEEP))}else ke(f.stencilModeForClipping(ne))}ie&&(f.resetStencilClippingMasks(),f.terrain&&te.clear({stencil:0}))},fill:function(f,l,d,_){const v=d.paint.get("fill-color"),w=d.paint.get("fill-opacity");if(0===w.constantOr(1))return;const T=f.colorModeForRenderPass(),D=d.paint.get("fill-pattern"),S=f.opaquePassEnabledForLayer()&&!D.constantOr(1)&&1===v.constantOr(p.Color.transparent).a&&1===w.constantOr(0)?"opaque":"translucent";if(f.renderPass===S){const N=f.depthModeForSublayer(1,"opaque"===f.renderPass?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly);Wi(f,l,d,_,N,T,!1)}if("translucent"===f.renderPass&&d.paint.get("fill-antialias")){const N=f.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,p.DepthMode.ReadOnly);Wi(f,l,d,_,N,T,!0)}},"fill-extrusion":function(f,l,d,_){const v=d.paint.get("fill-extrusion-opacity");if(0!==v&&"translucent"===f.renderPass){const w=new p.DepthMode(f.context.gl.LEQUAL,p.DepthMode.ReadWrite,f.depthRangeFor3D);if(1!==v||d.paint.get("fill-extrusion-pattern").constantOr(1))Hl(f,l,d,_,w,p.StencilMode.disabled,p.ColorMode.disabled),Hl(f,l,d,_,w,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const T=f.colorModeForRenderPass();Hl(f,l,d,_,w,p.StencilMode.disabled,T)}}},hillshade:function(f,l,d,_){if("offscreen"!==f.renderPass&&"translucent"!==f.renderPass)return;const v=f.context,w=f.depthModeForSublayer(0,p.DepthMode.ReadOnly),T=f.colorModeForRenderPass(),D=f.terrain&&f.terrain.renderingToTexture,[S,N]="translucent"!==f.renderPass||D?[{},_]:f.stencilConfigForOverlap(_);for(const R of N){const B=l.getTile(R);if(B.needsHillshadePrepare&&"offscreen"===f.renderPass)cf(f,B,d,w,p.StencilMode.disabled,T);else if("translucent"===f.renderPass){const H=D&&f.terrain?f.terrain.stencilModeForRTTOverlap(R):S[R.overscaledZ];ud(f,R,B,d,w,H,T)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,l,d,_,v,w){if("translucent"!==f.renderPass||0===d.paint.get("raster-opacity")||!_.length)return;const T=f.context,D=T.gl,S=l.getSource(),N=f.useProgram("raster"),R=f.colorModeForRenderPass(),B=f.terrain&&f.terrain.renderingToTexture,[H,X]=S instanceof hn||B?[{},_]:f.stencilConfigForOverlap(_),Y=X[X.length-1].overscaledZ,K=!f.options.moving;for(const te of X){const z=B?p.DepthMode.disabled:f.depthModeForSublayer(te.overscaledZ-Y,1===d.paint.get("raster-opacity")?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly,D.LESS),Z=te.toUnwrapped(),ie=l.getTile(te);if(B&&(!ie||!ie.hasData()))continue;const ne=B?te.projMatrix:f.transform.calculateProjMatrix(Z,K),fe=f.terrain&&B?f.terrain.stencilModeForRTTOverlap(te):H[te.overscaledZ],me=w?0:d.paint.get("raster-fade-duration");ie.registerFadeDuration(me);const ge=l.findLoadedParent(te,0),Me=Pc(ie,ge,l,f.transform,me);let Ce,Re;f.terrain&&f.terrain.prepareDrawTile();const ot="nearest"===d.paint.get("raster-resampling")?D.NEAREST:D.LINEAR;T.activeTexture.set(D.TEXTURE0),ie.texture.bind(ot,D.CLAMP_TO_EDGE),T.activeTexture.set(D.TEXTURE1),ge?(ge.texture.bind(ot,D.CLAMP_TO_EDGE),Ce=Math.pow(2,ge.tileID.overscaledZ-ie.tileID.overscaledZ),Re=[ie.tileID.canonical.x*Ce%1,ie.tileID.canonical.y*Ce%1]):ie.texture.bind(ot,D.CLAMP_TO_EDGE),ie.texture.useMipmap&&T.extTextureFilterAnisotropic&&f.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);const Se=Zo(ne,Re||[0,0],Ce||1,Me,d,S instanceof hn?S.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(T,N,Z),S instanceof hn)S.boundsBuffer&&S.boundsSegments&&N.draw(T,D.TRIANGLES,z,p.StencilMode.disabled,R,p.CullFaceMode.disabled,Se,d.id,S.boundsBuffer,f.quadTriangleIndexBuffer,S.boundsSegments);else{const{tileBoundsBuffer:He,tileBoundsIndexBuffer:Le,tileBoundsSegments:rt}=f.getTileBoundsBuffers(ie);N.draw(T,D.TRIANGLES,z,fe,R,p.CullFaceMode.disabled,Se,d.id,He,Le,rt)}}f.resetStencilClippingMasks()},background:function(f,l,d,_){const v=d.paint.get("background-color"),w=d.paint.get("background-opacity");if(0===w)return;const T=f.context,D=T.gl,S=f.transform,N=S.tileSize,R=d.paint.get("background-pattern");if(f.isPatternMissing(R))return;const B=!R&&1===v.a&&1===w&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==B)return;const H=p.StencilMode.disabled,X=f.depthModeForSublayer(0,"opaque"===B?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly),Y=f.colorModeForRenderPass(),K=f.useProgram(R?"backgroundPattern":"background");let te,z=_;z||(te=f.getBackgroundTiles(),z=Object.values(te).map(Z=>Z.tileID)),R&&(T.activeTexture.set(D.TEXTURE0),f.imageManager.bind(f.context));for(const Z of z){const ie=Z.toUnwrapped(),ne=_?Z.projMatrix:f.transform.calculateProjMatrix(ie);f.prepareDrawTile();const fe=l?l.getTile(Z):te?te[Z.key]:new p.Tile(Z,N,S.zoom,f),me=R?pf(ne,w,f,R,{tileID:Z,tileSize:N}):pd(ne,w,v);f.prepareDrawProgram(T,K,ie);const{tileBoundsBuffer:ge,tileBoundsIndexBuffer:Me,tileBoundsSegments:Ce}=f.getTileBoundsBuffers(fe);K.draw(T,D.TRIANGLES,X,H,Y,p.CullFaceMode.disabled,me,d.id,ge,Me,Ce)}},sky:function(f,l,d){const _=f.transform,v="mercator"===_.projection.name||"globe"===_.projection.name?1:p.smoothstep(7,8,_.zoom),w=d.paint.get("sky-opacity")*v;if(0===w)return;const T=f.context,D=d.paint.get("sky-type"),S=new p.DepthMode(T.gl.LEQUAL,p.DepthMode.ReadOnly,[0,1]),N=f.frameCounter/1e3%1;"atmosphere"===D?"offscreen"===f.renderPass?d.needsSkyboxCapture(f)&&(function(R,B,H,X){const Y=R.context,K=Y.gl;let te=B.skyboxFbo;if(!te){te=B.skyboxFbo=Y.createFramebuffer(32,32,!1),B.skyboxGeometry=new zh(Y),B.skyboxTexture=Y.gl.createTexture(),K.bindTexture(K.TEXTURE_CUBE_MAP,B.skyboxTexture),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_MAG_FILTER,K.LINEAR);for(let ne=0;ne<6;++ne)K.texImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,K.RGBA,32,32,0,K.RGBA,K.UNSIGNED_BYTE,null)}Y.bindFramebuffer.set(te.framebuffer),Y.viewport.set([0,0,32,32]);const z=B.getCenter(R,!0),Z=R.useProgram("skyboxCapture"),ie=new Float64Array(16);p.identity(ie),p.rotateY(ie,ie,.5*-Math.PI),kr(Y,B,Z,ie,z,0),p.identity(ie),p.rotateY(ie,ie,.5*Math.PI),kr(Y,B,Z,ie,z,1),p.identity(ie),p.rotateX(ie,ie,.5*-Math.PI),kr(Y,B,Z,ie,z,2),p.identity(ie),p.rotateX(ie,ie,.5*Math.PI),kr(Y,B,Z,ie,z,3),p.identity(ie),kr(Y,B,Z,ie,z,4),p.identity(ie),p.rotateY(ie,ie,Math.PI),kr(Y,B,Z,ie,z,5),Y.viewport.set([0,0,R.width,R.height])}(f,d),d.markSkyboxValid(f)):"sky"===f.renderPass&&function(R,B,H,X,Y){const K=R.context,te=K.gl,z=R.transform,Z=R.useProgram("skybox");K.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_CUBE_MAP,B.skyboxTexture);const ie={u_matrix:z.skyboxMatrix,u_sun_direction:B.getCenter(R,!1),u_cubemap:0,u_opacity:X,u_temporal_offset:Y};R.prepareDrawProgram(K,Z),Z.draw(K,te.TRIANGLES,H,p.StencilMode.disabled,R.colorModeForRenderPass(),p.CullFaceMode.backCW,ie,"skybox",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(f,d,S,w,N):"gradient"===D&&"sky"===f.renderPass&&function(R,B,H,X,Y){const K=R.context,te=K.gl,z=R.transform,Z=R.useProgram("skyboxGradient");B.skyboxGeometry||(B.skyboxGeometry=new zh(K)),K.activeTexture.set(te.TEXTURE0);let ie=B.colorRampTexture;ie||(ie=B.colorRampTexture=new p.Texture(K,B.colorRamp,te.RGBA)),ie.bind(te.LINEAR,te.CLAMP_TO_EDGE);const ne=(fe=z.skyboxMatrix,me=B.getCenter(R,!1),ge=B.paint.get("sky-gradient-radius"),Me=X,Ce=Y,{u_matrix:fe,u_color_ramp:0,u_center_direction:me,u_radius:p.degToRad(ge),u_opacity:Me,u_temporal_offset:Ce});var fe,me,ge,Me,Ce;R.prepareDrawProgram(K,Z),Z.draw(K,te.TRIANGLES,H,p.StencilMode.disabled,R.colorModeForRenderPass(),p.CullFaceMode.backCW,ne,"skyboxGradient",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(f,d,S,w,N)},debug:function(f,l,d){for(let _=0;_<d.length;_++)Xo(f,l,d[_])},custom:function(f,l,d,_){const v=f.context,w=d.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||"offscreen"===f.renderPass)&&d.isLayerDraped()){if("offscreen"===f.renderPass){const T=w.prerender;if(T){if(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),"globe"===f.transform.projection.name){const D=f.transform.pointMerc;T.call(w,v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(f.transform.zoom),[D.x,D.y],f.transform.pixelsPerMeterRatio)}else T.call(w,v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState()}}else if("translucent"===f.renderPass){if(f.terrain&&f.terrain.renderingToTexture){const D=w.renderToTile;if(D){const S=_[0].canonical,N=new p.MercatorCoordinate(S.x+_[0].wrap*(1<<S.z),S.y,S.z);v.setDepthMode(p.DepthMode.disabled),v.setStencilMode(p.StencilMode.disabled),v.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),D.call(w,v.gl,N),v.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(p.StencilMode.disabled);const T="3d"===w.renderingMode?new p.DepthMode(f.context.gl.LEQUAL,p.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,p.DepthMode.ReadOnly);if(v.setDepthMode(T),"globe"===f.transform.projection.name){const D=f.transform.pointMerc;w.render(v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),p.globeToMercatorTransition(f.transform.zoom),[D.x,D.y],f.transform.pixelsPerMeterRatio)}else w.render(v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}else p.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Is{constructor(l,d,_=!1){this.context=new pt(l,_),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=p.SourceCache.maxUnderzooming+p.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,d){const _=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new kh(this,l));const v=this._terrain;this.transform.elevation=_?v:null,v.update(l,this.transform,d)}_updateFog(l){const d=l.fog;if(!d||"globe"===this.transform.projection.name||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,v]=d.getFovAdjustedRange(this.transform._fov);if(_>v)return void(this.transform.fogCullDistSq=null);const w=_+.78*(v-_);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,d){if(this.width=l*p.exported.devicePixelRatio,this.height=d*p.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const l=this.context,d=new p.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(p.EXTENT,0),d.emplaceBack(0,p.EXTENT),d.emplaceBack(p.EXTENT,p.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(d,p.posAttributes.members),this.tileExtentSegments=p.SegmentVector.simpleSegment(0,0,4,2);const _=new p.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(p.EXTENT,0),_.emplaceBack(0,p.EXTENT),_.emplaceBack(p.EXTENT,p.EXTENT),this.debugBuffer=l.createVertexBuffer(_,p.posAttributes.members),this.debugSegments=p.SegmentVector.simpleSegment(0,0,4,5);const v=new p.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(v,p.posAttributes.members),this.viewportSegments=p.SegmentVector.simpleSegment(0,0,4,2);const w=new p.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(p.EXTENT,0,p.EXTENT,0),w.emplaceBack(0,p.EXTENT,0,p.EXTENT),w.emplaceBack(p.EXTENT,p.EXTENT,p.EXTENT,p.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,p.boundsAttributes.members),this.mercatorBoundsSegments=p.SegmentVector.simpleSegment(0,0,4,2);const T=new p.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(T);const D=new p.StructArrayLayout1ui2;for(const N of[0,1,3,2,0])D.emplaceBack(N);this.debugIndexBuffer=l.createIndexBuffer(D),this.emptyTexture=new p.Texture(l,new p.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=p.create();const S=this.context.gl;this.stencilClearMode=new p.StencilMode({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO),this.loadTimeStamps.push(p.window.performance.now()),this.atmosphereBuffer=new yu(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,d=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,d.TRIANGLES,p.DepthMode.disabled,this.stencilClearMode,p.ColorMode.disabled,p.CullFaceMode.disabled,fn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,d,_){if(!d||this.currentStencilSource===d.id||!l.isTileClipped()||!_||0===_.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const S of _)if(void 0===this._tileClippingMaskIDs[S.key]){D=!0;break}if(!D)return}this.currentStencilSource=d.id;const v=this.context,w=v.gl;this.nextStencilID+_.length>256&&this.clearStencil(),v.setColorMode(p.ColorMode.disabled),v.setDepthMode(p.DepthMode.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of _){const S=d.getTile(D),N=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:R,tileBoundsIndexBuffer:B,tileBoundsSegments:H}=this.getTileBoundsBuffers(S);T.draw(v,w.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:w.ALWAYS,mask:0},N,255,w.KEEP,w.KEEP,w.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,fn(D.projMatrix),"$clipping",R,B,H)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new p.StencilMode({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const d=this.context.gl;return new p.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,_=l.sort((T,D)=>D.overscaledZ-T.overscaledZ),v=_[_.length-1].overscaledZ,w=_[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const T={};for(let D=0;D<w;D++)T[D+v]=new p.StencilMode({func:d.GEQUAL,mask:255},D+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=w,[T,_]}return[{[v]:p.StencilMode.disabled},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new p.ColorMode([l.CONSTANT_COLOR,l.ONE],new p.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?p.ColorMode.unblended:p.ColorMode.alphaBlended}depthModeForSublayer(l,d,_){if(!this.opaquePassEnabledForLayer())return p.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new p.DepthMode(_||this.context.gl.LEQUAL,d,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,d){this.style=l,this.options=d,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(p.exported.now()),this.imageManager.beginFrame();const _=this.style.order,v=this.style._sourceCaches;for(const N in v){const R=v[N];R.used&&R.prepare(this.context)}const w={},T={},D={};for(const N in v){const R=v[N];w[N]=R.getVisibleCoordinates(),T[N]=w[N].slice().reverse(),D[N]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<_.length;N++)if(this.style._layers[_[N]].is3D()){this.opaquePassCutoff=N;break}if(this.terrain&&(this.terrain.updateTileBinding(D),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new p.GlobeSharedBuffers(this.context)),!p.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const N of _){const R=this.style._layers[N],B=l._getLayerSourceCache(R);if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const H=B?T[B.id]:void 0;("custom"===R.type||R.isSky()||H&&H.length)&&this.renderLayer(this,B,R,H)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const S=this.terrain;if(S&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&S.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?p.Color.black:p.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[_[this.currentLayer]],R=l._getLayerSourceCache(N);if(N.isSky())continue;const B=R?T[R.id]:void 0;this._renderTileClippingMasks(N,R,B),this.renderLayer(this,R,N,B)}if(this.style.fog&&this.transform.projection.supportsFog&&function(N,R){const B=N.context,H=B.gl,X=N.transform,Y=new p.DepthMode(H.LEQUAL,p.DepthMode.ReadOnly,[0,1]),K=N.useProgram("globeAtmosphere",null,"globe"===X.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),te=p.globeToMercatorTransition(X.zoom),z=R.properties.get("color").toArray01(),Z=R.properties.get("high-color").toArray01(),ie=R.properties.get("space-color").toArray01PremultipliedAlpha(),ne=p.identity$1([]);p.rotateY$1(ne,ne,-p.degToRad(X._center.lng)),p.rotateX$1(ne,ne,p.degToRad(X._center.lat)),p.rotateZ$1(ne,ne,X.angle),p.rotateX$1(ne,ne,-X._pitch);const fe=p.fromQuat(new Float32Array(16),ne),me=p.mapValue(R.properties.get("star-intensity"),0,1,0,.25),Me=p.mapValue(R.properties.get("horizon-blend"),0,1,5e-4,.25),Ce=p.globeUseCustomAntiAliasing(N,B,X)&&5e-4===Me?X.worldSize/(2*Math.PI*1.025)-1:X.globeRadius,Re=N.frameCounter/1e3%1,ot=p.length(X.globeCenterInViewSpace),Se=Math.sqrt(Math.pow(ot,2)-Math.pow(Ce,2)),He=Math.acos(Se/ot),Le={u_frustum_tl:X.frustumCorners.TL,u_frustum_tr:X.frustumCorners.TR,u_frustum_br:X.frustumCorners.BR,u_frustum_bl:X.frustumCorners.BL,u_horizon:X.frustumCorners.horizon,u_transition:te,u_fadeout_range:Me,u_color:z,u_high_color:Z,u_space_color:ie,u_star_intensity:me,u_star_size:5*p.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Re,u_horizon_angle:He,u_rotation_matrix:fe};N.prepareDrawProgram(B,K);const rt=N.atmosphereBuffer;rt&&K.draw(B,H.TRIANGLES,Y,p.StencilMode.disabled,p.ColorMode.alphaBlended,p.CullFaceMode.backCW,Le,"skybox",rt.vertexBuffer,rt.indexBuffer,rt.segments)}(this,this.style.fog),this.renderPass="sky",(p.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const N=this.style._layers[_[this.currentLayer]],R=l._getLayerSourceCache(N);N.isSky()&&this.renderLayer(this,R,N,R?T[R.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const N=this.style._layers[_[this.currentLayer]],R=l._getLayerSourceCache(N);if(N.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(N)){if(N.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const B=R?("symbol"===N.type?D:T)[R.id]:void 0;this._renderTileClippingMasks(N,R,R?w[R.id]:void 0),this.renderLayer(this,R,N,B),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let N=null;p.values(this.style._layers).forEach(R=>{const B=l._getLayerSourceCache(R);B&&!R.isHidden(this.transform.zoom)&&(!N||N.getSource().maxzoom<B.getSource().maxzoom)&&(N=B)}),N&&this.options.showTileBoundaries&&sa.debug(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const R=N.transform.padding;kc(N,N.transform.height-(R.top||0),3,gn),kc(N,R.bottom||0,3,Lh),Ra(N,R.left||0,3,_u),Ra(N,N.transform.width-(R.right||0),3,ff);const B=N.transform.centerPoint;var H,X,Y,K;ur(H=N,(X=B.x)-1,(Y=N.transform.height-B.y)-10,2,20,K=Ic),ur(H,X-10,Y-1,20,2,K)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(p.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,d,_,v){_.isHidden(this.transform.zoom)||("background"===_.type||"sky"===_.type||"custom"===_.type||v&&v.length)&&(this.id=_.id,this.gpuTimingStart(_),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(_.type)||l.terrain&&"custom"===_.type)&&sa[_.type](l,d,_,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let _=this.gpuTimers[l.id];_||(_=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),_.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,d=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),l.beginQueryEXT(l.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const d={};for(const _ in l){const v=l[_],w=this.context.extTimerQuery,T=w.getQueryObjectEXT(v.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(v.query),d[_]=T}return d}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let _=0;for(const v of l)_+=d.getQueryObjectEXT(v,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(v);return _}translatePosMatrix(l,d,_,v,w){if(!_[0]&&!_[1])return l;const T=w?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(T){const N=Math.sin(T),R=Math.cos(T);_=[_[0]*R-_[1]*N,_[0]*N+_[1]*R]}const D=[w?_[0]:Yi(d,_[0],this.transform.zoom),w?_[1]:Yi(d,_[1],this.transform.zoom),0],S=new Float32Array(16);return p.translate(S,l,D),S}saveTileTexture(l){const d=this._tileTextures[l.size[0]];d?d.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}isPatternMissing(l){return null===l||void 0!==l&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,d=this.terrain&&0===this.terrain.exaggeration(),_=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),"globe"===this.transform.projection.name&&v.push("GLOBE"),d&&v.push("ZERO_EXAGGERATION"),_&&!l&&0!==_.getOpacity(this.transform.pitch)&&v.push("FOG"),l&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(l,d,_){this.cache=this.cache||{};const v=_||[],w=this.currentGlobalDefines().concat(v),T=Sn.cacheKey(Ci[l],l,w,d);return this.cache[T]||(this.cache[T]=new Sn(this.context,l,Ci[l],d,Ac[l],w)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=p.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,d,_){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const w=v.getOpacity(this.transform.pitch),T=((D,S,N,R,B,H,X,Y,K,te,z)=>{const Z=D.transform,ie=S.properties.get("color").toArray01();ie[3]=R;const ne=D.frameCounter/1e3%1;return{u_fog_matrix:N?Z.calculateFogTileMatrix(N):D.identityMat,u_fog_range:S.getFovAdjustedRange(Z._fov),u_fog_color:ie,u_fog_horizon_blend:S.properties.get("horizon-blend"),u_fog_temporal_offset:ne,u_frustum_tl:B,u_frustum_tr:H,u_frustum_br:X,u_frustum_bl:Y,u_globe_pos:K,u_globe_radius:te,u_viewport:z,u_globe_transition:p.globeToMercatorTransition(Z.zoom),u_is_globe:+("globe"===Z.projection.name)}})(this,v,_,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*p.exported.devicePixelRatio,this.transform.height*p.exported.devicePixelRatio]);d.setFogUniformValues(l,T)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&0!==l.getOpacity(this.transform.pitch)}getBackgroundTiles(){const l=this._backgroundTiles,d=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const v of _)d[v.key]=l[v.key]||new p.Tile(v,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class bo{constructor(l=0,d=0,_=0,v=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(_)||_<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=_,this.right=v}interpolate(l,d,_){return null!=d.top&&null!=l.top&&(this.top=p.number(l.top,d.top,_)),null!=d.bottom&&null!=l.bottom&&(this.bottom=p.number(l.bottom,d.bottom,_)),null!=d.left&&null!=l.left&&(this.left=p.number(l.left,d.left,_)),null!=d.right&&null!=l.right&&(this.right=p.number(l.right,d.right,_)),this}getCenter(l,d){const _=p.clamp((this.left+l-this.right)/2,0,l),v=p.clamp((this.top+d-this.bottom)/2,0,d);return new p.Point(_,v)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new bo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Vh(f,l){const d=p.getColumn(f,3);p.fromQuat(f,l),p.setColumn(f,3,d)}function sn(f,l){const d=p.identity$1([]);return p.rotateZ$1(d,d,-l),p.rotateX$1(d,d,-f),d}function dr(f,l){const d=[f[0],f[1],0],_=[l[0],l[1],0];if(p.length(d)>=1e-15){const T=p.normalize([],d);p.scale$2(_,T,p.dot(_,T)),l[0]=_[0],l[1]=_[1]}const v=p.cross([],l,f);if(p.len(v)<1e-15)return null;const w=Math.atan2(-v[1],v[0]);return sn(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),w)}class fd{constructor(l,d){this.position=l,this.orientation=d}get position(){return this._position}set position(l){if(l){const d=l instanceof p.MercatorCoordinate?l:new p.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(d.x=p.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(l,d){if(this.orientation=null,!this.position)return;const _=this.position,v=this._elevation?this._elevation.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(l)):0,w=p.MercatorCoordinate.fromLngLat(l,v),T=[w.x-_.x,w.y-_.y,w.z-_.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=dr(T,d)}setPitchBearing(l,d){this.orientation=sn(p.degToRad(l),p.degToRad(-d))}}class dl{constructor(l,d){this._transform=p.identity([]),this.orientation=d,this.position=l}get mercatorPosition(){const l=this.position;return new p.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=p.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var d;l&&p.setColumn(this._transform,3,[(d=l)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||p.identity$1([]),l&&Vh(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,d){this._orientation=sn(l,d),Vh(this._transform,this._orientation)}forward(){const l=p.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=p.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=p.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,d){const _=new Float64Array(16);return p.invert(_,this.getWorldToCamera(l,d)),_}getWorldToCameraPosition(l,d,_){const v=this.position;p.scale$2(v,v,-l);const w=new Float64Array(16);return p.fromScaling(w,[_,_,_]),p.translate(w,w,v),w[10]*=d,w}getWorldToCamera(l,d){const _=new Float64Array(16),v=new Float64Array(4),w=this.position;return p.conjugate(v,this._orientation),p.scale$2(w,w,-l),p.fromQuat(_,v),p.translate(_,_,w),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=d,_[9]*=d,_[10]*=d,_[11]*=d,_}getCameraToClipPerspective(l,d,_,v){const w=new Float64Array(16);return p.perspective(w,l,d,_,v),w}getDistanceToElevation(l,d=!1){const _=0===l?0:p.mercatorZfromAltitude(l,d?p.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(_-this.position[2])/v[2]}clone(){return new dl([...this.position],[...this.orientation])}}function Na(f,l){const d=gd(f.projection,f.zoom,f.width,f.height),_=function(w,T,D,S,N){const R=new p.LngLat(D.lng-180*hl,D.lat),B=new p.LngLat(D.lng+180*hl,D.lat),H=w.project(R.lng,R.lat),X=w.project(B.lng,B.lat),Y=-Math.atan2(X.y-H.y,X.x-H.x),K=p.MercatorCoordinate.fromLngLat(D);K.y=p.clamp(K.y,-1+hl,1-hl);const te=K.toLngLat(),z=w.project(te.lng,te.lat),Z=p.MercatorCoordinate.fromLngLat(te);Z.x+=hl;const ie=Z.toLngLat(),ne=w.project(ie.lng,ie.lat),fe=md(ne.x-z.x,ne.y-z.y,Y),me=p.MercatorCoordinate.fromLngLat(te);me.y+=hl;const ge=me.toLngLat(),Me=w.project(ge.lng,ge.lat),Ce=md(Me.x-z.x,Me.y-z.y,Y),Re=Math.abs(fe.x)/Math.abs(Ce.y),ot=p.identity([]);p.rotateZ(ot,ot,-Y*(1-(N?0:S)));const Se=p.identity([]);return p.scale(Se,Se,[1,1-(1-Re)*S,1]),Se[4]=-Ce.x/Ce.y*S,p.rotateZ(Se,Se,Y),p.multiply(Se,ot,Se),Se}(f.projection,0,f.center,d,l),v=ps(f);return p.scale(_,_,[v,v,1]),_}function ps(f){const l=f.projection,d=gd(f.projection,f.zoom,f.width,f.height),_=gf(l,f.center),v=gf(l,p.LngLat.convert(l.center));return Math.pow(2,_*d+(1-d)*v)}function gd(f,l,d,_,v=1/0){const w=f.range;if(!w)return 0;const T=Math.min(v,Math.max(d,_)),D=Math.log(T/1024)/Math.LN2;return p.smoothstep(w[0]+D,w[1]+D,l)}const hl=1/4e4;function gf(f,l){const d=p.clamp(l.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),_=new p.LngLat(l.lng-180*hl,d),v=new p.LngLat(l.lng+180*hl,d),w=f.project(_.lng,d),T=f.project(v.lng,d),D=p.MercatorCoordinate.fromLngLat(_),S=p.MercatorCoordinate.fromLngLat(v),N=T.x-w.x,R=T.y-w.y,B=S.x-D.x,H=S.y-D.y,X=Math.sqrt((B*B+H*H)/(N*N+R*R));return Math.log(X)/Math.LN2}function md(f,l,d){const _=Math.cos(d),v=Math.sin(d);return{x:f*_-l*v,y:f*v+l*_}}class vu{constructor(l,d,_,v,w,T,D){this.tileSize=512,this._renderWorldCopies=void 0===w||w,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=v??60,this.setProjection(T),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new p.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new bo,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new dl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new vu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,d=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||_)&&this._updateCameraOnTerrain(),(l||_)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return p.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=p.getProjection(this.projectionOptions);const _=!Xe(d,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=p.getProjection({name:"mercator"});const d=l!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(l){void 0===l?l=!0:null===l&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return p.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new p.Point(this.width,this.height)}get bearing(){return p.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const d=-l*Math.PI/180;var _,v,w,T,D,S,N,R,B,H;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(_=new p.ARRAY_TYPE(4),p.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),v=this.rotationMatrix,T=this.angle,D=(w=this.rotationMatrix)[0],S=w[1],N=w[2],R=w[3],B=Math.sin(T),H=Math.cos(T),v[0]=D*H+N*B,v[1]=S*H+R*B,v[2]=D*-B+N*H,v[3]=S*-B+R*H)}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=p.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=p.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let v=0,w=0;for(let T=0;T<d.length;T++){const D=new p.Point(d[T][0]*this.width,_+d[T][1]*(this.height-_)),S=l.pointCoordinate(D);if(!S)continue;const N=1/Math.hypot(S[0]-this._camera.position[0],S[1]-this._camera.position[1]);v+=S[3]*N,w+=N}return 0===w?NaN:v/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const l=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*d,v=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),T=Math.max(v-_,w);this._setZoom(this._zoomFromMercatorZ(T))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let _;_=l.z<this._camera.position[2]?[d.x,d.y,d.z]:[l.x,l.y,l.z];const v=p.length(p.sub([],this._camera.position,_));return p.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let d=!1;if(l.orientation&&!p.exactEquals(l.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(l.orientation)),l.position){const _=[l.position.x,l.position.y,l.position.z];p.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,d=new fd;return d.position=new p.MercatorCoordinate(l[0],l[1],l[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(l){if(!p.length$1(l))return!1;p.normalize$1(l,l);const d=p.transformQuat([],[0,0,-1],l),_=p.transformQuat([],[0,-1,0],l);if(_[2]<0)return!1;const v=dr(d,_);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(l){const d=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;l[2]=p.clamp(l[2],v/_,v/d),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,_){this._unmodified=!1,this._edgeInsets.interpolate(l,d,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new p.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const _=this.pointCoordinate(new p.Point(0,0)),v=this.pointCoordinate(new p.Point(this.width,0)),w=this.pointCoordinate(new p.Point(this.width,this.height)),T=this.pointCoordinate(new p.Point(0,this.height)),D=Math.floor(Math.min(_.x,v.x,w.x,T.x)),S=Math.floor(Math.max(_.x,v.x,w.x,T.x)),N=1;for(let R=D-N;R<=S+N;R++)0!==R&&d.push(new p.UnwrappedTileID(R,l))}return d}coveringTiles(l){let d=this.coveringZoomLevel(l);const _=d,v=this.elevation&&!l.isTerrainDEM,w="mercator"===this.projection.name;if(void 0!==l.minzoom&&d<l.minzoom)return[];void 0!==l.maxzoom&&d>l.maxzoom&&(d=l.maxzoom);const T=this.locationCoordinate(this.center),D=this.center.lat,S=1<<d,N=[S*T.x,S*T.y,0],R="globe"===this.projection.name,B=!R,H=p.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,B),X=R?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Y=S*p.mercatorZfromAltitude(1,this.center.lat),K=this._camera.position[2]/p.mercatorZfromAltitude(1,this.center.lat),te=[S*X.x,S*X.y,K*(B?1:Y)],z=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),Z=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,ie=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ne=l.isTerrainDEM?-ie:this._elevation?this._elevation.getMinElevationBelowMSL():0,fe=this.projection.isReprojectedInTileSpace?ps(this):1,me=ke=>{const st=new p.MercatorCoordinate(ke.x+25e-6,ke.y,ke.z),Qe=new p.MercatorCoordinate(ke.x,ke.y+25e-6,ke.z),ut=ke.toLngLat(),Rt=st.toLngLat(),Xt=Qe.toLngLat(),Et=this.locationCoordinate(ut),jt=this.locationCoordinate(Rt),Mn=this.locationCoordinate(Xt),bn=Math.hypot(jt.x-Et.x,jt.y-Et.y),It=Math.hypot(Mn.x-Et.x,Mn.y-Et.y);return Math.sqrt(bn*It)*fe/25e-6},ge=ke=>{const Ge=ie,st=ne;return{aabb:p.tileAABB(this,S,0,0,0,ke,st,Ge,this.projection),zoom:0,x:0,y:0,minZ:st,maxZ:Ge,wrap:ke,fullyVisible:!1}},Me=[];let Ce=[];const Re=d,ot=l.reparseOverscaled?_:d,Se=ke=>ke*ke,He=Se((K-this._centerAltitude)*Y),Le=ke=>{if(!this._elevation||!ke.tileID||!w)return;const Ge=this._elevation.getMinMaxForTile(ke.tileID),st=ke.aabb;Ge?(st.min[2]=Ge.min,st.max[2]=Ge.max,st.center[2]=(st.min[2]+st.max[2])/2):(ke.shouldSplit=rt(ke),ke.shouldSplit||(st.min[2]=st.max[2]=st.center[2]=this._centerAltitude))},rt=ke=>{if(ke.zoom<Z)return!0;if(ke.zoom===Re)return!1;if(null!=ke.shouldSplit)return ke.shouldSplit;const Ge=ke.aabb.distanceX(te),st=ke.aabb.distanceY(te);let Qe=He,ut=1;if(R){Qe=Se(ke.aabb.distanceZ(te));const Et=Math.pow(2,ke.zoom),jt=p.latFromMercatorY((ke.y+1)/Et),Mn=p.latFromMercatorY(ke.y/Et),bn=Math.min(Math.max(D,jt),Mn),It=p.circumferenceAtLatitude(bn)/p.circumferenceAtLatitude(D);if(ut=bn===D?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,It/this._mercatorScaleRatio),this.zoom<=p.GLOBE_ZOOM_THRESHOLD_MIN&&ke.zoom===Re-1&&It>=.9)return!0}else if(v&&(Qe=Se(ke.aabb.distanceZ(te)*Y)),this.projection.isReprojectedInTileSpace&&_<=5){const Et=Math.pow(2,ke.zoom),jt=me(new p.MercatorCoordinate((ke.x+.5)/Et,(ke.y+.5)/Et));ut=jt>.85?1:jt}const Rt=Ge*Ge+st*st+Qe;return Rt<Se((1<<Re-ke.zoom)*z*ut*((Et,jt)=>{if(jt*Se(.707)<Et)return 1;const Mn=Math.sqrt(jt/Et);return Mn/(1.4144271570014144+(Math.pow(1.1,Mn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Qe,He),Rt))};if(this.renderWorldCopies)for(let ke=1;ke<=3;ke++)Me.push(ge(-ke)),Me.push(ge(ke));for(Me.push(ge(0));Me.length>0;){const ke=Me.pop(),Ge=ke.x,st=ke.y;let Qe=ke.fullyVisible;if(!Qe){const ut=ke.aabb.intersects(H);if(0===ut)continue;Qe=2===ut}if(ke.zoom!==Re&&rt(ke))for(let ut=0;ut<4;ut++){const Rt=(Ge<<1)+ut%2,Xt=(st<<1)+(ut>>1),Et={aabb:w?ke.aabb.quadrant(ut):p.tileAABB(this,S,ke.zoom+1,Rt,Xt,ke.wrap,ke.minZ,ke.maxZ,this.projection),zoom:ke.zoom+1,x:Rt,y:Xt,wrap:ke.wrap,fullyVisible:Qe,tileID:void 0,shouldSplit:void 0,minZ:ke.minZ,maxZ:ke.maxZ};v&&!R&&(Et.tileID=new p.OverscaledTileID(ke.zoom+1===Re?ot:ke.zoom+1,ke.wrap,ke.zoom+1,Rt,Xt),Le(Et)),Me.push(Et)}else{const ut=ke.zoom===Re?ot:ke.zoom;if(l.minzoom&&l.minzoom>ut)continue;const Rt=N[0]-(.5+Ge+(ke.wrap<<ke.zoom))*(1<<d-ke.zoom),Xt=N[1]-.5-st,Et=ke.tileID?ke.tileID:new p.OverscaledTileID(ut,ke.wrap,ke.zoom,Ge,st);Ce.push({tileID:Et,distanceSq:Rt*Rt+Xt*Xt})}}if(this.fogCullDistSq){const ke=this.fogCullDistSq,Ge=this.horizonLineFromTop();Ce=Ce.filter(st=>{const Qe=[0,0,0,1],ut=[p.EXTENT,p.EXTENT,0,1],Rt=this.calculateFogTileMatrix(st.tileID.toUnwrapped());p.transformMat4$1(Qe,Qe,Rt),p.transformMat4$1(ut,ut,Rt);const Xt=p.getAABBPointSquareDist(Qe,ut);if(0===Xt)return!0;let Et=!1;const jt=this._elevation;if(jt&&Xt>ke&&0!==Ge){const Mn=this.calculateProjMatrix(st.tileID.toUnwrapped());let bn;l.isTerrainDEM||(bn=jt.getMinMaxForTile(st.tileID)),bn||(bn={min:ne,max:ie});const It=p.furthestTileCorner(this.rotation),Vn=[It[0]*p.EXTENT,It[1]*p.EXTENT,bn.max];p.transformMat4(Vn,Vn,Mn),Et=(1-Vn[1])*this.height*.5<Ge}return Xt<ke||Et})}return Ce.sort((ke,Ge)=>ke.distanceSq-Ge.distanceSq).map(ke=>ke.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=p.clamp(l.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),_=this.projection.project(l.lng,d);return new p.Point(_.x*this.worldSize,_.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/p.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,d){let _,v;const w=this.centerPoint;if("globe"===this.projection.name){const D=this.worldSize;_=(d.x-w.x)/D,v=(d.y-w.y)/D}else{const D=this.pointCoordinate(d),S=this.pointCoordinate(w);_=D.x-S.x,v=D.y-S.y}const T=this.locationCoordinate(l);this.setLocation(new p.MercatorCoordinate(T.x-_,T.y-v))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,d){const _=d?p.mercatorZfromAltitude(d,l.lat):void 0,v=this.projection.project(l.lng,l.lat);return new p.MercatorCoordinate(v.x,v.y,_)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,d){const _=d??this._centerAltitude,v=[l.x,l.y,0,1],w=[l.x,l.y,1,1];p.transformMat4$1(v,v,this.pixelMatrixInverse),p.transformMat4$1(w,w,this.pixelMatrixInverse);const T=w[3];p.scale$1(v,v,1/v[3]),p.scale$1(w,w,1/T);const D=v[2],S=w[2];return{p0:v,p1:w,t:D===S?0:(_-D)/(S-D)}}screenPointToMercatorRay(l){const d=[l.x,l.y,0,1],_=[l.x,l.y,1,1];return p.transformMat4$1(d,d,this.pixelMatrixInverse),p.transformMat4$1(_,_,this.pixelMatrixInverse),p.scale$1(d,d,1/d[3]),p.scale$1(_,_,1/_[3]),d[2]=p.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,_[2]=p.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,p.scale$1(d,d,1/this.worldSize),p.scale$1(_,_,1/this.worldSize),new p.Ray([d[0],d[1],d[2]],p.normalize([],p.sub([],_,d)))}rayIntersectionCoordinate(l){const{p0:d,p1:_,t:v}=l,w=p.mercatorZfromAltitude(d[2],this._center.lat),T=p.mercatorZfromAltitude(_[2],this._center.lat);return new p.MercatorCoordinate(p.number(d[0],_[0],v)/this.worldSize,p.number(d[1],_[1],v)/this.worldSize,p.number(w,T,v))}pointCoordinate(l,d=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,d)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let d=this.projection.pointCoordinate3D(this,l.x,l.y);if(d)return new p.MercatorCoordinate(d[0],d[1],d[2]);let _=0,v=this.horizonLineFromTop();if(l.y>v)return this.pointCoordinate(l);const w=.02*v,T=l.clone();for(let D=0;D<10&&v-_>w;D++){T.y=p.number(_,v,.66);const S=this.projection.pointCoordinate3D(this,T.x,T.y);S?(v=T.y,d=S):_=T.y}return d?new p.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(l);const d=this.pointCoordinate(l);return d.y>=0&&d.y<=1}_coordinatePoint(l,d){const _=d&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,v=[l.x*this.worldSize,l.y*this.worldSize,_+l.toAltitude(),1];return p.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new p.Point(v[0]/v[3],v[1]/v[3]):new p.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:d}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,w=this.pointLocation3D(new p.Point(d,l)),T=this.pointLocation3D(new p.Point(v,l)),D=this.pointLocation3D(new p.Point(v,_)),S=this.pointLocation3D(new p.Point(d,_));let N=Math.min(w.lng,T.lng,D.lng,S.lng),R=Math.max(w.lng,T.lng,D.lng,S.lng),B=Math.min(w.lat,T.lat,D.lat,S.lat),H=Math.max(w.lat,T.lat,D.lat,S.lat);const X=Math.pow(2,-this.zoom)/16*270,Y="globe"===this.projection.name?1:4,K=(te,z,Z,ie,ne)=>{const fe=(te+Z)/2,me=(z+ie)/2,ge=new p.Point(fe,me),{lng:Me,lat:Ce}=this.pointLocation3D(ge),Re=Math.max(0,N-Me,B-Ce,Me-R,Ce-H);N=Math.min(N,Me),R=Math.max(R,Me),B=Math.min(B,Ce),H=Math.max(H,Ce),(ne<Y||Re>X)&&(K(te,z,fe,me,ne+1),K(fe,me,Z,ie,ne+1))};if(K(d,l,v,l,1),K(v,l,v,_,1),K(v,_,d,_,1),K(d,_,d,l,1),"globe"===this.projection.name){const[te,z]=p.polesInViewport(this);te?(H=90,R=180,N=-180):z&&(B=-90,R=180,N=-180)}return new p.LngLatBounds(new p.LngLat(N,B),new p.LngLat(R,H))}_getBoundsRectangular(l,d){const{top:_,left:v}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,D=new p.Point(v,_),S=new p.Point(T,_),N=new p.Point(T,w),R=new p.Point(v,w);let B=this.pointCoordinate(D,l),H=this.pointCoordinate(S,l);const X=this.pointCoordinate(N,d),Y=this.pointCoordinate(R,d),K=(te,z)=>(z.y-te.y)/(z.x-te.x);return B.y>1&&H.y>=0?B=new p.MercatorCoordinate((1-Y.y)/K(Y,B)+Y.x,1):B.y<0&&H.y<=1&&(B=new p.MercatorCoordinate(-Y.y/K(Y,B)+Y.x,0)),H.y>1&&B.y>=0?H=new p.MercatorCoordinate((1-X.y)/K(X,H)+X.x,1):H.y<0&&B.y<=1&&(H=new p.MercatorCoordinate(-X.y/K(X,H)+X.x,0)),(new p.LngLatBounds).extend(this.coordinateLocation(B)).extend(this.coordinateLocation(H)).extend(this.coordinateLocation(Y)).extend(this.coordinateLocation(X))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=l.visibleDemTiles.reduce((_,v)=>{if(v.dem){const w=v.dem.tree;_.min=Math.min(_.min,w.minimums[0]),_.max=Math.max(_.max,w.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*l.exaggeration(),d.max*l.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-d*(1-this._horizonShift);return l?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-p.MAX_MERCATOR_LATITUDE,this.maxLat=p.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=p.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=p.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=p.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=p.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,d){return this.projection.createTileMatrix(this,d,l)}calculateDistanceTileData(l){const d=l.key,_=this._distanceTileDataCache;if(_[d])return _[d];const v=l.canonical,w=1/this.height,T=this.cameraWorldSize,D=T/this.zoomScale(v.z),S=(v.x+Math.pow(2,v.z)*l.wrap)*D,N=v.y*D,R=this.point;R.x*=T/this.worldSize,R.y*=T/this.worldSize;const B=this.angle,H=Math.sin(-B),X=-Math.cos(-B);return _[d]={bearing:[H,X],center:[(R.x-S)*w,(R.y-N)*w],scale:D/p.EXTENT*w},_[d]}calculateFogTileMatrix(l){const d=l.key,_=this._fogTileMatrixCache;if(_[d])return _[d];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return p.multiply(v,this.worldToFogMatrix,v),_[d]=new Float32Array(v),_[d]}calculateProjMatrix(l,d=!1){const _=l.key,v=d?this._alignedProjMatrixCache:this._projMatrixCache;if(v[_])return v[_];const w=this.calculatePosMatrix(l,this.worldSize);return p.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,w),v[_]=new Float32Array(w),v[_]}calculatePixelsToTileUnitsMatrix(l){const d=l.tileID.key,_=this._pixelsToTileUnitsCache;if(_[d])return _[d];const v=function(w,T){const{scale:D}=w.tileTransform,S=D*p.EXTENT/(w.tileSize*Math.pow(2,T.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return N=new Float32Array(4),H=(R=T.inverseAdjustmentMatrix)[1],X=R[2],Y=R[3],te=(B=[S,S])[1],N[0]=R[0]*(K=B[0]),N[1]=H*K,N[2]=X*te,N[3]=Y*te,N;var N,R,B,H,X,Y,K,te}(l,this);return _[d]=v,_[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const l=1/this.worldSize,d=p.fromScaling([],[l,l,l]);return p.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const l=this._elevation;this._updateCameraState();const d=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(d),v=this._camera.forward(),w=p.mercatorZfromAltitude(1,this._center.lat);_[2]/=w,v[2]/=w,p.normalize(v,v);const T=l.raycast(_,v,l.exaggeration());if(T){const D=p.scaleAndAdd([],_,v,T),S=new p.MercatorCoordinate(D[0],D[1],p.mercatorZfromAltitude(D[2],p.latFromMercatorY(D[1]))),N=(S.z+p.length([S.x-_[0],S.y-_[1],S.z-_[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(N),this._centerAltitude=S.toAltitude(),this._center=this.coordinateLocation(S),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const d=this._elevation,_=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(_),w=d.getAtPointOrZero(new p.MercatorCoordinate(...v)),T=this.pixelsPerMeter/this.worldSize*w,D=this._minimumHeightOverTerrain(),S=v[2]-T;if(S<=D)if(S<0||l){const N=this.locationCoordinate(this._center,this._centerAltitude),R=[v[0],v[1],N.z-v[2]],B=p.length(R);R[2]-=(D-S)/this._pixelsPerMercatorPixel;const H=p.length(R);if(0===H)return;p.scale$2(R,R,B/H*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],N.z*this._pixelsPerMercatorPixel-R[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const H=this.center;return H.lat=p.clamp(H.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(H.lng=p.clamp(H.lng,this.minLng,this.maxLng)),this.center=H,void(this._constraining=!1)}const d=this._unmodified,{x:_,y:v}=this.point;let w=0,T=_,D=v;const S=this.width/2,N=this.height/2,R=this.worldMinY*this.scale,B=this.worldMaxY*this.scale;if(v-N<R&&(D=R+N),v+N>B&&(D=B-N),B-R<this.height&&(w=Math.max(w,this.height/(B-R)),D=(B+R)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const H=this.worldMinX*this.scale,X=this.worldMaxX*this.scale,Y=this.worldSize/2-(H+X)/2;T=(_+Y+this.worldSize)%this.worldSize-Y,T-S<H&&(T=H+S),T+S>X&&(T=X-S),X-H<this.width&&(w=Math.max(w,this.width/(X-H)),T=(X+H)/2)}T===_&&D===v||(this.center=this.unproject(new p.Point(T,D))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=p.mercatorZfromAltitude(1,this.center.lat)/p.mercatorZfromAltitude(1,p.GLOBE_SCALE_MATCH_LATITUDE));const _=gd(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v="meters"===this.projection.zAxisUnit?d:1,w=this._camera.getWorldToCamera(this.worldSize,v),T=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);T[8]=2*-l.x/this.width,T[9]=2*l.y/this.height;let D=p.mul([],T,w);if(this.projection.isReprojectedInTileSpace){const me=this.locationCoordinate(this.center),ge=p.identity([]);p.translate(ge,ge,[me.x*this.worldSize,me.y*this.worldSize,0]),p.multiply(ge,ge,Na(this)),p.translate(ge,ge,[-me.x*this.worldSize,-me.y*this.worldSize,0]),p.multiply(D,D,ge),this.inverseAdjustmentMatrix=function(Me){const Ce=Na(Me,!0);return ft([],[Ce[0],Ce[1],Ce[4],Ce[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=p.scale([],D,[this.worldSize,this.worldSize,this.worldSize/v,1]),this.projMatrix=D,this.invProjMatrix=p.invert(new Float64Array(16),this.projMatrix);const S=p.invert([],T);this.frustumCorners=p.FrustumCorners.fromInvProjectionMatrix(S,this.horizonLineFromTop(),this.height);const N=new Float32Array(16);p.identity(N),p.scale(N,N,[1,-1,1]),p.rotateX(N,N,this._pitch),p.rotateZ(N,N,this.angle);const R=p.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),B=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;R[8]=2*-l.x/this.width,R[9]=2*(l.y+B)/this.height,this.skyboxMatrix=p.multiply(N,R,N);const H=this.point,X=H.x,Y=H.y,K=this.width%2/2,te=this.height%2/2,z=Math.cos(this.angle),Z=Math.sin(this.angle),ie=X-Math.round(X)+z*K+Z*te,ne=Y-Math.round(Y)+z*te+Z*K,fe=new Float64Array(D);if(p.translate(fe,fe,[ie>.5?ie-1:ie,ne>.5?ne-1:ne,0]),this.alignedProjMatrix=fe,D=p.create(),p.scale(D,D,[this.width/2,-this.height/2,1]),p.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=p.create(),p.scale(D,D,[1,-1,1]),p.translate(D,D,[-1,-1,0]),p.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=p.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},D=p.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=D,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=p.calculateGlobeMatrix(this);const me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=p.transformMat4(me,me,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=D;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,_=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,d];p.scale$2(w,w,v),p.scale$2(_,_,-1),p.multiply$2(_,_,w);const T=p.create();p.translate(T,T,_),p.scale(T,T,w),this.mercatorFogMatrix=T,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,d,v)}_computeCameraPosition(l){const d=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),v=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-l/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-_[0]*w,v.y/this.worldSize-_[1]*w,l/this.worldSize*this._centerAltitude-_[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],v=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(w=Math.min((d-_)/v,1)),this._camera.position=p.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,d=this._camera.forward(),{pitch:_,bearing:v}=this._camera.getPitchBearing(),w=p.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,T=this._mercatorZfromZoom(this._maxZoom)*Math.cos(p.degToRad(this._maxPitch)),D=Math.max((l[2]-w)/Math.cos(_),T),S=this._zoomFromMercatorZ(D);p.scaleAndAdd(l,l,d,D),this._pitch=p.clamp(_,p.degToRad(this.minPitch),p.degToRad(this.maxPitch)),this.angle=p.wrap(v,-Math.PI,Math.PI),this._setZoom(p.clamp(S,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new p.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let d=0,_=p.GLOBE_ZOOM_THRESHOLD_MAX,v=0,w=1/0;for(;_-d>1e-6&&_>d;){const T=d+.5*(_-d),D=this.tileSize*Math.pow(2,T),S=this.getCameraToCenterDistance(this.projection,T,D),N=this.scaleZoom(S/(l*this.tileSize)),R=Math.abs(T-N);R<w&&(w=R,v=T),T<N?d=T:_=T}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(p.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,d){const _=Math.min(l.x,d.x),v=Math.max(l.x,d.x),w=Math.min(l.y,d.y),T=Math.max(l.y,d.y);if(w<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const D=[new p.Point(_,w),new p.Point(v,T),new p.Point(_,T),new p.Point(v,w)],S=this.renderWorldCopies?-3:0,N=this.renderWorldCopies?4:1;for(const R of D){const B=this.pointRayIntersection(R);if(B.t<0)return!0;const H=this.rayIntersectionCoordinate(B);if(H.x<S||H.y<0||H.x>N||H.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+p.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new p.Point(0,0),new p.Point(this.width,this.height))}zoomDeltaToMovement(l,d){const _=p.length(p.sub([],this._camera.position,l)),v=this._zoomFromMercatorZ(_)+d;return _-this._mercatorZfromZoom(v)}getCameraPoint(){if("globe"===this.projection.name){const l=function([d,_,v],w){const T=[d,_,v,1];p.transformMat4$1(T,T,w);const D=T[3]=Math.max(T[3],1e-6);return T[0]/=D,T[1]/=D,T[2]/=D,T}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new p.Point(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new p.Point(0,l))}}getCameraToCenterDistance(l,d=this.zoom,_=this.worldSize){const v=gd(l,d,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,_,v);return.5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&p.multiply(l,l,this.globeMatrix),l}}function xu(f,l){let d=!1,_=null;const v=()=>{_=null,d&&(f(),_=setTimeout(v,l),d=!1)};return()=>(d=!0,_||v(),_)}class mf{constructor(l){this._hashName=l&&encodeURIComponent(l),p.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=xu(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,p.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),p.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const d=_d(l);if(this._hashName){const _=this._hashName;let v=!1;const w=p.window.location.hash.slice(1).split("&").map(T=>{const D=T.split("=")[0];return D===_?(v=!0,`${D}=${d}`):T}).filter(T=>T);return v||w.push(`${_}=${d}`),`#${w.join("&")}`}return`#${d}`}_getCurrentHash(){const l=p.window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(d=_)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(_=>isNaN(_))){const _=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(d[3]||0):l.getBearing();return l.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:_,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=p.window.location.href.replace(/(#.+)?$/,this.getHashString());p.window.history.replaceState(p.window.history.state,null,l)}}function _d(f,l){const d=f.getCenter(),_=Math.round(100*f.getZoom())/100,v=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),T=Math.round(d.lng*w)/w,D=Math.round(d.lat*w)/w,S=f.getBearing(),N=f.getPitch();let R=l?`/${T}/${D}/${_}`:`${_}/${D}/${T}`;return(S||N)&&(R+="/"+Math.round(10*S)/10),N&&(R+=`/${Math.round(N)}`),R}const yd={linearity:.3,easing:p.bezier(0,0,.3,1)},Uh=p.extend({deceleration:2500,maxSpeed:1400},yd),jh=p.extend({deceleration:20,maxSpeed:1400},yd),Tt=p.extend({deceleration:1e3,maxSpeed:360},yd),aa=p.extend({deceleration:1e3,maxSpeed:90},yd);class im{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=p.exported.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new p.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)d.zoom+=w.zoomDelta||0,d.bearing+=w.bearingDelta||0,d.pitch+=w.pitchDelta||0,w.panDelta&&d.pan._add(w.panDelta),w.around&&(d.around=w.around),w.pinchAround&&(d.pinchAround=w.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(d.pan.mag()){const w=xd(d.pan.mag(),_,p.extend({},Uh,l||{}));v.offset=d.pan.mult(w.amount/d.pan.mag()),v.center=this._map.transform.center,vd(v,w)}if(d.zoom){const w=xd(d.zoom,_,jh);v.zoom=this._map.transform.zoom+w.amount,vd(v,w)}if(d.bearing){const w=xd(d.bearing,_,Tt);v.bearing=this._map.transform.bearing+p.clamp(w.amount,-179,179),vd(v,w)}if(d.pitch){const w=xd(d.pitch,_,aa);v.pitch=this._map.transform.pitch+w.amount,vd(v,w)}if(v.zoom||v.bearing){const w=void 0===d.pinchAround?d.around:d.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function vd(f,l){(!f.duration||f.duration<l.duration)&&(f.duration=l.duration,f.easing=l.easing)}function xd(f,l,d){const{maxSpeed:_,linearity:v,deceleration:w}=d,T=p.clamp(f*v/(l/1e3),-_,_),D=Math.abs(T)/(w*v);return{easing:d.easing,duration:1e3*D,amount:T*(D/2)}}class mo extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,_,v={}){const w=ko(d.getCanvasContainer(),_),T=d.unproject(w);super(l,p.extend({point:w,lngLat:T,originalEvent:_},v)),this._defaultPrevented=!1,this.target=d}}class Fc extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,_){const v="touchend"===l?_.changedTouches:_.touches,w=Ks(d.getCanvasContainer(),v),T=w.map(S=>d.unproject(S)),D=w.reduce((S,N,R,B)=>S.add(N.div(B.length)),new p.Point(0,0));super(l,{points:w,point:D,lngLats:T,lngLat:d.unproject(D),originalEvent:_}),this._defaultPrevented=!1}}class $h extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class _f{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new $h(l.type,this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new mo(l.type,this._map,l))}mouseup(l){this._map.fire(new mo(l.type,this._map,l))}preclick(l){const d=p.extend({},l);d.type="preclick",this._map.fire(new mo(d.type,this._map,d))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(l),this._map.fire(new mo(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new mo(l.type,this._map,l))}mouseover(l){this._map.fire(new mo(l.type,this._map,l))}mouseout(l){this._map.fire(new mo(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Fc(l.type,this._map,l))}touchmove(l){this._map.fire(new Fc(l.type,this._map,l))}touchend(l){this._map.fire(new Fc(l.type,this._map,l))}touchcancel(l){this._map.fire(new Fc(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gh{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new mo(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new mo(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pl{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&0===l.button&&(Rl(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const _=d,v=this._startPos,w=this._lastPos;if(!v||!w||w.equals(_)||!this._box&&_.dist(v)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=nn("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const T=Math.min(v.x,_.x),D=Math.max(v.x,_.x),S=Math.min(v.y,_.y),N=Math.max(v.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${T}px,${S}px)`,this._box.style.width=D-T+"px",this._box.style.height=N-S+"px")})}mouseupWindow(l,d){if(!this._active)return;const _=this._startPos,v=d;if(_&&0===l.button){if(this.reset(),sr(),_.x!==v.x||_.y!==v.y)return this._map.fire(new p.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(_,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&27===l.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),as(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new p.Event(l,{originalEvent:d}))}}function bd(f,l){const d={};for(let _=0;_<f.length;_++)d[f[_].identifier]=l[_];return d}class gi{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,d,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(v){const w=new p.Point(0,0);for(const T of v)w._add(T);return w.div(v.length)}(d),this.touches=bd(_,d)))}touchmove(l,d,_){if(this.aborted||!this.centroid)return;const v=bd(_,d);for(const w in this.touches){const T=v[w];(!T||T.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(l,d,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),0===_.length){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class wd{constructor(l){this.singleTap=new gi(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,d,_){this.singleTap.touchstart(l,d,_)}touchmove(l,d,_){this.singleTap.touchmove(l,d,_)}touchend(l,d,_){const v=this.singleTap.touchend(l,d,_);if(v){const w=l.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(v)<30;if(w&&T||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class om{constructor(){this._zoomIn=new wd({numTouches:1,numTaps:2}),this._zoomOut=new wd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,_){this._zoomIn.touchstart(l,d,_),this._zoomOut.touchstart(l,d,_)}touchmove(l,d,_){this._zoomIn.touchmove(l,d,_),this._zoomOut.touchmove(l,d,_)}touchend(l,d,_){const v=this._zoomIn.touchend(l,d,_),w=this._zoomOut.touchend(l,d,_);return v?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(v)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yf={0:1,2:2};class Wl{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const _=ls(l);this._correctButton(l,_)&&(this._lastPoint=d,this._eventButton=_)}mousemoveWindow(l,d){const _=this._lastPoint;if(_)if(l.preventDefault(),null!=this._eventButton&&function(v,w){const T=yf[w];return void 0===v.buttons||(v.buttons&T)!==T}(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(_,d)}mouseupWindow(l){this._lastPoint&&ls(l)===this._eventButton&&(this._moved&&sr(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cd extends Wl{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return 0===d&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class Hh extends Wl{_correctButton(l,d){return 0===d&&l.ctrlKey||2===d}_move(l,d){const _=.8*(d.x-l.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(l){l.preventDefault()}}class bu extends Wl{_correctButton(l,d){return 0===d&&l.ctrlKey||2===d}_move(l,d){const _=-.5*(d.y-l.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(l){l.preventDefault()}}class Md{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),p.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new p.Point(0,0)}touchstart(l,d,_){return this._calculateTransform(l,d,_)}touchmove(l,d,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===_.length&&!p.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,d,_)}}touchend(l,d,_){this._calculateTransform(l,d,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,_){_.length>0&&(this._active=!0);const v=bd(_,d),w=new p.Point(0,0),T=new p.Point(0,0);let D=0;for(const N in v){const R=v[N],B=this._touches[N];B&&(w._add(R),T._add(R.sub(B)),D++,v[N]=R)}if(this._touches=v,D<this._minTouches||!T.mag())return;const S=T.div(D);return this._sum._add(S),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(D),panDelta:S}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=nn("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ko{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,d,_){return{}}touchstart(l,d,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,_){const v=this._firstTwoTouches;if(!v)return;l.preventDefault();const[w,T]=v,D=Lc(_,d,w),S=Lc(_,d,T);if(!D||!S)return;const N=this._aroundCenter?null:D.add(S).div(2);return this._move([D,S],N,l)}touchend(l,d,_){if(!this._firstTwoTouches)return;const[v,w]=this._firstTwoTouches,T=Lc(_,d,v),D=Lc(_,d,w);T&&D||(this._active&&sr(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Lc(f,l,d){for(let _=0;_<f.length;_++)if(f[_].identifier===d)return l[_]}function Od(f,l){return Math.log(f/l)/Math.LN2}class wo extends Ko{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Od(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Od(this._distance,_),pinchAround:d}}}function Wh(f,l){return 180*f.angleWith(l)/Math.PI}class wu extends Ko{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const _=this._vector;if(this._vector=l[0].sub(l[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Wh(this._vector,_),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const v=Wh(l,_);return Math.abs(v)<d}}function uo(f){return Math.abs(f.y)>Math.abs(f.x)}class vf extends Ko{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,uo(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,_){const v=this._lastPoints;if(!v)return;const w=l[0].sub(v[0]),T=l[1].sub(v[1]);return this._map._cooperativeGestures&&!p.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(w,T,_.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+T.y)/2*-.5})}gestureBeginsVertically(l,d,_){if(void 0!==this._valid)return this._valid;const v=l.mag()>=2,w=d.mag()>=2;if(!v&&!w)return;if(!v||!w)return null==this._firstMove&&(this._firstMove=_),_-this._firstMove<100&&void 0;const T=l.y>0==d.y>0;return uo(l)&&uo(d)&&T}}const qh={panStep:100,bearingStep:15,pitchStep:10};class Bc{constructor(){const l=qh;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,_=0,v=0,w=0,T=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?v=1:(l.preventDefault(),T=-1);break;case 40:l.shiftKey?v=-1:(l.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(_=0,v=0),{cameraAnimation:D=>{const S=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:hr,zoom:d?Math.round(S)+d*(l.shiftKey?2:1):S,bearing:D.getBearing()+_*this._bearingStep,pitch:D.getPitch()+v*this._pitchStep,offset:[-w*this._panStep,-T*this._panStep],center:D.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function hr(f){return f*(2-f)}const Zh=4.000244140625;class Cu{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,p.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&"center"===l.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||p.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=l.deltaMode===p.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=p.exported.now(),v=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,0!==d&&d%Zh==0?this._type="wheel":0!==d&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ko(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;"wheel"===this._type&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(0!==this._delta){const S="wheel"===this._type&&Math.abs(this._delta)>Zh?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&0!==N&&(N=1/N);const R=d(),B=Math.pow(2,R),H="number"==typeof this._targetZoom?l.zoomScale(this._targetZoom):B;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(H*N))),"wheel"===this._type&&(this._startZoom=R,this._easing=this._smoothOutEasing(200)),this._delta=0}const _="number"==typeof this._targetZoom?this._targetZoom:d(),v=this._startZoom,w=this._easing;let T,D=!1;if("wheel"===this._type&&v&&w){const S=Math.min((p.exported.now()-this._lastWheelEventTime)/200,1),N=w(S);T=p.number(v,_,N),S<1?this._frameId||(this._frameId=!0):D=!0}else T=_,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:T-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=p.ease;if(this._prevEase){const _=this._prevEase,v=(p.exported.now()-_.start)/_.duration,w=_.easing(v+.01)-_.easing(v),T=.27/Math.sqrt(w*w+1e-4)*.01,D=Math.sqrt(.0729-T*T);d=p.bezier(T,D,.25,1)}return this._prevEase={start:p.exported.now(),duration:l,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=nn("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(p.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class xf{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,d){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(l.shiftKey?-1:1),around:_.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bf{constructor(){this._tap=new wd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,d,_){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=d[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(l,d,_))}touchmove(l,d,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const v=d[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,d,_)}touchend(l,d,_){this._tapTime?this._swipePoint&&0===_.length&&this.reset():this._tap.touchend(l,d,_)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Td{constructor(l,d,_){this._el=l,this._mousePan=d,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vn{constructor(l,d,_){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wf{constructor(l,d,_,v){this._el=l,this._touchZoom=d,this._touchRotate=_,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ks=f=>f.zoom||f.drag||f.pitch||f.rotate;class Cf extends p.Event{}class rm{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,d){const _=p.sub([],d,l);this.radius=p.length(_[2]<0?p.div([],_,this.constants):[_[0],_[1],0])}projectRay(l){p.div(l,l,this.constants),p.normalize(l,l),p.mul$1(l,l,this.constants);const d=p.scale$2([],l,this.radius);if(d[2]>0){const _=p.scale$2([],[0,0,1],p.dot(d,[0,0,1])),v=p.scale$2([],p.normalize([],[d[0],d[1],0]),this.radius),w=p.add([],d,p.scale$2([],p.sub([],p.add([],v,_),d),2));d[0]=w[0],d[1]=w[1]}return d}}function Rs(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Ns{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new im(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new rm,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),p.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[p.window.document,"mousemove",{capture:!0}],[p.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[p.window,"blur",void 0]];for(const[v,w,T]of this._listeners)v.addEventListener(w,v===p.window.document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[l,d,_]of this._listeners)l.removeEventListener(d,l===p.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const d=this._map,_=d.getCanvasContainer();this._add("mapEvent",new _f(d,l));const v=d.boxZoom=new pl(d,l);this._add("boxZoom",v);const w=new om,T=new Vi;d.doubleClickZoom=new xf(T,w),this._add("tapZoom",w),this._add("clickZoom",T);const D=new bf;this._add("tapDragZoom",D);const S=d.touchPitch=new vf(d);this._add("touchPitch",S);const N=new Hh(l),R=new bu(l);d.dragRotate=new vn(l,N,R),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const B=new Cd(l),H=new Md(d,l);d.dragPan=new Td(_,B,H),this._add("mousePan",B),this._add("touchPan",H,["touchZoom","touchRotate"]);const X=new wu,Y=new wo;d.touchZoomRotate=new wf(_,Y,X,D),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Gh(d));const K=d.scrollZoom=new Cu(d,this);this._add("scrollZoom",K,["mousePan"]);const te=d.keyboard=new Bc;this._add("keyboard",te);for(const z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[z]&&d[z].enable(l[z])}_add(l,d,_){this._handlers.push({handlerName:l,handler:d,allowed:_}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ks(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,d,_){for(const v in l)if(v!==_&&(!d||d.indexOf(v)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const _ of l)this._el.contains(_.target)&&d.push(_);return d}handleEvent(l,d){this._updatingCamera=!0;const _="renderFrame"===l.type,v=_?void 0:l,w={needsRenderFrame:!1},T={},D={},S=l.touches?this._getMapTouches(l.touches):void 0,N=S?Ks(this._el,S):_?void 0:ko(this._el,l);for(const{handlerName:H,handler:X,allowed:Y}of this._handlers){if(!X.isEnabled())continue;let K;this._blockedByActive(D,Y,H)?X.reset():X[d||l.type]&&(K=X[d||l.type](l,N,S),this.mergeHandlerResult(w,T,K,H,v),K&&K.needsRenderFrame&&this._triggerRenderFrame()),(K||X.isActive())&&(D[H]=X)}const R={};for(const H in this._previousActiveHandlers)D[H]||(R[H]=v);this._previousActiveHandlers=D,(Object.keys(R).length||Rs(w))&&(this._changes.push([w,T,R]),this._triggerRenderFrame()),(Object.keys(D).length||Rs(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=w;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))}mergeHandlerResult(l,d,_,v,w){if(!_)return;p.extend(l,_);const T={handlerName:v,originalEvent:_.originalEvent||w};void 0!==_.zoomDelta&&(d.zoom=T),void 0!==_.panDelta&&(d.drag=T),void 0!==_.pitchDelta&&(d.pitch=T),void 0!==_.bearingDelta&&(d.rotate=T)}_applyChanges(){const l={},d={},_={};for(const[v,w,T]of this._changes)v.panDelta&&(l.panDelta=(l.panDelta||new p.Point(0,0))._add(v.panDelta)),v.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+v.pitchDelta),void 0!==v.around&&(l.around=v.around),void 0!==v.aroundCoord&&(l.aroundCoord=v.aroundCoord),void 0!==v.pinchAround&&(l.pinchAround=v.pinchAround),v.noInertia&&(l.noInertia=v.noInertia),p.extend(d,w),p.extend(_,T);this._updateMapTransform(l,d,_),this._changes=[]}_updateMapTransform(l,d,_){const v=this._map,w=v.transform,T=Z=>[Z.x,Z.y,Z.z];if((Z=>{const ie=this._eventsInProgress.drag;return ie&&!this._handlersById[ie.handlerName].isActive()})()&&!Rs(l)){const Z=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",Z!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&v._stop(!0),!Rs(l))return void this._fireEvents(d,_,!0);let{panDelta:D,zoomDelta:S,bearingDelta:N,pitchDelta:R,around:B,aroundCoord:H,pinchAround:X}=l;w._isCameraConstrained&&(S>0&&(S=0),w._isCameraConstrained=!1),void 0!==X&&(B=X),(S||(Z=>d[Z]&&!this._eventsInProgress[Z])("drag"))&&B&&(this._dragOrigin=T(w.pointCoordinate3D(B)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",v._stop(!0),B=B||v.transform.centerPoint,N&&(w.bearing+=N),R&&(w.pitch+=R),w._updateCameraState();const Y=[0,0,0];if(D)if("mercator"===w.projection.name){const Z=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(B).dir),ie=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(B.sub(D)).dir);Y[0]=ie[0]-Z[0],Y[1]=ie[1]-Z[1]}else{const Z=w.pointCoordinate(B);if("globe"===w.projection.name){D=D.rotate(-w.angle);const ie=w._pixelsPerMercatorPixel/w.worldSize;Y[0]=-D.x*p.mercatorScale(p.latFromMercatorY(Z.y))*ie,Y[1]=-D.y*p.mercatorScale(w.center.lat)*ie}else{const ie=w.pointCoordinate(B.sub(D));Z&&ie&&(Y[0]=ie.x-Z.x,Y[1]=ie.y-Z.y)}}const K=w.zoom,te=[0,0,0];if(S){const Z=T(H||w.pointCoordinate3D(B)),ie={dir:p.normalize([],p.sub([],Z,w._camera.position))};if(ie.dir[2]<0){const ne=w.zoomDeltaToMovement(Z,S);p.scale$2(te,ie.dir,ne)}}const z=p.add(Y,Y,te);w._translateCameraConstrained(z),S&&Math.abs(w.zoom-K)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,_,!0)}_fireEvents(l,d,_){const v=ks(this._eventsInProgress),w=ks(l),T={};for(const R in l){const{originalEvent:B}=l[R];this._eventsInProgress[R]||(T[`${R}start`]=B),this._eventsInProgress[R]=l[R]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(const R in T)this._fireEvent(R,T[R]);w&&this._fireEvent("move",w.originalEvent);for(const R in l){const{originalEvent:B}=l[R];this._fireEvent(R,B)}const D={};let S;for(const R in this._eventsInProgress){const{handlerName:B,originalEvent:H}=this._eventsInProgress[R];this._handlersById[B].isActive()||(delete this._eventsInProgress[R],S=d[B]||H,D[`${R}end`]=S)}for(const R in D)this._fireEvent(R,D[R]);const N=ks(this._eventsInProgress);if(_&&(v||w)&&!N){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=H=>0!==H&&-this._bearingSnap<H&&H<this._bearingSnap;R?(B(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:S})):(this._map.fire(new p.Event("moveend",{originalEvent:S})),B(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new p.Event(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Cf("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const ql="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Dd extends p.Evented{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=!1!==d.respectPrefersReducedMotion,p.bindAll(["_renderFrameCallback"],this)}getCenter(){return new p.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,_){return l=p.Point.convert(l).mult(-1),this.panTo(this.transform.center,p.extend({offset:l},d),_)}panTo(l,d,_){return this.easeTo(p.extend({center:l},d),_)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,_){return this.easeTo(p.extend({zoom:l},d),_)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,_){return this.easeTo(p.extend({bearing:l},d),_)}resetNorth(l,d){return this.rotateTo(0,p.extend({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(p.extend({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=p.LngLatBounds.convert(l);const _=d&&d.bearing||0,v=d&&d.pitch||0,w=l.getNorthWest(),T=l.getSouthEast();return this._cameraForBounds(this.transform,w,T,_,v,d)}_extendCameraOptions(l){const d={top:0,bottom:0,right:0,left:0};if("number"==typeof(l=p.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding){const _=l.padding;l.padding={top:_,bottom:_,right:_,left:_}}return l.padding=p.extend(d,l.padding),l}_minimumAABBFrustumDistance(l,d){const _=d.max[0]-d.min[0],v=d.max[1]-d.min[1];return _/v>l.aspect?_/(2*Math.tan(.5*l.fovX)*l.aspect):v/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,d,_,v,w,T){const D=l.clone(),S=this._extendCameraOptions(T);D.bearing=v,D.pitch=w;const N=p.LngLat.convert(d),R=p.LngLat.convert(_),B=.5*(N.lat+R.lat),H=.5*(N.lng+R.lng),X=p.latLngToECEF(B,H),Y=p.normalize([],X),K=p.normalize([],p.cross([],Y,[0,1,0])),te=p.cross([],K,Y),z=[K[0],K[1],K[2],0,te[0],te[1],te[2],0,Y[0],Y[1],Y[2],0,0,0,0,1],Z=[X,p.latLngToECEF(N.lat,N.lng),p.latLngToECEF(R.lat,N.lng),p.latLngToECEF(R.lat,R.lng),p.latLngToECEF(N.lat,R.lng),p.latLngToECEF(B,N.lng),p.latLngToECEF(B,R.lng),p.latLngToECEF(N.lat,H),p.latLngToECEF(R.lat,H)];let ie=p.Aabb.fromPoints(Z.map(Qe=>[p.dot(K,Qe),p.dot(te,Qe),p.dot(Y,Qe)]));const ne=p.transformMat4([],ie.center,z);0===p.squaredLength(ne)&&p.set(ne,0,0,1),p.normalize(ne,ne),p.scale$2(ne,ne,p.GLOBE_RADIUS),D.center=p.ecefToLatLng(ne);const fe=D.getWorldToCameraMatrix(),me=p.invert(new Float64Array(16),fe);ie=p.Aabb.applyTransform(ie,p.multiply([],fe,z)),p.transformMat4(ne,ne,fe);const ge=.5*(ie.max[2]-ie.min[2]),Me=this._minimumAABBFrustumDistance(D,ie),Ce=p.scale$2([],[0,0,1],ge),Re=p.add(Ce,ne,Ce),ot=Me+(0===D.pitch?0:p.distance(ne,Re)),Se=D.globeCenterInViewSpace,He=p.sub([],ne,[Se[0],Se[1],Se[2]]);p.normalize(He,He),p.scale$2(He,He,ot);const Le=p.add([],ne,He);p.transformMat4(Le,Le,me);const rt=p.earthRadius/p.GLOBE_RADIUS,ke=p.length(Le),Ge=p.mercatorZfromAltitude(Math.max(ke*rt-p.earthRadius,Number.EPSILON),0),st=Math.min(D.zoomFromMercatorZAdjusted(Ge),S.maxZoom);return st>.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"mercator"}),D.zoom=st,this._cameraForBounds(D,d,_,v,w,T)):{center:D.center,zoom:st,bearing:v,pitch:w}}queryTerrainElevation(l,d){const _=this.transform.elevation;return _?(d=p.extend({},{exaggerated:!0},d),_.getAtPoint(p.MercatorCoordinate.fromLngLat(l),null,d.exaggerated)):null}_cameraForBounds(l,d,_,v,w,T){if("globe"===l.projection.name)return this._cameraForBoundsOnGlobe(l,d,_,v,w,T);const D=l.clone(),S=this._extendCameraOptions(T),N=D.padding;D.bearing=v,D.pitch=w;const R=p.LngLat.convert(d),B=p.LngLat.convert(_),H=new p.LngLat(R.lng,B.lat),X=new p.LngLat(B.lng,R.lat),Y=D.project(R),K=D.project(B),te=this.queryTerrainElevation(R),z=this.queryTerrainElevation(B),Z=this.queryTerrainElevation(H),ie=this.queryTerrainElevation(X),ne=[[Y.x,Y.y,Math.min(te||0,z||0,Z||0,ie||0)],[K.x,K.y,Math.max(te||0,z||0,Z||0,ie||0)]];let fe=p.Aabb.fromPoints(ne);const me=D.getWorldToCameraMatrix(),ge=p.invert(new Float64Array(16),me);fe=p.Aabb.applyTransform(fe,me);const Me=p.sub([],fe.max,fe.min),Ce=N.left||0,Re=N.right||0,ot=N.bottom||0,Se=N.top||0,{left:He,right:Le,top:rt,bottom:ke}=S.padding,Ge=.5*(Ce+Re),st=.5*(Se+ot),Qe=Math.min(D.scaleZoom(D.scale*Math.min((D.width-(Ce+Re+He+Le))/Me[0],(D.height-(ot+Se+ke+rt))/Me[1])),S.maxZoom),ut=D.scale/D.zoomScale(Qe);fe=new p.Aabb([fe.min[0]-(He+Ge)*ut,fe.min[1]-(ke+st)*ut,fe.min[2]],[fe.max[0]+(Le+Ge)*ut,fe.max[1]+(rt+st)*ut,fe.max[2]]);const Rt=.5*Me[2],Xt=this._minimumAABBFrustumDistance(D,fe),Et=[0,0,1,0];p.transformMat4$1(Et,Et,me),p.normalize$2(Et,Et);const jt=p.scale$2([],Et,Xt+Rt),Mn=p.add([],fe.center,jt),bn=("number"==typeof S.offset.x&&"number"==typeof S.offset.y?new p.Point(S.offset.x,S.offset.y):p.Point.convert(S.offset)).rotate(-p.degToRad(v));fe.center[0]-=bn.x*ut,fe.center[1]+=bn.y*ut,p.transformMat4(fe.center,fe.center,ge),p.transformMat4(Mn,Mn,ge);const It=[fe.center[0],fe.center[1],Mn[2]*D.pixelsPerMeter];p.scale$2(It,It,1/D.worldSize);const Vn=p.lngFromMercatorX(It[0]),ti=p.latFromMercatorY(It[1]),Un=Math.min(D._zoomFromMercatorZ(It[2]),S.maxZoom),ni=new p.LngLat(Vn,ti);return D.mercatorFromTransition&&Un<.5*(p.GLOBE_ZOOM_THRESHOLD_MIN+p.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"globe"}),D.zoom=Un,this._cameraForBounds(D,d,_,v,w,T)):{center:ni,zoom:Un,bearing:v,pitch:w}}fitBounds(l,d,_){const v=this.cameraForBounds(l,d);return this._fitInternal(v,d,_)}fitScreenCoordinates(l,d,_,v,w){const T=p.Point.convert(l),D=p.Point.convert(d),S=new p.Point(Math.min(T.x,D.x),Math.min(T.y,D.y)),N=new p.Point(Math.max(T.x,D.x),Math.max(T.y,D.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(T,D))return this;const R=this.transform.pointLocation3D(S),B=this.transform.pointLocation3D(N),H=this.transform.pointLocation3D(new p.Point(S.x,N.y)),X=this.transform.pointLocation3D(new p.Point(N.x,S.y)),Y=[Math.min(R.lng,B.lng,H.lng,X.lng),Math.min(R.lat,B.lat,H.lat,X.lat)],K=[Math.max(R.lng,B.lng,H.lng,X.lng),Math.max(R.lat,B.lat,H.lat,X.lat)],te=v&&v.pitch?v.pitch:this.getPitch(),z=this._cameraForBounds(this.transform,Y,K,_,te,v);return this._fitInternal(z,v,w)}_fitInternal(l,d,_){return l?(delete(d=p.extend(l,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this}jumpTo(l,d){this.stop();const _=l.preloadOnly?this.transform.clone():this.transform;let v=!1,w=!1,T=!1;return"zoom"in l&&_.zoom!==+l.zoom&&(v=!0,_.zoom=+l.zoom),void 0!==l.center&&(_.center=p.LngLat.convert(l.center)),"bearing"in l&&_.bearing!==+l.bearing&&(w=!0,_.bearing=+l.bearing),"pitch"in l&&_.pitch!==+l.pitch&&(T=!0,_.pitch=+l.pitch),null==l.padding||_.isPaddingEqual(l.padding)||(_.padding=l.padding),l.preloadOnly?(this._preloadTiles(_),this):(this.fire(new p.Event("movestart",d)).fire(new p.Event("move",d)),v&&this.fire(new p.Event("zoomstart",d)).fire(new p.Event("zoom",d)).fire(new p.Event("zoomend",d)),w&&this.fire(new p.Event("rotatestart",d)).fire(new p.Event("rotate",d)).fire(new p.Event("rotateend",d)),T&&this.fire(new p.Event("pitchstart",d)).fire(new p.Event("pitch",d)).fire(new p.Event("pitchend",d)),this.fire(new p.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||p.warnOnce(ql),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,d){const _=this.transform;if(!_.projection.supportsFreeCamera)return p.warnOnce(ql),this;this.stop();const v=_.zoom,w=_.pitch,T=_.bearing;_.setFreeCameraOptions(l);const D=v!==_.zoom,S=w!==_.pitch,N=T!==_.bearing;return this.fire(new p.Event("movestart",d)).fire(new p.Event("move",d)),D&&this.fire(new p.Event("zoomstart",d)).fire(new p.Event("zoom",d)).fire(new p.Event("zoomend",d)),N&&this.fire(new p.Event("rotatestart",d)).fire(new p.Event("rotate",d)).fire(new p.Event("rotateend",d)),S&&this.fire(new p.Event("pitchstart",d)).fire(new p.Event("pitch",d)).fire(new p.Event("pitchend",d)),this.fire(new p.Event("moveend",d)),this}easeTo(l,d){this._stop(!1,l.easeId),(!1===(l=p.extend({offset:[0,0],duration:500,easing:p.ease},l)).animate||this._prefersReducedMotion(l))&&(l.duration=0);const _=this.transform,v=this.getZoom(),w=this.getBearing(),T=this.getPitch(),D=this.getPadding(),S="zoom"in l?+l.zoom:v,N="bearing"in l?this._normalizeBearing(l.bearing,w):w,R="pitch"in l?+l.pitch:T,B="padding"in l?l.padding:_.padding,H=p.Point.convert(l.offset);let X,Y,K;if("globe"===_.projection.name){const Ce=p.MercatorCoordinate.fromLngLat(_.center),Re=H.rotate(-_.angle);Ce.x+=Re.x/_.worldSize,Ce.y+=Re.y/_.worldSize;const ot=Ce.toLngLat(),Se=p.LngLat.convert(l.center||ot);this._normalizeCenter(Se),X=_.centerPoint.add(Re),Y=new p.Point(Ce.x,Ce.y).mult(_.worldSize),K=new p.Point(p.mercatorXfromLng(Se.lng),p.mercatorYfromLat(Se.lat)).mult(_.worldSize).sub(Y)}else{X=_.centerPoint.add(H);const Ce=_.pointLocation(X),Re=p.LngLat.convert(l.center||Ce);this._normalizeCenter(Re),Y=_.project(Ce),K=_.project(Re).sub(Y)}const te=_.zoomScale(S-v);let z,Z;l.around&&(z=p.LngLat.convert(l.around),Z=_.locationPoint(z));const ie=this._zooming||S!==v,ne=this._rotating||w!==N,fe=this._pitching||R!==T,me=!_.isPaddingEqual(B),ge=Ce=>Re=>{if(ie&&(Ce.zoom=p.number(v,S,Re)),ne&&(Ce.bearing=p.number(w,N,Re)),fe&&(Ce.pitch=p.number(T,R,Re)),me&&(Ce.interpolatePadding(D,B,Re),X=Ce.centerPoint.add(H)),z)Ce.setLocationAtPoint(z,Z);else{const ot=Ce.zoomScale(Ce.zoom-v),Se=S>v?Math.min(2,te):Math.max(.5,te),He=Math.pow(Se,1-Re),Le=Ce.unproject(Y.add(K.mult(Re*He)).mult(ot));Ce.setLocationAtPoint(Ce.renderWorldCopies?Le.wrap():Le,X)}return l.preloadOnly||this._fireMoveEvents(d),Ce};if(l.preloadOnly){const Ce=this._emulate(ge,l.duration,_);return this._preloadTiles(Ce),this}const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ie,this._rotating=ne,this._pitching=fe,this._padding=me,this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,Me),this._ease(ge(_),Ce=>{_.recenterOnTerrain(),this._afterEase(d,Ce)},l),this}_prepareEase(l,d,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||_.moving||this.fire(new p.Event("movestart",l)),this._zooming&&!_.zooming&&this.fire(new p.Event("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new p.Event("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new p.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new p.Event("move",l)),this._zooming&&this.fire(new p.Event("zoom",l)),this._rotating&&this.fire(new p.Event("rotate",l)),this._pitching&&this.fire(new p.Event("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,v=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new p.Event("zoomend",l)),v&&this.fire(new p.Event("rotateend",l)),w&&this.fire(new p.Event("pitchend",l)),this.fire(new p.Event("moveend",l))}flyTo(l,d){if(this._prefersReducedMotion(l)){const Qe=p.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Qe,d)}this.stop(),l=p.extend({offset:[0,0],speed:1.2,curve:1.42,easing:p.ease},l);const _=this.transform,v=this.getZoom(),w=this.getBearing(),T=this.getPitch(),D=this.getPadding(),S="zoom"in l?p.clamp(+l.zoom,_.minZoom,_.maxZoom):v,N="bearing"in l?this._normalizeBearing(l.bearing,w):w,R="pitch"in l?+l.pitch:T,B="padding"in l?l.padding:_.padding,H=_.zoomScale(S-v),X=p.Point.convert(l.offset);let Y=_.centerPoint.add(X);const K=_.pointLocation(Y),te=p.LngLat.convert(l.center||K);this._normalizeCenter(te);const z=_.project(K),Z=_.project(te).sub(z);let ie=l.curve;const ne=Math.max(_.width,_.height),fe=ne/H,me=Z.mag();if("minZoom"in l){const Qe=p.clamp(Math.min(l.minZoom,v,S),_.minZoom,_.maxZoom),ut=ne/_.zoomScale(Qe-v);ie=Math.sqrt(ut/me*2)}const ge=ie*ie;function Me(Qe){const ut=(fe*fe-ne*ne+(Qe?-1:1)*ge*ge*me*me)/(2*(Qe?fe:ne)*ge*me);return Math.log(Math.sqrt(ut*ut+1)-ut)}function Ce(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function Re(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}const ot=Me(0);let Se=function(Qe){return Re(ot)/Re(ot+ie*Qe)},He=function(Qe){return ne*((Re(ot)*(Ce(ut=ot+ie*Qe)/Re(ut))-Ce(ot))/ge)/me;var ut},Le=(Me(1)-ot)/ie;if(Math.abs(me)<1e-6||!isFinite(Le)){if(Math.abs(ne-fe)<1e-6)return this.easeTo(l,d);const Qe=fe<ne?-1:1;Le=Math.abs(Math.log(fe/ne))/ie,He=function(){return 0},Se=function(ut){return Math.exp(Qe*ie*ut)}}l.duration="duration"in l?+l.duration:1e3*Le/("screenSpeed"in l?+l.screenSpeed/ie:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const rt=w!==N,ke=R!==T,Ge=!_.isPaddingEqual(B),st=Qe=>ut=>{const Rt=ut*Le,Xt=1/Se(Rt);Qe.zoom=1===ut?S:v+Qe.scaleZoom(Xt),rt&&(Qe.bearing=p.number(w,N,ut)),ke&&(Qe.pitch=p.number(T,R,ut)),Ge&&(Qe.interpolatePadding(D,B,ut),Y=Qe.centerPoint.add(X));const Et=1===ut?te:Qe.unproject(z.add(Z.mult(He(Rt))).mult(Xt));return Qe.setLocationAtPoint(Qe.renderWorldCopies?Et.wrap():Et,Y),Qe._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(d),Qe};if(l.preloadOnly){const Qe=this._emulate(st,l.duration,_);return this._preloadTiles(Qe),this}return this._zooming=!0,this._rotating=rt,this._pitching=ke,this._padding=Ge,this._prepareEase(d,!1),this._ease(st(_),()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,d)}if(!l){const _=this.handlers;_&&_.stop(!1)}return this}_ease(l,d,_){!1===_.animate||0===_.duration?(l(1),d()):(this._easeStart=p.exported.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((p.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=p.wrap(l,-180,180);const _=Math.abs(l-d);return Math.abs(l-360-d)<_&&(l-=360),Math.abs(l+360-d)<_&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const _=l.lng-d.center.lng;l.lng+=_>180?-360:_<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&p.exported.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,d,_){const v=Math.ceil(15*d/1e3),w=[],T=l(_.clone());for(let D=0;D<=v;D++){const S=T(D/v);w.push(S.clone())}return w}}class Oe{constructor(l={}){this.options=l,p.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const d=this.options&&this.options.compact;return this._map=l,this._container=nn("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=nn("button","mapboxgl-ctrl-attrib-button",this._container),nn("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=nn("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===d&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,d){const _=this._map._getUIString(`AttributionControl.${d}`);l.setAttribute("aria-label",_),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||p.config.ACCESS_TOKEN}];if(l){const _=d.reduce((v,w,T)=>(w.value&&(v+=`${w.key}=${w.value}${T<d.length-1?"&":""}`),v),"?");l.href=`${p.config.FEEDBACK_URL}/${_}#${_d(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||"metadata"!==l.sourceDataType&&"visibility"!==l.sourceDataType&&"style"!==l.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const d=this._map.style._sourceCaches;for(const v in d){const w=d[v];if(w.used){const T=w.getSource();T.attribution&&l.indexOf(T.attribution)<0&&l.push(T.attribution)}}l.sort((v,w)=>v.length-w.length),l=l.filter((v,w)=>{for(let T=w+1;T<l.length;T++)if(l[T].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const _=l.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,l.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Nn{constructor(){p.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=nn("div","mapboxgl-ctrl");const d=nn("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&"metadata"!==l.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(0===Object.entries(l).length)return!0;for(const d in l){const _=l[d].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Wt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,_=d?this._queue.concat(d):this._queue;for(const v of _)if(v.id===l)return void(v.cancelled=!0)}run(l=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const _ of d)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Gt(f,l,d){if(f=new p.LngLat(f.lng,f.lat),l){const _=new p.LngLat(f.lng-360,f.lat),v=new p.LngLat(f.lng+360,f.lat),w=360*Math.ceil(Math.abs(f.lng-d.center.lng)/360),T=d.locationPoint(f).distSqr(l),D=l.x<0||l.y<0||l.x>d.width||l.y>d.height;d.locationPoint(_).distSqr(l)<T&&(D||Math.abs(_.lng-d.center.lng)<w)?f=_:d.locationPoint(v).distSqr(l)<T&&(D||Math.abs(v.lng-d.center.lng)<w)&&(f=v)}for(;Math.abs(f.lng-d.center.lng)>180;){const _=d.locationPoint(f);if(_.x>=0&&_.y>=0&&_.x<=d.width&&_.y<=d.height)break;f.lng>d.center.lng?f.lng-=360:f.lng+=360}return f}const Ui={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class wt extends p.Evented{constructor(l,d){if(super(),(l instanceof p.window.HTMLElement||d)&&(l=p.extend({element:l},d)),p.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=p.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=nn("div");const v=41,w=27,T=Ki("svg",{display:"block",height:v*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${v}`},this._element),D=Ki("radialGradient",{id:"shadowGradient"},Ki("defs",{},T));Ki("stop",{offset:"10%","stop-opacity":.4},D),Ki("stop",{offset:"100%","stop-opacity":.05},D),Ki("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},T),Ki("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},T),Ki("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},T),Ki("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},T),this._offset=p.Point.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const _=this._element.classList;for(const v in Ui)_.remove(`mapboxgl-marker-anchor-${v}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=p.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(24.6+v)],"bottom-right":[-v,-1*(24.6+v)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const d=l.code,_=l.charCode||l.keyCode;"Space"!==d&&"Enter"!==d&&32!==_&&13!==_||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,d=this._pos;if(!l||!d)return!1;const _=l.unproject(d),v=l.getFreeCameraOptions();if(!v.position)return!1;const w=v.position.toLngLat();return w.distanceTo(_)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const d=this._pos;if(!d||d.x<0||d.x>l.transform.width||d.y<0||d.y>l.transform.height)return void this._clearFadeTimer();const _=l.unproject(d);let v;l._showingGlobe()&&p.isLngLatBehindGlobe(l.transform,this._lngLat)?v=0:(v=1-l._queryFogOpacity(_),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${l.x}px,${l.y}px)\n            ${Ui[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${d.x}px,${d.y}px)\n        `}_calculateXYTransform(){const l=this._pos,d=this._map,_=this.getPitchAlignment();if(!d||!l||"map"!==_)return"";if(!d._showingGlobe()){const S=d.getPitch();return S?`rotateX(${S}deg)`:""}const v=p.radToDeg(p.globeTiltAtLngLat(d.transform,this._lngLat)),w=l.sub(p.globeCenterToScreenPoint(d.transform)),T=Math.abs(w.x)+Math.abs(w.y);if(0===T)return"";const D=v/T;return`rotateX(${-w.y*D}deg) rotateY(${w.x*D}deg)`}_calculateZTransform(){const l=this._pos,d=this._map;if(!d||!l)return"";let _=0;const v=this.getRotationAlignment();if("map"===v)if(d._showingGlobe()){const w=d.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),T=d.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);_=p.radToDeg(Math.atan2(T.y,T.x))-90}else _=-d.getBearing();else if("horizon"===v){const w=p.smoothstep(4,6,d.getZoom()),T=p.globeCenterToScreenPoint(d.transform);T.y+=w*d.transform.height;const D=l.sub(T),S=p.radToDeg(Math.atan2(D.y,D.x));_=(S>90?S-270:S+90)*(1-w)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(l){p.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Gt(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),!0===l?this._updateFrameId=p.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=p.Point.convert(l),this._update(),this}_onMove(l){const d=this._map;if(!d)return;const _=this._pointerdownPos,v=this._positionDelta;if(_&&v){if(!this._isDragging){const w=this._clickTolerance||d._clickTolerance;if(l.point.dist(_)<w)return;this._isDragging=!0}this._pos=l.point.sub(v),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new p.Event("dragstart"))),this.fire(new p.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new p.Event("dragend")),this._state="inactive"}_addDragHandler(l){const d=this._map,_=this._pos;d&&_&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(_),this._pointerdownPos=l.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const d=this._map;return d&&(l?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Zl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},la=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pd(f=new p.Point(0,0),l="bottom"){if("number"==typeof f){const d=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(l){case"top":return new p.Point(0,f);case"top-left":return new p.Point(d,d);case"top-right":return new p.Point(-d,d);case"bottom":return new p.Point(0,-f);case"bottom-left":return new p.Point(d,-d);case"bottom-right":return new p.Point(-d,-d);case"left":return new p.Point(f,0);case"right":return new p.Point(-f,0)}return new p.Point(0,0)}return f instanceof p.Point||Array.isArray(f)?p.Point.convert(f):p.Point.convert(f[l]||[0,0])}class Mu{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const d=p.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,d,_){this._start=this.getValue(d),this._end=l,this._startTime=d,this._endTime=d+_}}const Mf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},sm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Of={showCompass:!0,showZoom:!0,visualizePitch:!1};class pr{constructor(l,d,_=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Hh({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,_&&(this.mousePitch=new bu({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),p.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),Rl()}move(l,d){const _=this.map,v=this.mouseRotate.mousemoveWindow(l,d),w=v&&v.bearingDelta;if(w&&_.setBearing(_.getBearing()+w),this.mousePitch){const T=this.mousePitch.mousemoveWindow(l,d),D=T&&T.pitchDelta;D&&_.setPitch(_.getPitch()+D)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){as(),p.window.removeEventListener("mousemove",this.mousemove),p.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(p.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),ko(this.element,l)),p.window.addEventListener("mousemove",this.mousemove),p.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,ko(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){1!==l.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ks(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){1!==l.targetTouches.length?this.reset():(this._lastPos=Ks(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){0===l.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Fs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ed={maxWidth:100,unit:"metric"},fl={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Rr={version:p.version,supported:xs,setRTLTextPlugin:p.setRTLTextPlugin,getRTLTextPluginStatus:p.getRTLTextPluginStatus,Map:class extends Dd{constructor(f){if(p.LivePerformanceUtils.mark(p.PerformanceMarkers.create),null!=(f=p.extend({},sm,f)).minZoom&&null!=f.maxZoom&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=f.minPitch&&null!=f.maxPitch&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=f.minPitch&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=f.maxPitch&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&p.isSafariWithAntialiasingBug(p.window)&&(f.antialias=!1,p.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new vu(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._useWebGL2=f.useWebGL2,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new Wt,this._domRenderTaskQueue=new Wt,this._controls=[],this._markers=[],this._popups=[],this._mapId=p.uniqueId(),this._locale=p.extend({},Mf,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Mu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new p.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,"string"==typeof f.container){if(this._container=p.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof p.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&p.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),p.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==p.window&&(p.window.addEventListener("online",this._onWindowOnline,!1),p.window.addEventListener("resize",this._onWindowResize,!1),p.window.addEventListener("orientationchange",this._onWindowResize,!1),p.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Ns(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new mf("string"==typeof f.hash&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,p.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new Oe({customAttribution:f.customAttribution})),this._logoControl=new Nn,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update("style"===l.dataType),this.fire(new p.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new p.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(f,l){if(void 0===l&&(l=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=f.onAdd(this);this._controls.push(f);const _=this._controlPositions[l];return-1!==l.indexOf("bottom")?_.insertBefore(d,_.firstChild):_.appendChild(d),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(f);return l>-1&&this._controls.splice(l,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new p.Event("movestart",f)).fire(new p.Event("move",f)),this.fire(new p.Event("resize",f)),l&&this.fire(new p.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(p.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return"auto"===f?p.window.navigator.language:Array.isArray(f)?0===f.length?void 0:f.map(l=>"auto"===l?p.window.navigator.language:l):f}setLanguage(f){const l=this._parseLanguage(f);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(f){return this._lazyInitEmptyStyle(),f?"string"==typeof f&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const f=this.transform,l=f.projection.name;let d;"globe"===l&&f.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),d=!0):"mercator"===l&&f.zoom<p.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,l){return this._updateProjection(f||l||{name:"mercator"})}_updateProjection(f){let l;if(l="globe"===f.name&&this.transform.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const d in this.style._sourceCaches)this.style._sourceCaches[d].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(p.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(p.Point.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,l,d){if("mouseenter"===f||"mouseover"===f){let _=!1;const v=T=>{const D=l.filter(N=>this.getLayer(N)),S=D.length?this.queryRenderedFeatures(T.point,{layers:D}):[];S.length?_||(_=!0,d.call(this,new mo(f,this,T.originalEvent,{features:S}))):_=!1},w=()=>{_=!1};return{layers:new Set(l),listener:d,delegates:{mousemove:v,mouseout:w}}}if("mouseleave"===f||"mouseout"===f){let _=!1;const v=T=>{const D=l.filter(S=>this.getLayer(S));(D.length?this.queryRenderedFeatures(T.point,{layers:D}):[]).length?_=!0:_&&(_=!1,d.call(this,new mo(f,this,T.originalEvent)))},w=T=>{_&&(_=!1,d.call(this,new mo(f,this,T.originalEvent)))};return{layers:new Set(l),listener:d,delegates:{mousemove:v,mouseout:w}}}{const _=v=>{const w=l.filter(D=>this.getLayer(D)),T=w.length?this.queryRenderedFeatures(v.point,{layers:w}):[];T.length&&(v.features=T,d.call(this,v),delete v.features)};return{layers:new Set(l),listener:d,delegates:{[f]:_}}}}on(f,l,d){if(void 0===d)return super.on(f,l);Array.isArray(l)||(l=[l]);const _=this._createDelegatedListener(f,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(_);for(const v in _.delegates)this.on(v,_.delegates[v]);return this}once(f,l,d){if(void 0===d)return super.once(f,l);Array.isArray(l)||(l=[l]);const _=this._createDelegatedListener(f,l,d);for(const v in _.delegates)this.once(v,_.delegates[v]);return this}off(f,l,d){if(void 0===d)return super.off(f,l);l=new Set(Array.isArray(l)?l:[l]);const _=(w,T)=>{if(w.size!==T.size)return!1;for(const D of w)if(!T.has(D))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(w=>{for(let T=0;T<w.length;T++){const D=w[T];if(D.listener===d&&_(D.layers,l)){for(const S in D.delegates)this.off(S,D.delegates[S]);return w.splice(T,1),this}}})(v),this}queryRenderedFeatures(f,l){return this.style?(void 0!==l||void 0===f||f instanceof p.Point||Array.isArray(f)||(l=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(f,l){return this.style.querySourceFeatures(f,l)}isPointOnSurface(f){const{name:l}=this.transform.projection;return"globe"!==l&&"mercator"!==l&&p.warnOnce(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(p.Point.convert(f))}setStyle(f,l){return!1!==(l=p.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(f,l))}_getUIString(f){const l=this._locale[f];if(null==l)throw new Error(`Missing UI string '${f}'`);return l}_updateStyle(f,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new ta(this,l||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof f?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ta(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,l){if("string"==typeof f){const d=this._requestManager.normalizeStyleURL(f),_=this._requestManager.transformRequest(d,p.ResourceType.Style);p.getJSON(_,(v,w)=>{v?this.fire(new p.ErrorEvent(v)):w&&this._updateDiff(w,l)})}else"object"==typeof f&&this._updateDiff(f,l)}_updateDiff(f,l){try{this.style.setState(f)&&this._update(!0)}catch(d){p.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(f,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(p.warnOnce("There is no style added to the map."),!1)}addSource(f,l){return this._lazyInitEmptyStyle(),this.style.addSource(f,l),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const l in f){const d=f[l]._tiles;for(const _ in d){const v=d[_];if("loaded"!==v.state&&"errored"!==v.state)return!1}}return!0}addSourceType(f,l,d){this._lazyInitEmptyStyle(),this.style.addSourceType(f,l,d)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,l,{pixelRatio:d=1,sdf:_=!1,stretchX:v,stretchY:w,content:T}={}){if(this._lazyInitEmptyStyle(),l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap){const{width:D,height:S,data:N}=p.exported.getImageData(l);this.style.addImage(f,{data:new p.RGBAImage({width:D,height:S},N),pixelRatio:d,stretchX:v,stretchY:w,content:T,sdf:_,version:0})}else if(void 0===l.width||void 0===l.height)this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:S}=l,N=l;this.style.addImage(f,{data:new p.RGBAImage({width:D,height:S},new Uint8Array(N.data)),pixelRatio:d,stretchX:v,stretchY:w,content:T,sdf:_,version:0,userImage:N}),N.onAdd&&N.onAdd(this,f)}}updateImage(f,l){const d=this.style.getImage(f);if(!d)return void this.fire(new p.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap?p.exported.getImageData(l):l,{width:v,height:w}=_;void 0!==v&&void 0!==w?v===d.data.width&&w===d.data.height?(d.data.replace(_.data,!(l instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&l instanceof p.window.ImageBitmap)),this.style.updateImage(f,d)):this.fire(new p.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${w})\n                must be that same as the previous version of the image\n                (${d.data.width}, ${d.data.height})`))):this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new p.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,l){p.getImage(this._requestManager.transformRequest(f,p.ResourceType.Image),(d,_)=>{l(d,_ instanceof p.window.HTMLImageElement?p.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(f,l){return this._lazyInitEmptyStyle(),this.style.addLayer(f,l),this._update(!0)}moveLayer(f,l){return this.style.moveLayer(f,l),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,l,d){return this.style.setLayerZoomRange(f,l,d),this._update(!0)}setFilter(f,l,d={}){return this.style.setFilter(f,l,d),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,l,d,_={}){return this.style.setPaintProperty(f,l,d,_),this._update(!0)}getPaintProperty(f,l){return this.style.getPaintProperty(f,l)}setLayoutProperty(f,l,d,_={}){return this.style.setLayoutProperty(f,l,d,_),this._update(!0)}getLayoutProperty(f,l){return this.style.getLayoutProperty(f,l)}setLight(f,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(p.LngLat.convert(f),this.transform):0}setFeatureState(f,l){return this.style.setFeatureState(f,l),this._update()}removeFeatureState(f,l){return this.style.removeFeatureState(f,l),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let d,_,v,w=this._container;for(;w&&(!_||!v);){const T=p.window.getComputedStyle(w).transform;T&&"none"!==T&&(d=T.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&"0"!==d[0]&&"1"!==d[0]&&(_=d[0]),d[3]&&"0"!==d[3]&&"1"!==d[3]&&(v=d[3])),w=w.parentElement}this._containerWidth=_?Math.abs(f/_):f,this._containerHeight=v?Math.abs(l/v):l}_detectMissingCSS(){"rgb(250, 128, 114)"!==p.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&p.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=nn("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=nn("div","mapboxgl-canvas-container",f);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=nn("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=nn("div","mapboxgl-control-container",f),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{_[v]=nn("div",`mapboxgl-ctrl-${v}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,l){const d=p.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(f),this._canvas.height=d*Math.ceil(l),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${l}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const l=this._markers.indexOf(f);-1!==l&&this._markers.splice(l,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const l=this._popups.indexOf(f);-1!==l&&this._popups.splice(l,1)}_setupPainter(){const f=p.extend({},xs.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",f),d=l||this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);d?(this._useWebGL2&&!l&&p.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),p.storeAuthState(d,!0),this.painter=new Is(d,this.transform,!!l),this.on("data",_=>{"source"===_.dataType&&this.painter.setTileLoadedFlag(!0)}),p.exported$1.testSupport(d)):this.fire(new p.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new p.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new p.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let l;const d=this.painter.context.extTimerQuery,_=p.exported.now();if(this.listens("gpu-timing-frame")&&(l=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],p.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],p.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const D=this.transform.zoom,S=this.transform.pitch,N=p.exported.now(),R=new p.EvaluationParameters(D,{now:N,fadeDuration:v,pitch:S,transition:this.style.getTransition()});this.style.update(R)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new p.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new p.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const D=p.exported.now()-_;d.endQueryEXT(d.TIME_ELAPSED_EXT,l),setTimeout(()=>{const S=d.getQueryObjectEXT(l,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(l),this.fire(new p.Event("gpu-timing-frame",{cpuTime:D,gpuTime:S})),p.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:S}})},50)}if(this.listens("gpu-timing-layer")){const D=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(D);this.fire(new p.Event("gpu-timing-layer",{layerTimes:S}))},50)}if(this.listens("gpu-timing-deferred-render")){const D=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const S=this.painter.queryGpuTimeDeferredRender(D);this.fire(new p.Event("gpu-timing-deferred-render",{gpuTime:S}))},50)}const T=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(T||this._repaint)this.triggerRepaint();else{const D=!this.isMoving()&&this.loaded();if(D&&(w=this._updateAverageElevation(_,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),D&&(this.fire(new p.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const S=this._calculateSpeedIndex();this.fire(new p.Event("speedindexcompleted",{speedIndex:S})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||T||(this._fullyLoaded=!0,p.LivePerformanceUtils.mark(p.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&p.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const l of this._markers)f&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!f||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(f,l=!1){const d=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&d(0);if((l||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const _=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const T=Math.abs(_-v);if(T>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(v),d(v);this._averageElevation.easeTo(v,f,300)}else if(T>1e-4)return this._averageElevation.jumpTo(v),d(v)}return!!this._averageElevation.isEasing(f)&&d(this._averageElevation.getValue(f))}_authenticate(){p.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===p.AUTH_ERR_MSG||401===f.status)){const l=this.painter.context.gl;p.storeAuthState(l,!1),this._logoControl instanceof Nn&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new p.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),p.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const d=this.painter.context.gl,_=d.createFramebuffer();function v(w){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,w,0);const T=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,T),T}return d.bindFramebuffer(d.FRAMEBUFFER,_),this._canvasPixelComparison(v(f),l.canvasCopies.map(v),l.timeStamps)}_canvasPixelComparison(f,l,d){let _=d[1]-d[0];const v=f.length/4;for(let w=0;w<l.length;w++){const T=l[w];let D=0;for(let S=0;S<T.length;S+=4)T[S]===f[S]&&T[S+1]===f[S+1]&&T[S+2]===f[S+2]&&T[S+3]===f[S+3]&&(D+=1);_+=(d[w+2]-d[w+1])*(1-D/v)}return _}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==p.window&&(p.window.removeEventListener("resize",this._onWindowResize,!1),p.window.removeEventListener("orientationchange",this._onWindowResize,!1),p.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.removeEventListener("online",this._onWindowOnline,!1),p.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),p.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new p.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=p.exported.frame(l=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(l)}))}_preloadTiles(f){const l=this.style?Object.values(this.style._sourceCaches):[];return p.asyncAll(l,(d,_)=>d._preloadTiles(f,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){"hidden"===p.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,l){p.setCacheLimits(f,l)}get version(){return p.version}},NavigationControl:class{constructor(f){this.options=p.extend({},Of,f),this._container=nn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(p.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),nn("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),nn("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(p.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:l}):d.resetNorth({},{originalEvent:l}))}),this._compassIcon=nn("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const l=f.getZoom(),d=l===f.getMaxZoom(),_=l===f.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pr(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,l){const d=nn("button",f,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(f,l){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${l}`);f.setAttribute("aria-label",d),f.firstElementChild&&f.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends p.Evented{constructor(f){super(),this.options=p.extend({geolocation:p.window.navigator.geolocation},Fs,f),p.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=xu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=nn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const l=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,f(d)};void 0!==this._supportsGeolocation?f(this._supportsGeolocation):void 0!==p.window.navigator.permissions?p.window.navigator.permissions.query({name:"geolocation"}).then(d=>l("denied"!==d.state)).catch(()=>l()):l()}_isOutOfMapMaxBounds(f){const l=this._map.getMaxBounds(),d=f.coords;return!!l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new p.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(f),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("geolocate",f)),this._finish()}}_updateCamera(f){const l=new p.LngLat(f.coords.longitude,f.coords.latitude),d=f.coords.accuracy,_=this._map.getBearing(),v=p.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),v,{geolocateSource:!0})}_updateMarker(f){if(f){const l=new p.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,l=p.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,d=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(1===f.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===f.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=nn("button","mapboxgl-ctrl-geolocate",this._container),nn("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===f){p.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=nn("div","mapboxgl-user-location"),this._dotElement.appendChild(nn("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(nn("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new wt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=nn("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||"ACTIVE_LOCK"!==this._watchState||l.originalEvent&&"resize"===l.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new p.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:!0===f.absolute&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return p.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new p.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new p.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new p.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{p.window.addEventListener("ondeviceorientationabsolute"in p.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==p.window.DeviceMotionEvent&&"function"==typeof p.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(l=>{"granted"===l&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),p.window.removeEventListener("deviceorientation",this._onDeviceOrientation),p.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Oe,ScaleControl:class{constructor(f){this.options=p.extend({},Ed,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),p.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,l=this._map,d=l._containerHeight/2,_=l._containerWidth/2-f/2,v=l.unproject([_,d]),w=l.unproject([_+f,d]),T=v.distanceTo(w);if("imperial"===this.options.unit){const D=3.2808*T;D>5280?this._setScale(f,D/5280,"mile"):this._setScale(f,D,"foot")}else"nautical"===this.options.unit?this._setScale(f,T/1852,"nautical-mile"):T>=1e3?this._setScale(f,T/1e3,"kilometer"):this._setScale(f,T,"meter")}_setScale(f,l,d){this._map._requestDomTask(()=>{const _=function(w){const T=Math.pow(10,`${Math.floor(w)}`.length-1);let D=w/T;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(S){const N=Math.pow(10,Math.ceil(-Math.log(S)/Math.LN10));return Math.round(S*N)/N}(D),T*D}(l),v=_/l;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==d?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(_):`${_}&nbsp;${fl[d]}`,this._container.style.width=f*v+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=nn("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof p.window.HTMLElement?this._container=f.container:p.warnOnce("Full screen control 'container' must be a DOM element.")),p.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in p.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in p.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=nn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",p.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,p.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!p.window.document.fullscreenEnabled&&!p.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=nn("button","mapboxgl-ctrl-fullscreen",this._controlContainer);nn("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),p.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(p.window.document.fullscreenElement||p.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?p.window.document.exitFullscreen?p.window.document.exitFullscreen():p.window.document.webkitCancelFullScreen&&p.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends p.Evented{constructor(f){super(),this.options=p.extend(Object.create(Zl),f),p.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new p.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new p.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=p.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(p.window.document.createTextNode(f))}setHTML(f){const l=p.window.document.createDocumentFragment(),d=p.window.document.createElement("body");let _;for(d.innerHTML=f;_=d.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=nn("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(f),this.options.closeButton){const d=this._closeButton=nn("button","mapboxgl-popup-close-button",l);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let l;return this._classList.delete(f)?l=!1:(this._classList.add(f),l=!0),this._updateClassList(),l}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const l=this._map,d=this._container,_=this._pos;if(!l||!d||!_)return"bottom";const v=d.offsetWidth,w=d.offsetHeight,T=_.x<v/2,D=_.x>l.transform.width-v/2;if(_.y+f<w)return T?"top-left":D?"top-right":"top";if(_.y>l.transform.height-w){if(T)return"bottom-left";if(D)return"bottom-right"}return T?"left":D?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),f.className=l.join(" ")}_update(f){const l=this._map,d=this._content;if(!l||!this._lngLat&&!this._trackPointer||!d)return;let _=this._container;if(_||(_=this._container=nn("div","mapboxgl-popup",l.getContainer()),this._tip=nn("div","mapboxgl-popup-tip",_),_.appendChild(d)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Gt(this._lngLat,this._pos,l.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:l.project(this._lngLat),w=Pd(this.options.offset),T=this._anchor=this._getAnchor(w.y),D=Pd(this.options.offset,T),S=v.add(D).round();l._requestDomTask(()=>{this._container&&T&&(this._container.style.transform=`${Ui[T]} translate(${S.x}px,${S.y}px)`)})}if(!this._marker&&l._showingGlobe()){const v=p.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(la);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:wt,Style:ta,LngLat:p.LngLat,LngLatBounds:p.LngLatBounds,Point:p.Point,MercatorCoordinate:p.MercatorCoordinate,FreeCameraOptions:fd,Evented:p.Evented,config:p.config,prewarm:function(){ki().acquire(Qs)},clearPrewarmedResources:function(){const f=lr;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(Qs),lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return p.config.ACCESS_TOKEN},set accessToken(f){p.config.ACCESS_TOKEN=f},get baseApiUrl(){return p.config.API_URL},set baseApiUrl(f){p.config.API_URL=f},get workerCount(){return Ti.workerCount},set workerCount(f){Ti.workerCount=f},get maxParallelImageRequests(){return p.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){p.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){p.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:p.exported.setNow,restoreNow:p.exported.restoreNow};return Rr}),Ln}()},321:()=>{"use strict";const su=":";class Hn extends Error{constructor(Ae){super(`No translation found for ${Ct(Ae)}.`),this.parsedMessage=Ae,this.type="MissingTranslationError"}}const Ho=function(Ne,...Ae){if(Ho.translate){const lt=Ho.translate(Ne,Ae);Ne=lt[0],Ae=lt[1]}let Je=Ms(Ne[0],Ne.raw[0]);for(let lt=1;lt<Ne.length;lt++)Je+=Ae[lt-1]+Ms(Ne[lt],Ne.raw[lt]);return Je},vc=":";function Ms(Ne,Ae){return Ae.charAt(0)===vc?Ne.substring(function Cs(Ne,Ae){for(let Je=1,lt=1;Je<Ne.length;Je++,lt++)if("\\"===Ae[lt])lt++;else if(Ne[Je]===su)return Je;throw new Error(`Unterminated $localize metadata block in "${Ae}".`)}(Ne,Ae)+1):Ne}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=Ho}},su=>{var kl=Ln=>su(su.s=Ln);kl(321),kl(936)}]);